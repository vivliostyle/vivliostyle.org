---
layout: page
title: チュートリアル②PDFの作成
lang: ja
---


{% capture content %}
## このチュートリアルの目標

- 雛形の作成方法がわかる
- PDF の作成方法がわかる
- プレビュー機能の使い方がわかる


## PDF の作成

このチュートリアルでは Vivliostyle CLI を使います。CLI で出版物の雛形を作り、雛形に含まれるサンプル原稿やサンプルスタイルを改造することで、自分だけの出版物を作っていきます。

### 雛形の作成（新しく出版物を作る時のみ）

出版物の雛形を作ります。ターミナルを開き、次のように入力し、Enter キーを押します。`mybook` の部分は自由に変えて構いません。

```
npm create book mybook
```

雛形を作るにあたって必要な情報を対話形式で入力していきます。まずタイトルを入力します。空欄にする場合は、Enter キーを押してデフォルト値のまま次に進みます。

```
$ npm create book mybook
◇  What's the title of your publication?
│  Mybook
```

Enter キーを押すと次の入力画面に進みます。著者名と言語も同様に入力・選択します。

```
$ npm create book mybook
◇  What's the title of your publication?
│  Mybook
◇  What's the author name?
│  山田太郎
◇  What's the language?
│  Japanese
```

Enter キーを押すと、プロジェクトのテンプレートを選択します。 Minimal は空のコンテンツのシンプルな雛形、 Basic はスターターコンテンツ付きの雛形です。このチュートリアルでは Minimal を選択しましょう。

```
$ npm create book mybook
◇  What's the title of your publication?
│  Mybook
◇  What's the author name?
│  山田太郎
◇  What's the language?
│  Japanese
◆  What's the project template?
│  ● Minimal  ○ Basic
```

テーマはキーで選択します。このチュートリアルでは、 @vivliostyle/theme-bunko を選択してみましょう。

```
$ npm create book mybook
◇  What's the title of your publication?
│  Mybook
◇  What's the author name?
│  山田太郎
◇  What's the language?
│  Japanese
◆  What's the project template?
│  ● Minimal  ○ Basic
◆  Which theme do you want to use?
│  @vivliostyle/theme-bunko
```

最後に、依存パッケージのインストールを行うかどうか確認します。" Yes "を選択すると自動でインストールされます。

```
$ npm create book mybook
◇  What's the title of your publication?
│  Mybook
◇  What's the author name?
│  山田太郎
◇  What's the language?
│  Japanese
◆  What's the project template?
│  ● Minimal  ○ Basic
◆  Which theme do you want to use?
│  @vivliostyle/theme-bunko
◆  Should we install dependencies? (You can install them later.)
│  ● Yes  ○ No
```

Enter キーを押すと、出版物の作成に必要なリソースのダウンロードが始まります（通常は数分以内に終わります）。以下の内容が表示されると完了です。

```
✔  Project scaffolded successfully.
```

指示のとおり、ターミナルで以下のコマンドを入力し、今自動で作られた作業用のディレクトリに移動しましょう。

```
cd mybook
```

ここまでの作業は新しく出版物を作成するときだけ行います。既存の原稿を修正するときには必要ありません。


### PDF の作成

続いて、原稿を書いて PDF を作成します。Minimal テンプレートでは、`mybook/manuscript.md` という空の原稿ファイルが作成されています。テキストエディタでこのファイルを開き、以下のような内容を書き込んでみましょう。

```
# はじめての本

<div class="author">著者名</div>

## 第一章

本文をここに書きます。
```

では、このサンプルから PDF を作成してみましょう。ターミナルで以下のコマンドを入力します。

```
npm run build
```

このコマンドを実行することで、Vivliostyle は以下の手順で PDF を作成します。

1. Markdown 形式で書かれたサンプル原稿を HTML に変換
2. vivliostyle.config.js という設定ファイルに従い、組版
3. package.json という設定ファイルに従い、PDF を作成

コマンドを実行すると、次のような表示が出ます。初回実行時はリソースのダウンロードが発生します（通常は数分以内に終わります）。

```
$ npm run build

> mybook@0.0.0 build
> vivliostyle build

ℹ Rendering browser (Chromium) is not installed yet. Downloading now...
✔ Successfully downloaded browser
✔ manuscript.md はじめての本
◡ Processing PDF
mybook.pdf has been created.
🎉 Built successfully.
```

mybook.pdf という名前の PDF が作成されました。早速ファイルを開いてみましょう。サンプル原稿に書かれた内容が PDF になっており、@vivliostyle/theme-bunko テーマが適用されていますね！

![作成された PDF](/assets/tutorials/ja/create-publications/build.png)


### 原稿の編集とプレビュー

では、サンプル原稿を編集してから PDF をもう一度作成してみましょう。テキストエディタで原稿を編集→ターミナルでコマンドを実行して PDF を作成……という流れを踏んでもよいのですが、原稿を編集するたびにコマンドを実行するのは面倒です。もっと効率的な本作りのために、Vivliostyle はプレビュー機能を用意しています。プレビュー機能を使うと、サンプル原稿の編集に合わせて PDF のプレビューを自動的に表示できます。

実際にやってみましょう。ターミナルで以下のコマンドを入力します。

```
npm run preview
```

ブラウザが起動し、原稿のプレビューが表示されます。

![プレビュー画面](/assets/tutorials/ja/create-publications/preview1.png)

プレビューを起動させたまま、原稿を編集し、保存します（タイトルと本文を変えてみました）。

```
# はじめての本（改訂版）

<div class="author">著者名</div>

## 第一章

プレビューを見ながら原稿を編集できます。
```

すると、サンプル原稿の編集に合わせて自動的にプレビュー画面が更新されます。

![サンプル原稿編集後のプレビュー画面](/assets/tutorials/ja/create-publications/preview2.png)


## まとめ

このチュートリアルを通して、サンプル原稿を編集し、PDF を作成できるようになりました。実際の執筆においては、以下の手順を踏むことになるでしょう。

1. 雛形の作成
  - ターミナルで `npm create book mybook` を実行
  - `mybook` の部分は自由に変更可能
1. プレビューの起動
  - ターミナルで `npm run preview` を実行
1. 原稿の編集
  - 原稿を編集すると、自動的にプレビュー画面が更新
1. PDF の作成
  - ターミナルで `npm run build` を実行

---

次のチュートリアルでは、原稿とテーマのカスタマイズを行います。

- 前：[チュートリアル①インストール](/ja/tutorials/install)
- 次：[チュートリアル③原稿とテーマのカスタマイズ](/ja/tutorials/customize)
- [チュートリアル一覧](/ja/tutorials)
{% endcapture %}


{% include page/tutorials.html
  title="チュートリアル②PDFの作成"
  lead="Vivliostyle を使って PDF 形式の出版物を作成してみましょう。"

  content=content
%}
