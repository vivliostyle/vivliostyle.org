/**
 * @vivliostyle/viewer v2.30.1
 * Vivliostyle Viewer - HTML+CSS typesetting and rich paged viewing with EPUB/Web publications support
 *
 * @author Vivliostyle Foundation
 * @license AGPL-3.0
 * @preserve
 */
!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(n){if("default"!==n&&!(n in t)){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}}))})),Object.freeze(t)}function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n,i,u={exports:{}};
/*!
	 * Knockout JavaScript library v3.5.1
	 * (c) The Knockout.js team - http://knockoutjs.com/
	 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
	 */n=u,i=u.exports,function(t){var e=this||(0,eval)("this"),u=e.document,r=e.navigator,o=e.jQuery,a=e.JSON;o||"undefined"==typeof jQuery||(o=jQuery),function(t){t(n.exports||i)}((function(n,i){function s(t,e){return(null===t||typeof t in m)&&t===e}function l(e,n){var i;return function(){i||(i=F.a.setTimeout((function(){i=t,e()}),n))}}function c(t,e){var n;return function(){clearTimeout(n),n=F.a.setTimeout(t,e)}}function h(t,e){e&&"change"!==e?"beforeChange"===e?this.pc(t):this.gb(t,e):this.qc(t)}function D(t,e){null!==e&&e.s&&e.s()}function d(t,e){var n=this.qd,i=n[w];i.ra||(this.Qb&&this.mb[e]?(n.uc(e,t,this.mb[e]),this.mb[e]=null,--this.Qb):i.I[e]||n.uc(e,t,i.J?{da:t}:n.$c(t)),t.Ja&&t.gd())}var f,p,g,E,C,v,F=void 0!==n?n:{};F.b=function(t,e){for(var n=t.split("."),i=F,u=0;u<n.length-1;u++)i=i[n[u]];i[n[n.length-1]]=e},F.L=function(t,e,n){t[e]=n},F.version="3.5.1",F.b("version",F.version),F.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},F.a=function(){function n(t,e){for(var n in t)c.call(t,n)&&e(n,t[n])}function i(t,e){if(e)for(var n in e)c.call(e,n)&&(t[n]=e[n]);return t}function s(t,e){return t.__proto__=e,t}function l(t,e,n,i){var u=t[e].match(C)||[];F.a.D(n.match(C),(function(t){F.a.Na(u,t,i)})),t[e]=u.join(" ")}var c=Object.prototype.hasOwnProperty,h={__proto__:[]}instanceof Array,D="function"==typeof Symbol,d={},f={};d[r&&/Firefox\/2/i.test(r.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],d.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),n(d,(function(t,e){if(e.length)for(var n=0,i=e.length;n<i;n++)f[e[n]]=t}));var p,g={propertychange:!0},E=u&&function(){for(var e=3,n=u.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return 4<e?e:t}(),C=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(t,e,n){for(var i=0,u=t.length;i<u;i++)e.call(n,t[i],i,t)},A:"function"==typeof Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e)}:function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Lb:function(e,n,i){for(var u=0,r=e.length;u<r;u++)if(n.call(i,e[u],u,e))return e[u];return t},Pa:function(t,e){var n=F.a.A(t,e);0<n?t.splice(n,1):0===n&&t.shift()},wc:function(t){var e=[];return t&&F.a.D(t,(function(t){0>F.a.A(e,t)&&e.push(t)})),e},Mb:function(t,e,n){var i=[];if(t)for(var u=0,r=t.length;u<r;u++)i.push(e.call(n,t[u],u));return i},jb:function(t,e,n){var i=[];if(t)for(var u=0,r=t.length;u<r;u++)e.call(n,t[u],u)&&i.push(t[u]);return i},Nb:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Na:function(t,e,n){var i=F.a.A(F.a.bc(t),e);0>i?n&&t.push(e):n||t.splice(i,1)},Ba:h,extend:i,setPrototypeOf:s,Ab:h?s:i,P:n,Ga:function(t,e,n){if(!t)return t;var i,u={};for(i in t)c.call(t,i)&&(u[i]=e.call(n,t[i],i,t));return u},Tb:function(t){for(;t.firstChild;)F.removeNode(t.firstChild)},Yb:function(t){for(var e=((t=F.a.la(t))[0]&&t[0].ownerDocument||u).createElement("div"),n=0,i=t.length;n<i;n++)e.appendChild(F.oa(t[n]));return e},Ca:function(t,e){for(var n=0,i=t.length,u=[];n<i;n++){var r=t[n].cloneNode(!0);u.push(e?F.oa(r):r)}return u},va:function(t,e){if(F.a.Tb(t),e)for(var n=0,i=e.length;n<i;n++)t.appendChild(e[n])},Xc:function(t,e){var n=t.nodeType?[t]:t;if(0<n.length){for(var i=n[0],u=i.parentNode,r=0,o=e.length;r<o;r++)u.insertBefore(e[r],i);for(r=0,o=n.length;r<o;r++)F.removeNode(n[r])}},Ua:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);for(;1<t.length&&t[t.length-1].parentNode!==e;)t.length--;if(1<t.length){var n=t[0],i=t[t.length-1];for(t.length=0;n!==i;)t.push(n),n=n.nextSibling;t.push(i)}}return t},Zc:function(t,e){7>E?t.setAttribute("selected",e):t.selected=e},Db:function(e){return null===e||e===t?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(t,e){return t=t||"",!(e.length>t.length)&&t.substring(0,e.length)===e},vd:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(1!==t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},Sb:function(t){return F.a.vd(t,t.ownerDocument.documentElement)},kd:function(t){return!!F.a.Lb(t,F.a.Sb)},R:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},Ac:function(t){return F.onError?function(){try{return t.apply(this,arguments)}catch(t){throw F.onError&&F.onError(t),t}}:t},setTimeout:function(t,e){return setTimeout(F.a.Ac(t),e)},Gc:function(t){setTimeout((function(){throw F.onError&&F.onError(t),t}),0)},B:function(t,e,n){var i=F.a.Ac(n);if(n=g[e],F.options.useOnlyNativeEvents||n||!o)if(n||"function"!=typeof t.addEventListener){if(void 0===t.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var u=function(e){i.call(t,e)},r="on"+e;t.attachEvent(r,u),F.a.K.za(t,(function(){t.detachEvent(r,u)}))}else t.addEventListener(e,i,!1);else p||(p="function"==typeof o(t).on?"on":"bind"),o(t)[p](e,i)},Fb:function(t,n){if(!t||!t.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var i;if(i=!("input"!==F.a.R(t)||!t.type||"click"!=n.toLowerCase()||"checkbox"!=(i=t.type)&&"radio"!=i),F.options.useOnlyNativeEvents||!o||i)if("function"==typeof u.createEvent){if("function"!=typeof t.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(i=u.createEvent(f[n]||"HTMLEvents")).initEvent(n,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(i)}else if(i&&t.click)t.click();else{if(void 0===t.fireEvent)throw Error("Browser doesn't support triggering events");t.fireEvent("on"+n)}else o(t).trigger(n)},f:function(t){return F.O(t)?t():t},bc:function(t){return F.O(t)?t.v():t},Eb:function(t,e,n){var i;e&&("object"==typeof t.classList?(i=t.classList[n?"add":"remove"],F.a.D(e.match(C),(function(e){i.call(t.classList,e)}))):"string"==typeof t.className.baseVal?l(t.className,"baseVal",e,n):l(t,"className",e,n))},Bb:function(e,n){var i=F.a.f(n);null!==i&&i!==t||(i="");var u=F.h.firstChild(e);!u||3!=u.nodeType||F.h.nextSibling(u)?F.h.va(e,[e.ownerDocument.createTextNode(i)]):u.data=i,F.a.Ad(e)},Yc:function(t,e){if(t.name=e,7>=E)try{var n=t.name.replace(/[&<>'"]/g,(function(t){return"&#"+t.charCodeAt(0)+";"}));t.mergeAttributes(u.createElement("<input name='"+n+"'/>"),!1)}catch(t){}},Ad:function(t){9<=E&&(t=1==t.nodeType?t:t.parentNode).style&&(t.style.zoom=t.style.zoom)},wd:function(t){if(E){var e=t.style.width;t.style.width=0,t.style.width=e}},Pd:function(t,e){t=F.a.f(t),e=F.a.f(e);for(var n=[],i=t;i<=e;i++)n.push(i);return n},la:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Da:function(t){return D?Symbol(t):t},Zd:6===E,$d:7===E,W:E,Lc:function(t,e){for(var n=F.a.la(t.getElementsByTagName("input")).concat(F.a.la(t.getElementsByTagName("textarea"))),i="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},u=[],r=n.length-1;0<=r;r--)i(n[r])&&u.push(n[r]);return u},Nd:function(t){return"string"==typeof t&&(t=F.a.Db(t))?a&&a.parse?a.parse(t):new Function("return "+t)():null},hc:function(t,e,n){if(!a||!a.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return a.stringify(F.a.f(t),e,n)},Od:function(t,e,i){var r=(i=i||{}).params||{},o=i.includeFields||this.Jc,a=t;if("object"==typeof t&&"form"===F.a.R(t)){a=t.action;for(var s=o.length-1;0<=s;s--)for(var l=F.a.Lc(t,o[s]),c=l.length-1;0<=c;c--)r[l[c].name]=l[c].value}e=F.a.f(e);var h=u.createElement("form");for(var D in h.style.display="none",h.action=a,h.method="post",e)(t=u.createElement("input")).type="hidden",t.name=D,t.value=F.a.hc(F.a.f(e[D])),h.appendChild(t);n(r,(function(t,e){var n=u.createElement("input");n.type="hidden",n.name=t,n.value=e,h.appendChild(n)})),u.body.appendChild(h),i.submitter?i.submitter(h):h.submit(),setTimeout((function(){h.parentNode.removeChild(h)}),0)}}}(),F.b("utils",F.a),F.b("utils.arrayForEach",F.a.D),F.b("utils.arrayFirst",F.a.Lb),F.b("utils.arrayFilter",F.a.jb),F.b("utils.arrayGetDistinctValues",F.a.wc),F.b("utils.arrayIndexOf",F.a.A),F.b("utils.arrayMap",F.a.Mb),F.b("utils.arrayPushAll",F.a.Nb),F.b("utils.arrayRemoveItem",F.a.Pa),F.b("utils.cloneNodes",F.a.Ca),F.b("utils.createSymbolOrString",F.a.Da),F.b("utils.extend",F.a.extend),F.b("utils.fieldsIncludedWithJsonPost",F.a.Jc),F.b("utils.getFormFields",F.a.Lc),F.b("utils.objectMap",F.a.Ga),F.b("utils.peekObservable",F.a.bc),F.b("utils.postJson",F.a.Od),F.b("utils.parseJson",F.a.Nd),F.b("utils.registerEventHandler",F.a.B),F.b("utils.stringifyJson",F.a.hc),F.b("utils.range",F.a.Pd),F.b("utils.toggleDomNodeCssClass",F.a.Eb),F.b("utils.triggerEvent",F.a.Fb),F.b("utils.unwrapObservable",F.a.f),F.b("utils.objectForEach",F.a.P),F.b("utils.addOrRemoveItem",F.a.Na),F.b("utils.setTextContent",F.a.Bb),F.b("unwrap",F.a.f),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(1===arguments.length)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),e.apply(t,i)}}),F.a.g=new function(){var e,n,i=0,u="__ko__"+(new Date).getTime(),r={};return F.a.W?(e=function(e,n){var o=e[u];if(!o||"null"===o||!r[o]){if(!n)return t;o=e[u]="ko"+i++,r[o]={}}return r[o]},n=function(t){var e=t[u];return!!e&&(delete r[e],t[u]=null,!0)}):(e=function(t,e){var n=t[u];return!n&&e&&(n=t[u]={}),n},n=function(t){return!!t[u]&&(delete t[u],!0)}),{get:function(t,n){var i=e(t,!1);return i&&i[n]},set:function(n,i,u){(n=e(n,u!==t))&&(n[i]=u)},Ub:function(t,n,i){return(t=e(t,!0))[n]||(t[n]=i)},clear:n,Z:function(){return i+++u}}},F.b("utils.domData",F.a.g),F.b("utils.domData.clear",F.a.g.clear),F.a.K=new function(){function e(e,n){var i=F.a.g.get(e,u);return i===t&&n&&(i=[],F.a.g.set(e,u,i)),i}function n(t){if(n=e(t,!1))for(var n=n.slice(0),u=0;u<n.length;u++)n[u](t);F.a.g.clear(t),F.a.K.cleanExternalData(t),a[t.nodeType]&&i(t.childNodes,!0)}function i(t,e){for(var i,u=[],r=0;r<t.length;r++)if((!e||8===t[r].nodeType)&&(n(u[u.length]=i=t[r]),t[r]!==i))for(;r--&&-1==F.a.A(u,t[r]););}var u=F.a.g.Z(),r={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{za:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},yb:function(n,i){var r=e(n,!1);r&&(F.a.Pa(r,i),0==r.length&&F.a.g.set(n,u,t))},oa:function(t){return F.u.G((function(){r[t.nodeType]&&(n(t),a[t.nodeType]&&i(t.getElementsByTagName("*")))})),t},removeNode:function(t){F.oa(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){o&&"function"==typeof o.cleanData&&o.cleanData([t])}}},F.oa=F.a.K.oa,F.removeNode=F.a.K.removeNode,F.b("cleanNode",F.oa),F.b("removeNode",F.removeNode),F.b("utils.domNodeDisposal",F.a.K),F.b("utils.domNodeDisposal.addDisposeCallback",F.a.K.za),F.b("utils.domNodeDisposal.removeDisposeCallback",F.a.K.yb),f=[0,"",""],C={thead:p=[1,"<table>","</table>"],tbody:p,tfoot:p,tr:[2,"<table><tbody>","</tbody></table>"],td:g=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:g,option:E=[1,"<select multiple='multiple'>","</select>"],optgroup:E},v=8>=F.a.W,F.a.ua=function(t,n){var i;if(o){if(o.parseHTML)i=o.parseHTML(t,n)||[];else if((i=o.clean([t],n))&&i[0]){for(var r=i[0];r.parentNode&&11!==r.parentNode.nodeType;)r=r.parentNode;r.parentNode&&r.parentNode.removeChild(r)}}else{(i=n)||(i=u),r=i.parentWindow||i.defaultView||e;var a,s=F.a.Db(t).toLowerCase(),l=i.createElement("div");for(a=(s=s.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&C[s[1]]||f,s=a[0],a="ignored<div>"+a[1]+t+a[2]+"</div>","function"==typeof r.innerShiv?l.appendChild(r.innerShiv(a)):(v&&i.body.appendChild(l),l.innerHTML=a,v&&l.parentNode.removeChild(l));s--;)l=l.lastChild;i=F.a.la(l.lastChild.childNodes)}return i},F.a.Md=function(t,e){var n=F.a.ua(t,e);return n.length&&n[0].parentElement||F.a.Yb(n)},F.a.fc=function(e,n){if(F.a.Tb(e),null!==(n=F.a.f(n))&&n!==t)if("string"!=typeof n&&(n=n.toString()),o)o(e).html(n);else for(var i=F.a.ua(n,e.ownerDocument),u=0;u<i.length;u++)e.appendChild(i[u])},F.b("utils.parseHtmlFragment",F.a.ua),F.b("utils.setHtml",F.a.fc),F.aa=function(){function e(t,n){if(t)if(8==t.nodeType)null!=(i=F.aa.Uc(t.nodeValue))&&n.push({ud:t,Kd:i});else if(1==t.nodeType)for(var i=0,u=t.childNodes,r=u.length;i<r;i++)e(u[i],n)}var n={};return{Xb:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var e=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[e]=t,"\x3c!--[ko_memo:"+e+"]--\x3e"},bd:function(e,i){var u=n[e];if(u===t)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return u.apply(null,i||[]),!0}finally{delete n[e]}},cd:function(t,n){var i=[];e(t,i);for(var u=0,r=i.length;u<r;u++){var o=i[u].ud,a=[o];n&&F.a.Nb(a,n),F.aa.bd(i[u].Kd,a),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},Uc:function(t){return(t=t.match(/^\[ko_memo\:(.*?)\]$/))?t[1]:null}}}(),F.b("memoization",F.aa),F.b("memoization.memoize",F.aa.Xb),F.b("memoization.unmemoize",F.aa.bd),F.b("memoization.parseMemoText",F.aa.Uc),F.b("memoization.unmemoizeDomNodeAndDescendants",F.aa.cd),F.na=function(){function t(){if(o)for(var t,e=o,n=0;s<o;)if(t=r[s++]){if(s>e){if(5e3<=++n){s=o,F.a.Gc(Error("'Too much recursion' after processing "+n+" task groups."));break}e=o}try{t()}catch(t){F.a.Gc(t)}}}function n(){t(),s=o=r.length=0}var i,r=[],o=0,a=1,s=0;return i=e.MutationObserver?function(t){var e=u.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}(n):u&&"onreadystatechange"in u.createElement("script")?function(t){var e=u.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,u.documentElement.removeChild(e),e=null,t()},u.documentElement.appendChild(e)}:function(t){setTimeout(t,0)},{scheduler:i,zb:function(t){return o||F.na.scheduler(n),r[o++]=t,a++},cancel:function(t){(t-=a-o)>=s&&t<o&&(r[t]=null)},resetForTesting:function(){var t=o-s;return s=o=r.length=0,t},Sd:t}}(),F.b("tasks",F.na),F.b("tasks.schedule",F.na.zb),F.b("tasks.runEarly",F.na.Sd),F.Ta={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return F.$({read:t,write:function(i){clearTimeout(n),n=F.a.setTimeout((function(){t(i)}),e)}})},rateLimit:function(t,e){var n,i,u;"number"==typeof e?n=e:(n=e.timeout,i=e.method),t.Hb=!1,u="function"==typeof i?i:"notifyWhenChangesStop"==i?c:l,t.ub((function(t){return u(t,n,e)}))},deferred:function(e,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e.Hb||(e.Hb=!0,e.ub((function(n){var i,u=!1;return function(){if(!u){F.na.cancel(i),i=F.na.zb(n);try{u=!0,e.notifySubscribers(t,"dirty")}finally{u=!1}}}})))},notify:function(t,e){t.equalityComparer="always"==e?null:s}};var m={undefined:1,boolean:1,number:1,string:1};F.b("extenders",F.Ta),F.ic=function(t,e,n){this.da=t,this.lc=e,this.mc=n,this.Ib=!1,this.fb=this.Jb=null,F.L(this,"dispose",this.s),F.L(this,"disposeWhenNodeIsRemoved",this.l)},F.ic.prototype.s=function(){this.Ib||(this.fb&&F.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},F.ic.prototype.l=function(t){this.Jb=t,F.a.K.za(t,this.fb=this.s.bind(this))},F.T=function(){F.a.Ab(this,A),A.qb(this)};var A={qb:function(t){t.U={change:[]},t.sc=1},subscribe:function(t,e,n){var i=this;n=n||"change";var u=new F.ic(i,e?t.bind(e):t,(function(){F.a.Pa(i.U[n],u),i.hb&&i.hb(n)}));return i.Qa&&i.Qa(n),i.U[n]||(i.U[n]=[]),i.U[n].push(u),u},notifySubscribers:function(t,e){if("change"===(e=e||"change")&&this.Gb(),this.Wa(e)){var n="change"===e&&this.ed||this.U[e].slice(0);try{F.u.xc();for(var i,u=0;i=n[u];++u)i.Ib||i.lc(t)}finally{F.u.end()}}},ob:function(){return this.sc},Dd:function(t){return this.ob()!==t},Gb:function(){++this.sc},ub:function(t){var e,n,i,u,r,o=this,a=F.O(o);o.gb||(o.gb=o.notifySubscribers,o.notifySubscribers=h);var s=t((function(){o.Ja=!1,a&&u===o&&(u=o.nc?o.nc():o());var t=n||r&&o.sb(i,u);r=n=e=!1,t&&o.gb(i=u)}));o.qc=function(t,n){n&&o.Ja||(r=!n),o.ed=o.U.change.slice(0),o.Ja=e=!0,u=t,s()},o.pc=function(t){e||(i=t,o.gb(t,"beforeChange"))},o.rc=function(){r=!0},o.gd=function(){o.sb(i,o.v(!0))&&(n=!0)}},Wa:function(t){return this.U[t]&&this.U[t].length},Bd:function(t){if(t)return this.U[t]&&this.U[t].length||0;var e=0;return F.a.P(this.U,(function(t,n){"dirty"!==t&&(e+=n.length)})),e},sb:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},toString:function(){return"[object Object]"},extend:function(t){var e=this;return t&&F.a.P(t,(function(t,n){var i=F.Ta[t];"function"==typeof i&&(e=i(e,n)||e)})),e}};F.L(A,"init",A.qb),F.L(A,"subscribe",A.subscribe),F.L(A,"extend",A.extend),F.L(A,"getSubscriptionsCount",A.Bd),F.a.Ba&&F.a.setPrototypeOf(A,Function.prototype),F.T.fn=A,F.Qc=function(t){return null!=t&&"function"==typeof t.subscribe&&"function"==typeof t.notifySubscribers},F.b("subscribable",F.T),F.b("isSubscribable",F.Qc),F.S=F.u=function(){function t(t){i.push(n),n=t}function e(){n=i.pop()}var n,i=[],u=0;return{xc:t,end:e,cc:function(t){if(n){if(!F.Qc(t))throw Error("Only subscribable things can act as dependencies");n.od.call(n.pd,t,t.fd||(t.fd=++u))}},G:function(n,i,u){try{return t(),n.apply(i,u||[])}finally{e()}},qa:function(){if(n)return n.o.qa()},Va:function(){if(n)return n.o.Va()},Ya:function(){if(n)return n.Ya},o:function(){if(n)return n.o}}}(),F.b("computedContext",F.S),F.b("computedContext.getDependenciesCount",F.S.qa),F.b("computedContext.getDependencies",F.S.Va),F.b("computedContext.isInitial",F.S.Ya),F.b("computedContext.registerDependency",F.S.cc),F.b("ignoreDependencies",F.Yd=F.u.G);var b=F.a.Da("_latestValue");F.ta=function(t){function e(){return 0<arguments.length?(e.sb(e[b],arguments[0])&&(e.ya(),e[b]=arguments[0],e.xa()),this):(F.u.cc(e),e[b])}return e[b]=t,F.a.Ba||F.a.extend(e,F.T.fn),F.T.fn.qb(e),F.a.Ab(e,y),F.options.deferUpdates&&F.Ta.deferred(e,!0),e};var y={equalityComparer:s,v:function(){return this[b]},xa:function(){this.notifySubscribers(this[b],"spectate"),this.notifySubscribers(this[b])},ya:function(){this.notifySubscribers(this[b],"beforeChange")}};F.a.Ba&&F.a.setPrototypeOf(y,F.T.fn);var B=F.ta.Ma="__ko_proto__";y[B]=F.ta,F.O=function(t){if((t="function"==typeof t&&t[B])&&t!==y[B]&&t!==F.o.fn[B])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!t},F.Za=function(t){return"function"==typeof t&&(t[B]===y[B]||t[B]===F.o.fn[B]&&t.Nc)},F.b("observable",F.ta),F.b("isObservable",F.O),F.b("isWriteableObservable",F.Za),F.b("isWritableObservable",F.Za),F.b("observable.fn",y),F.L(y,"peek",y.v),F.L(y,"valueHasMutated",y.xa),F.L(y,"valueWillMutate",y.ya),F.Ha=function(t){if("object"!=typeof(t=t||[])||!("length"in t))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return t=F.ta(t),F.a.Ab(t,F.Ha.fn),t.extend({trackArrayChanges:!0})},F.Ha.fn={remove:function(t){for(var e=this.v(),n=[],i="function"!=typeof t||F.O(t)?function(e){return e===t}:t,u=0;u<e.length;u++){var r=e[u];if(i(r)){if(0===n.length&&this.ya(),e[u]!==r)throw Error("Array modified during remove; cannot remove item");n.push(r),e.splice(u,1),u--}}return n.length&&this.xa(),n},removeAll:function(e){if(e===t){var n=this.v(),i=n.slice(0);return this.ya(),n.splice(0,n.length),this.xa(),i}return e?this.remove((function(t){return 0<=F.a.A(e,t)})):[]},destroy:function(t){var e=this.v(),n="function"!=typeof t||F.O(t)?function(e){return e===t}:t;this.ya();for(var i=e.length-1;0<=i;i--){var u=e[i];n(u)&&(u._destroy=!0)}this.xa()},destroyAll:function(e){return e===t?this.destroy((function(){return!0})):e?this.destroy((function(t){return 0<=F.a.A(e,t)})):[]},indexOf:function(t){var e=this();return F.a.A(e,t)},replace:function(t,e){var n=this.indexOf(t);0<=n&&(this.ya(),this.v()[n]=e,this.xa())},sorted:function(t){var e=this().slice(0);return t?e.sort(t):e.sort()},reversed:function(){return this().slice(0).reverse()}},F.a.Ba&&F.a.setPrototypeOf(F.Ha.fn,F.ta.fn),F.a.D("pop push reverse shift sort splice unshift".split(" "),(function(t){F.Ha.fn[t]=function(){var e=this.v();this.ya(),this.zc(e,t,arguments);var n=e[t].apply(e,arguments);return this.xa(),n===e?this:n}})),F.a.D(["slice"],(function(t){F.Ha.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}})),F.Pc=function(t){return F.O(t)&&"function"==typeof t.remove&&"function"==typeof t.push},F.b("observableArray",F.Ha),F.b("isObservableArray",F.Pc),F.Ta.trackArrayChanges=function(e,n){function i(){function t(){if(l){var t,n=[].concat(e.v()||[]);e.Wa("arrayChange")&&((!s||1<l)&&(s=F.a.Pb(o,n,e.Ob)),t=s),o=n,s=null,l=0,t&&t.length&&e.notifySubscribers(t,"arrayChange")}}a?t():(a=!0,r=e.subscribe((function(){++l}),null,"spectate"),o=[].concat(e.v()||[]),s=null,u=e.subscribe(t))}if(e.Ob={},n&&"object"==typeof n&&F.a.extend(e.Ob,n),e.Ob.sparse=!0,!e.zc){var u,r,o,a=!1,s=null,l=0,c=e.Qa,h=e.hb;e.Qa=function(t){c&&c.call(e,t),"arrayChange"===t&&i()},e.hb=function(n){h&&h.call(e,n),"arrayChange"!==n||e.Wa("arrayChange")||(u&&u.s(),r&&r.s(),r=u=null,a=!1,o=t)},e.zc=function(t,e,n){function i(t,e,n){return u[u.length]={status:t,value:e,index:n}}if(a&&!l){var u=[],r=t.length,o=n.length,c=0;switch(e){case"push":c=r;case"unshift":for(e=0;e<o;e++)i("added",n[e],c+e);break;case"pop":c=r-1;case"shift":r&&i("deleted",t[c],c);break;case"splice":e=Math.min(Math.max(0,0>n[0]?r+n[0]:n[0]),r),r=1===o?r:Math.min(e+(n[1]||0),r),o=e+o-2,c=Math.max(r,o);for(var h=[],D=[],d=2;e<c;++e,++d)e<r&&D.push(i("deleted",t[e],e)),e<o&&h.push(i("added",n[d],e));F.a.Kc(D,h);break;default:return}s=u}}}};var w=F.a.Da("_state");F.o=F.$=function(e,n,i){function u(){if(0<arguments.length){if("function"!=typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(o.nb,arguments),this}return o.ra||F.u.cc(u),(o.ka||o.J&&u.Xa())&&u.ha(),o.X}if("object"==typeof e?i=e:(i=i||{},e&&(i.read=e)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var r=i.write,o={X:t,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:i.read,nb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Rb:null,I:{},V:0,Ic:null};return u[w]=o,u.Nc="function"==typeof r,F.a.Ba||F.a.extend(u,F.T.fn),F.T.fn.qb(u),F.a.Ab(u,S),i.pure?(o.wb=!0,o.J=!0,F.a.extend(u,N)):i.deferEvaluation&&F.a.extend(u,x),F.options.deferUpdates&&F.Ta.deferred(u,!0),o.l&&(o.jc=!0,o.l.nodeType||(o.l=null)),o.J||i.deferEvaluation||u.ha(),o.l&&u.ja()&&F.a.K.za(o.l,o.Rb=function(){u.s()}),u};var S={equalityComparer:s,qa:function(){return this[w].V},Va:function(){var t=[];return F.a.P(this[w].I,(function(e,n){t[n.Ka]=n.da})),t},Vb:function(t){if(!this[w].V)return!1;var e=this.Va();return-1!==F.a.A(e,t)||!!F.a.Lb(e,(function(e){return e.Vb&&e.Vb(t)}))},uc:function(t,e,n){if(this[w].wb&&e===this)throw Error("A 'pure' computed must not be called recursively");this[w].I[t]=n,n.Ka=this[w].V++,n.La=e.ob()},Xa:function(){var t,e,n=this[w].I;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&(e=n[t],this.Ia&&e.da.Ja||e.da.Dd(e.La)))return!0},Jd:function(){this.Ia&&!this[w].rb&&this.Ia(!1)},ja:function(){var t=this[w];return t.ka||0<t.V},Rd:function(){this.Ja?this[w].ka&&(this[w].sa=!0):this.Hc()},$c:function(t){if(t.Hb){var e=t.subscribe(this.Jd,this,"dirty"),n=t.subscribe(this.Rd,this);return{da:t,s:function(){e.s(),n.s()}}}return t.subscribe(this.Hc,this)},Hc:function(){var t=this,e=t.throttleEvaluation;e&&0<=e?(clearTimeout(this[w].Ic),this[w].Ic=F.a.setTimeout((function(){t.ha(!0)}),e)):t.Ia?t.Ia(!0):t.ha(!0)},ha:function(t){var e=this[w],n=e.Sa,i=!1;if(!e.rb&&!e.ra){if(e.l&&!F.a.Sb(e.l)||n&&n()){if(!e.jc)return void this.s()}else e.jc=!1;e.rb=!0;try{i=this.zd(t)}finally{e.rb=!1}return i}},zd:function(e){var n=this[w],i=!1,u=n.wb?t:!n.V;i={qd:this,mb:n.I,Qb:n.V},F.u.xc({pd:i,od:d,o:this,Ya:u}),n.I={},n.V=0;var r=this.yd(n,i);return n.V?i=this.sb(n.X,r):(this.s(),i=!0),i&&(n.J?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=r,this.notifySubscribers(n.X,"spectate"),!n.J&&e&&this.notifySubscribers(n.X),this.rc&&this.rc()),u&&this.notifySubscribers(n.X,"awake"),i},yd:function(t,e){try{var n=t.Wc;return t.nb?n.call(t.nb):n()}finally{F.u.end(),e.Qb&&!t.J&&F.a.P(e.mb,D),t.sa=t.ka=!1}},v:function(t){var e=this[w];return(e.ka&&(t||!e.V)||e.J&&this.Xa())&&this.ha(),e.X},ub:function(t){F.T.fn.ub.call(this,t),this.nc=function(){return this[w].J||(this[w].sa?this.ha():this[w].ka=!1),this[w].X},this.Ia=function(t){this.pc(this[w].X),this[w].ka=!0,t&&(this[w].sa=!0),this.qc(this,!t)}},s:function(){var e=this[w];!e.J&&e.I&&F.a.P(e.I,(function(t,e){e.s&&e.s()})),e.l&&e.Rb&&F.a.K.yb(e.l,e.Rb),e.I=t,e.V=0,e.ra=!0,e.sa=!1,e.ka=!1,e.J=!1,e.l=t,e.Sa=t,e.Wc=t,this.Nc||(e.nb=t)}},N={Qa:function(t){var e=this,n=e[w];if(!n.ra&&n.J&&"change"==t){if(n.J=!1,n.sa||e.Xa())n.I=null,n.V=0,e.ha()&&e.Gb();else{var i=[];F.a.P(n.I,(function(t,e){i[e.Ka]=t})),F.a.D(i,(function(t,i){var u=n.I[t],r=e.$c(u.da);r.Ka=i,r.La=u.La,n.I[t]=r})),e.Xa()&&e.ha()&&e.Gb()}n.ra||e.notifySubscribers(n.X,"awake")}},hb:function(e){var n=this[w];n.ra||"change"!=e||this.Wa("change")||(F.a.P(n.I,(function(t,e){e.s&&(n.I[t]={da:e.da,Ka:e.Ka,La:e.La},e.s())})),n.J=!0,this.notifySubscribers(t,"asleep"))},ob:function(){var t=this[w];return t.J&&(t.sa||this.Xa())&&this.ha(),F.T.fn.ob.call(this)}},x={Qa:function(t){"change"!=t&&"beforeChange"!=t||this.v()}};F.a.Ba&&F.a.setPrototypeOf(S,F.T.fn);var T=F.ta.Ma;S[T]=F.o,F.Oc=function(t){return"function"==typeof t&&t[T]===S[T]},F.Fd=function(t){return F.Oc(t)&&t[w]&&t[w].wb},F.b("computed",F.o),F.b("dependentObservable",F.o),F.b("isComputed",F.Oc),F.b("isPureComputed",F.Fd),F.b("computed.fn",S),F.L(S,"peek",S.v),F.L(S,"dispose",S.s),F.L(S,"isActive",S.ja),F.L(S,"getDependenciesCount",S.qa),F.L(S,"getDependencies",S.Va),F.xb=function(t,e){return"function"==typeof t?F.o(t,e,{pure:!0}):((t=F.a.extend({},t)).pure=!0,F.o(t,e))},F.b("pureComputed",F.xb),function(){function e(i,u,r){if(r=r||new n,"object"!=typeof(i=u(i))||null===i||i===t||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var o=i instanceof Array?[]:{};return r.save(i,o),function(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(n in t)e(n)}(i,(function(n){var a=u(i[n]);switch(typeof a){case"boolean":case"number":case"string":case"function":o[n]=a;break;case"object":case"undefined":var s=r.get(a);o[n]=s!==t?s:e(a,u,r)}})),o}function n(){this.keys=[],this.values=[]}F.ad=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,(function(t){for(var e=0;F.O(t)&&10>e;e++)t=t();return t}))},F.toJSON=function(t,e,n){return t=F.ad(t),F.a.hc(t,e,n)},n.prototype={constructor:n,save:function(t,e){var n=F.a.A(this.keys,t);0<=n?this.values[n]=e:(this.keys.push(t),this.values.push(e))},get:function(e){return 0<=(e=F.a.A(this.keys,e))?this.values[e]:t}}}(),F.b("toJS",F.ad),F.b("toJSON",F.toJSON),F.Wd=function(t,e,n){function i(e){var i=F.xb(t,n).extend({ma:"always"}),u=i.subscribe((function(t){t&&(u.s(),e(t))}));return i.notifySubscribers(i.v()),u}return"function"!=typeof Promise||e?i(e.bind(n)):new Promise(i)},F.b("when",F.Wd),F.w={M:function(e){switch(F.a.R(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?F.a.g.get(e,F.c.options.$b):7>=F.a.W?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?F.w.M(e.options[e.selectedIndex]):t;default:return e.value}},cb:function(e,n,i){switch(F.a.R(e)){case"option":"string"==typeof n?(F.a.g.set(e,F.c.options.$b,t),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=n):(F.a.g.set(e,F.c.options.$b,n),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=t);for(var u,r=-1,o=0,a=e.options.length;o<a;++o)if((u=F.w.M(e.options[o]))==n||""===u&&n===t){r=o;break}(i||0<=r||n===t&&1<e.size)&&(e.selectedIndex=r,6===F.a.W&&F.a.setTimeout((function(){e.selectedIndex=r}),0));break;default:null!==n&&n!==t||(n=""),e.value=n}}},F.b("selectExtensions",F.w),F.b("selectExtensions.readValue",F.w.M),F.b("selectExtensions.writeValue",F.w.cb),F.m=function(){function t(t){123===(t=F.a.Db(t)).charCodeAt(0)&&(t=t.slice(1,-1));var e,n=[],o=(t+="\n,").match(i),a=[],s=0;if(1<o.length){for(var l,c=0;l=o[c];++c){var h=l.charCodeAt(0);if(44===h){if(0>=s){n.push(e&&a.length?{key:e,value:a.join("")}:{unknown:e||a.join("")}),e=s=0,a=[];continue}}else if(58===h){if(!s&&!e&&1===a.length){e=a.pop();continue}}else{if(47===h&&1<l.length&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;47===h&&c&&1<l.length?(h=o[c-1].match(u))&&!r[h[0]]&&(o=(t=t.substr(t.indexOf(l)+1)).match(i),c=-1,l="/"):40===h||123===h||91===h?++s:41===h||125===h||93===h?--s:e||a.length||34!==h&&39!==h||(l=l.slice(1,-1))}a.push(l)}if(0<s)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var e=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),u=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},o={};return{Ra:[],wa:o,ac:t,vb:function(i,u){function r(t,i){var u;if(!c){var h=F.getBindingHandler(t);if(h&&h.preprocess&&!(i=h.preprocess(i,t,r)))return;(h=o[t])&&(u=i,0<=F.a.A(e,u)?u=!1:(h=u.match(n),u=null!==h&&(h[1]?"Object("+h[1]+")"+h[2]:u)),h=u),h&&s.push("'"+("string"==typeof o[t]?o[t]:t)+"':function(_z){"+u+"=_z}")}l&&(i="function(){return "+i+" }"),a.push("'"+t+"':"+i)}var a=[],s=[],l=(u=u||{}).valueAccessors,c=u.bindingParams,h="string"==typeof i?t(i):i;return F.a.D(h,(function(t){r(t.key||t.unknown,t.value)})),s.length&&r("_ko_property_writers","{"+s.join(",")+" }"),a.join(",")},Id:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},eb:function(t,e,n,i,u){t&&F.O(t)?!F.Za(t)||u&&t.v()===i||t(i):(t=e.get("_ko_property_writers"))&&t[n]&&t[n](i)}}}(),F.b("expressionRewriting",F.m),F.b("expressionRewriting.bindingRewriteValidators",F.m.Ra),F.b("expressionRewriting.parseObjectLiteral",F.m.ac),F.b("expressionRewriting.preProcessBindings",F.m.vb),F.b("expressionRewriting._twoWayBindings",F.m.wa),F.b("jsonExpressionRewriting",F.m),F.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",F.m.vb),function(){function t(t){return 8==t.nodeType&&o.test(r?t.text:t.nodeValue)}function e(t){return 8==t.nodeType&&a.test(r?t.text:t.nodeValue)}function n(n,i){for(var u=n,r=1,o=[];u=u.nextSibling;){if(e(u)&&(F.a.g.set(u,l,!0),0==--r))return o;o.push(u),t(u)&&r++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(t,e){var i=n(t,e);return i?0<i.length?i[i.length-1].nextSibling:t.nextSibling:null}var r=u&&"\x3c!--test--\x3e"===u.createComment("test").text,o=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,s={ul:!0,ol:!0},l="__ko_matchedEndComment__";F.h={ea:{},childNodes:function(e){return t(e)?n(e):e.childNodes},Ea:function(e){if(t(e))for(var n=0,i=(e=F.h.childNodes(e)).length;n<i;n++)F.removeNode(e[n]);else F.a.Tb(e)},va:function(e,n){if(t(e)){F.h.Ea(e);for(var i=e.nextSibling,u=0,r=n.length;u<r;u++)i.parentNode.insertBefore(n[u],i)}else F.a.va(e,n)},Vc:function(e,n){var i;t(e)?(i=e.nextSibling,e=e.parentNode):i=e.firstChild,i?n!==i&&e.insertBefore(n,i):e.appendChild(n)},Wb:function(e,n,i){i?(i=i.nextSibling,t(e)&&(e=e.parentNode),i?n!==i&&e.insertBefore(n,i):e.appendChild(n)):F.h.Vc(e,n)},firstChild:function(n){if(t(n))return!n.nextSibling||e(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&e(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(t(n)&&(n=i(n)),n.nextSibling&&e(n.nextSibling)){var u=n.nextSibling;if(e(u)&&!F.a.g.get(u,l))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Cd:t,Vd:function(t){return(t=(r?t.text:t.nodeValue).match(o))?t[1]:null},Sc:function(n){if(s[F.a.R(n)]){var u=n.firstChild;if(u)do{if(1===u.nodeType){var r,o=null;if(r=u.firstChild)do{if(o)o.push(r);else if(t(r)){var a=i(r,!0);a?r=a:o=[r]}else e(r)&&(o=[r])}while(r=r.nextSibling);if(r=o)for(o=u.nextSibling,a=0;a<r.length;a++)o?n.insertBefore(r[a],o):n.appendChild(r[a])}}while(u=u.nextSibling)}}}}(),F.b("virtualElements",F.h),F.b("virtualElements.allowedBindings",F.h.ea),F.b("virtualElements.emptyNode",F.h.Ea),F.b("virtualElements.insertAfter",F.h.Wb),F.b("virtualElements.prepend",F.h.Vc),F.b("virtualElements.setDomNodeChildren",F.h.va),F.ga=function(){this.nd={}},F.a.extend(F.ga.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute("data-bind")||F.j.getComponentNameForNode(t);case 8:return F.h.Cd(t);default:return!1}},getBindings:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t):null;return F.j.tc(n,t,e,!1)},getBindingAccessors:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return F.j.tc(n,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:return F.h.Vd(t);default:return null}},parseBindingsString:function(t,e,n,i){try{var u,r=this.nd,o=t+(i&&i.valueAccessors||"");if(!(u=r[o])){var a,s="with($context){with($data||{}){return{"+F.m.vb(t,i)+"}}}";a=new Function("$context","$element",s),u=r[o]=a}return u(e,n)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}}}),F.ga.instance=new F.ga,F.b("bindingProvider",F.ga),function(){function n(t){var e=(t=F.a.g.get(t,m))&&t.N;e&&(t.N=null,e.Tc())}function i(t,e,i){this.node=t,this.yc=e,this.kb=[],this.H=!1,e.N||F.a.K.za(t,n),i&&i.N&&(i.N.kb.push(t),this.Kb=i)}function r(t){return function(){return t}}function a(t){return t()}function s(t){return F.a.Ga(F.u.G(t),(function(e,n){return function(){return t()[n]}}))}function l(t,e,n){return"function"==typeof t?s(t.bind(null,e,n)):F.a.Ga(t,r)}function c(t,e){return s(this.getBindings.bind(this,t,e))}function h(t,e){var n=F.h.firstChild(e);if(n){var i,u=F.ga.instance,r=u.preprocessNode;if(r){for(;i=n;)n=F.h.nextSibling(i),r.call(u,i);n=F.h.firstChild(e)}for(;i=n;)n=F.h.nextSibling(i),D(t,i)}F.i.ma(e,F.i.H)}function D(t,e){var n=t,i=1===e.nodeType;i&&F.h.Sc(e),(i||F.ga.instance.nodeHasBindings(e))&&(n=d(e,null,t).bindingContextForDescendants),n&&!C[F.a.R(e)]&&h(n,e)}function d(e,n,i){var u,r=F.a.g.Ub(e,m,{}),o=r.hd;if(!n){if(o)throw Error("You cannot apply bindings multiple times to the same element.");r.hd=!0}if(o||(r.context=i),r.Zb||(r.Zb={}),n&&"function"!=typeof n)u=n;else{var s=F.ga.instance,l=s.getBindingAccessors||c,h=F.$((function(){return(u=n?n(i,e):l.call(s,e,i))&&(i[p]&&i[p](),i[E]&&i[E]()),u}),null,{l:e});u&&h.ja()||(h=null)}var D,d=i;if(u){var f=function(){return F.a.Ga(h?h():u,a)},g=h?function(t){return function(){return a(h()[t])}}:function(t){return u[t]};f.get=function(t){return u[t]&&a(g(t))},f.has=function(t){return t in u},F.i.H in u&&F.i.subscribe(e,F.i.H,(function(){var t=(0,u[F.i.H])();if(t){var n=F.h.childNodes(e);n.length&&t(n,F.Ec(n[0]))}})),F.i.pa in u&&(d=F.i.Cb(e,i),F.i.subscribe(e,F.i.pa,(function(){var t=(0,u[F.i.pa])();t&&F.h.firstChild(e)&&t(e)}))),r=function(t){var e=[],n={},i=[];return F.a.P(t,(function u(r){if(!n[r]){var o=F.getBindingHandler(r);o&&(o.after&&(i.push(r),F.a.D(o.after,(function(e){if(t[e]){if(-1!==F.a.A(i,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));u(e)}})),i.length--),e.push({key:r,Mc:o})),n[r]=!0}})),e}(u),F.a.D(r,(function(n){var i=n.Mc.init,r=n.Mc.update,o=n.key;if(8===e.nodeType&&!F.h.ea[o])throw Error("The binding '"+o+"' cannot be used with virtual elements");try{"function"==typeof i&&F.u.G((function(){var n=i(e,g(o),f,d.$data,d);if(n&&n.controlsDescendantBindings){if(D!==t)throw Error("Multiple bindings ("+D+" and "+o+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");D=o}})),"function"==typeof r&&F.$((function(){r(e,g(o),f,d.$data,d)}),null,{l:e})}catch(t){throw t.message='Unable to process binding "'+o+": "+u[o]+'"\nMessage: '+t.message,t}}))}return{shouldBindDescendants:r=D===t,bindingContextForDescendants:r&&d}}function f(e,n){return e&&e instanceof F.fa?e:new F.fa(e,t,t,n)}var p=F.a.Da("_subscribable"),g=F.a.Da("_ancestorBindingInfo"),E=F.a.Da("_dataDependency");F.c={};var C={script:!0,textarea:!0,template:!0};F.getBindingHandler=function(t){return F.c[t]};var v={};F.fa=function(e,n,i,u,r){function o(){var t=h?c():c,e=F.a.f(t);return n?(F.a.extend(s,n),g in n&&(s[g]=n[g])):(s.$parents=[],s.$root=e,s.ko=F),s[p]=a,l?e=s.$data:(s.$rawData=t,s.$data=e),i&&(s[i]=e),u&&u(s,n,e),n&&n[p]&&!F.S.o().Vb(n[p])&&n[p](),D&&(s[E]=D),s.$data}var a,s=this,l=e===v,c=l?t:e,h="function"==typeof c&&!F.O(c),D=r&&r.dataDependency;r&&r.exportDependencies?o():((a=F.xb(o)).v(),a.ja()?a.equalityComparer=null:s[p]=t)},F.fa.prototype.createChildContext=function(t,e,n,i){if(!i&&e&&"object"==typeof e&&(e=(i=e).as,n=i.extend),e&&i&&i.noChildContext){var u="function"==typeof t&&!F.O(t);return new F.fa(v,this,null,(function(i){n&&n(i),i[e]=u?t():t}),i)}return new F.fa(t,this,e,(function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)}),i)},F.fa.prototype.extend=function(t,e){return new F.fa(v,this,null,(function(e){F.a.extend(e,"function"==typeof t?t(e):t)}),e)};var m=F.a.g.Z();i.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},i.prototype.sd=function(t){F.a.Pa(this.kb,t),!this.kb.length&&this.H&&this.Cc()},i.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,F.a.K.yb(this.node,n),F.i.ma(this.node,F.i.pa),this.Tc())},F.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(t,e,n,i,u){var r=F.a.g.Ub(t,m,{});return r.Fa||(r.Fa=new F.T),u&&u.notifyImmediately&&r.Zb[e]&&F.u.G(n,i,[t]),r.Fa.subscribe(n,i,e)},ma:function(e,n){var i=F.a.g.get(e,m);if(i&&(i.Zb[n]=!0,i.Fa&&i.Fa.notifySubscribers(e,n),n==F.i.H))if(i.N)i.N.Cc();else if(i.N===t&&i.Fa&&i.Fa.Wa(F.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(t,e){var n=F.a.g.Ub(t,m,{});return n.N||(n.N=new i(t,n,e[g])),e[g]==n?e:e.extend((function(t){t[g]=n}))}},F.Td=function(t){return(t=F.a.g.get(t,m))&&t.context},F.ib=function(t,e,n){return 1===t.nodeType&&F.h.Sc(t),d(t,e,f(n))},F.ld=function(t,e,n){return n=f(n),F.ib(t,l(e,n,t),n)},F.Oa=function(t,e){1!==e.nodeType&&8!==e.nodeType||h(f(t),e)},F.vc=function(t,n,i){if(!o&&e.jQuery&&(o=e.jQuery),2>arguments.length){if(!(n=u.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!n||1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");D(f(t,i),n)},F.Dc=function(e){return!e||1!==e.nodeType&&8!==e.nodeType?t:F.Td(e)},F.Ec=function(e){return(e=F.Dc(e))?e.$data:t},F.b("bindingHandlers",F.c),F.b("bindingEvent",F.i),F.b("bindingEvent.subscribe",F.i.subscribe),F.b("bindingEvent.startPossiblyAsyncContentBinding",F.i.Cb),F.b("applyBindings",F.vc),F.b("applyBindingsToDescendants",F.Oa),F.b("applyBindingAccessorsToNode",F.ib),F.b("applyBindingsToNode",F.ld),F.b("contextFor",F.Dc),F.b("dataFor",F.Ec)}(),function(t){function e(e,i){var o,a=Object.prototype.hasOwnProperty.call(u,e)?u[e]:t;a?a.subscribe(i):((a=u[e]=new F.T).subscribe(i),n(e,(function(t,n){var i=!(!n||!n.synchronous);r[e]={definition:t,Gd:i},delete u[e],o||i?a.notifySubscribers(t):F.na.zb((function(){a.notifySubscribers(t)}))})),o=!0)}function n(t,e){i("getConfig",[t],(function(n){n?i("loadComponent",[t,n],(function(t){e(t,n)})):e(null,null)}))}function i(e,n,u,r){r||(r=F.j.loaders.slice(0));var o=r.shift();if(o){var a=o[e];if(a){var s=!1;if(a.apply(o,n.concat((function(t){s?u(null):null!==t?u(t):i(e,n,u,r)})))!==t&&(s=!0,!o.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(e,n,u,r)}else u(null)}var u={},r={};F.j={get:function(n,i){var u=Object.prototype.hasOwnProperty.call(r,n)?r[n]:t;u?u.Gd?F.u.G((function(){i(u.definition)})):F.na.zb((function(){i(u.definition)})):e(n,i)},Bc:function(t){delete r[t]},oc:i},F.j.loaders=[],F.b("components",F.j),F.b("components.get",F.j.get),F.b("components.clearCachedDefinition",F.j.Bc)}(),function(){function t(t,e,n,i){function u(){0==--o&&i(r)}var r={},o=2,s=n.template;n=n.viewModel,s?a(e,s,(function(e){F.j.oc("loadTemplate",[t,e],(function(t){r.template=t,u()}))})):u(),n?a(e,n,(function(e){F.j.oc("loadViewModel",[t,e],(function(t){r[c]=t,u()}))})):u()}function n(t,e,i){if("function"==typeof e)i((function(t){return new e(t)}));else if("function"==typeof e[c])i(e[c]);else if("instance"in e){var u=e.instance;i((function(){return u}))}else"viewModel"in e?n(t,e.viewModel,i):t("Unknown viewModel value: "+e)}function r(t){switch(F.a.R(t)){case"script":return F.a.ua(t.text);case"textarea":return F.a.ua(t.value);case"template":if(o(t.content))return F.a.Ca(t.content.childNodes)}return F.a.Ca(t.childNodes)}function o(t){return e.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function a(t,n,u){"string"==typeof n.require?i||e.require?(i||e.require)([n.require],(function(t){t&&"object"==typeof t&&t.Xd&&t.default&&(t=t.default),u(t)})):t("Uses require, but no AMD loader is present"):u(n)}function s(t){return function(e){throw Error("Component '"+t+"': "+e)}}var l={};F.j.register=function(t,e){if(!e)throw Error("Invalid configuration for "+t);if(F.j.tb(t))throw Error("Component "+t+" is already registered");l[t]=e},F.j.tb=function(t){return Object.prototype.hasOwnProperty.call(l,t)},F.j.unregister=function(t){delete l[t],F.j.Bc(t)},F.j.Fc={getConfig:function(t,e){e(F.j.tb(t)?l[t]:null)},loadComponent:function(e,n,i){var u=s(e);a(u,n,(function(n){t(e,u,n,i)}))},loadTemplate:function(t,n,i){if(t=s(t),"string"==typeof n)i(F.a.ua(n));else if(n instanceof Array)i(n);else if(o(n))i(F.a.la(n.childNodes));else if(n.element)if(n=n.element,e.HTMLElement?n instanceof HTMLElement:n&&n.tagName&&1===n.nodeType)i(r(n));else if("string"==typeof n){var a=u.getElementById(n);a?i(r(a)):t("Cannot find element with ID "+n)}else t("Unknown element type: "+n);else t("Unknown template value: "+n)},loadViewModel:function(t,e,i){n(s(t),e,i)}};var c="createViewModel";F.b("components.register",F.j.register),F.b("components.isRegistered",F.j.tb),F.b("components.unregister",F.j.unregister),F.b("components.defaultLoader",F.j.Fc),F.j.loaders.push(F.j.Fc),F.j.dd=l}(),function(){function t(t,n){if(i=t.getAttribute("params")){var i=e.parseBindingsString(i,n,t,{valueAccessors:!0,bindingParams:!0}),u=(i=F.a.Ga(i,(function(e){return F.o(e,null,{l:t})})),F.a.Ga(i,(function(e){var n=e.v();return e.ja()?F.o({read:function(){return F.a.f(e())},write:F.Za(n)&&function(t){e()(t)},l:t}):n})));return Object.prototype.hasOwnProperty.call(u,"$raw")||(u.$raw=i),u}return{$raw:{}}}F.j.getComponentNameForNode=function(t){var e=F.a.R(t);if(F.j.tb(e)&&(-1!=e.indexOf("-")||"[object HTMLUnknownElement]"==""+t||8>=F.a.W&&t.tagName===e))return e},F.j.tc=function(e,n,i,u){if(1===n.nodeType){var r=F.j.getComponentNameForNode(n);if(r){if((e=e||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var o={name:r,params:t(n,i)};e.component=u?function(){return o}:o}}return e};var e=new F.ga;9>F.a.W&&(F.j.register=function(t){return function(e){return t.apply(this,arguments)}}(F.j.register),u.createDocumentFragment=function(t){return function(){var e=t();return F.j.dd,e}}(u.createDocumentFragment))}(),function(){var t=0;F.c.component={init:function(e,n,i,u,r){function o(){var t=a&&a.dispose;"function"==typeof t&&t.call(a),l&&l.s(),s=a=l=null}var a,s,l,c=F.a.la(F.h.childNodes(e));return F.h.Ea(e),F.a.K.za(e,o),F.o((function(){var i,u,h=F.a.f(n());if("string"==typeof h?i=h:(i=F.a.f(h.name),u=F.a.f(h.params)),!i)throw Error("No component name specified");var D=F.i.Cb(e,r),d=s=++t;F.j.get(i,(function(t){if(s===d){if(o(),!t)throw Error("Unknown component '"+i+"'");!function(t,e,n){if(!(e=e.template))throw Error("Component '"+t+"' has no template");t=F.a.Ca(e),F.h.va(n,t)}(i,t,e);var n=function(t,e,n){var i=t.createViewModel;return i?i.call(t,e,n):e}(t,u,{element:e,templateNodes:c});t=D.createChildContext(n,{extend:function(t){t.$component=n,t.$componentTemplateNodes=c}}),n&&n.koDescendantsComplete&&(l=F.i.subscribe(e,F.i.pa,n.koDescendantsComplete,n)),a=n,F.Oa(t,e)}}))}),null,{l:e}),{controlsDescendantBindings:!0}}},F.h.ea.component=!0}();var I={class:"className",for:"htmlFor"};F.c.attr={update:function(e,n){var i=F.a.f(n())||{};F.a.P(i,(function(n,i){i=F.a.f(i);var u=n.indexOf(":"),r=(u="lookupNamespaceURI"in e&&0<u&&e.lookupNamespaceURI(n.substr(0,u)),!1===i||null===i||i===t);r?u?e.removeAttributeNS(u,n):e.removeAttribute(n):i=i.toString(),8>=F.a.W&&n in I?(n=I[n],r?e.removeAttribute(n):e[n]=i):r||(u?e.setAttributeNS(u,n,i):e.setAttribute(n,i)),"name"===n&&F.a.Yc(e,r?"":i)}))}},F.c.checked={after:["value","attr"],init:function(e,n,i){function u(){var u=e.checked,s=r();if(!F.S.Ya()&&(u||!a&&!F.S.qa())){var h=F.u.G(n);if(l){var d=c?h.v():h,f=D;D=s,f!==s?u&&(F.a.Na(d,s,!0),F.a.Na(d,f,!1)):F.a.Na(d,s,u),c&&F.Za(h)&&h(d)}else o&&(s===t?s=u:u||(s=t)),F.m.eb(h,i,"checked",s,!0)}}var r=F.xb((function(){return i.has("checkedValue")?F.a.f(i.get("checkedValue")):h?i.has("value")?F.a.f(i.get("value")):e.value:void 0})),o="checkbox"==e.type,a="radio"==e.type;if(o||a){var s=n(),l=o&&F.a.f(s)instanceof Array,c=!(l&&s.push&&s.splice),h=a||l,D=l?r():t;a&&!e.name&&F.c.uniqueName.init(e,(function(){return!0})),F.o(u,null,{l:e}),F.a.B(e,"click",u),F.o((function(){var i=F.a.f(n()),u=r();l?(e.checked=0<=F.a.A(i,u),D=u):e.checked=o&&u===t?!!i:r()===i}),null,{l:e}),s=t}}},F.m.wa.checked=!0,F.c.checkedValue={update:function(t,e){t.value=F.a.f(e())}},F.c.class={update:function(t,e){var n=F.a.Db(F.a.f(e()));F.a.Eb(t,t.__ko__cssValue,!1),t.__ko__cssValue=n,F.a.Eb(t,n,!0)}},F.c.css={update:function(t,e){var n=F.a.f(e());null!==n&&"object"==typeof n?F.a.P(n,(function(e,n){n=F.a.f(n),F.a.Eb(t,e,n)})):F.c.class.update(t,e)}},F.c.enable={update:function(t,e){var n=F.a.f(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},F.c.disable={update:function(t,e){F.c.enable.update(t,(function(){return!F.a.f(e())}))}},F.c.event={init:function(t,e,n,i,u){var r=e()||{};F.a.P(r,(function(r){"string"==typeof r&&F.a.B(t,r,(function(t){var o,a=e()[r];if(a){try{var s=F.a.la(arguments);i=u.$data,s.unshift(i),o=a.apply(i,s)}finally{!0!==o&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1===n.get(r+"Bubble")&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}}))}))}},F.c.foreach={Rc:function(t){return function(){var e=t(),n=F.a.bc(e);return n&&"number"!=typeof n.length?(F.a.f(e),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:F.ba.Ma}):{foreach:e,templateEngine:F.ba.Ma}}},init:function(t,e){return F.c.template.init(t,F.c.foreach.Rc(e))},update:function(t,e,n,i,u){return F.c.template.update(t,F.c.foreach.Rc(e),n,i,u)}},F.m.Ra.foreach=!1,F.h.ea.foreach=!0,F.c.hasfocus={init:function(t,e,n){function i(i){t.__ko_hasfocusUpdating=!0;var u=t.ownerDocument;if("activeElement"in u){var r;try{r=u.activeElement}catch(t){r=u.body}i=r===t}u=e(),F.m.eb(u,n,"hasfocus",i,!0),t.__ko_hasfocusLastValue=i,t.__ko_hasfocusUpdating=!1}var u=i.bind(null,!0),r=i.bind(null,!1);F.a.B(t,"focus",u),F.a.B(t,"focusin",u),F.a.B(t,"blur",r),F.a.B(t,"focusout",r),t.__ko_hasfocusLastValue=!1},update:function(t,e){var n=!!F.a.f(e());t.__ko_hasfocusUpdating||t.__ko_hasfocusLastValue===n||(n?t.focus():t.blur(),!n&&t.__ko_hasfocusLastValue&&t.ownerDocument.body.focus(),F.u.G(F.a.Fb,null,[t,n?"focusin":"focusout"]))}},F.m.wa.hasfocus=!0,F.c.hasFocus=F.c.hasfocus,F.m.wa.hasFocus="hasfocus",F.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){F.a.fc(t,e())}},function(){function t(t,e,n){F.c[t]={init:function(t,i,u,r,o){var a,s,l,c,h,D={};if(e){r=u.get("as");var d=u.get("noChildContext");D={as:r,noChildContext:d,exportDependencies:h=!(r&&d)}}return c=(l="render"==u.get("completeOn"))||u.has(F.i.pa),F.o((function(){var u,r=F.a.f(i()),d=!n!=!r,f=!s;(h||d!==a)&&(c&&(o=F.i.Cb(t,o)),d&&(e&&!h||(D.dataDependency=F.S.o()),u=e?o.createChildContext("function"==typeof r?r:i,D):F.S.qa()?o.extend(null,D):o),f&&F.S.qa()&&(s=F.a.Ca(F.h.childNodes(t),!0)),d?(f||F.h.va(t,F.a.Ca(s)),F.Oa(u,t)):(F.h.Ea(t),l||F.i.ma(t,F.i.H)),a=d)}),null,{l:t}),{controlsDescendantBindings:!0}}},F.m.Ra[t]=!1,F.h.ea[t]=!0}t("if"),t("ifnot",!1,!0),t("with",!0)}(),F.c.let={init:function(t,e,n,i,u){return e=u.extend(e),F.Oa(e,t),{controlsDescendantBindings:!0}}},F.h.ea.let=!0;var P={};F.c.options={init:function(t){if("select"!==F.a.R(t))throw Error("options binding applies only to SELECT elements");for(;0<t.length;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(e,n,i){function u(){return F.a.jb(e.options,(function(t){return t.selected}))}function r(t,e,n){var i=typeof e;return"function"==i?e(t):"string"==i?t[e]:n}function o(t,n){if(f&&c)F.i.ma(e,F.i.H);else if(d.length){var i=0<=F.a.A(d,F.w.M(n[0]));F.a.Zc(n[0],i),f&&!i&&F.u.G(F.a.Fb,null,[e,"change"])}}var a=e.multiple,s=0!=e.length&&a?e.scrollTop:null,l=F.a.f(n()),c=i.get("valueAllowUnset")&&i.has("value"),h=i.get("optionsIncludeDestroyed");n={};var D,d=[];c||(a?d=F.a.Mb(u(),F.w.M):0<=e.selectedIndex&&d.push(F.w.M(e.options[e.selectedIndex]))),l&&(void 0===l.length&&(l=[l]),D=F.a.jb(l,(function(e){return h||e===t||null===e||!F.a.f(e._destroy)})),i.has("optionsCaption")&&null!==(l=F.a.f(i.get("optionsCaption")))&&l!==t&&D.unshift(P));var f=!1;n.beforeRemove=function(t){e.removeChild(t)},l=o,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(l=function(e,n){o(0,n),F.u.G(i.get("optionsAfterRender"),null,[n[0],e!==P?e:t])}),F.a.ec(e,D,(function(n,u,o){return o.length&&(d=!c&&o[0].selected?[F.w.M(o[0])]:[],f=!0),u=e.ownerDocument.createElement("option"),n===P?(F.a.Bb(u,i.get("optionsCaption")),F.w.cb(u,t)):(o=r(n,i.get("optionsValue"),n),F.w.cb(u,F.a.f(o)),n=r(n,i.get("optionsText"),o),F.a.Bb(u,n)),[u]}),n,l),c||(a?d.length&&u().length<d.length:d.length&&0<=e.selectedIndex?F.w.M(e.options[e.selectedIndex])!==d[0]:d.length||0<=e.selectedIndex)&&F.u.G(F.a.Fb,null,[e,"change"]),(c||F.S.Ya())&&F.i.ma(e,F.i.H),F.a.wd(e),s&&20<Math.abs(s-e.scrollTop)&&(e.scrollTop=s)}},F.c.options.$b=F.a.g.Z(),F.c.selectedOptions={init:function(t,e,n){function i(){var i=e(),u=[];F.a.D(t.getElementsByTagName("option"),(function(t){t.selected&&u.push(F.w.M(t))})),F.m.eb(i,n,"selectedOptions",u)}function u(){var n=F.a.f(e()),i=t.scrollTop;n&&"number"==typeof n.length&&F.a.D(t.getElementsByTagName("option"),(function(t){var e=0<=F.a.A(n,F.w.M(t));t.selected!=e&&F.a.Zc(t,e)})),t.scrollTop=i}if("select"!=F.a.R(t))throw Error("selectedOptions binding applies only to SELECT elements");var r;F.i.subscribe(t,F.i.H,(function(){r?i():(F.a.B(t,"change",i),r=F.o(u,null,{l:t}))}),null,{notifyImmediately:!0})},update:function(){}},F.m.wa.selectedOptions=!0,F.c.style={update:function(e,n){var i=F.a.f(n()||{});F.a.P(i,(function(n,i){if(null!==(i=F.a.f(i))&&i!==t&&!1!==i||(i=""),o)o(e).css(n,i);else if(/^--/.test(n))e.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}));var u=e.style[n];e.style[n]=i,i===u||e.style[n]!=u||isNaN(i)||(e.style[n]=i+"px")}}))}},F.c.submit={init:function(t,e,n,i,u){if("function"!=typeof e())throw Error("The value for a submit binding must be a function");F.a.B(t,"submit",(function(n){var i,r=e();try{i=r.call(u.$data,t)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}}))}},F.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){F.a.Bb(t,e())}},F.h.ea.text=!0,function(){if(e&&e.navigator){var n,i,u,r,o,a=function(t){if(t)return parseFloat(t[1])},s=e.navigator.userAgent;(n=e.opera&&e.opera.version&&parseInt(e.opera.version()))||(o=a(s.match(/Edge\/([^ ]+)$/)))||a(s.match(/Chrome\/([^ ]+)/))||(i=a(s.match(/Version\/([^ ]+) Safari/)))||(u=a(s.match(/Firefox\/([^ ]+)/)))||(r=F.a.W||a(s.match(/MSIE ([^ ]+)/)))||(r=a(s.match(/rv:([^ )]+)/)))}if(8<=r&&10>r)var l=F.a.g.Z(),c=F.a.g.Z(),h=function(t){var e=this.activeElement;(e=e&&F.a.g.get(e,c))&&e(t)},D=function(t,e){var n=t.ownerDocument;F.a.g.get(n,l)||(F.a.g.set(n,l,!0),F.a.B(n,"selectionchange",h)),F.a.g.set(t,c,e)};F.c.textInput={init:function(e,a,s){function l(t,n){F.a.B(e,t,n)}function c(){d||(f=e.value,d=F.a.setTimeout(h,4))}function h(){clearTimeout(d),f=d=t;var n=e.value;p!==n&&(p=n,F.m.eb(a(),s,"textInput",n))}var d,f,p=e.value,g=9==F.a.W?c:h,E=!1;r&&l("keypress",h),11>r&&l("propertychange",(function(t){E||"value"!==t.propertyName||g()})),8==r&&(l("keyup",h),l("keydown",h)),D&&(D(e,g),l("dragend",c)),(!r||9<=r)&&l("input",g),5>i&&"textarea"===F.a.R(e)?(l("keydown",c),l("paste",c),l("cut",c)):11>n?l("keydown",c):4>u?(l("DOMAutoComplete",h),l("dragdrop",h),l("drop",h)):o&&"number"===e.type&&l("keydown",c),l("change",h),l("blur",h),F.o((function n(){var i=F.a.f(a());null!==i&&i!==t||(i=""),f!==t&&i===f?F.a.setTimeout(n,4):e.value!==i&&(E=!0,e.value=i,E=!1,p=e.value)}),null,{l:e})}},F.m.wa.textInput=!0,F.c.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),F.c.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++F.c.uniqueName.rd;F.a.Yc(t,n)}}},F.c.uniqueName.rd=0,F.c.using={init:function(t,e,n,i,u){var r;return n.has("as")&&(r={as:n.get("as"),noChildContext:n.get("noChildContext")}),e=u.createChildContext(e,r),F.Oa(e,t),{controlsDescendantBindings:!0}}},F.h.ea.using=!0,F.c.value={init:function(e,n,i){var u=F.a.R(e),r="input"==u;if(!r||"checkbox"!=e.type&&"radio"!=e.type){var o=[],a=i.get("valueUpdate"),s=!1,l=null;a&&(o="string"==typeof a?[a]:F.a.wc(a),F.a.Pa(o,"change"));var c,h,D=function(){l=null,s=!1;var t=n(),u=F.w.M(e);F.m.eb(t,i,"value",u)};!F.a.W||!r||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=F.a.A(o,"propertychange")||(F.a.B(e,"propertychange",(function(){s=!0})),F.a.B(e,"focus",(function(){s=!1})),F.a.B(e,"blur",(function(){s&&D()}))),F.a.D(o,(function(t){var n=D;F.a.Ud(t,"after")&&(n=function(){l=F.w.M(e),F.a.setTimeout(D,0)},t=t.substring(5)),F.a.B(e,t,n)})),c=r&&"file"==e.type?function(){var i=F.a.f(n());null===i||i===t||""===i?e.value="":F.u.G(D)}:function(){var r=F.a.f(n()),o=F.w.M(e);null!==l&&r===l?F.a.setTimeout(c,0):r===o&&o!==t||("select"===u?(o=i.get("valueAllowUnset"),F.w.cb(e,r,o),o||r===F.w.M(e)||F.u.G(D)):F.w.cb(e,r))},"select"===u?F.i.subscribe(e,F.i.H,(function(){h?i.get("valueAllowUnset")?c():D():(F.a.B(e,"change",D),h=F.o(c,null,{l:e}))}),null,{notifyImmediately:!0}):(F.a.B(e,"change",D),F.o(c,null,{l:e}))}else F.ib(e,{checkedValue:n})},update:function(){}},F.m.wa.value=!0,F.c.visible={update:function(t,e){var n=F.a.f(e()),i="none"!=t.style.display;n&&!i?t.style.display="":!n&&i&&(t.style.display="none")}},F.c.hidden={update:function(t,e){F.c.visible.update(t,(function(){return!F.a.f(e())}))}},function(t){F.c[t]={init:function(e,n,i,u,r){return F.c.event.init.call(this,e,(function(){var e={};return e[t]=n(),e}),i,u,r)}}}("click"),F.ca=function(){},F.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},F.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},F.ca.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){var n=(e=e||u).getElementById(t);if(!n)throw Error("Cannot find template with ID "+t);return new F.C.F(n)}if(1==t.nodeType||8==t.nodeType)return new F.C.ia(t);throw Error("Unknown template type: "+t)},F.ca.prototype.renderTemplate=function(t,e,n,i){return t=this.makeTemplateSource(t,i),this.renderTemplateSource(t,e,n,i)},F.ca.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting||this.makeTemplateSource(t,e).data("isRewritten")},F.ca.prototype.rewriteTemplate=function(t,e,n){e=e((t=this.makeTemplateSource(t,n)).text()),t.text(e),t.data("isRewritten",!0)},F.b("templateEngine",F.ca),F.kc=function(){function t(t,e,n,i){t=F.m.ac(t);for(var u=F.m.Ra,r=0;r<t.length;r++){var o=t[r].key;if(Object.prototype.hasOwnProperty.call(u,o)){var a=u[o];if("function"==typeof a){if(o=a(t[r].value))throw Error(o)}else if(!a)throw Error("This template engine does not support the '"+o+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+F.m.vb(t,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,(function(t){return F.kc.Ld(t,e)}),n)},Ld:function(i,u){return i.replace(e,(function(e,n,i,r,o){return t(o,n,i,u)})).replace(n,(function(e,n){return t(n,"\x3c!-- ko --\x3e","#comment",u)}))},md:function(t,e){return F.aa.Xb((function(n,i){var u=n.nextSibling;u&&u.nodeName.toLowerCase()===e&&F.ib(u,t,i)}))}}}(),F.b("__tr_ambtns",F.kc.md),function(){F.C={},F.C.F=function(t){if(this.F=t){var e=F.a.R(t);this.ab="script"===e?1:"textarea"===e?2:"template"==e&&t.content&&11===t.content.nodeType?3:4}},F.C.F.prototype.text=function(){var t=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[t];var e=arguments[0];"innerHTML"===t?F.a.fc(this.F,e):this.F[t]=e};var e=F.a.g.Z()+"_";F.C.F.prototype.data=function(t){if(1===arguments.length)return F.a.g.get(this.F,e+t);F.a.g.set(this.F,e+t,arguments[1])};var n=F.a.g.Z();F.C.F.prototype.nodes=function(){var e=this.F;if(0==arguments.length){var i=F.a.g.get(e,n)||{},u=i.lb||(3===this.ab?e.content:4===this.ab?e:t);if(!u||i.jd){var r=this.text();r&&r!==i.bb&&(u=F.a.Md(r,e.ownerDocument),F.a.g.set(e,n,{lb:u,bb:r,jd:!0}))}return u}i=arguments[0],this.ab!==t&&this.text(""),F.a.g.set(e,n,{lb:i})},F.C.ia=function(t){this.F=t},F.C.ia.prototype=new F.C.F,F.C.ia.prototype.constructor=F.C.ia,F.C.ia.prototype.text=function(){if(0==arguments.length){var e=F.a.g.get(this.F,n)||{};return e.bb===t&&e.lb&&(e.bb=e.lb.innerHTML),e.bb}F.a.g.set(this.F,n,{bb:arguments[0]})},F.b("templateSources",F.C),F.b("templateSources.domElement",F.C.F),F.b("templateSources.anonymousTemplate",F.C.ia)}(),function(){function e(t,e,n){var i;for(e=F.h.nextSibling(e);t&&(i=t)!==e;)n(i,t=F.h.nextSibling(i))}function n(t,n){if(t.length){var i=t[0],u=t[t.length-1],r=i.parentNode,o=F.ga.instance,a=o.preprocessNode;if(a){if(e(i,u,(function(t,e){var n=t.previousSibling,r=a.call(o,t);r&&(t===i&&(i=r[0]||e),t===u&&(u=r[r.length-1]||n))})),t.length=0,!i)return;i===u?t.push(i):(t.push(i,u),F.a.Ua(t,r))}e(i,u,(function(t){1!==t.nodeType&&8!==t.nodeType||F.vc(n,t)})),e(i,u,(function(t){1!==t.nodeType&&8!==t.nodeType||F.aa.cd(t,[n])})),F.a.Ua(t,r)}}function i(t){return t.nodeType?t:0<t.length?t[0]:null}function u(t,e,u,r,a){a=a||{};var s=(t&&i(t)||u||{}).ownerDocument,l=a.templateEngine||o;if(F.kc.xd(u,l,s),"number"!=typeof(u=l.renderTemplate(u,r,a,s)).length||0<u.length&&"number"!=typeof u[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(s=!1,e){case"replaceChildren":F.h.va(t,u),s=!0;break;case"replaceNode":F.a.Xc(t,u),s=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return s&&(n(u,r),a.afterRender&&F.u.G(a.afterRender,null,[u,r[a.as||"$data"]]),"replaceChildren"==e&&F.i.ma(t,F.i.H)),u}function r(t,e,n){return F.O(t)?t():"function"==typeof t?t(e,n):t}var o;F.gc=function(e){if(e!=t&&!(e instanceof F.ca))throw Error("templateEngine must inherit from ko.templateEngine");o=e},F.dc=function(e,n,a,s,l){if(((a=a||{}).templateEngine||o)==t)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",s){var c=i(s);return F.$((function(){var t=n&&n instanceof F.fa?n:new F.fa(n,null,null,null,{exportDependencies:!0}),o=r(e,t.$data,t);t=u(s,l,o,t,a),"replaceNode"==l&&(c=i(s=t))}),null,{Sa:function(){return!c||!F.a.Sb(c)},l:c&&"replaceNode"==l?c.parentNode:c})}return F.aa.Xb((function(t){F.dc(e,n,a,t,"replaceNode")}))},F.Qd=function(e,i,o,a,s){function l(t,e){F.u.G(F.a.ec,null,[a,t,h,o,c,e]),F.i.ma(a,F.i.H)}function c(t,e){n(e,D),o.afterRender&&o.afterRender(e,t),D=null}function h(t,n){D=s.createChildContext(t,{as:d,noChildContext:o.noChildContext,extend:function(t){t.$index=n,d&&(t[d+"Index"]=n)}});var i=r(e,t,D);return u(a,"ignoreTargetNode",i,D,o)}var D,d=o.as,f=!1===o.includeDestroyed||F.options.foreachHidesDestroyed&&!o.includeDestroyed;if(f||o.beforeRemove||!F.Pc(i))return F.$((function(){var e=F.a.f(i)||[];void 0===e.length&&(e=[e]),f&&(e=F.a.jb(e,(function(e){return e===t||null===e||!F.a.f(e._destroy)}))),l(e)}),null,{l:a});l(i.v());var p=i.subscribe((function(t){l(i(),t)}),null,"arrayChange");return p.l(a),p};var a=F.a.g.Z(),s=F.a.g.Z();F.c.template={init:function(t,e){var n=F.a.f(e());if("string"==typeof n||"name"in n)F.h.Ea(t);else if("nodes"in n){if(n=n.nodes||[],F.O(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&F.a.g.get(i,s)||(i=F.a.Yb(n),F.a.g.set(i,s,!0)),new F.C.ia(t).nodes(i)}else{if(!(0<(n=F.h.childNodes(t)).length))throw Error("Anonymous template defined, but no template content was provided");i=F.a.Yb(n),new F.C.ia(t).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,n,i,u,r){var o=n();i=!0,u=null,"string"==typeof(n=F.a.f(o))?n={}:(o="name"in n?n.name:e,"if"in n&&(i=F.a.f(n.if)),i&&"ifnot"in n&&(i=!F.a.f(n.ifnot)),i&&!o&&(i=!1)),"foreach"in n?u=F.Qd(o,i&&n.foreach||[],n,e,r):i?(i=r,"data"in n&&(i=r.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),u=F.dc(o,i,n,e)):F.h.Ea(e),r=u,(n=F.a.g.get(e,a))&&"function"==typeof n.s&&n.s(),F.a.g.set(e,a,!r||r.ja&&!r.ja()?t:r)}},F.m.Ra.template=function(t){return 1==(t=F.m.ac(t)).length&&t[0].unknown||F.m.Id(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},F.h.ea.template=!0}(),F.b("setTemplateEngine",F.gc),F.b("renderTemplate",F.dc),F.a.Kc=function(t,e,n){var i,u,r,o,a;if(t.length&&e.length)for(i=u=0;(!n||i<n)&&(o=t[u]);++u){for(r=0;a=e[r];++r)if(o.value===a.value){o.moved=a.index,a.moved=o.index,e.splice(r,1),i=r=0;break}i+=r}},F.a.Pb=function(){function t(t,e,n,i,u){var r,o,a,s,l,c=Math.min,h=Math.max,D=[],d=t.length,f=e.length,p=f-d||1,g=d+f+1;for(r=0;r<=d;r++)for(s=a,D.push(a=[]),l=c(f,r+p),o=h(0,r-1);o<=l;o++)a[o]=o?r?t[r-1]===e[o-1]?s[o-1]:c(s[o]||g,a[o-1]||g)+1:o+1:r+1;for(c=[],h=[],p=[],r=d,o=f;r||o;)f=D[r][o]-1,o&&f===D[r][o-1]?h.push(c[c.length]={status:n,value:e[--o],index:o}):r&&f===D[r-1][o]?p.push(c[c.length]={status:i,value:t[--r],index:r}):(--o,--r,u.sparse||c.push({status:"retained",value:e[o]}));return F.a.Kc(p,h,!u.dontLimitMoves&&10*d),c.reverse()}return function(e,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},n=n||[],(e=e||[]).length<n.length?t(e,n,"added","deleted",i):t(n,e,"deleted","added",i)}}(),F.b("utils.compareArrays",F.a.Pb),function(){function e(e,n,i,u,r){var o=[],a=F.$((function(){var t=n(i,r,F.a.Ua(o,e))||[];0<o.length&&(F.a.Xc(o,t),u&&F.u.G(u,null,[i,t,r])),o.length=0,F.a.Nb(o,t)}),null,{l:e,Sa:function(){return!F.a.kd(o)}});return{Y:o,$:a.ja()?a:t}}var n=F.a.g.Z(),i=F.a.g.Z();F.a.ec=function(u,r,o,a,s,l){function c(t){d={Aa:t,pb:F.ta(A++)},v.push(d),C||S.push(d)}function h(t){d=E[t],A!==d.pb.v()&&w.push(d),d.pb(A++),F.a.Ua(d.Y,u),v.push(d)}function D(t,e){if(t)for(var n=0,i=e.length;n<i;n++)F.a.D(e[n].Y,(function(i){t(i,n,e[n].Aa)}))}void 0===(r=r||[]).length&&(r=[r]),a=a||{};var d,f,p,g,E=F.a.g.get(u,n),C=!E,v=[],m=0,A=0,b=[],y=[],B=[],w=[],S=[],N=0;if(C)F.a.D(r,c);else{if(!l||E&&E._countWaitingForRemove){var x=F.a.Mb(E,(function(t){return t.Aa}));l=F.a.Pb(x,r,{dontLimitMoves:a.dontLimitMoves,sparse:!0})}var T,I,P;for(x=0;T=l[x];x++)switch(I=T.moved,P=T.index,T.status){case"deleted":for(;m<P;)h(m++);I===t&&((d=E[m]).$&&(d.$.s(),d.$=t),F.a.Ua(d.Y,u).length&&(a.beforeRemove&&(v.push(d),N++,d.Aa===i?d=null:B.push(d)),d&&b.push.apply(b,d.Y))),m++;break;case"added":for(;A<P;)h(m++);I!==t?(y.push(v.length),h(I)):c(T.value)}for(;A<r.length;)h(m++);v._countWaitingForRemove=N}F.a.g.set(u,n,v),D(a.beforeMove,w),F.a.D(b,a.beforeRemove?F.oa:F.removeNode);try{g=u.ownerDocument.activeElement}catch(t){}if(y.length)for(;(x=y.shift())!=t;){for(d=v[x],f=t;x;)if((p=v[--x].Y)&&p.length){f=p[p.length-1];break}for(r=0;m=d.Y[r];f=m,r++)F.h.Wb(u,m,f)}for(x=0;d=v[x];x++){for(d.Y||F.a.extend(d,e(u,o,d.Aa,s,d.pb)),r=0;m=d.Y[r];f=m,r++)F.h.Wb(u,m,f);!d.Ed&&s&&(s(d.Aa,d.Y,d.pb),d.Ed=!0,f=d.Y[d.Y.length-1])}for(g&&u.ownerDocument.activeElement!=g&&g.focus(),D(a.beforeRemove,B),x=0;x<B.length;++x)B[x].Aa=i;D(a.afterMove,w),D(a.afterAdd,S)}}(),F.b("utils.setDomNodeChildrenFromArrayMapping",F.a.ec),F.ba=function(){this.allowTemplateRewriting=!1},F.ba.prototype=new F.ca,F.ba.prototype.constructor=F.ba,F.ba.prototype.renderTemplateSource=function(t,e,n,i){return(e=9>F.a.W||!t.nodes?null:t.nodes())?F.a.la(e.cloneNode(!0).childNodes):(t=t.text(),F.a.ua(t,i))},F.ba.Ma=new F.ba,F.gc(F.ba.Ma),F.b("nativeTemplateEngine",F.ba),function(){F.$a=function(){var t=this.Hd=function(){if(!o||!o.tmpl)return 0;try{if(0<=o.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(t){}return 1}();this.renderTemplateSource=function(e,n,i,r){if(r=r||u,i=i||{},2>t)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var a=e.data("precompiled");return a||(a=e.text()||"",a=o.template(null,"{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}"),e.data("precompiled",a)),e=[n.$data],n=o.extend({koBindingContext:n},i.templateOptions),(n=o.tmpl(a,e,n)).appendTo(r.createElement("div")),o.fragments={},n},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){u.write("<script type='text/html' id='"+t+"'>"+e+"<\/script>")},0<t&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},F.$a.prototype=new F.ca,F.$a.prototype.constructor=F.$a;var t=new F.$a;0<t.Hd&&F.gc(t),F.b("jqueryTmplTemplateEngine",F.$a)}()}))}();var r=e(u.exports);function o(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var a={exports:{}};!function(t,e){t.exports=function t(e,n,i){function u(a,s){if(!n[a]){if(!e[a]){if(!s&&o)return o(a);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){var n=e[a][1][t];return u(n||t)}),c,c.exports,t,e,n,i)}return n[a].exports}for(var r=o,a=0;a<i.length;a++)u(i[a]);return u}({1:[function(t,e,n){!function(){var n,i,u;n=void 0!==t?t("i18next"):window.i18n;var r={init:function(t,e,n,u,a){i.utils.domNodeDisposal.addDisposeCallback(t,(function(){var e=o._koElements.indexOf(t);e>=0&&(o._koElements.splice(e,1),o._koCallbacks.splice(e,1))})),o._koElements.push(t),o._koCallbacks.push(i.bindingHandlers.i18n.update.bind(void 0,t,e,n,u,a)),r.update(t,e,n,u,a)},update:function(t,e,u,r,o){var a=i.toJS(e());if("string"==typeof a)t.innerHTML=n.t(a);else if(a.key)t.innerHTML=n.t(a.key,a.options);else for(var s in a){var l,c=a[s];if(l="string"==typeof c?n.t(c):n.t(c.key,i.toJS(c.options)),"html"==s)t.innerHTML=l;else{var h=document.createElement("div");h.innerHTML=l,t.setAttribute(s,h.innerText)}}}},o={_koElements:[],_koCallbacks:[],setLanguage:function(t){n.setLng(t),o._language(t),o._koCallbacks.forEach((function(t){return t.call(void 0)})),void 0!==u&&void 0!==u.fn.i18n&&u("html").i18n()},init:function(t,e,a,s){i=a||window.ko,u=s||window.$,n.init({compatibilityAPI:"v1",lng:e||"en",resStore:t}),i.bindingHandlers.i18n=r,o._language=i.observable(e),o.setLanguage(e)},t:function(){var t=arguments;return i.computed((function(){return o._language(),n.t.apply(n,t)}))},i18n:n};void 0!==e?e.exports=o:window.i18nextko=o}()},{i18next:17}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=function(){function t(t,e){var n=[],i=!0,u=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){u=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(u)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=s(t("./utils")),o=a(t("./logger"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var u=n[i],r=Object.getOwnPropertyDescriptor(e,u);r&&r.configurable&&void 0===t[u]&&Object.defineProperty(t,u,r)}return t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function D(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):l(t,e))}function d(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}var f=function(t){function e(n,i,u){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];c(this,e);var a=h(this,t.call(this));return a.backend=n,a.store=i,a.services=u,a.options=r,a.logger=o.default.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(u,r.backend,r),a}return D(e,t),e.prototype.queueLoad=function(t,e,n){var i=this,u=[],r=[],o=[],a=[];return t.forEach((function(t){var n=!0;e.forEach((function(e){var o=t+"|"+e;i.store.hasResourceBundle(t,e)?i.state[o]=2:i.state[o]<0||(1===i.state[o]?r.indexOf(o)<0&&r.push(o):(i.state[o]=1,n=!1,r.indexOf(o)<0&&r.push(o),u.indexOf(o)<0&&u.push(o),a.indexOf(e)<0&&a.push(e)))})),n||o.push(t)})),(u.length||r.length)&&this.queue.push({pending:r,loaded:{},errors:[],callback:n}),{toLoad:u,pending:r,toLoadLanguages:o,toLoadNamespaces:a}},e.prototype.loaded=function(t,e,n){var i=this,o=t.split("|"),a=u(o,2),s=a[0],l=a[1];e&&this.emit("failedLoading",s,l,e),n&&this.store.addResourceBundle(s,l,n),this.state[t]=e?-1:2,this.queue.forEach((function(n){r.pushPath(n.loaded,[s],l),d(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(n.errors.length?n.callback(n.errors):n.callback(),i.emit("loaded",n.loaded),n.done=!0)})),this.queue=this.queue.filter((function(t){return!t.done}))},e.prototype.read=function(t,e,n,i,u,r){var o=this;if(i||(i=0),u||(u=250),!t.length)return r(null,{});this.backend[n](t,e,(function(a,s){a&&s&&i<5?setTimeout((function(){o.read.call(o,t,e,n,++i,2*u,r)}),u):r(a,s)}))},e.prototype.load=function(t,e,n){var o=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();var a=i({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var s,l=this.queueLoad(t,e,n);l.toLoad.length?a.allowMultiLoading&&this.backend.readMulti?this.read(l.toLoadLanguages,l.toLoadNamespaces,"readMulti",null,null,(function(t,e){t&&o.logger.warn("loading namespaces "+l.toLoadNamespaces.join(", ")+" for languages "+l.toLoadLanguages.join(", ")+" via multiloading failed",t),!t&&e&&o.logger.log("loaded namespaces "+l.toLoadNamespaces.join(", ")+" for languages "+l.toLoadLanguages.join(", ")+" via multiloading",e),l.toLoad.forEach((function(n){var i=n.split("|"),a=u(i,2),s=a[0],l=a[1],c=r.getPath(e,[s,l]);if(c)o.loaded(n,t,c);else{var h="loading namespace "+l+" for language "+s+" via multiloading failed";o.loaded(n,h),o.logger.error(h)}}))})):(s=function(t){var e=this,n=t.split("|"),i=u(n,2),r=i[0],o=i[1];this.read(r,o,"read",null,null,(function(n,i){n&&e.logger.warn("loading namespace "+o+" for language "+r+" failed",n),!n&&i&&e.logger.log("loaded namespace "+o+" for language "+r,i),e.loaded(t,n,i)}))},l.toLoad.forEach((function(t){s.call(o,t)}))):l.pending.length||n()},e.prototype.reload=function(t,e){var n=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var o,a=i({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),a.allowMultiLoading&&this.backend.readMulti?this.read(t,e,"readMulti",null,null,(function(i,u){i&&n.logger.warn("reloading namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",i),!i&&u&&n.logger.log("reloaded namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading",u),t.forEach((function(t){e.forEach((function(e){var o=r.getPath(u,[t,e]);if(o)n.loaded(t+"|"+e,i,o);else{var a="reloading namespace "+e+" for language "+t+" via multiloading failed";n.loaded(t+"|"+e,a),n.logger.error(a)}}))}))})):(o=function(t){var e=this,n=t.split("|"),i=u(n,2),r=i[0],o=i[1];this.read(r,o,"read",null,null,(function(n,i){n&&e.logger.warn("reloading namespace "+o+" for language "+r+" failed",n),!n&&i&&e.logger.log("reloaded namespace "+o+" for language "+r,i),e.loaded(t,n,i)}))},t.forEach((function(t){e.forEach((function(e){o.call(n,t+"|"+e)}))})))},e.prototype.saveMissing=function(t,e,n,i){this.backend&&this.backend.create&&this.backend.create(t,e,n,i),t&&t[0]&&this.store.addResource(t[0],e,n,i)},e}(a(t("./EventEmitter")).default);n.default=f},{"./EventEmitter":4,"./logger":14,"./utils":16}],3:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};o(t("./utils"));var u=r(t("./logger"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var u=n[i],r=Object.getOwnPropertyDescriptor(e,u);r&&r.configurable&&void 0===t[u]&&Object.defineProperty(t,u,r)}return t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):a(t,e))}var h=function(t){function e(n,i,r){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];s(this,e);var a=l(this,t.call(this));return a.cache=n,a.store=i,a.services=r,a.options=o,a.logger=u.default.create("cacheConnector"),a.cache&&a.cache.init&&a.cache.init(r,o.cache,o),a}return c(e,t),e.prototype.load=function(t,e,n){var u=this;if(!this.cache)return n&&n();var r=i({},this.cache.options,this.options.cache);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),r.enabled?this.cache.load(t,(function(e,i){if(e&&u.logger.error("loading languages "+t.join(", ")+" from cache failed",e),i)for(var r in i)for(var o in i[r])if("i18nStamp"!==o){var a=i[r][o];a&&u.store.addResourceBundle(r,o,a)}n&&n()})):n&&n()},e.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},e}(r(t("./EventEmitter")).default);n.default=h},{"./EventEmitter":4,"./logger":14,"./utils":16}],4:[function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(){i(this,t),this.observers={}}return t.prototype.on=function(t,e){var n=this;t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)}))},t.prototype.off=function(t,e){var n=this;this.observers[t]&&this.observers[t].forEach((function(){if(e){var i=n.observers[t].indexOf(e);i>-1&&n.observers[t].splice(i,1)}else delete n.observers[t]}))},t.prototype.emit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&this.observers[t].forEach((function(t){t.apply(void 0,n)})),this.observers["*"]&&this.observers["*"].forEach((function(e){var i;e.apply(e,(i=[t]).concat.apply(i,n))}))},t}();n.default=u},{}],5:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("./utils")),u=r(t("./logger"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(this,t),this.logger=u.default.create("interpolator"),this.init(e,!0)}return t.prototype.init=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];arguments[1]&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t}),t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escapeValue=e.escapeValue,this.prefix=e.prefix?i.regexEscape(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?i.regexEscape(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?i.regexEscape(e.formatSeparator):e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?i.regexEscape(e.nestingPrefix):e.nestingPrefixEscaped||i.regexEscape("$t("),this.nestingSuffix=e.nestingSuffix?i.regexEscape(e.nestingSuffix):e.nestingSuffixEscaped||i.regexEscape(")"),this.resetRegExp()},t.prototype.reset=function(){this.options&&this.init(this.options)},t.prototype.resetRegExp=function(){var t=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(t,"g");var e=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(e,"g");var n=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(n,"g")},t.prototype.interpolate=function(t,e,n){var u=this,r=void 0,o=void 0;function a(t){return t.replace(/\$/g,"$$$$")}var s=function(t){if(t.indexOf(u.formatSeparator)<0)return i.getPath(e,t);var r=t.split(u.formatSeparator),o=r.shift().trim(),a=r.join(u.formatSeparator).trim();return u.format(i.getPath(e,o),a,n)};for(this.resetRegExp();r=this.regexpUnescape.exec(t);){var l=s(r[1].trim());t=t.replace(r[0],l),this.regexpUnescape.lastIndex=0}for(;r=this.regexp.exec(t);)"string"!=typeof(o=s(r[1].trim()))&&(o=i.makeString(o)),o||(this.logger.warn("missed to pass in variable "+r[1]+" for interpolating "+t),o=""),o=this.escapeValue?a(i.escape(o)):a(o),t=t.replace(r[0],o),this.regexp.lastIndex=0;return t},t.prototype.nest=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=void 0,r=void 0,o=JSON.parse(JSON.stringify(n));function a(t){return t.replace(/\$/g,"$$$$")}function s(t){if(t.indexOf(",")<0)return t;var e=t.split(",");t=e.shift();var n=e.join(",");n=this.interpolate(n,o);try{o=JSON.parse(n)}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}for(o.applyPostProcessor=!1;u=this.nestingRegexp.exec(t);)"string"!=typeof(r=e(s.call(this,u[1].trim()),o))&&(r=i.makeString(r)),r||(this.logger.warn("missed to pass in variable "+u[1]+" for interpolating "+t),r=""),r=this.escapeValue?a(i.escape(r)):a(r),t=t.replace(u[0],r),this.regexp.lastIndex=0;return t},t}();n.default=s},{"./logger":14,"./utils":16}],6:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=u(t("./logger"));function u(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}var a=function(){function t(e){r(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=i.default.create("languageUtils")}return t.prototype.getLanguagePartFromCode=function(t){if(t.indexOf("-")<0)return t;var e=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"],n=t.split("-");return this.formatLanguageCode(e.indexOf(t)>-1?n[1].toLowerCase():n[0])},t.prototype.formatLanguageCode=function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=o(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=o(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=o(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t},t.prototype.isWhitelisted=function(t,e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist&&!e)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1},t.prototype.toResolveHierarchy=function(t,e){var n=this;"string"==typeof(e=e||this.options.fallbackLng||[])&&(e=[e]);var i=[],u=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];n.isWhitelisted(t,e)?i.push(t):n.logger.warn("rejecting non-whitelisted language code: "+t)};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&u(this.formatLanguageCode(t),!0),"currentOnly"!==this.options.load&&u(this.getLanguagePartFromCode(t))):"string"==typeof t&&u(this.formatLanguageCode(t)),e.forEach((function(t){i.indexOf(t)<0&&u(n.formatLanguageCode(t))})),i},t}();n.default=a},{"./logger":14}],7:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},u=r(t("./logger"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],s={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}};function l(){var t={};return a.forEach((function(e){e.lngs.forEach((function(n){return t[n]={numbers:e.nr,plurals:s[e.fc]}}))})),t}var c=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,t),this.languageUtils=e,this.options=n,this.logger=u.default.create("pluralResolver"),this.rules=l()}return t.prototype.addRule=function(t,e){this.rules[t]=e},t.prototype.getRule=function(t){return this.rules[this.languageUtils.getLanguagePartFromCode(t)]},t.prototype.needsPlural=function(t){var e=this.getRule(t);return!(e&&e.numbers.length<=1)},t.prototype.getSuffix=function(t,e){var n=this,u=this.getRule(t);if(!u)return this.logger.warn("no plural rule found for: "+t),"";var r=function(){if(1===u.numbers.length)return{v:""};var t=u.noAbs?u.plurals(e):u.plurals(Math.abs(e)),i=u.numbers[t];2===u.numbers.length&&1===u.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var r=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===n.options.compatibilityJSON?1===i?{v:""}:"number"==typeof i?{v:"_plural_"+i.toString()}:{v:r()}:"v2"===n.options.compatibilityJSON||2===u.numbers.length&&1===u.numbers[0]||2===u.numbers.length&&1===u.numbers[0]?{v:r()}:{v:n.options.prepend&&t.toString()?n.options.prepend+t.toString():t.toString()}}();return"object"===(void 0===r?"undefined":i(r))?r.v:void 0},t}();n.default=c},{"./logger":14}],8:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=a(t("./EventEmitter")),r=o(t("./utils"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var u=n[i],r=Object.getOwnPropertyDescriptor(e,u);r&&r.configurable&&void 0===t[u]&&Object.defineProperty(t,u,r)}return t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):s(t,e))}var D=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];l(this,e);var u=c(this,t.call(this));return u.data=n,u.options=i,u}return h(e,t),e.prototype.addNamespaces=function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)},e.prototype.removeNamespaces=function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)},e.prototype.getResource=function(t,e,n){var i=(arguments.length<=3||void 0===arguments[3]?{}:arguments[3]).keySeparator||this.options.keySeparator;void 0===i&&(i=".");var u=[t,e];return n&&"string"!=typeof n&&(u=u.concat(n)),n&&"string"==typeof n&&(u=u.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(u=t.split(".")),r.getPath(this.data,u)},e.prototype.addResource=function(t,e,n,i){var u=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],o=this.options.keySeparator;void 0===o&&(o=".");var a=[t,e];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(i=e,e=(a=t.split("."))[1]),this.addNamespaces(e),r.setPath(this.data,a,i),u.silent||this.emit("added",t,e,n,i)},e.prototype.addResources=function(t,e,n){for(var i in n)"string"==typeof n[i]&&this.addResource(t,e,i,n[i],{silent:!0});this.emit("added",t,e,n)},e.prototype.addResourceBundle=function(t,e,n,u,o){var a=[t,e];t.indexOf(".")>-1&&(u=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var s=r.getPath(this.data,a)||{};u?r.deepExtend(s,n,o):s=i({},s,n),r.setPath(this.data,a,s),this.emit("added",t,e,n)},e.prototype.removeResourceBundle=function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)},e.prototype.hasResourceBundle=function(t,e){return void 0!==this.getResource(t,e)},e.prototype.getResourceBundle=function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?i({},this.getResource(t,e)):this.getResource(t,e)},e.prototype.toJSON=function(){return this.data},e}(u.default);n.default=D},{"./EventEmitter":4,"./utils":16}],9:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=h(t("./logger")),o=h(t("./EventEmitter")),a=h(t("./postProcessor")),s=c(t("./compatibility/v1")),l=c(t("./utils"));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}function D(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var u=n[i],r=Object.getOwnPropertyDescriptor(e,u);r&&r.configurable&&void 0===t[u]&&Object.defineProperty(t,u,r)}return t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):D(t,e))}var g=function(t){function e(n){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];d(this,e);var u=f(this,t.call(this));return l.copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],n,u),u.options=i,u.logger=r.default.create("translator"),u}return p(e,t),e.prototype.changeLanguage=function(t){t&&(this.language=t)},e.prototype.exists=function(t){var e=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(e=s.convertTOptions(e)),void 0!==this.resolve(t,e)},e.prototype.extractFromKey=function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var i=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var u=t.split(n);i=u[0],t=u[1]}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}},e.prototype.translate=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!==(void 0===e?"undefined":u(e))?e=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(e=s.convertTOptions(e)),null==t||""===t)return"";"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=[t]);var n=e.lng||this.language;if(n&&"cimode"===n.toLowerCase())return t[t.length-1];var r=e.keySeparator||this.options.keySeparator||".",o=this.extractFromKey(t[t.length-1],e),a=o.key,l=o.namespaces,c=l[l.length-1],h=this.resolve(t,e),D=Object.prototype.toString.apply(h),d=["[object Number]","[object Function]","[object RegExp]"],f=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays;if(h&&"string"!=typeof h&&d.indexOf(D)<0&&(!f||"[object Array]"!==D)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(a,h,e):"key '"+a+" ("+this.language+")' returned an object instead of string.";var p="[object Array]"===D?[]:{};for(var g in h)p[g]=this.translate(""+a+r+g,i({joinArrays:!1,ns:l},e));h=p}else if(f&&"[object Array]"===D)(h=h.join(f))&&(h=this.extendTranslation(h,a,e));else{var E=!1,C=!1;if(this.isValidLookup(h)||void 0===e.defaultValue||(E=!0,h=e.defaultValue),this.isValidLookup(h)||(C=!0,h=a),C||E){this.logger.log("missingKey",n,c,a,h);var v=[];if("fallback"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var F=0;F<this.options.fallbackLng.length;F++)v.push(this.options.fallbackLng[F]);else"all"===this.options.saveMissingTo?v=this.languageUtils.toResolveHierarchy(e.lng||this.language):v.push(e.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(v,c,a,h):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(v,c,a,h)),this.emit("missingKey",v,c,a,h)}h=this.extendTranslation(h,a,e),C&&h===a&&this.options.appendNamespaceToMissingKey&&(h=c+":"+a),C&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(h))}return h},e.prototype.extendTranslation=function(t,e,n){var u=this;n.interpolation&&this.interpolator.init(n);var r=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(r=i({},this.options.interpolation.defaultVariables,r)),t=this.interpolator.interpolate(t,r,this.language),t=this.interpolator.nest(t,(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.translate.apply(u,e)}),n),n.interpolation&&this.interpolator.reset();var o=n.postProcess||this.options.postProcess,s="string"==typeof o?[o]:o;return void 0!==t&&s&&s.length&&!1!==n.applyPostProcessor&&(t=a.default.handle(s,t,e,n,this)),t},e.prototype.resolve=function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=void 0;return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!e.isValidLookup(i)){var u=e.extractFromKey(t,n),r=u.key,o=u.namespaces;e.options.fallbackNS&&(o=o.concat(e.options.fallbackNS));var a=void 0!==n.count&&"string"!=typeof n.count,s=void 0!==n.context&&"string"==typeof n.context&&""!==n.context,l=n.lngs?n.lngs:e.languageUtils.toResolveHierarchy(n.lng||e.language);o.forEach((function(t){e.isValidLookup(i)||l.forEach((function(u){if(!e.isValidLookup(i)){var o=r,l=[o],c=void 0;a&&(c=e.pluralResolver.getSuffix(u,n.count)),a&&s&&l.push(o+c),s&&l.push(o+=""+e.options.contextSeparator+n.context),a&&l.push(o+=c);for(var h=void 0;h=l.pop();)e.isValidLookup(i)||(i=e.getResource(u,t,h,n))}}))}))}})),i},e.prototype.isValidLookup=function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)},e.prototype.getResource=function(t,e,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(t,e,n,i)},e}(o.default);n.default=g},{"./EventEmitter":4,"./compatibility/v1":10,"./logger":14,"./postProcessor":15,"./utils":16}],10:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertAPIOptions=o,n.convertJSONOptions=a,n.convertTOptions=s,n.appendBackwardsAPI=l;var i=u(t("../logger"));function u(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.interpolation={unescapeSuffix:"HTML"},t.interpolation.prefix=t.interpolationPrefix||"__",t.interpolation.suffix=t.interpolationSuffix||"__",t.interpolation.escapeValue=t.escapeInterpolation||!1,t.interpolation.nestingPrefix=t.reusePrefix||"$t(",t.interpolation.nestingSuffix=t.reuseSuffix||")",t}function o(t){return t.resStore&&(t.resources=t.resStore),t.ns&&t.ns.defaultNs?(t.defaultNS=t.ns.defaultNs,t.ns=t.ns.namespaces):t.defaultNS=t.ns||"translation",t.fallbackToDefaultNS&&t.defaultNS&&(t.fallbackNS=t.defaultNS),t.saveMissing=t.sendMissing,t.saveMissingTo=t.sendMissingTo||"current",t.returnNull=!t.fallbackOnNull,t.returnEmptyString=!t.fallbackOnEmpty,t.returnObjects=t.returnObjectTrees,t.joinArrays="\n",t.returnedObjectHandler=t.objectTreeKeyHandler,t.parseMissingKeyHandler=t.parseMissingKey,t.appendNamespaceToMissingKey=!0,t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,"sprintf"===t.shortcutFunction&&(t.overloadTranslationOptionHandler=function(t){for(var e=[],n=1;n<t.length;n++)e.push(t[n]);return{postProcess:"sprintf",sprintf:e}}),t.whitelist=t.lngWhitelist,t.preload=t.preload,"current"===t.load&&(t.load="currentOnly"),"unspecific"===t.load&&(t.load="languageOnly"),t.backend=t.backend||{},t.backend.loadPath=t.resGetPath||"locales/__lng__/__ns__.json",t.backend.addPath=t.resPostPath||"locales/add/__lng__/__ns__",t.backend.allowMultiLoading=t.dynamicLoad,t.cache=t.cache||{},t.cache.prefix="res_",t.cache.expirationTime=6048e5,t.cache.enabled=!!t.useLocalStorage,(t=r(t)).defaultVariables&&(t.interpolation.defaultVariables=t.defaultVariables),t}function a(t){return(t=r(t)).joinArrays="\n",t}function s(t){return(t.interpolationPrefix||t.interpolationSuffix||t.escapeInterpolation)&&(t=r(t)),t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,t.returnObjects=t.returnObjectTrees,t}function l(t){t.lng=function(){return i.default.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),t.services.languageUtils.toResolveHierarchy(t.language)[0]},t.preload=function(e,n){i.default.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),t.loadLanguages(e,n)},t.setLng=function(e,n,u){if(i.default.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof n&&(u=n,n={}),n||(n={}),!0===n.fixLng&&u)return u(null,t.getFixedT(e));t.changeLanguage(e,u)},t.addPostProcessor=function(e,n){i.default.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),t.use({type:"postProcessor",name:e,process:n})}}},{"../logger":14}],11:[function(t,e,n){function i(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(t){return{defaultValue:t[1]}},interpolation:{escapeValue:!0,format:function(t,e,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function u(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&t.whitelist.push("cimode"),t}Object.defineProperty(n,"__esModule",{value:!0}),n.get=i,n.transformOptions=u},{}],12:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=C(t("./logger")),o=C(t("./EventEmitter")),a=C(t("./ResourceStore")),s=C(t("./Translator")),l=C(t("./LanguageUtils")),c=C(t("./PluralResolver")),h=C(t("./Interpolator")),D=C(t("./BackendConnector")),d=C(t("./CacheConnector")),f=t("./defaults"),p=C(t("./postProcessor")),g=E(t("./compatibility/v1"));function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function v(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var u=n[i],r=Object.getOwnPropertyDescriptor(e,u);r&&r.configurable&&void 0===t[u]&&Object.defineProperty(t,u,r)}return t}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):v(t,e))}var b=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments[1];F(this,e);var u=m(this,t.call(this));return u.options=(0,f.transformOptions)(n),u.services={},u.logger=r.default,u.modules={},i&&!u.isInitialized&&u.init(n,i),u}return A(e,t),e.prototype.init=function(t,e){var n=this;function i(t){if(t)return"function"==typeof t?new t:t}if("function"==typeof t&&(e=t,t={}),t||(t={}),"v1"===t.compatibilityAPI?this.options=u({},(0,f.get)(),(0,f.transformOptions)(g.convertAPIOptions(t)),{}):"v1"===t.compatibilityJSON?this.options=u({},(0,f.get)(),(0,f.transformOptions)(g.convertJSONOptions(t)),{}):this.options=u({},(0,f.get)(),this.options,(0,f.transformOptions)(t)),e||(e=function(){}),!this.options.isClone){this.modules.logger?r.default.init(i(this.modules.logger),this.options):r.default.init(null,this.options);var o=new l.default(this.options);this.store=new a.default(this.options.resources,this.options);var p=this.services;p.logger=r.default,p.resourceStore=this.store,p.resourceStore.on("added removed",(function(t,e){p.cacheConnector.save()})),p.languageUtils=o,p.pluralResolver=new c.default(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),p.interpolator=new h.default(this.options),p.backendConnector=new D.default(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),u=1;u<e;u++)i[u-1]=arguments[u];n.emit.apply(n,[t].concat(i))})),p.backendConnector.on("loaded",(function(t){p.cacheConnector.save()})),p.cacheConnector=new d.default(i(this.modules.cache),p.resourceStore,p,this.options),p.cacheConnector.on("*",(function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),u=1;u<e;u++)i[u-1]=arguments[u];n.emit.apply(n,[t].concat(i))})),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init(p,this.options.detection,this.options)),this.translator=new s.default(this.services,this.options),this.translator.on("*",(function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),u=1;u<e;u++)i[u-1]=arguments[u];n.emit.apply(n,[t].concat(i))}))}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"].forEach((function(t){n[t]=function(){return this.store[t].apply(this.store,arguments)}})),"v1"===this.options.compatibilityAPI&&g.appendBackwardsAPI(this);var E=function(){n.changeLanguage(n.options.lng,(function(t,i){n.emit("initialized",n.options),n.logger.log("initialized",n.options),e(t,i)}))};return this.options.resources||!this.options.initImmediate?E():setTimeout(E,0),this},e.prototype.loadResources=function(t){var e=this;if(t||(t=function(){}),this.options.resources)t(null);else{var n=function(){if(e.language&&"cimode"===e.language.toLowerCase())return{v:t()};var n=[],i=function(t){e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){n.indexOf(t)<0&&n.push(t)}))};i(e.language),e.options.preload&&e.options.preload.forEach((function(t){i(t)})),e.services.cacheConnector.load(n,e.options.ns,(function(){e.services.backendConnector.load(n,e.options.ns,t)}))}();if("object"===(void 0===n?"undefined":i(n)))return n.v}},e.prototype.reloadResources=function(t,e){t||(t=this.languages),e||(e=this.options.ns),this.services.backendConnector.reload(t,e)},e.prototype.use=function(t){return"backend"===t.type&&(this.modules.backend=t),"cache"===t.type&&(this.modules.cache=t),("logger"===t.type||t.log&&t.warn&&t.warn)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"postProcessor"===t.type&&p.default.addPostProcessor(t),this},e.prototype.changeLanguage=function(t,e){var n=this,i=function(i){t&&(n.emit("languageChanged",t),n.logger.log("languageChanged",t)),e&&e(i,(function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.t.apply(n,e)}))};!t&&this.services.languageDetector&&(t=this.services.languageDetector.detect()),t&&(this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.translator.changeLanguage(t),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(t)),this.loadResources((function(t){i(t)}))},e.prototype.getFixedT=function(t,e){var n=this,i=function t(e,i){return(i=i||{}).lng=i.lng||t.lng,i.ns=i.ns||t.ns,n.t(e,i)};return i.lng=t,i.ns=e,i},e.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},e.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},e.prototype.setDefaultNamespace=function(t){this.options.defaultNS=t},e.prototype.loadNamespaces=function(t,e){var n=this;if(!this.options.ns)return e&&e();"string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources(e)},e.prototype.loadLanguages=function(t,e){"string"==typeof t&&(t=[t]);var n=this.options.preload||[],i=t.filter((function(t){return n.indexOf(t)<0}));if(!i.length)return e();this.options.preload=n.concat(i),this.loadResources(e)},e.prototype.dir=function(t){return t||(t=this.language),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr":"rtl"},e.prototype.createInstance=function(){return new e(arguments.length<=0||void 0===arguments[0]?{}:arguments[0],arguments[1])},e.prototype.cloneInstance=function(){var t=this,n=arguments[1],i=new e(u({},arguments.length<=0||void 0===arguments[0]?{}:arguments[0],this.options,{isClone:!0}),n);return["store","translator","services","language"].forEach((function(e){i[e]=t[e]})),i},e}(o.default);n.default=new b},{"./BackendConnector":2,"./CacheConnector":3,"./EventEmitter":4,"./Interpolator":5,"./LanguageUtils":6,"./PluralResolver":7,"./ResourceStore":8,"./Translator":9,"./compatibility/v1":10,"./defaults":11,"./logger":14,"./postProcessor":15}],13:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=u(t("./i18next"));function u(t){return t&&t.__esModule?t:{default:t}}n.default=i.default},{"./i18next":12}],14:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r={type:"logger",log:function(t){this._output("log",t)},warn:function(t){this._output("warn",t)},error:function(t){this._output("error",t)},_output:function(t,e){console&&console[t]&&console[t].apply(console,Array.prototype.slice.call(e))}},o=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];u(this,t),this.subs=[],this.init(e,n)}return t.prototype.init=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=e.prefix||"i18next:",this.logger=t||r,this.options=e,this.debug=!1!==e.debug},t.prototype.setDebug=function(t){this.debug=t,this.subs.forEach((function(e){e.setDebug(t)}))},t.prototype.log=function(){this.forward(arguments,"log","",!0)},t.prototype.warn=function(){this.forward(arguments,"warn","",!0)},t.prototype.error=function(){this.forward(arguments,"error","")},t.prototype.deprecate=function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)},t.prototype.forward=function(t,e,n,i){i&&!this.debug||("string"==typeof t[0]&&(t[0]=n+this.prefix+" "+t[0]),this.logger[e](t))},t.prototype.create=function(e){var n=new t(this.logger,i({prefix:this.prefix+":"+e+":"},this.options));return this.subs.push(n),n},t}();n.default=new o},{}],15:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,i,u){var r=this;return t.forEach((function(t){r.processors[t]&&(e=r.processors[t].process(e,n,i,u))})),e}}},{}],16:[function(t,e,n){function i(t){return null==t?"":""+t}function u(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function r(t,e,n){function i(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}for(var u="string"!=typeof e?[].concat(e):e.split(".");u.length>1;){if(!t)return{};var r=i(u.shift());!t[r]&&n&&(t[r]=new n),t=t[r]}return t?{obj:t,k:i(u.shift())}:{}}function o(t,e,n){var i=r(t,e,Object);i.obj[i.k]=n}function a(t,e,n,i){var u=r(t,e,Object),o=u.obj,a=u.k;o[a]=o[a]||[],i&&(o[a]=o[a].concat(n)),i||o[a].push(n)}function s(t,e){var n=r(t,e),i=n.obj,u=n.k;if(i)return i[u]}function l(t,e,n){for(var i in e)i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):l(t[i],e[i],n):t[i]=e[i];return t}function c(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Object.defineProperty(n,"__esModule",{value:!0}),n.makeString=i,n.copy=u,n.setPath=o,n.pushPath=a,n.getPath=s,n.deepExtend=l,n.regexEscape=c,n.escape=D;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function D(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return h[t]})):t}},{}],17:[function(t,e,n){e.exports=t("./dist/commonjs/index.js").default},{"./dist/commonjs/index.js":13}]},{},[1])(1)}(a);var s=a.exports,l=e(s),c={},h=-1,D=1,d=0;function f(t,e,n,i){if(t===e)return t?[[d,t]]:[];if(null!=n){var u=function(t,e,n){var i="number"==typeof n?{index:n,length:0}:n.oldRange,u="number"==typeof n?null:n.newRange,r=t.length,o=e.length;if(0===i.length&&(null===u||0===u.length)){var a=i.index,s=t.slice(0,a),l=t.slice(a),c=u?u.index:null,h=a+o-r;if((null===c||c===h)&&!(h<0||h>o)){var D=e.slice(0,h);if((p=e.slice(h))===l){var d=Math.min(a,h);if((E=s.slice(0,d))===(v=D.slice(0,d)))return b(E,s.slice(d),D.slice(d),l)}}if(null===c||c===a){var f=a,p=(D=e.slice(0,f),e.slice(f));if(D===s){var g=Math.min(r-f,o-f);if((C=l.slice(l.length-g))===(F=p.slice(p.length-g)))return b(s,l.slice(0,l.length-g),p.slice(0,p.length-g),C)}}}if(i.length>0&&u&&0===u.length){var E=t.slice(0,i.index),C=t.slice(i.index+i.length);if(!(o<(d=E.length)+(g=C.length))){var v=e.slice(0,d),F=e.slice(o-g);if(E===v&&C===F)return b(E,t.slice(d,r-g),e.slice(d,o-g),C)}}return null}(t,e,n);if(u)return u}var r=g(t,e),o=t.substring(0,r);r=E(t=t.substring(r),e=e.substring(r));var a=t.substring(t.length-r),s=function(t,e){var n;if(!t)return[[D,e]];if(!e)return[[h,t]];var i=t.length>e.length?t:e,u=t.length>e.length?e:t,r=i.indexOf(u);if(-1!==r)return n=[[D,i.substring(0,r)],[d,u],[D,i.substring(r+u.length)]],t.length>e.length&&(n[0][0]=n[2][0]=h),n;if(1===u.length)return[[h,t],[D,e]];var o=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function u(t,e,n){for(var i,u,r,o,a=t.substring(n,n+Math.floor(t.length/4)),s=-1,l="";-1!==(s=e.indexOf(a,s+1));){var c=g(t.substring(n),e.substring(s)),h=E(t.substring(0,n),e.substring(0,s));l.length<h+c&&(l=e.substring(s-h,s)+e.substring(s,s+c),i=t.substring(0,n-h),u=t.substring(n+c),r=e.substring(0,s-h),o=e.substring(s+c))}return 2*l.length>=t.length?[i,u,r,o,l]:null}var r,o,a,s,l,c=u(n,i,Math.ceil(n.length/4)),h=u(n,i,Math.ceil(n.length/2));if(!c&&!h)return null;r=h?c&&c[4].length>h[4].length?c:h:c;t.length>e.length?(o=r[0],a=r[1],s=r[2],l=r[3]):(s=r[0],l=r[1],o=r[2],a=r[3]);var D=r[4];return[o,a,s,l,D]}(t,e);if(o){var a=o[0],s=o[1],l=o[2],c=o[3],C=o[4],v=f(a,l),F=f(s,c);return v.concat([[d,C]],F)}return function(t,e){for(var n=t.length,i=e.length,u=Math.ceil((n+i)/2),r=u,o=2*u,a=new Array(o),s=new Array(o),l=0;l<o;l++)a[l]=-1,s[l]=-1;a[r+1]=0,s[r+1]=0;for(var c=n-i,d=c%2!=0,f=0,g=0,E=0,C=0,v=0;v<u;v++){for(var F=-v+f;F<=v-g;F+=2){for(var m=r+F,A=(S=F===-v||F!==v&&a[m-1]<a[m+1]?a[m+1]:a[m-1]+1)-F;S<n&&A<i&&t.charAt(S)===e.charAt(A);)S++,A++;if(a[m]=S,S>n)g+=2;else if(A>i)f+=2;else if(d){if((B=r+c-F)>=0&&B<o&&-1!==s[B])if(S>=(y=n-s[B]))return p(t,e,S,A)}}for(var b=-v+E;b<=v-C;b+=2){for(var y,B=r+b,w=(y=b===-v||b!==v&&s[B-1]<s[B+1]?s[B+1]:s[B-1]+1)-b;y<n&&w<i&&t.charAt(n-y-1)===e.charAt(i-w-1);)y++,w++;if(s[B]=y,y>n)C+=2;else if(w>i)E+=2;else if(!d){if((m=r+c-b)>=0&&m<o&&-1!==a[m]){var S;A=r+(S=a[m])-m;if(S>=(y=n-y))return p(t,e,S,A)}}}}return[[h,t],[D,e]]}(t,e)}(t=t.substring(0,t.length-r),e=e.substring(0,e.length-r));return o&&s.unshift([d,o]),a&&s.push([d,a]),C(s,i),s}function p(t,e,n,i){var u=t.substring(0,n),r=e.substring(0,i),o=t.substring(n),a=e.substring(i),s=f(u,r),l=f(o,a);return s.concat(l)}function g(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),u=i,r=0;n<u;)t.substring(r,u)==e.substring(r,u)?r=n=u:i=u,u=Math.floor((i-n)/2+n);return v(t.charCodeAt(u-1))&&u--,u}function E(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,i=Math.min(t.length,e.length),u=i,r=0;n<u;)t.substring(t.length-u,t.length-r)==e.substring(e.length-u,e.length-r)?r=n=u:i=u,u=Math.floor((i-n)/2+n);return F(t.charCodeAt(t.length-u))&&u--,u}function C(t,e){t.push([d,""]);for(var n,i=0,u=0,r=0,o="",a="";i<t.length;)if(i<t.length-1&&!t[i][1])t.splice(i,1);else switch(t[i][0]){case D:r++,a+=t[i][1],i++;break;case h:u++,o+=t[i][1],i++;break;case d:var s=i-r-u-1;if(e){if(s>=0&&A(t[s][1])){var l=t[s][1].slice(-1);if(t[s][1]=t[s][1].slice(0,-1),o=l+o,a=l+a,!t[s][1]){t.splice(s,1),i--;var c=s-1;t[c]&&t[c][0]===D&&(r++,a=t[c][1]+a,c--),t[c]&&t[c][0]===h&&(u++,o=t[c][1]+o,c--),s=c}}if(m(t[i][1])){l=t[i][1].charAt(0);t[i][1]=t[i][1].slice(1),o+=l,a+=l}}if(i<t.length-1&&!t[i][1]){t.splice(i,1);break}if(o.length>0||a.length>0){o.length>0&&a.length>0&&(0!==(n=g(a,o))&&(s>=0?t[s][1]+=a.substring(0,n):(t.splice(0,0,[d,a.substring(0,n)]),i++),a=a.substring(n),o=o.substring(n)),0!==(n=E(a,o))&&(t[i][1]=a.substring(a.length-n)+t[i][1],a=a.substring(0,a.length-n),o=o.substring(0,o.length-n)));var f=r+u;0===o.length&&0===a.length?(t.splice(i-f,f),i-=f):0===o.length?(t.splice(i-f,f,[D,a]),i=i-f+1):0===a.length?(t.splice(i-f,f,[h,o]),i=i-f+1):(t.splice(i-f,f,[h,o],[D,a]),i=i-f+2)}0!==i&&t[i-1][0]===d?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,r=0,u=0,o="",a=""}""===t[t.length-1][1]&&t.pop();var p=!1;for(i=1;i<t.length-1;)t[i-1][0]===d&&t[i+1][0]===d&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)===t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),p=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),p=!0)),i++;p&&C(t,e)}function v(t){return t>=55296&&t<=56319}function F(t){return t>=56320&&t<=57343}function m(t){return F(t.charCodeAt(0))}function A(t){return v(t.charCodeAt(t.length-1))}function b(t,e,n,i){return A(t)||m(i)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[d,t],[h,e],[D,n],[d,i]])}function y(t,e,n){return f(t,e,n,!0)}y.INSERT=D,y.DELETE=h,y.EQUAL=d;var B=y;!function(t){function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n,i,u,r=e(B);function o(e){t.isDebug=e}function a(e){switch(e){case"ltr":return t.PageProgression.LTR;case"rtl":return t.PageProgression.RTL;default:throw new Error("unknown PageProgression: "+e)}}function s(t){var e=Array.from(t),n=null;return e[0]instanceof Error&&(n=e.shift()),{error:n,messages:e}}function l(t){var e=t.error,n=e&&(e.frameTrace||e.stack),i=[].concat(t.messages);return e&&(i.length>0&&(i=i.concat(["\n"])),i=i.concat([e.toString()]),n&&(i=i.concat(["\n"]).concat(n))),i}t.isDebug=!1,t.PageProgression=void 0,function(t){t.LTR="ltr",t.RTL="rtl"}(t.PageProgression||(t.PageProgression={})),t.PageSide=void 0,(n=t.PageSide||(t.PageSide={})).LEFT="left",n.RIGHT="right",t.ReadyState=void 0,(i=t.ReadyState||(t.ReadyState={})).LOADING="loading",i.INTERACTIVE="interactive",i.COMPLETE="complete",function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR"}(u||(u={}));var c,h=new(function(){function t(t){this.opt_console=void 0,this.listeners={},this.opt_console=t}var e=t.prototype;return e.consoleDebug=function(t){var e,n,i;this.opt_console?this.opt_console.debug?(e=this.opt_console).debug.apply(e,t):(n=this.opt_console).log.apply(n,t):(i=console).debug.apply(i,t)},e.consoleInfo=function(t){var e,n,i;this.opt_console?this.opt_console.info?(e=this.opt_console).info.apply(e,t):(n=this.opt_console).log.apply(n,t):(i=console).info.apply(i,t)},e.consoleWarn=function(t){var e,n,i;this.opt_console?this.opt_console.warn?(e=this.opt_console).warn.apply(e,t):(n=this.opt_console).log.apply(n,t):(i=console).warn.apply(i,t)},e.consoleError=function(t){var e,n,i;this.opt_console?this.opt_console.error?(e=this.opt_console).error.apply(e,t):(n=this.opt_console).log.apply(n,t):(i=console).error.apply(i,t)},e.triggerListeners=function(t,e){var n=this.listeners[t];n&&n(e)},e.addListener=function(t,e){this.listeners[t]=e},e.debug=function(){var t=s(arguments);this.consoleDebug(l(t)),this.triggerListeners(u.DEBUG,t)},e.info=function(){var t=s(arguments);this.consoleInfo(l(t)),this.triggerListeners(u.INFO,t)},e.warn=function(){var t=s(arguments);this.consoleWarn(l(t)),this.triggerListeners(u.WARN,t)},e.error=function(){var t=s(arguments);this.consoleError(l(t)),this.triggerListeners(u.ERROR,t)},t}());t.HOOKS=void 0,(c=t.HOOKS||(t.HOOKS={})).SIMPLE_PROPERTY="SIMPLE_PROPERTY",c.PREPROCESS_SINGLE_DOCUMENT="PREPROCESS_SINGLE_DOCUMENT",c.PREPROCESS_TEXT_CONTENT="PREPROCESS_TEXT_CONTENT",c.PREPROCESS_ELEMENT_STYLE="PREPROCESS_ELEMENT_STYLE",c.POLYFILLED_INHERITED_PROPS="POLYFILLED_INHERITED_PROPS",c.CONFIGURATION="CONFIGURATION",c.RESOLVE_TEXT_NODE_BREAKER="RESOLVE_TEXT_NODE_BREAKER",c.RESOLVE_FORMATTING_CONTEXT="RESOLVE_FORMATTING_CONTEXT",c.RESOLVE_LAYOUT_PROCESSOR="RESOLVE_LAYOUT_PROCESSOR",c.POST_LAYOUT_BLOCK="POST_LAYOUT_BLOCK";var D={};function d(e,n,i){if(t.HOOKS[e]){var u=D[e];u||(u=D[e]=[]),i?u.unshift(n):u.push(n)}else h.warn(new Error("Skipping unknown plugin hook '"+e+"'."))}function f(e,n){if(t.HOOKS[e]){var i=D[e];if(i){var u=i.indexOf(n);u>=0&&i.splice(u,1)}}else h.warn(new Error("Ignoring unknown plugin hook '"+e+"'."))}function p(t){return D[t]||[]}var g={registerHook:d,removeHook:f},E=function(){function t(t){this.performanceInstance=void 0,this.timestamps={},this.registerTiming=void 0,this.registerStartTiming=void 0,this.registerEndTiming=void 0,this.performanceInstance=t,this.registerTiming=C,this.registerStartTiming=this.registerStartTiming=C,this.registerEndTiming=this.registerEndTiming=C}var e=t.prototype;return e.forceRegisterStartTiming=function(t,e){v.call(this,t,"start",e)},e.forceRegisterEndTiming=function(t,e){v.call(this,t,"end",e)},e.printTimings=function(){var t=this.timestamps,e="";Object.keys(t).forEach((function(n){for(var i=t[n],u=i.length,r=0;r<u;r++){var o=i[r];e+=n,u>1&&(e+="("+r+")"),e+=" => start: "+o.start+", end: "+o.end+", duration: "+(o.end-o.start)+"\n"}})),h.info(e)},e.disable=function(){this.registerTiming=C,this.registerStartTiming=this.registerStartTiming=C,this.registerEndTiming=this.registerEndTiming=C},e.enable=function(){this.registerTiming=v,this.registerStartTiming=this.registerStartTiming=F,this.registerEndTiming=this.registerEndTiming=m},e.isEnabled=function(){return this.registerStartTiming===F},t}();function C(){}function v(t,e,n){n||(n=this.performanceInstance.now());var i,u=this.timestamps[t];u||(u=this.timestamps[t]=[]);for(var r=u.length-1;r>=0&&(!(i=u[r])||i[e]);r--)i=null;i||u.push(i={}),i[e]=n}function F(t,e){this.registerTiming(t,"start",e)}function m(t,e){this.registerTiming(t,"end",e)}var A={now:Date.now},b=new E(window&&window.performance||A);b.forceRegisterStartTiming("load_vivliostyle");var y={profiler:{registerStartTiming:b.registerStartTiming,registerEndTiming:b.registerEndTiming,printTimings:b.printTimings,disable:b.disable,enable:b.enable}};function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,"symbol"==typeof(u=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key))?u:String(u),i)}var u}function S(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,T(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function I(t,e,n){return I=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var u=new(Function.bind.apply(t,i));return n&&T(u,n.prototype),u},I.apply(null,arguments)}function P(t){var e="function"==typeof Map?new Map:void 0;return P=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return I(t,arguments,x(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),T(n,t)},P(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var L=/^(?:[\t-\r -#%-\*,-\/:;\?@\[-\]_\{\}\xA0\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u0300-\u036F\u037E\u0387\u0483-\u0487\u055A-\u055F\u0589\u058A\u0591-\u05C7\u05F3\u05F4\u0609\u060A\u060C\u060D\u0610-\u061B\u061D-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0700-\u070D\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F7-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0830-\u083E\u0859-\u085B\u085E\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0965\u0970\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FD\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A76\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF0\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C77\u0C81\u0C84\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0DF4\u0E31\u0E34-\u0E3A\u0E47-\u0E4F\u0E5A\u0E5B\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F04-\u0F12\u0F14\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u0FD0-\u0FD4\u0FD9\u0FDA\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u104A-\u104F\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u10FB\u135D-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1712-\u1714\u1732\u1733\u1735\u1736\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D6\u17D8-\u17DA\u17DD\u1800-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1944\u1945\u1A17\u1A18\u1A1B\u1A1E\u1A1F\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B5A-\u1B60\u1B6B-\u1B73\u1B7D\u1B7E\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1BFC-\u1BFF\u1C2C-\u1C33\u1C36\u1C37\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD0-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CEF-\u2CF1\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2D7F\u2DE0-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3000-\u3003\u3008-\u3011\u3014-\u301F\u302A-\u302D\u3030\u303D\u3099\u309A\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA66F\uA673-\uA67E\uA69E\uA69F\uA6F0-\uA6F7\uA802\uA806\uA80B\uA825\uA826\uA82C\uA874-\uA877\uA8C4\uA8C5\uA8CE\uA8CF\uA8E0-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF\uA926-\uA92F\uA947-\uA951\uA95F\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9C1-\uA9CD\uA9DE\uA9DF\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA5C-\uAA5F\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAADE\uAADF\uAAEC\uAAED\uAAF0\uAAF1\uAAF6\uABE5\uABE8\uABEB\uABED\uFB1E\uFD3E\uFD3F\uFE00-\uFE19\uFE20-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFEFF\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDDFD\uDEE0\uDF76-\uDF7A\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDE50-\uDE58\uDE7F\uDEE5\uDEE6\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD24-\uDD27\uDEAB-\uDEAD\uDEFD-\uDEFF\uDF46-\uDF50\uDF55-\uDF59\uDF82-\uDF89]|\uD804[\uDC01\uDC38-\uDC4D\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9-\uDCBC\uDCBE-\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD40-\uDD43\uDD73-\uDD75\uDD80\uDD81\uDDB6-\uDDBE\uDDC5-\uDDCD\uDDCF\uDDDB\uDDDD-\uDDDF\uDE2F-\uDE31\uDE34\uDE36-\uDE3E\uDE41\uDEA9\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDC5E\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDCC6\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF-\uDDD7\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F-\uDE43\uDE60-\uDE6C\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDEB9\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B\uDF3C-\uDF3E]|\uD806[\uDC2F-\uDC37\uDC39-\uDC3B\uDD3B\uDD3C\uDD3E\uDD43-\uDD46\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDDE2\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC41-\uDC45\uDC70\uDC71\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDEF7\uDEF8\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDE6E\uDE6F\uDEF0-\uDEF5\uDF30-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDF4F\uDF8F-\uDF92\uDFE2\uDFE4]|\uD82F[\uDC9D-\uDC9F]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE87-\uDE8B\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A\uDD5E\uDD5F]|\uDB40[\uDD00-\uDDEF])*(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])(?:[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*)*/,_="data-adapt-eloff",M={};function U(t){return JSON.parse(t)}function V(t){var e=t.match(/^([^#]*)/);return e?e[1]:t}var z=window.location.href;function H(t){z=t}var G,j=window.location.href;function W(t){j=t}function X(t,e){if(/^data:/i.test(e))return t||e;if(!e||t.match(/^\w{2,}:/))return t.toLowerCase().match("^javascript:")?"#":(t.match(/^\w{2,}:\/\/[^\/]+$/)&&(t+="/"),t);var n;if(e.match(/^\w{2,}:\/\/[^\/]+$/)&&(e+="/"),t.match(/^\/\//))return(n=e.match(/^(\w{2,}:)\/\//))?n[1]+t:t;if(t.match(/^\//))return(n=e.match(/^(\w{2,}:\/\/[^\/]+)\//))?n[1]+t:t;if(t.match(/^\.(\/|$)/)&&(t=t.substr(2)),e=function(t){var e=t.match(/^([^#?]*)/);return e?e[1]:t}(e),t.match(/^#/))return e+t;var i=e.lastIndexOf("/");if(i<0)return t;var u=e.substr(0,i+1)+t,r="";for((n=u.match(/^([^?#]*)([?#].*)$/))&&(u=n[1],r=n[2]);!((i=u.indexOf("/../"))<=0);){var o=u.lastIndexOf("/",i-1);if(o<=0)break;u=u.substr(0,o)+u.substr(i+3)}return u.replace(/\/(\.\/)+/g,"/")+r}function $(t){var e;return(e=/^(https?:)\/\/github\.com\/([^/]+\/[^/]+)\/(blob\/|tree\/|raw\/)?(.*)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/"+e[2]+"/"+(e[3]?"":"master/")+e[4]:(e=/^(https?:)\/\/www\.aozora\.gr\.jp\/(cards\/[^/]+\/files\/[^/.]+\.html)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/aozorabunko/aozorabunko/master/"+e[2]:(e=/^(https?:)\/\/gist\.github\.com\/([^/]+\/\w+)(\/|$)(raw(\/|$))?(.*)$/.exec(t))?t=e[1]+"//gist.githubusercontent.com/"+e[2]+"/raw/"+e[6]:(e=/^(https?:)\/\/(?:[^/.]+\.)?jsbin\.com\/(?!(?:blog|help)\b)(\w+)((\/\d+)?).*$/.exec(t))&&(t=e[1]+"//output.jsbin.com/"+e[2]+e[3]+"/"),t}function K(t){return null==t?t:t.toString()}!function(t){t.epub="http://www.idpf.org/2007/ops",t.EV="http://www.w3.org/2001/xml-events",t.MATHML="http://www.w3.org/1998/Math/MathML",t.XML="http://www.w3.org/XML/1998/namespace",t.XHTML="http://www.w3.org/1999/xhtml",t.XLINK="http://www.w3.org/1999/xlink",t.SHADOW="http://www.pyroxy.com/ns/shadow",t.SVG="http://www.w3.org/2000/svg",t.DC="http://purl.org/dc/elements/1.1/"}(G||(G={}));var q=function(){function t(){this.queue=[null]}var e=t.prototype;return e.length=function(){return this.queue.length-1},e.add=function(t){for(var e=this.queue.length;e>1;){var n=Math.floor(e/2),i=this.queue[n];if(i.compare(t)>0)return void(this.queue[e]=t);this.queue[e]=i,e=n}this.queue[1]=t},e.peek=function(){return this.queue[1]},e.remove=function(){var t=this.queue[1],e=this.queue.pop(),n=this.queue.length;if(n>1){for(var i=1;;){var u=2*i;if(u>=n)break;if(this.queue[u].compare(e)>0)u+1<n&&this.queue[u+1].compare(this.queue[u])>0&&u++;else{if(!(u+1<n&&this.queue[u+1].compare(e)>0))break;u++}this.queue[i]=this.queue[u],i=u}this.queue[i]=e}return t},t}(),Y=["","-webkit-","-moz-"],Z={};function Q(t,e){return CSS.supports(t+e,"unset")}function J(t){var e=Z[t];if(e||null===e)return e;switch(t){case"behavior":case"template":case"ua-list-item-count":case"x-first-pseudo":return Z[t]=null,null;case"text-combine-upright":if(Q("-webkit-","text-combine")&&!Q("","text-combine-upright"))return Z[t]=["-webkit-text-combine"],["-webkit-text-combine"]}for(var n,i=R(Y);!(n=i()).done;){var u=n.value;if(Q(u,t))return Z[t]=e=[u+t],e}return h.warn("Property not supported by the browser: ",t),Z[t]=null,null}function tt(t,e,n){var i=null==t?void 0:t.style;if(i)if(e.startsWith("--"))i.setProperty(e,n||" ");else{var u=J(e);if(u)for(var r,o=R(u);!(r=o()).done;){var a=r.value;switch(a){case"-webkit-text-combine":"all"===n&&(n="horizontal");break;case"text-combine-upright":"all"===n&&i.setProperty("text-indent","0")}i.setProperty(a,n)}}}function et(t,e,n){try{var i=Z[e];return t.style.getPropertyValue(i?i[0]:e)}catch(t){}return n||""}function nt(t){var e=t.getAttributeNS(G.XML,"lang");return e||t.namespaceURI!=G.XHTML||(e=t.getAttribute("lang")),e}var it=function(){function t(){this.list=[]}var e=t.prototype;return e.append=function(t){return this.list.push(t),this},e.clear=function(){this.list=[]},e.toString=function(){var t=this.list.join("");return this.list=[t],t},t}();function ut(t){return"\\"+t.charCodeAt(0).toString(16)+" "}function rt(t){return t.replace(/[^-_a-zA-Z0-9\u0080-\uFFFF]/g,ut)}function ot(t){return t.replace(/[\u0000-\u001F"\\]/g,ut)}function at(t){return t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent)}function st(t){return!!t.match(/^[a-zA-Z\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]$/)}function lt(t,e){return t.replace(/[^-a-zA-Z0-9_]/g,(function(t){return function(t,e){return(e="string"==typeof e?e:"\\u")+(65536|t.charCodeAt(0)).toString(16).substr(1)}(t,e)}))}function ct(t){return lt(t)}function ht(t,e){for(var n=0,i=t;;){if(0==n||e(n-1),i==t||e(i),n==i)return n;var u=n+i>>1;e(u)?i=u:n=u+1}}function Dt(t,e){return t-e}function dt(t,e){for(var n,i={},u=R(t);!(n=u()).done;){var r=n.value,o=e(r);o&&!i[o]&&(i[o]=r)}return i}function ft(t,e){for(var n,i={},u=R(t);!(n=u()).done;){var r=n.value,o=e(r);o&&(i[o]?i[o].push(r):i[o]=[r])}return i}var pt=function(){function t(){this.listeners={}}var e=t.prototype;return e.dispatchEvent=function(t){var e=this.listeners[t.type];if(e){t.target=this,t.currentTarget=this;for(var n=0;n<e.length;n++)e[n](t)}},e.addEventListener=function(t,e,n){if(!n){var i=this.listeners[t];i?i.includes(e)||i.push(e):this.listeners[t]=[e]}},e.removeEventListener=function(t,e,n){if(!n){var i=this.listeners[t];if(i){var u=i.indexOf(e);u>=0&&i.splice(u,1)}}},t}(),gt={audio:!0,canvas:!0,embed:!0,iframe:!0,img:!0,math:!0,object:!0,picture:!0,svg:!0,video:!0};function Et(t){if(1==t.nodeType){var e=t.getAttribute("id");if(e)return e}return null}function Ct(t){return"^"+t}function vt(t){return t.replace(/[\[\]\(\),=;^]/g,Ct)}function Ft(t){return t.substr(1)}function mt(t){return t?t.replace(/\^[\[\]\(\),=;^]/g,Ft):t}function At(t){var e=[];do{var n=t.match(/^(\^,|[^,])*/),i=mt(n[0]);if(!(t=t.substr(n[0].length+1))&&!e.length)return i;e.push(i)}while(t);return e}function bt(t){for(var e={};t;){var n=t.match(/^;([^;=]+)=(([^;]|\^;)*)/);if(!n)return e;e[n[1]]=At(n[2]),t=t.substr(n[0].length)}return e}var yt=function(){function t(){}var e=t.prototype;return e.appendTo=function(t){t.append("!")},e.applyTo=function(t){return!1},t}(),Bt=function(){function t(t,e,n){this.index=void 0,this.id=void 0,this.sideBias=void 0,this.index=t,this.id=e,this.sideBias=n}var e=t.prototype;return e.appendTo=function(t){t.append("/"),t.append(this.index.toString()),(this.id||this.sideBias)&&(t.append("["),this.id&&t.append(this.id),this.sideBias&&(t.append(";s="),t.append(this.sideBias)),t.append("]"))},e.applyTo=function(t){if(1!=t.node.nodeType)throw new Error("E_CFI_NOT_ELEMENT");var e,n=t.node,i=n.children,u=i.length,r=Math.floor(this.index/2)-1;if(r<0||0==u)t.node=(e=n.firstChild)||n;else{if(e=i[Math.min(r,u-1)],1&this.index){var o=e.nextSibling;o&&1!=o.nodeType?e=o:t.after=!0}t.node=e}if(this.id&&(t.after||this.id!=Et(t.node))){var a=n.ownerDocument.getElementById(this.id);a?t.node=a:h.warn("E_CFI_ID_MISMATCH:",this.id)}return t.sideBias=this.sideBias,!0},t}(),wt=function(){function t(t,e,n,i){this.offset=void 0,this.textBefore=void 0,this.textAfter=void 0,this.sideBias=void 0,this.offset=t,this.textBefore=e,this.textAfter=n,this.sideBias=i}var e=t.prototype;return e.applyTo=function(t){if(this.offset>0&&!t.after){for(var e=this.offset,n=t.node;;){var i=n.nodeType;if(1==i)break;var u=n.nextSibling;if(3<=i&&i<=5){var r=n.textContent.length;if(e<=r)break;if(!u){e=r;break}e-=r}if(!u){e=0;break}n=u}t.node=n,t.offset=e}return t.sideBias=this.sideBias,!0},e.appendTo=function(t){t.append(":"),t.append(this.offset.toString()),(this.textBefore||this.textAfter||this.sideBias)&&(t.append("["),(this.textBefore||this.textAfter)&&(this.textBefore&&t.append(vt(this.textBefore)),t.append(","),this.textAfter&&t.append(vt(this.textAfter))),this.sideBias&&(t.append(";s="),t.append(this.sideBias)),t.append("]"))},t}(),St=function(){function t(){this.steps=null}var e=t.prototype;return e.fromString=function(t){var e=t.match(/^#?epubcfi\((.*)\)$/);if(!e)throw new Error("E_CFI_NOT_CFI");for(var n=decodeURIComponent(e[1]),i=0,u=[];;){var r=void 0;switch(n.charAt(i)){case"/":if(i++,!(e=n.substr(i).match(/^(0|[1-9][0-9]*)(\[(.*?)(;([^\]]|\^\])*)?\])?/)))throw new Error("E_CFI_NUMBER_EXPECTED");i+=e[0].length;var o=parseInt(e[1],10),a=e[3];r=bt(e[4]),u.push(new Bt(o,a,K(r.s)));break;case":":if(i++,!(e=n.substr(i).match(/^(0|[1-9][0-9]*)(\[((([^\];,]|\^[\];,])*)(,(([^\];,]|\^[\];,])*))?)(;([^]]|\^\])*)?\])?/)))throw new Error("E_CFI_NUMBER_EXPECTED");i+=e[0].length;var s=parseInt(e[1],10),l=e[4];l&&(l=mt(l));var c=e[7];c&&(c=mt(c)),r=bt(e[10]),u.push(new wt(s,l,c,K(r.s)));break;case"!":i++,u.push(new yt);break;case"~":case"@":case"":return void(this.steps=u);default:throw new Error("E_CFI_PARSE_ERROR")}}},e.navigate=function(e){for(var n={node:e.documentElement,offset:0,after:!1,sideBias:null,ref:null},i=0;i<this.steps.length;i++)if(!this.steps[i].applyTo(n)){n.ref=new t,n.ref.steps=this.steps.slice(i+1);break}return n},e.trim=function(t,e){return t.replace(/\s+/g," ").match(e?/^[ -\uD7FF\uE000-\uFFFF]{0,8}/:/[ -\uD7FF\uE000-\uFFFF]{0,8}$/)[0].replace(/^\s/,"").replace(/\s$/,"")},e.prependPathFromNode=function(t,e,n,i){for(var u=[],r=t.parentNode,o="",a="";t;){switch(t.nodeType){case 3:case 4:case 5:var s=t.textContent,l=s.length;n?(e+=l,o||(o=s)):(e>l&&(e=l),n=!0,o=s.substr(0,e),a=s.substr(e)),t=t.previousSibling;continue;case 8:t=t.previousSibling;continue}break}for((e>0||o||a)&&(o=this.trim(o,!1),a=this.trim(a,!0),u.push(new wt(e,o,a,i)),i=null);r&&r&&9!=r.nodeType;){for(var c=n?null:Et(t),h=n?1:0;t;)1==t.nodeType&&(h+=2),t=t.previousSibling;u.push(new Bt(h,c,i)),i=null,t=r,r=r.parentNode,n=!1}u.reverse(),this.steps?(u.push(new yt),this.steps=u.concat(this.steps)):this.steps=u},e.toString=function(){if(!this.steps)return"";var t=new it;t.append("epubcfi(");for(var e=0;e<this.steps.length;e++)this.steps[e].appendTo(t);return t.append(")"),t.toString().replace(/%/g,"%25")},t}();function Nt(t){return{fontFamily:t.fontFamily,lineHeight:t.lineHeight,margin:t.margin,hyphenate:t.hyphenate,columnWidth:t.columnWidth,horizontal:t.horizontal,nightMode:t.nightMode,spreadView:t.spreadView,pageBorder:t.pageBorder,enabledMediaTypes:Object.assign({},t.enabledMediaTypes),defaultPaperSize:t.defaultPaperSize?Object.assign({},t.defaultPaperSize):void 0}}var xt={fontFamily:"serif",lineHeight:1.25,margin:8,hyphenate:!1,columnWidth:25,horizontal:!1,nightMode:!1,spreadView:!1,pageBorder:1,enabledMediaTypes:{vivliostyle:!0,print:!0},defaultPaperSize:void 0},Tt={};function It(t,e,n,i){var u=Math.min((t-0)/n,(e-0)/i);return"matrix("+u+",0,0,"+u+",0,0)"}function Pt(t){return'"'+ot(""+t)+'"'}function kt(t){return rt(""+t)}function Ot(t,e){return t?rt(t)+"."+rt(e):rt(e)}var Rt=0,Lt=function(){function t(t,e){if(this.parent=void 0,this.resolver=void 0,this.scopeKey=void 0,this.children=[],this.zero=void 0,this.one=void 0,this._true=void 0,this._false=void 0,this.values={},this.funcs={},this.builtIns={},this.parent=t,this.resolver=e,this.scopeKey="S"+Rt++,this.zero=new ve(this,0),this.one=new ve(this,1),this._true=new ve(this,!0),this._false=new ve(this,!1),t&&t.children.push(this),!t){var n=this.builtIns;n.floor=Math.floor,n.ceil=Math.ceil,n.round=Math.round,n.sqrt=Math.sqrt,n.min=Math.min,n.max=Math.max,n.letterbox=It,n["css-string"]=Pt,n["css-name"]=kt,n.typeof=function(t){return typeof t},this.defineBuiltInName("page-width",(function(){return this.pageWidth()})),this.defineBuiltInName("page-height",(function(){return this.pageHeight()})),this.defineBuiltInName("pref-font-family",(function(){return this.pref.fontFamily})),this.defineBuiltInName("pref-night-mode",(function(){return this.pref.nightMode})),this.defineBuiltInName("pref-hyphenate",(function(){return this.pref.hyphenate})),this.defineBuiltInName("pref-margin",(function(){return this.pref.margin})),this.defineBuiltInName("pref-line-height",(function(){return this.pref.lineHeight})),this.defineBuiltInName("pref-column-width",(function(){return this.pref.columnWidth*this.fontSize})),this.defineBuiltInName("pref-horizontal",(function(){return this.pref.horizontal})),this.defineBuiltInName("pref-spread-view",(function(){return this.pref.spreadView})),this.defineBuiltInName("pub-title",(function(){return Pt(this.pubTitle?this.pubTitle:"")})),this.defineBuiltInName("doc-title",(function(){return Pt(this.docTitle?this.docTitle:"")}))}}var e=t.prototype;return e.defineBuiltInName=function(t,e){this.values[t]=new ge(this,e,t)},e.defineName=function(t,e){this.values[t]=e},e.defineFunc=function(t,e){this.funcs[t]=e},e.defineBuiltIn=function(t,e){this.builtIns[t]=e},t}();function _t(t){switch(null==t?void 0:t.toLowerCase()){case"vw":case"vh":case"vi":case"vb":case"vmin":case"vmax":case"pvw":case"pvh":case"pvi":case"pvb":case"pvmin":case"pvmax":return!0;default:return!1}}var Mt={px:1,in:96,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,q:96/2.54/40,em:16,rem:16,ex:8,lh:20,rlh:20,dppx:1,dpi:1/96,dpcm:2.54/96};function Ut(t){switch(t){case"q":return!CSS.supports("font-size","1q");case"lh":return!CSS.supports("line-height","1lh");case"rem":case"rlh":return!0;default:return!1}}var Vt=function(){function t(t,e,n,i){this.rootScope=void 0,this.viewportWidth=void 0,this.viewportHeight=void 0,this.actualPageWidth=null,this.pageWidth=void 0,this.actualPageHeight=null,this.pageHeight=void 0,this.initialFontSize=void 0,this.rootFontSize=null,this.isRelativeRootFontSize=null,this.fontSize=void 0,this.rootLineHeight=null,this.pref=void 0,this.scopes={},this.pageAreaWidth=null,this.pageAreaHeight=null,this.pageVertical=null,this.pubTitle=null,this.docTitle=null,this.rootScope=t,this.viewportWidth=e,this.viewportHeight=n,this.pageWidth=function(){return this.actualPageWidth?this.actualPageWidth:this.pref.spreadView?Math.floor(e/2)-this.pref.pageBorder:e},this.pageHeight=function(){return this.actualPageHeight?this.actualPageHeight:n},this.initialFontSize=i,this.fontSize=function(){return this.rootFontSize?this.rootFontSize:i},this.pref=xt}var e=t.prototype;return e.getScopeContext=function(t){var e=this.scopes[t.scopeKey];return e||(this.scopes[t.scopeKey]=e={}),e},e.clearScope=function(t){this.scopes[t.scopeKey]={};for(var e=0;e<t.children.length;e++)this.clearScope(t.children[e])},e.queryUnitSize=function(t,e,n){if(_t(t)){var i=this.pageWidth()/100,u=this.pageHeight()/100,r=null!=this.pageAreaWidth?this.pageAreaWidth/100:i,o=null!=this.pageAreaHeight?this.pageAreaHeight/100:u,a=null!=n?n:this.pageVertical;switch(t){case"vw":return r;case"vh":return o;case"vi":return a?o:r;case"vb":return a?r:o;case"vmin":return r<o?r:o;case"vmax":return r>o?r:o;case"pvw":return i;case"pvh":return u;case"pvi":return a?u:i;case"pvb":return a?i:u;case"pvmin":return i<u?i:u;case"pvmax":return i>u?i:u}}return"em"==t||"rem"==t?e?this.initialFontSize:this.fontSize():"ex"==t?Mt.ex*(e?this.initialFontSize:this.fontSize())/Mt.em:"lh"==t||"rlh"==t?this.rootLineHeight:Mt[t]},e.evalName=function(t,e){do{var n=t.values[e];if(n)return n;if(t.resolver&&(n=t.resolver.call(this,e,!1)))return n;t=t.parent}while(t);throw new Error("Name '"+e+"' is undefined")},e.evalCall=function(t,e,n,i){do{var u=t.funcs[e];if(u)return u;if(t.resolver&&(u=t.resolver.call(this,e,!0)))return u;var r=t.builtIns[e];if(r){if(i)return t.zero;for(var o=Array(n.length),a=0;a<n.length;a++)o[a]=n[a].evaluate(this);return new ve(t,r.apply(this,o))}t=t.parent}while(t);throw new Error("Function '"+e+"' is undefined")},e.evalMediaName=function(t,e){var n="all"===t||!!this.pref.enabledMediaTypes[t];return e?!n:n},e.evalMediaTest=function(t,e){var n="",i=t.match(/^(min|max)-(.*)$/);i&&(n=i[1],t=i[2]);var u=null,r=null;switch(t){case"width":case"height":case"device-width":case"device-height":case"color":e&&(u=e.evaluate(this))}switch(t){case"width":r=this.pageWidth();break;case"height":r=this.pageHeight();break;case"device-width":r=window.screen.availWidth;break;case"device-height":r=window.screen.availHeight;break;case"color":r=window.screen.pixelDepth}if(null!=r&&null!=u)switch(n){case"min":return r>=Number(u);case"max":return r<=Number(u);default:return r==u}else if(null!=r&&null==e)return 0!==r;return!1},e.evalSupportsTest=function(t,e,n){return!1},e.queryVal=function(t,e){var n=t&&this.scopes[t.scopeKey];return n?n[e]:void 0},e.storeVal=function(t,e,n){this.getScopeContext(t)[e]=n},t}(),zt=function(){function t(t){this.scope=void 0,this.key=void 0,this.scope=t,this.scope=t,this.key="_"+Rt++}var e=t.prototype;return e.toString=function(){var t=new it;return this.appendTo(t,0),t.toString()},e.appendTo=function(t,e){throw new Error("F_ABSTRACT")},e.evaluateCore=function(t){throw new Error("F_ABSTRACT")},e.expand=function(t,e){return this},e.dependCore=function(t,e,n){return t===this},e.dependOuter=function(t,e,n){var i=n[this.key];if(null!=i)return i!==Tt&&i;n[this.key]=Tt;var u=this.dependCore(t,e,n);return n[this.key]=u,u},e.depend=function(t,e){return this.dependOuter(t,e,{})},e.evaluate=function(t){var e=t.queryVal(this.scope,this.key);return void 0!==e||(e=this.evaluateCore(t),this.scope&&t.storeVal(this.scope,this.key,e)),e},e.isMediaName=function(){return!1},t}(),Ht=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).val=void 0,i.val=n,i}N(e,t);var n=e.prototype;return n.getOp=function(){throw new Error("F_ABSTRACT")},n.evalPrefix=function(t){throw new Error("F_ABSTRACT")},n.evaluateCore=function(t){var e=this.val.evaluate(t);return this.evalPrefix(e)},n.dependCore=function(t,e,n){return t===this||this.val.dependOuter(t,e,n)},n.appendTo=function(t,e){10<e&&t.append("("),t.append(this.getOp()),this.val.appendTo(t,10),10<e&&t.append(")")},n.expand=function(t,e){var n=this.val.expand(t,e);return n===this.val?this:new this.constructor(this.scope,n)},e}(zt),Gt=function(t){function e(e,n,i){var u;return(u=t.call(this,e)||this).lhs=void 0,u.rhs=void 0,u.lhs=n,u.rhs=i,u}N(e,t);var n=e.prototype;return n.getPriority=function(){throw new Error("F_ABSTRACT")},n.getOp=function(){throw new Error("F_ABSTRACT")},n.evalInfix=function(t,e){throw new Error("F_ABSTRACT")},n.evaluateCore=function(t){var e=this.lhs.evaluate(t),n=this.rhs.evaluate(t);return this.evalInfix(e,n)},n.dependCore=function(t,e,n){return t===this||this.lhs.dependOuter(t,e,n)||this.rhs.dependOuter(t,e,n)},n.appendTo=function(t,e){var n=this.getPriority();n<=e&&t.append("("),this.lhs.appendTo(t,n),t.append(this.getOp()),this.rhs.appendTo(t,n),n<=e&&t.append(")")},n.expand=function(t,e){var n=this.lhs.expand(t,e),i=this.rhs.expand(t,e);return n===this.lhs&&i===this.rhs?this:new this.constructor(this.scope,n,i)},e}(zt),jt=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return N(e,t),e.prototype.getPriority=function(){return 1},e}(Gt),Wt=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return N(e,t),e.prototype.getPriority=function(){return 2},e}(Gt),Xt=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return N(e,t),e.prototype.getPriority=function(){return 3},e}(Gt),$t=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return N(e,t),e.prototype.getPriority=function(){return 4},e}(Gt),Kt=function(t){function e(e,n){return t.call(this,e,n)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"!"},n.evalPrefix=function(t){return!t},e}(Ht),qt=function(t){function e(e,n){return t.call(this,e,n)||this}return N(e,t),e.prototype.getOp=function(){return"not "},e}(Kt),Yt=function(t){function e(e,n){return t.call(this,e,n)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"-"},n.evalPrefix=function(t){return-t},e}(Ht),Zt=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"&&"},n.evaluateCore=function(t){return this.lhs.evaluate(t)&&this.rhs.evaluate(t)},e}(jt),Qt=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return N(e,t),e.prototype.getOp=function(){return" and "},e}(Zt),Jt=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"||"},n.evaluateCore=function(t){return this.lhs.evaluate(t)||this.rhs.evaluate(t)},e}(jt),te=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return N(e,t),e.prototype.getOp=function(){return", "},e}(Jt),ee=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return N(e,t),e.prototype.getOp=function(){return" or "},e}(Jt),ne=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"<"},n.evalInfix=function(t,e){return t<e},e}(Wt),ie=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"<="},n.evalInfix=function(t,e){return t<=e},e}(Wt),ue=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return">"},n.evalInfix=function(t,e){return t>e},e}(Wt),re=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return">="},n.evalInfix=function(t,e){return t>=e},e}(Wt),oe=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"=="},n.evalInfix=function(t,e){return t==e},e}(Wt),ae=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"!="},n.evalInfix=function(t,e){return t!=e},e}(Wt),se=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"+"},n.evalInfix=function(t,e){return t+e},e}(Xt),le=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return" - "},n.evalInfix=function(t,e){return t-e},e}(Xt),ce=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"*"},n.evalInfix=function(t,e){return t*e},e}($t),he=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"/"},n.evalInfix=function(t,e){return t/e},e}($t),De=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.getOp=function(){return"%"},n.evalInfix=function(t,e){return t%e},e}($t),de=function(t){function e(e,n,i){var u,r;return(r=t.call(this,e)||this).num=void 0,r.unit=void 0,r.num=n,r.unit=null!=(u=null==i?void 0:i.toLowerCase())?u:"",r}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append(this.num.toString()),t.append(rt(this.unit))},n.evaluateCore=function(t){return this.num*t.queryUnitSize(this.unit,!1)},e}(zt),fe=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).qualifiedName=void 0,i.qualifiedName=n,i}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append(this.qualifiedName)},n.evaluateCore=function(t){return t.evalName(this.scope,this.qualifiedName).evaluate(t)},n.dependCore=function(t,e,n){return t===this||e.evalName(this.scope,this.qualifiedName).dependOuter(t,e,n)},e}(zt),pe=function(t){function e(e,n,i){var u;return(u=t.call(this,e)||this).not=void 0,u.name=void 0,u.not=n,u.name=i,u}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){this.not&&t.append("not "),t.append(rt(this.name))},n.evaluateCore=function(t){return t.evalMediaName(this.name,this.not)},n.isMediaName=function(){return!0},e}(zt),ge=function(t){function e(e,n,i){var u;return(u=t.call(this,e)||this).fn=void 0,u.str=void 0,u.fn=n,u.str=i,u}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append(this.str)},n.evaluateCore=function(t){return this.fn.call(t)},e}(zt),Ee=function(t){function e(e,n,i){var u;return(u=t.call(this,e)||this).qualifiedName=void 0,u.params=void 0,u.qualifiedName=n,u.params=i,u}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append(this.qualifiedName),function(t,e){t.append("(");for(var n=0;n<e.length;n++)n&&t.append(","),e[n].appendTo(t,0);t.append(")")}(t,this.params)},n.evaluateCore=function(t){return t.evalCall(this.scope,this.qualifiedName,this.params,!1).expand(t,this.params).evaluate(t)},n.dependCore=function(t,e,n){if(t===this)return!0;for(var i=0;i<this.params.length;i++)if(this.params[i].dependOuter(t,e,n))return!0;return e.evalCall(this.scope,this.qualifiedName,this.params,!0).dependOuter(t,e,n)},n.expand=function(t,n){var i=function(t,e,n){for(var i=e,u=0;u<e.length;u++){var r=e[u].expand(t,n);if(e!==i)i[u]=r;else if(r!==e[u]){i=Array(e.length);for(var o=0;o<u;o++)i[o]=e[o];i[u]=r}}return i}(t,this.params,n);return i===this.params?this:new e(this.scope,this.qualifiedName,i)},e}(zt),Ce=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e)||this).cond=void 0,r.ifTrue=void 0,r.ifFalse=void 0,r.cond=n,r.ifTrue=i,r.ifFalse=u,r}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){e>0&&t.append("("),this.cond.appendTo(t,0),t.append("?"),this.ifTrue.appendTo(t,0),t.append(":"),this.ifFalse.appendTo(t,0),e>0&&t.append(")")},n.evaluateCore=function(t){return this.cond.evaluate(t)?this.ifTrue.evaluate(t):this.ifFalse.evaluate(t)},n.dependCore=function(t,e,n){return t===this||this.cond.dependOuter(t,e,n)||this.ifTrue.dependOuter(t,e,n)||this.ifFalse.dependOuter(t,e,n)},n.expand=function(t,n){var i=this.cond.expand(t,n),u=this.ifTrue.expand(t,n),r=this.ifFalse.expand(t,n);return i===this.cond&&u===this.ifTrue&&r===this.ifFalse?this:new e(this.scope,i,u,r)},e}(zt),ve=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).val=void 0,i.val=n,i}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){switch(typeof this.val){case"number":case"boolean":t.append(this.val.toString());break;case"string":t.append('"'),t.append(ot(this.val)),t.append('"');break;default:throw new Error("F_UNEXPECTED_STATE")}},n.evaluateCore=function(t){return this.val},e}(zt),Fe=function(t){function e(e,n,i){var u;return(u=t.call(this,e)||this).name=void 0,u.value=void 0,u.name=n,u.value=i,u}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append("("),t.append(ot(this.name.name)),t.append(":"),this.value.appendTo(t,0),t.append(")")},n.evaluateCore=function(t){return t.evalMediaTest(this.name.name,this.value)},n.dependCore=function(t,e,n){return t===this||this.value.dependOuter(t,e,n)},n.expand=function(t,n){var i=this.value.expand(t,n);return i===this.value?this:new e(this.scope,this.name,i)},e}(zt),me=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e)||this).name=void 0,r.value=void 0,r.isFunc=void 0,r.name=n,r.value=i,r.isFunc=u,r}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){this.isFunc&&t.append(this.name),t.append("("),!this.isFunc&&this.name&&(t.append(this.name),t.append(":")),t.append(this.value),t.append(")")},n.evaluateCore=function(t){return t.evalSupportsTest(this.name,this.value,this.isFunc)},e}(zt),Ae=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).index=void 0,i.index=n,i}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append("$"),t.append(this.index.toString())},n.expand=function(t,e){var n=e[this.index];if(!n)throw new Error("Parameter missing: "+this.index);return n},e}(zt);function be(t,e,n){return e===t._false||e===t.zero||n==t._false||n==t.zero?t._false:e===t._true||e===t.one?n:n===t._true||n===t.one?e:new Zt(t,e,n)}function ye(t,e,n){return e===t.zero?n:n===t.zero?e:new se(t,e,n)}function Be(t,e,n){return e===t.zero?new Yt(t,n):n===t.zero?e:new le(t,e,n)}function we(t,e,n){return e===t.zero||n===t.zero?t.zero:e===t.one?n:n===t.one?e:new ce(t,e,n)}function Se(t,e,n){return e===t.zero?t.zero:n===t.one?e:new he(t,e,n)}var Ne=function(){function t(){}var e=t.prototype;return e.visitValues=function(t){for(var e=0;e<t.length;e++)t[e].visit(this);return null},e.visitEmpty=function(t){return null},e.visitSlash=function(t){return null},e.visitStr=function(t){return null},e.visitIdent=function(t){return null},e.visitNumeric=function(t){return null},e.visitNum=function(t){return null},e.visitInt=function(t){return this.visitNum(t)},e.visitHexColor=function(t){return null},e.visitURL=function(t){return null},e.visitURange=function(t){return null},e.visitSpaceList=function(t){return this.visitValues(t.values),null},e.visitCommaList=function(t){return this.visitValues(t.values),null},e.visitFunc=function(t){return this.visitValues(t.values),null},e.visitExpr=function(t){return null},t}(),xe=function(t){function e(){var e;return(e=t.call(this)||this).error=!1,e}N(e,t);var n=e.prototype;return n.visitValues=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],u=i.visit(this);if(this.error)return[];if(e)e[n]=u;else if(i!==u){e=new Array(t.length);for(var r=0;r<n;r++)e[r]=t[r];e[n]=u}}return e||t},n.visitEmpty=function(t){return t},n.visitStr=function(t){return t},n.visitIdent=function(t){return t},n.visitSlash=function(t){return t},n.visitNumeric=function(t){return t},n.visitNum=function(t){return t},n.visitInt=function(t){return t},n.visitHexColor=function(t){return t},n.visitURL=function(t){return t},n.visitURange=function(t){return t},n.visitSpaceList=function(t){var e=this.visitValues(t.values);return this.error?Pe:e===t.values?t:new Xe(e)},n.visitCommaList=function(t){var e=this.visitValues(t.values);return this.error?Pe:e===t.values?t:new $e(e)},n.visitFunc=function(t){var e=this.visitValues(t.values);return this.error?Pe:e===t.values?t:new Ke(t.name,e)},n.visitExpr=function(t){return t},e}(Ne),Te=function(){function t(){}var e=t.prototype;return e.toString=function(){var t=new it;return this.appendTo(t,!0),t.toString()},e.stringValue=function(){var t=new it;return this.appendTo(t,!1),t.toString()},e.toExpr=function(t,e){return null},e.appendTo=function(t,e){t.append("[error]")},e.isExpr=function(){return!1},e.isNumeric=function(){return!1},e.isNum=function(){return!1},e.isIdent=function(){return!1},e.isSpaceList=function(){return!1},e.visit=function(t){return this},t}(),Ie=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.toExpr=function(t,e){return new ve(t,"")},n.appendTo=function(t,e){},n.visit=function(t){return t.visitEmpty(this)},S(e,null,[{key:"instance",get:function(){return this.empty||(this.empty=new e),this.empty}}]),e}(Te);Ie.empty=void 0;var Pe=Ie.instance,ke=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.toExpr=function(t,e){return new ve(t,"/")},n.appendTo=function(t,e){t.append("/")},n.visit=function(t){return t.visitSlash(this)},S(e,null,[{key:"instance",get:function(){return this.slash||(this.slash=new e),this.slash}}]),e}(Te);ke.slash=void 0;var Oe=ke.instance,Re=function(t){function e(e){var n;return(n=t.call(this)||this).str=void 0,n.str=e,n}N(e,t);var n=e.prototype;return n.toExpr=function(t,e){return new ve(t,this.str)},n.appendTo=function(t,e){e?(t.append('"'),t.append(ot(this.str)),t.append('"')):t.append(this.str)},n.visit=function(t){return t.visitStr(this)},e}(Te),Le={},_e=function(t){function e(e){var n;if((n=t.call(this)||this).name=void 0,n.name=e,Le[e])throw new Error("E_INVALID_CALL");return Le[e]=k(n),n}N(e,t);var n=e.prototype;return n.toExpr=function(t,e){return new ve(t,this.name)},n.appendTo=function(t,e){t.append(e?rt(this.name):this.name)},n.visit=function(t){return t.visitIdent(this)},n.isIdent=function(){return!0},e}(Te);function Me(t){var e=Le[t];return e||(e=new _e(t)),e}var Ue=function(t){function e(e,n){var i,u;return(u=t.call(this)||this).num=void 0,u.unit=void 0,u.num=e,u.unit=null!=(i=null==n?void 0:n.toLowerCase())?i:"",u}N(e,t);var n=e.prototype;return n.toExpr=function(t,e){return 0==this.num?t.zero:e&&"%"==this.unit?100==this.num?e:new ce(t,e,new ve(t,this.num/100)):new de(t,this.num,this.unit)},n.appendTo=function(t,e){t.append(this.num.toString()),t.append(this.unit)},n.visit=function(t){return t.visitNumeric(this)},n.isNumeric=function(){return!0},e}(Te),Ve=function(t){function e(e){var n;return(n=t.call(this)||this).num=void 0,n.num=e,n}N(e,t);var n=e.prototype;return n.toExpr=function(t,e){return 0==this.num?t.zero:1==this.num?t.one:new ve(t,this.num)},n.appendTo=function(t,e){t.append(this.num.toString())},n.visit=function(t){return t.visitNum(this)},n.isNum=function(){return!0},e}(Te),ze=function(t){function e(e){return t.call(this,e)||this}return N(e,t),e.prototype.visit=function(t){return t.visitInt(this)},e}(Ve),He=function(t){function e(e){var n;return(n=t.call(this)||this).hex=void 0,n.hex=e,n}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append("#"),t.append(this.hex)},n.visit=function(t){return t.visitHexColor(this)},e}(Te),Ge=function(t){function e(e){var n;return(n=t.call(this)||this).url=void 0,n.url=e,n}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append('url("'),t.append(ot(this.url)),t.append('")')},n.visit=function(t){return t.visitURL(this)},e}(Te),je=function(t){function e(e){var n;return(n=t.call(this)||this).urangeText=void 0,n.urangeText=e,n}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append(this.urangeText)},n.visit=function(t){return t.visitURange(this)},e}(Te);function We(t,e,n,i){var u=e.length;if(u>0){var r;null==(r=e[0])||r.appendTo(t,i);for(var o=1;o<u;o++){var a;t.append(n),null==(a=e[o])||a.appendTo(t,i)}}}var Xe=function(t){function e(e){var n;return(n=t.call(this)||this).values=void 0,n.values=e,n}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){We(t,this.values," ",e)},n.visit=function(t){return t.visitSpaceList(this)},n.isSpaceList=function(){return!0},e}(Te),$e=function(t){function e(e){var n;return(n=t.call(this)||this).values=void 0,n.values=e,n}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){We(t,this.values,",",e)},n.visit=function(t){return t.visitCommaList(this)},e}(Te),Ke=function(t){function e(e,n){var i;return(i=t.call(this)||this).name=void 0,i.values=void 0,i.name=e,i.values=n,i}N(e,t);var n=e.prototype;return n.appendTo=function(t,e){t.append(rt(this.name)),t.append("("),We(t,this.values,",",e),t.append(")")},n.visit=function(t){return t.visitFunc(this)},e}(Te),qe=function(t){function e(e){var n;return(n=t.call(this)||this).expr=void 0,n.expr=e,n}N(e,t);var n=e.prototype;return n.toExpr=function(){return this.expr},n.appendTo=function(t,e){this.expr instanceof ve||this.expr instanceof de?this.expr.appendTo(t,0):(t.append("-epubx-expr("),this.expr.appendTo(t,0),t.append(")"))},n.visit=function(t){return t.visitExpr(this)},n.isExpr=function(){return!0},e}(Te),Ye=function(t){function e(e){var n;return(n=t.call(this)||this).text=void 0,n.text=e,n}return N(e,t),e.prototype.appendTo=function(t,e){t.append(this.text||" ")},e}(Te);function Ze(t,e){if(t){if(t.isNumeric()){var n=t;return e.queryUnitSize(n.unit,!1)*n.num}if(t.isNum())return t.num}return 0}function Qe(t,e){return new Ue(Ze(t,e),"px")}var Je={absolute:Me("absolute"),all:Me("all"),always:Me("always"),anywhere:Me("anywhere"),auto:Me("auto"),avoid:Me("avoid"),balance:Me("balance"),balance_all:Me("balance-all"),block:Me("block"),block_end:Me("block-end"),block_start:Me("block-start"),both:Me("both"),bottom:Me("bottom"),border_box:Me("border-box"),break_all:Me("break-all"),break_word:Me("break-word"),clip:Me("clip"),crop:Me("crop"),cross:Me("cross"),column:Me("column"),discard:Me("discard"),exclusive:Me("exclusive"),_false:Me("false"),fixed:Me("fixed"),flex:Me("flex"),flow_root:Me("flow-root"),footnote:Me("footnote"),footer:Me("footer"),grid:Me("grid"),header:Me("header"),hidden:Me("hidden"),horizontal_tb:Me("horizontal-tb"),inherit:Me("inherit"),initial:Me("initial"),inline:Me("inline"),inline_block:Me("inline-block"),inline_end:Me("inline-end"),inline_start:Me("inline-start"),keep:Me("keep"),landscape:Me("landscape"),left:Me("left"),line:Me("line"),list_item:Me("list-item"),ltr:Me("ltr"),manual:Me("manual"),max_content:Me("max-content"),min_content:Me("min-content"),none:Me("none"),normal:Me("normal"),oeb_page_foot:Me("oeb-page-foot"),oeb_page_head:Me("oeb-page-head"),padding_box:Me("padding-box"),page:Me("page"),relative:Me("relative"),revert:Me("revert"),right:Me("right"),same:Me("same"),scale:Me("scale"),snap_block:Me("snap-block"),solid:Me("solid"),spread:Me("spread"),_static:Me("static"),rtl:Me("rtl"),table:Me("table"),table_caption:Me("table-caption"),table_cell:Me("table-cell"),table_footer_group:Me("table-footer-group"),table_header_group:Me("table-header-group"),table_row:Me("table-row"),top:Me("top"),transparent:Me("transparent"),unset:Me("unset"),vertical_lr:Me("vertical-lr"),vertical_rl:Me("vertical-rl"),visible:Me("visible"),_true:Me("true")},tn=new Ue(100,"%"),en=new Ue(100,"pvw"),nn=new Ue(100,"pvh"),un=new Ue(0,"px"),rn=new je("U+0-10FFFF"),on={"font-size":1,"line-height":2,color:3};function an(t){return t===Je.inherit||t===Je.initial||t===Je.revert||t===Je.unset}function sn(t,e){return(on[t]||Number.MAX_VALUE)-(on[e]||Number.MAX_VALUE)}function ln(t){return(null==t?void 0:t.length)>2&&t.startsWith("--")}var cn=function(t,e,n,i){this.x1=void 0,this.y1=void 0,this.x2=void 0,this.y2=void 0,this.x1=t,this.y1=e,this.x2=n,this.y2=i},hn=function(t,e){this.x=void 0,this.y=void 0,this.x=t,this.y=e},Dn=function(t,e,n,i){this.left=void 0,this.top=void 0,this.right=void 0,this.bottom=void 0,this.left=t,this.top=e,this.right=n,this.bottom=i},dn=function(t,e,n,i){this.low=void 0,this.high=void 0,this.winding=void 0,this.shapeId=void 0,this.low=t,this.high=e,this.winding=n,this.shapeId=i},fn=function(t,e,n,i){this.y1=void 0,this.y2=void 0,this.x1=void 0,this.x2=void 0,this.left=null,this.right=null,this.y1=t,this.y2=e,this.x1=n,this.x2=i};function pn(t,e){return t.low.y-e.low.y||t.low.x-e.low.x}var gn=function(){function t(t){this.points=void 0,this.points=t}var e=t.prototype;return e.addSegments=function(t,e){for(var n=this.points,i=n.length,u=n[i-1],r=0;r<i;r++){var o,a=n[r];o=u.y<a.y?new dn(u,a,1,e):new dn(a,u,-1,e),t.push(o),u=a}},e.withOffset=function(e,n){for(var i,u=[],r=R(this.points);!(i=r()).done;){var o=i.value;u.push(new hn(o.x+e,o.y+n))}return new t(u)},t}();function En(t,e,n,i){for(var u=[],r=0;r<20;r++){var o=2*r*Math.PI/20;u.push(new hn(t+n*Math.sin(o),e+i*Math.cos(o)))}return new gn(u)}function Cn(t,e,n,i){return new gn([new hn(t,e),new hn(n,e),new hn(n,i),new hn(t,i)])}var vn=function(t,e,n,i){this.x=void 0,this.winding=void 0,this.shapeId=void 0,this.lowOrHigh=void 0,this.x=t,this.winding=e,this.shapeId=n,this.lowOrHigh=i};function Fn(t,e){var n=t.low.x+(t.high.x-t.low.x)*(e-t.low.y)/(t.high.y-t.low.y);if(isNaN(n))throw new Error("Bad intersection");return n}function mn(t,e,n,i){var u,r,o,a;e.high.y<n&&h.warn("Error: inconsistent segment (1)"),e.low.y<=n?(u=Fn(e,n),r=e.winding):(u=e.low.x,r=0),e.high.y>=i?(o=Fn(e,i),a=e.winding):(o=e.high.x,a=0),u<o?(t.push(new vn(u,r,e.shapeId,-1)),t.push(new vn(o,a,e.shapeId,1))):(t.push(new vn(o,a,e.shapeId,-1)),t.push(new vn(u,r,e.shapeId,1)))}function An(t,e,n){var i,u=e+n,r=Array(u),o=Array(u);for(i=0;i<=u;i++)r[i]=0,o[i]=0;for(var a=[],s=!1,l=t.length,c=0;c<l;c++){var h=t[c];r[h.shapeId]+=h.winding,o[h.shapeId]+=h.lowOrHigh;var D=!1;for(i=0;i<e;i++)if(r[i]&&!o[i]){D=!0;break}if(D)for(i=e;i<=u;i++)if(r[i]||o[i]){D=!1;break}s!=D&&(a.push(h.x),s=D)}return a}function bn(t,e){return e?Math.floor(t/e)*e:t}function yn(t){return new cn(t.y1,-t.x2,t.y2,-t.x1)}function Bn(t){return new cn(-t.y2,t.x1,-t.y1,t.x2)}function wn(t){return new gn(t.points.map((function(t){return function(t){return new hn(t.y,-t.x)}(t)})))}function Sn(t,e){for(var n=e.length-1,i=new fn(t.y2,t.y2,t.x1,t.x2);n>=0;){var u=i;((i=e[n]).y2-i.y1<1||i.x1==u.x1&&i.x2==u.x2)&&(u.y1=i.y1,e.splice(n,1),i=u),n--}}function Nn(t,e){for(var n=0,i=t.length;n<i;){var u=Math.floor((n+i)/2);e>=t[u].y2?n=u+1:i=u}return n}function xn(t,e){if(!t.length)return e;var n,i,u=e.y1;for(i=0;i<t.length&&!((n=t[i]).y2>e.y1&&n.x1-.1<=e.x1&&n.x2+.1>=e.x2);i++)u=Math.max(u,n.y2);for(var r=u;i<t.length&&!((n=t[i]).y1>=e.y2||n.x1-.1>e.x1||n.x2+.1<e.x2);i++)r=n.y2;return(r=i===t.length?e.y2:Math.min(r,e.y2))<=u?null:new cn(e.x1,u,e.x2,r)}function Tn(t,e){if(!t.length)return e;var n,i,u=e.y2;for(i=t.length-1;i>=0&&(n=t[i],!(i===t.length-1&&n.y2<e.y2))&&!(n.y1<e.y2&&n.x1-.1<=e.x1&&n.x2+.1>=e.x2);i--)u=Math.min(u,n.y1);for(var r=Math.min(u,n.y2);i>=0&&!((n=t[i]).y2<=e.y1||n.x1-.1>e.x1||n.x2+.1<e.x2);i--)r=n.y1;return u<=(r=Math.max(r,e.y1))?null:new cn(e.x1,r,e.x2,u)}var In=function(t){function e(){var e;return(e=t.call(this)||this).propSet={},e}N(e,t);var n=e.prototype;return n.visitIdent=function(t){return this.propSet[t.name]=!0,t},n.visitSpaceList=function(t){return this.visitValues(t.values),t},e}(Ne),Pn=function(t){function e(e){var n;return(n=t.call(this)||this).value=void 0,n.value=e,n}return N(e,t),e.prototype.visitInt=function(t){return this.value=t.num,t},e}(Ne);function kn(t,e){if(t){var n=new Pn(e);try{return t.visit(n),n.value}catch(t){h.warn(t,"toInt: ")}}return e}var On=function(t){function e(){var e;return(e=t.call(this)||this).collect=!1,e.coords=[],e.name=null,e}N(e,t);var n=e.prototype;return n.visitNumeric=function(t){return this.collect&&this.coords.push(t),null},n.visitNum=function(t){return this.collect&&0==t.num&&this.coords.push(new Ue(0,"px")),null},n.visitSpaceList=function(t){return this.visitValues(t.values),null},n.visitFunc=function(t){return this.collect||(this.collect=!0,this.visitValues(t.values),this.collect=!1,this.name=t.name.toLowerCase()),null},n.getShape=function(t,e,n,i,u){var r=this;if(this.coords.length>0){var o=[];switch(this.coords.forEach((function(t,e){if("%"==t.unit){var a=e%2==0?n:i;3==e&&"circle"==r.name&&(a=Math.sqrt((n*n+i*i)/2)),o.push(t.num*a/100)}else o.push(t.num*u.queryUnitSize(t.unit,!1))})),this.name){case"polygon":if(o.length%2==0){for(var a=[],s=0;s<o.length;s+=2)a.push(new hn(t+o[s],e+o[s+1]));return new gn(a)}break;case"rectangle":if(4==o.length)return Cn(t+o[0],e+o[1],t+o[0]+o[2],e+o[1]+o[3]);break;case"ellipse":if(4==o.length)return En(t+o[0],e+o[1],o[2],o[3]);break;case"circle":if(3==o.length)return En(t+o[0],e+o[1],o[2],o[2])}}return null},e}(Ne);function Rn(t,e,n,i,u,r){if(t){var o=new On;try{return t.visit(o),o.getShape(e,n,i,u,r)}catch(t){h.warn(t,"toShape:")}}return Cn(e,n,e+i,n+u)}var Ln=function(t){function e(e){var n;return(n=t.call(this)||this).reset=void 0,n.counters={},n.name=null,n.reset=e,n}N(e,t);var n=e.prototype;return n.visitIdent=function(t){return this.name=t.toString(),this.counters[this.name]=this.reset?0:(this.counters[this.name]||0)+1,t},n.visitInt=function(t){return this.name&&(this.counters[this.name]+=t.num-(this.reset?0:1)),t},n.visitSpaceList=function(t){return this.visitValues(t.values),t},e}(Ne);function _n(t,e){var n=new Ln(e);try{t.visit(n)}catch(t){h.warn(t,"toCounters:")}return n.counters}var Mn=function(t){function e(e,n){var i;return(i=t.call(this)||this).baseUrl=void 0,i.transformer=void 0,i.baseUrl=e,i.transformer=n,i}return N(e,t),e.prototype.visitURL=function(t){return new Ge(this.transformer.transformURL(t.url,this.baseUrl))},e}(xe);function Un(t){var e={};return Object.keys(t).forEach((function(n){e[n]=Array.from(t[n])})),e}var Vn,zn=function(){function t(t,e){this.targetId=void 0,this.resolved=void 0,this.pageCounters=null,this.spineIndex=-1,this.pageIndex=-1,this.targetId=t,this.resolved=e}var e=t.prototype;return e.equals=function(t){return this===t||!!t&&this.targetId===t.targetId&&this.resolved===t.resolved&&this.spineIndex===t.spineIndex&&this.pageIndex===t.pageIndex},e.isResolved=function(){return this.resolved},e.resolve=function(){this.resolved=!0},e.unresolve=function(){this.resolved=!1},t}(),Hn=function(){function t(t,e){this.counterStore=void 0,this.baseURL=void 0,this.counterStore=t,this.baseURL=e}var e=t.prototype;return e.countersOfId=function(t,e){t=this.counterStore.documentURLTransformer.transformFragment(t,this.baseURL),this.counterStore.countersById[t]=e},e.getExprContentListener=function(){return this.counterStore.getExprContentListener()},t}(),Gn=function(){function t(t,e,n,i){this.counterStore=void 0,this.baseURL=void 0,this.rootScope=void 0,this.pageScope=void 0,this.styler=null,this.namedStringValues={},this.runningElements={},this.counterStore=t,this.baseURL=e,this.rootScope=n,this.pageScope=i}var e=t.prototype;return e.setStyler=function(t){this.styler=t},e.getFragment=function(t){var e=t.match(/^[^#]*#(.*)$/);return e?e[1]:null},e.getTransformedId=function(t){var e=this.counterStore.documentURLTransformer.transformURL(X(t,this.baseURL),this.baseURL);return"#"===e.charAt(0)&&(e=e.substring(1)),e},e.getPageCounterVal=function(t,e){var n=this,i=new ge(this.pageScope,(function(){return e(function(){var e=n.counterStore.currentPageCounters[t];return e&&e.length?e[e.length-1]:null}())}),"page-counter-"+t);return this.counterStore.registerPageCounterExpr(t,(function(t){return e(t[t.length-1])}),i),i},e.getPageCountersVal=function(t,e){var n=this,i=new ge(this.pageScope,(function(){return e(n.counterStore.currentPageCounters[t]||[])}),"page-counters-"+t);return this.counterStore.registerPageCounterExpr(t,e,i),i},e.getTargetCounters=function(t,e,n){var i=this.counterStore.countersById[e];return!i&&n&&t&&(this.styler.styleUntilIdIsReached(t),i=this.counterStore.countersById[e]),i||null},e.getTargetPageCounters=function(t){return this.counterStore.currentPage.elementsById[t]?this.counterStore.currentPageCounters:this.counterStore.pageCountersById[t]||null},e.getTargetCounterVal=function(t,e,n){var i=this,u=this.getFragment(t),r=this.getTransformedId(t),o=this.getTargetCounters(u,r,!1);if(o&&o[e]){var a=o[e];return new ve(this.rootScope,n(a[a.length-1]||null))}var s=new ge(this.pageScope,(function(){if(o=i.getTargetCounters(u,r,!0)){if(o[e]){var t=o[e];return n(t[t.length-1]||null)}var a=i.getTargetPageCounters(r);if(a){if(i.counterStore.resolveReference(r),a[e]){var s=a[e];return n(s[s.length-1]||null)}return n(0)}return i.counterStore.saveReferenceOfCurrentPage(r,!1),"??"}return i.counterStore.saveReferenceOfCurrentPage(r,!1),"??"}),"target-counter-"+e+"-of-"+t);return this.counterStore.registerTargetCounterExpr(e,n,s,r),s},e.getTargetCountersVal=function(t,e,n){var i=this,u=this.getFragment(t),r=this.getTransformedId(t);return new ge(this.pageScope,(function(){var t=i.getTargetPageCounters(r);if(t){i.counterStore.resolveReference(r);var o=t[e]||[],a=i.getTargetCounters(u,r,!0);return n(o.concat(a[e]||[]))}return i.counterStore.saveReferenceOfCurrentPage(r,!1),"??"}),"target-counters-"+e+"-of-"+t)},e.getNamedStringVal=function(t,e){var n=this;return new ge(this.pageScope,(function(){return n.getRunningValue(n.namedStringValues,t,e)}),"named-string-"+e+"-"+t)},e.getRunningElementVal=function(t,e){var n=this;return new ge(this.pageScope,(function(){return n.getRunningValue(n.runningElements,t,e)}),"running-element-"+e+"-"+t)},e.getRunningValue=function(t,e,n){var i=t[e];if(!i)return"";for(var u=Object.keys(i).map((function(t){return parseInt(t,10)})).sort(Dt),r=this.counterStore.currentPage,o=r.isBlankPage?r.offset-1:r.offset,a=r.isBlankPage?o:Math.max.apply(Math,[o].concat(Array.from(r.container.querySelectorAll("["+_+"]")).map((function(t){return parseInt(t.getAttribute(_),10)})))),s=-1,l=-1,c=-1,h=-1,D=0;D<u.length;D++){var d=u[D],f=D>0?u[D-1]:-1,p=D<u.length-1?u[D+1]:-1;if(d>a)break;if(d>=o){if(s<0&&(s=d,h=-1),l<0)if(d===o)l=d;else{f<s&&(l=f);var g=r.container.querySelector("["+_+'="'+d+'"]');if(g){var E=r.container.querySelector("["+_+'="'+o+'"]');if(E||(E=r.container.querySelector("["+_+'="0"]')),E)for(var C=E;C;C=C.firstElementChild)if(C===g){l=d;break}}else l<0&&(l=d)}c=d}else(p>a||p<0)&&(s=l=c=h=d)}return i[{first:s,start:l,last:c,"first-except":h}[n]]||""},e.setNamedString=function(t,e,n){(this.namedStringValues[t]||(this.namedStringValues[t]={}))[n]=e},e.setRunningElement=function(t,e){(this.runningElements[t]||(this.runningElements[t]={}))[e]=String(e)},t}(),jn=function(){function t(t){this.documentURLTransformer=void 0,this.countersById={},this.pageCountersById={},this.currentPageCounters={},this.previousPageCounters={},this.currentPageCountersStack=[],this.pageIndicesById={},this.currentPage=null,this.newReferencesOfCurrentPage=[],this.referencesToSolve=[],this.referencesToSolveStack=[],this.unresolvedReferences={},this.resolvedReferences={},this.pagesCounterExprs=[],this.pageCounterExprs=[],this.targetCounterExprs=[],this.documentURLTransformer=t,this.currentPageCounters.page=[0]}var e=t.prototype;return e.createCounterListener=function(t){return new Hn(this,t)},e.createCounterResolver=function(t,e,n){return new Gn(this,t,e,n)},e.setCurrentPage=function(t){this.currentPage=t},e.definePageCounter=function(t,e){this.currentPageCounters[t]?this.currentPageCounters[t].push(e):this.currentPageCounters[t]=[e]},e.forceSetPageCounter=function(t){var e=this.currentPageCounters.page;e&&e.length?e[e.length-1]=t:this.currentPageCounters.page=[t]},e.updatePageCounters=function(t,e){var n;this.previousPageCounters=Un(this.currentPageCounters);var i,u=t["counter-reset"];if(u){var r=u.evaluate(e);r&&(n=_n(r,!0))}if(n)for(var o in n)this.definePageCounter(o,n[o]);var a=t["counter-increment"];if(a){var s=a.evaluate(e);s&&(i=_n(s,!1))}for(var l in i?"page"in i||(i.page=1):(i={}).page=1,i){this.currentPageCounters[l]||this.definePageCounter(l,0);var c=this.currentPageCounters[l];c[c.length-1]+=i[l]}},e.pushPageCounters=function(t){this.currentPageCountersStack.push(this.currentPageCounters),this.currentPageCounters=Un(t)},e.popPageCounters=function(){this.currentPageCounters=this.currentPageCountersStack.pop()},e.resolveReference=function(t){var e=this.unresolvedReferences[t],n=this.resolvedReferences[t];n||(n=this.resolvedReferences[t]=[]);for(var i=!1,u=0;u<this.referencesToSolve.length;){var r=this.referencesToSolve[u];if(r.targetId===t){if(r.resolve(),this.referencesToSolve.splice(u,1),e){var o=e.indexOf(r);o>=0&&e.splice(o,1)}n.push(r),i=!0}else u++}i||this.saveReferenceOfCurrentPage(t,!0)},e.saveReferenceOfCurrentPage=function(t,e){if(!this.newReferencesOfCurrentPage.some((function(e){return e.targetId===t}))){var n=new zn(t,e);this.newReferencesOfCurrentPage.push(n)}},e.finishPage=function(t,e){var n=this,i=Object.keys(this.currentPage.elementsById);if(i.length>0){var u=Un(this.currentPageCounters);i.forEach((function(i){n.pageCountersById[i]=u;var r=n.pageIndicesById[i];if(r&&r.pageIndex<e){var o=n.resolvedReferences[i];if(o){var a,s=n.unresolvedReferences[i];for(s||(s=n.unresolvedReferences[i]=[]);a=o.shift();)a.unresolve(),s.push(a)}}n.pageIndicesById[i]={spineIndex:t,pageIndex:e}}))}for(var r,o=this.previousPageCounters;r=this.newReferencesOfCurrentPage.shift();){r.pageCounters=o,r.spineIndex=t,r.pageIndex=e;var a=void 0;r.isResolved()?(a=this.resolvedReferences[r.targetId])||(a=this.resolvedReferences[r.targetId]=[]):(a=this.unresolvedReferences[r.targetId])||(a=this.unresolvedReferences[r.targetId]=[]),a.every((function(t){return!r.equals(t)}))&&a.push(r)}this.currentPage=null},e.getUnresolvedRefsToPage=function(t){var e=this,n=[];Object.keys(t.elementsById).forEach((function(t){var i=e.unresolvedReferences[t];i&&(n=n.concat(i))})),n.sort((function(t,e){return t.spineIndex-e.spineIndex||t.pageIndex-e.pageIndex}));var i=[],u=null;return n.forEach((function(t){u&&u.spineIndex===t.spineIndex&&u.pageIndex===t.pageIndex?u.refs.push(t):i.push(u={spineIndex:t.spineIndex,pageIndex:t.pageIndex,pageCounters:t.pageCounters,refs:[t]})})),i},e.pushReferencesToSolve=function(t){this.referencesToSolveStack.push(this.referencesToSolve),this.referencesToSolve=t},e.popReferencesToSolve=function(){this.referencesToSolve=this.referencesToSolveStack.pop()},e.registerPageCounterExpr=function(t,e,n){"pages"===t?this.pagesCounterExprs.push({expr:n,format:e}):this.pageCounterExprs.push({expr:n,format:e})},e.registerTargetCounterExpr=function(t,e,n,i){this.targetCounterExprs.push({name:t,expr:n,format:e,transformedId:i})},e.getExprContentListener=function(){return this.exprContentListener.bind(this)},e.exprContentListener=function(t,e,n){if(t instanceof ge){if("viv-leader"==t.str){var i=n.createElementNS(G.XHTML,"span");return i.textContent=e,i.setAttribute("data-viv-leader",t.key),i.setAttribute("data-viv-leader-value",e),i}if(t.str.startsWith("running-element-")){var u=e&&n.querySelectorAll("["+_+'="'+e+'"]');if(!u||0===u.length)return null;var r=u[u.length-1].cloneNode(!0);return this.fixPageCounterInRunningElement(r),r.style.position="",r.style.visibility="",r}if(t.str.startsWith("target-counter-")){var o=n.createElementNS(G.XHTML,"span");return o.textContent=e,o.setAttribute($n,t.key),o}}var a=this.pagesCounterExprs.findIndex((function(e){return e.expr===t}))>=0,s=!a&&this.pageCounterExprs.findIndex((function(e){return e.expr===t}))>=0;if(a||s){var l=n.createElementNS(G.XHTML,"span");return l.textContent=e,l.setAttribute(a?Wn:Xn,t.key),l}return null},e.fixPageCounterInRunningElement=function(t){for(var e,n=this,i=function(){var t=e.value,i=t.getAttribute(Xn),u=n.pageCounterExprs.find((function(t){return t.expr.key===i})),r=(null==u?void 0:u.expr).str,o=null==r?void 0:r.replace(/^page-counters?-/,""),a=n.currentPageCounters[o];a&&(t.textContent=u.format(a))},u=R(t.querySelectorAll("["+Xn+"]"));!(e=u()).done;)i();for(var r,o=R(t.querySelectorAll("["+$n+"]"));!(r=o()).done;)r.value.setAttribute(Kn,!0)},e.finishLastPage=function(t){for(var e,n=this,i=t.root.querySelectorAll("["+Wn+"]"),u=t.contentContainer.childElementCount,r=function(){var t=e.value,i=t.getAttribute(Wn),r=n.pagesCounterExprs.findIndex((function(t){return t.expr.key===i}));t.textContent=n.pagesCounterExprs[r].format([u])},o=R(i);!(e=o()).done;)r();for(var a,s=function(){var t=a.value,e=t.getAttribute($n),i=n.targetCounterExprs.find((function(t){return t.expr.key===e}));if(i&&i.transformedId){var u=n.pageCountersById[i.transformedId];if(u){var r=u[i.name];r&&(t.textContent=i.format(r[r.length-1]))}}},l=R(t.root.querySelectorAll("["+Kn+"]"));!(a=l()).done;)s()},e.createLayoutConstraint=function(t){return new qn(this,t)},t}(),Wn="data-vivliostyle-pages-counter",Xn="data-vivliostyle-page-counter",$n="data-vivliostyle-target-counter",Kn="data-vivliostyle-target-counter-in-running",qn=function(){function t(t,e){this.counterStore=void 0,this.pageIndex=void 0,this.counterStore=t,this.pageIndex=e}return t.prototype.allowLayout=function(t){if(!t||t.after)return!0;var e=t.viewNode;if(!e||1!==e.nodeType)return!0;var n=e.getAttribute("data-vivliostyle-id")||e.getAttribute("id")||e.getAttribute("name");if(!n)return!0;if(!this.counterStore.resolvedReferences[n]&&!this.counterStore.unresolvedReferences[n])return!0;var i=this.counterStore.pageIndicesById[n];return!i||this.pageIndex>=i.pageIndex},t}();function Yn(t){if((t=t.substr(1)).match(/^[^0-9a-fA-F\n\r]$/))return t;var e=parseInt(t,16);return isNaN(e)?"":0===e||e>=55296&&e<=57343||e>1114111?"�":String.fromCodePoint(e)}function Zn(t){return t.replace(/\\([0-9a-fA-F]{1,6}(\r\n|[ \n\r\t\f])?|[^0-9a-fA-F\n\r])/g,Yn)}!function(t){t[t.EOF=0]="EOF",t[t.IDENT=1]="IDENT",t[t.STR=2]="STR",t[t.NUMERIC=3]="NUMERIC",t[t.NUM=4]="NUM",t[t.INT=5]="INT",t[t.FUNC=6]="FUNC",t[t.HASH=7]="HASH",t[t.URL=8]="URL",t[t.CLASS=9]="CLASS",t[t.O_PAR=10]="O_PAR",t[t.C_PAR=11]="C_PAR",t[t.O_BRC=12]="O_BRC",t[t.C_BRC=13]="C_BRC",t[t.O_BRK=14]="O_BRK",t[t.C_BRK=15]="C_BRK",t[t.COMMA=16]="COMMA",t[t.SEMICOL=17]="SEMICOL",t[t.COLON=18]="COLON",t[t.SLASH=19]="SLASH",t[t.AT=20]="AT",t[t.PERCENT=21]="PERCENT",t[t.QMARK=22]="QMARK",t[t.PLUS=23]="PLUS",t[t.MINUS=24]="MINUS",t[t.BAR_BAR=25]="BAR_BAR",t[t.AMP_AMP=26]="AMP_AMP",t[t.URANGE=27]="URANGE",t[t.BANG=31]="BANG",t[t.DOLLAR=32]="DOLLAR",t[t.HAT=33]="HAT",t[t.BAR=34]="BAR",t[t.TILDE=35]="TILDE",t[t.STAR=36]="STAR",t[t.GT=37]="GT",t[t.LT=38]="LT",t[t.EQ=39]="EQ",t[t.BANG_EQ=41]="BANG_EQ",t[t.DOLLAR_EQ=42]="DOLLAR_EQ",t[t.HAT_EQ=43]="HAT_EQ",t[t.BAR_EQ=44]="BAR_EQ",t[t.TILDE_EQ=45]="TILDE_EQ",t[t.STAR_EQ=46]="STAR_EQ",t[t.GT_EQ=47]="GT_EQ",t[t.LT_EQ=48]="LT_EQ",t[t.EQ_EQ=49]="EQ_EQ",t[t.COL_COL=50]="COL_COL",t[t.CDO=51]="CDO",t[t.CDC=52]="CDC",t[t.UNKNOWN=53]="UNKNOWN",t[t.INVALID=54]="INVALID",t[t.LAST=54]="LAST"}(Vn||(Vn={}));var Qn,Jn=function(){function t(){this.type=void 0,this.precededBySpace=!1,this.num=0,this.text="",this.position=0,this.type=Vn.EOF}return t.prototype.toString=function(){switch(this.type){case Vn.O_PAR:return"(";case Vn.C_PAR:return")";case Vn.O_BRC:return"{";case Vn.C_BRC:return"}";case Vn.O_BRK:return"[";case Vn.C_BRK:return"]";case Vn.COMMA:return",";case Vn.SEMICOL:return";";case Vn.COLON:return":";case Vn.SLASH:return"/";case Vn.PERCENT:return"%";case Vn.QMARK:return"?";case Vn.PLUS:return"+";case Vn.MINUS:return"-";case Vn.BAR_BAR:return"||";case Vn.AMP_AMP:return"&&";case Vn.BANG:return"!";case Vn.DOLLAR:return"$";case Vn.HAT:return"^";case Vn.BAR:return"|";case Vn.TILDE:return"~";case Vn.STAR:return"*";case Vn.GT:return">";case Vn.LT:return"<";case Vn.EQ:return"=";case Vn.BANG_EQ:return"!=";case Vn.DOLLAR_EQ:return"$=";case Vn.HAT_EQ:return"^=";case Vn.BAR_EQ:return"|=";case Vn.TILDE_EQ:return"~=";case Vn.STAR_EQ:return"*=";case Vn.GT_EQ:return">=";case Vn.LT_EQ:return"<=";case Vn.EQ_EQ:return"==";case Vn.COL_COL:return"::";case Vn.CDO:return"\x3c!--";case Vn.CDC:return"--\x3e";case Vn.NUMERIC:return this.num.toString()+this.text;case Vn.NUM:case Vn.INT:return this.num.toString();case Vn.AT:return"@"+this.text;case Vn.HASH:return"#"+this.text;case Vn.FUNC:return this.text+"(";case Vn.CLASS:return"."+this.text;case Vn.EOF:return"/*EOF*/";default:return this.text}},t}();function ti(t,e){var n,i=Array(128);for(n=0;n<128;n++)i[n]=t;for(i.NaN=t==Qn.END?Qn.END:Qn.INVALID,n=0;n<e.length;n+=2)i[e[n]]=e[n+1];return i}!function(t){t[t.SPACE=1]="SPACE",t[t.INT=2]="INT",t[t.IDENT=3]="IDENT",t[t.BANG=4]="BANG",t[t.HASH=6]="HASH",t[t.DOLLAR=7]="DOLLAR",t[t.PERCENT=8]="PERCENT",t[t.AMP=9]="AMP",t[t.O_PAR=10]="O_PAR",t[t.C_PAR=11]="C_PAR",t[t.STAR=12]="STAR",t[t.PLUS=13]="PLUS",t[t.COMMA=14]="COMMA",t[t.MINUS=15]="MINUS",t[t.DOT=16]="DOT",t[t.SLASH=17]="SLASH",t[t.COLON=18]="COLON",t[t.SEMICOL=19]="SEMICOL",t[t.LT=20]="LT",t[t.EQ=21]="EQ",t[t.GT=22]="GT",t[t.QMARK=23]="QMARK",t[t.AT=24]="AT",t[t.O_BRK=25]="O_BRK",t[t.C_BRK=26]="C_BRK",t[t.O_BRC=27]="O_BRC",t[t.C_BRC=28]="C_BRC",t[t.BSLASH=29]="BSLASH",t[t.HAT=30]="HAT",t[t.BAR=31]="BAR",t[t.TILDE=32]="TILDE",t[t.STR1=33]="STR1",t[t.STR2=34]="STR2",t[t.END=35]="END",t[t.EQTAIL=36]="EQTAIL",t[t.ENDINT=37]="ENDINT",t[t.ENDNUM=38]="ENDNUM",t[t.CONT=39]="CONT",t[t.UNIT=40]="UNIT",t[t.PCUNIT=41]="PCUNIT",t[t.NUMBER=42]="NUMBER",t[t.ENDIDNT=43]="ENDIDNT",t[t.IDNTESC=44]="IDNTESC",t[t.ENDIDES=45]="ENDIDES",t[t.ENDSTR=46]="ENDSTR",t[t.ENDESTR=47]="ENDESTR",t[t.STR1ESC=48]="STR1ESC",t[t.STR2ESC=49]="STR2ESC",t[t.BAR_BAR=50]="BAR_BAR",t[t.AMP_AMP=51]="AMP_AMP",t[t.FUNC=52]="FUNC",t[t.FUNCES=53]="FUNCES",t[t.COMMENT=54]="COMMENT",t[t.COMMST=55]="COMMST",t[t.ENDNOTK=56]="ENDNOTK",t[t.MINMIN=57]="MINMIN",t[t.TOINT=58]="TOINT",t[t.TONUM=59]="TONUM",t[t.TOIDENT=60]="TOIDENT",t[t.TOIDES=61]="TOIDES",t[t.KILL1=62]="KILL1",t[t.KILL2=63]="KILL2",t[t.URL=64]="URL",t[t.URL1=65]="URL1",t[t.URL2=66]="URL2",t[t.ENDURL=67]="ENDURL",t[t.TERMURL=68]="TERMURL",t[t.FINURL=69]="FINURL",t[t.LT_BG=70]="LT_BG",t[t.LT_BG_M=71]="LT_BG_M",t[t.INVALID=72]="INVALID",t[t.CHKPOSS=73]="CHKPOSS",t[t.CHKPOSN=74]="CHKPOSN",t[t.URLESC=75]="URLESC",t[t.IDESCH=76]="IDESCH",t[t.COL_COL=77]="COL_COL",t[t.TOCLASS=78]="TOCLASS",t[t.CHKSP=79]="CHKSP",t[t.EOF=80]="EOF",t[t.CDO=81]="CDO",t[t.CDC=82]="CDC"}(Qn||(Qn={}));var ei=[Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.SPACE,Qn.SPACE,Qn.INVALID,Qn.SPACE,Qn.SPACE,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.SPACE,Qn.BANG,Qn.STR2,Qn.HASH,Qn.DOLLAR,Qn.PERCENT,Qn.AMP,Qn.STR1,Qn.O_PAR,Qn.C_PAR,Qn.STAR,Qn.PLUS,Qn.COMMA,Qn.MINUS,Qn.DOT,Qn.SLASH,Qn.INT,Qn.INT,Qn.INT,Qn.INT,Qn.INT,Qn.INT,Qn.INT,Qn.INT,Qn.INT,Qn.INT,Qn.COLON,Qn.SEMICOL,Qn.LT,Qn.EQ,Qn.GT,Qn.QMARK,Qn.AT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.O_BRK,Qn.BSLASH,Qn.C_BRK,Qn.HAT,Qn.IDENT,Qn.INVALID,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.IDENT,Qn.O_BRC,Qn.BAR,Qn.C_BRC,Qn.TILDE,Qn.INVALID];ei.NaN=Qn.EOF;var ni=[Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.FUNC,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.CONT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDIDNT,Qn.IDNTESC,Qn.ENDIDNT,Qn.ENDIDNT,Qn.CONT,Qn.ENDIDNT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT,Qn.ENDIDNT];ni.NaN=Qn.ENDIDNT;var ii=[Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.TOCLASS,Qn.TONUM,Qn.INVALID,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.TONUM,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.INVALID,Qn.TOIDES,Qn.INVALID,Qn.INVALID,Qn.TOCLASS,Qn.INVALID,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.TOCLASS,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID,Qn.INVALID];ni.NaN=Qn.ENDIDNT;var ui=[Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.MINMIN,Qn.TONUM,Qn.END,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.TOINT,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.END,Qn.TOIDES,Qn.END,Qn.END,Qn.TOIDENT,Qn.END,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.TOIDENT,Qn.END,Qn.END,Qn.END,Qn.END,Qn.END];ui.NaN=Qn.END;var ri=[Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.CHKPOSS,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.CHKPOSS,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.FUNCES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDIDES,Qn.IDNTESC,Qn.ENDIDES,Qn.ENDIDES,Qn.CONT,Qn.ENDIDES,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES,Qn.ENDIDES];ri.NaN=Qn.ENDIDES;var oi=[Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.PCUNIT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.NUMBER,Qn.ENDINT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.UNIT,Qn.ENDINT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT,Qn.ENDINT];oi.NaN=Qn.ENDINT;var ai=[Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.PCUNIT,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.CONT,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.UNIT,Qn.ENDNUM,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.UNIT,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM,Qn.ENDNUM];ai.NaN=Qn.ENDNUM;var si,li=ti(Qn.END,[61,Qn.EQTAIL]),ci=ti(Qn.END,[58,Qn.COL_COL]),hi=ti(Qn.END,[61,Qn.EQTAIL,124,Qn.BAR_BAR]),Di=ti(Qn.END,[38,Qn.AMP_AMP]),di=ti(Qn.END,[42,Qn.COMMENT]),fi=ti(Qn.CONT,[42,Qn.COMMST]),pi=ti(Qn.COMMENT,[42,Qn.COMMST,47,Qn.ENDNOTK]),gi=ti(Qn.KILL1,[62,Qn.CDC]),Ei=ti(Qn.END,[61,Qn.EQTAIL,33,Qn.LT_BG]),Ci=ti(Qn.KILL1,[45,Qn.LT_BG_M]),vi=ti(Qn.KILL2,[45,Qn.CDO]),Fi=ti(Qn.IDESCH,[10,Qn.INVALID,13,Qn.INVALID]),mi=ti(Qn.CONT,[39,Qn.ENDSTR,10,Qn.INVALID,13,Qn.INVALID,92,Qn.STR1ESC]),Ai=ti(Qn.CONT,[34,Qn.ENDSTR,10,Qn.INVALID,13,Qn.INVALID,92,Qn.STR2ESC]),bi=ti(Qn.CONT,[39,Qn.ENDESTR,10,Qn.CHKPOSN,13,Qn.CHKPOSN,92,Qn.STR1ESC]),yi=ti(Qn.CONT,[34,Qn.ENDESTR,10,Qn.CHKPOSN,13,Qn.CHKPOSN,92,Qn.STR2ESC]),Bi=ti(Qn.URL,[9,Qn.CONT,32,Qn.CONT,34,Qn.URL2,39,Qn.URL1,41,Qn.INVALID,10,Qn.CONT,13,Qn.CONT]),wi=ti(Qn.CONT,[41,Qn.ENDURL,9,Qn.CHKSP,10,Qn.CHKSP,13,Qn.CHKSP,32,Qn.CHKSP,92,Qn.URLESC,40,Qn.INVALID,91,Qn.INVALID,93,Qn.INVALID,123,Qn.INVALID,125,Qn.INVALID,NaN,Qn.ENDURL]),Si=ti(Qn.CONT,[39,Qn.TERMURL,10,Qn.CHKPOSN,13,Qn.CHKPOSN,92,Qn.URLESC,NaN,Qn.ENDURL]),Ni=ti(Qn.CONT,[34,Qn.TERMURL,10,Qn.CHKPOSN,13,Qn.CHKPOSN,92,Qn.URLESC,NaN,Qn.ENDURL]),xi=ti(Qn.INVALID,[9,Qn.CONT,10,Qn.CONT,13,Qn.CONT,32,Qn.CONT,41,Qn.FINURL]),Ti=function(){function t(t,e){this.input=void 0,this.handler=void 0,this.indexMask=void 0,this.buffer=void 0,this.tail=0,this.curr=0,this.position=0,this.input=t,this.handler=e,this.indexMask=15,this.buffer=Array(this.indexMask+1);for(var n=0;n<=this.indexMask;n++)this.buffer[n]=new Jn}var e=t.prototype;return e.token=function(){return this.tail==this.curr&&this.fillBuffer(),this.buffer[this.curr]},e.nthToken=function(t){return(this.tail-this.curr&this.indexMask)<=t&&this.fillBuffer(),this.buffer[this.curr+t&this.indexMask]},e.consume=function(){this.curr=this.curr+1&this.indexMask},e.fillBuffer=function(){var t=this.tail,e=this.curr,n=this.indexMask;if(t>=e?e+=n:e--,e==t)throw new Error("F_CSSTOK_INTERNAL");for(var i=ei,u=this.input,r=this.position,o=this.buffer,a=Vn.EOF,s=0,l="",c=0,h=!1,D=o[t],d=-9;;){var f=u.charCodeAt(r);switch(i[f]||i[65]){case Qn.INVALID:l=u.substring(s,r),a=isNaN(f)?Vn.EOF:Vn.INVALID,i=ei;break;case Qn.SPACE:r++,h=!0;continue;case Qn.INT:s=r++,i=oi;continue;case Qn.IDENT:a=Vn.IDENT,s=r++,i=ni;continue;case Qn.BANG:s=r++,a=Vn.BANG,i=li;continue;case Qn.STR1:a=Vn.STR,s=++r,i=mi;continue;case Qn.STR2:a=Vn.STR,s=++r,i=Ai;continue;case Qn.HASH:s=++r,a=Vn.HASH,i=ni;continue;case Qn.DOLLAR:s=r++,a=Vn.DOLLAR,i=li;continue;case Qn.PERCENT:s=r++,a=Vn.PERCENT;break;case Qn.AMP:s=r++,a=Vn.DOLLAR,i=Di;continue;case Qn.O_PAR:s=r++,a=Vn.O_PAR;break;case Qn.C_PAR:s=r++,a=Vn.C_PAR;break;case Qn.STAR:s=r++,a=Vn.STAR,i=li;continue;case Qn.PLUS:s=r++,a=Vn.PLUS;break;case Qn.COMMA:s=r++,a=Vn.COMMA;break;case Qn.MINUS:a=Vn.MINUS,s=r++,i=ui;continue;case Qn.DOT:s=r++,i=ii;continue;case Qn.TOCLASS:s=r++,a=Vn.CLASS,i=ni;continue;case Qn.SLASH:s=r++,a=Vn.SLASH,i=di;continue;case Qn.COLON:s=r++,a=Vn.COLON,i=ci;continue;case Qn.COL_COL:r++,a=Vn.COL_COL;break;case Qn.SEMICOL:s=r++,a=Vn.SEMICOL;break;case Qn.LT:s=r++,a=Vn.LT,i=Ei;continue;case Qn.EQ:s=r++,a=Vn.EQ,i=li;continue;case Qn.GT:s=r++,a=Vn.GT,i=li;continue;case Qn.QMARK:s=r++,a=Vn.QMARK;break;case Qn.AT:s=++r,a=Vn.AT,i=ni;continue;case Qn.O_BRK:s=r++,a=Vn.O_BRK;break;case Qn.C_BRK:s=r++,a=Vn.C_BRK;break;case Qn.O_BRC:s=r++,a=Vn.O_BRC;break;case Qn.C_BRC:s=r++,a=Vn.C_BRC;break;case Qn.BSLASH:d=s=r++,a=Vn.IDENT,i=Fi;continue;case Qn.HAT:s=r++,a=Vn.HAT,i=li;continue;case Qn.BAR:s=r++,a=Vn.BAR,i=hi;continue;case Qn.TILDE:s=r++,a=Vn.TILDE,i=li;continue;case Qn.END:break;case Qn.EQTAIL:r++,a=a+Vn.BANG_EQ-Vn.BANG;break;case Qn.ENDINT:a=Vn.INT,c=parseInt(u.substring(s,r),10);break;case Qn.ENDNUM:a=Vn.NUM,c=parseFloat(u.substring(s,r));break;case Qn.CONT:r++;continue;case Qn.UNIT:a=Vn.NUMERIC,c=parseFloat(u.substring(s,r)),s=r++,i=ni;continue;case Qn.PCUNIT:a=Vn.NUMERIC,c=parseFloat(u.substring(s,r)),l="%",s=r++;break;case Qn.NUMBER:r++,i=ai;continue;case Qn.ENDIDNT:if(l=Zn(u.substring(s,r)),a===Vn.URANGE&&63===f||a===Vn.IDENT&&"u"===l.toLowerCase()&&/^(\bu\+[?0-9a-f]+(-[?0-9a-f]+)?|,|\s+|\/\*([^*]|\*[^/])*\*\/)+[;}]/i.test(u.substring(r-1))){a=Vn.URANGE,r++;continue}break;case Qn.IDNTESC:d=r++,i=Fi;continue;case Qn.ENDIDES:l=Zn(u.substring(s,r));break;case Qn.ENDSTR:l=u.substring(s,r),r++;break;case Qn.ENDESTR:l=Zn(u.substring(s,r)),r++;break;case Qn.STR1ESC:d=r,r+=2,i=bi;continue;case Qn.STR2ESC:d=r,r+=2,i=yi;continue;case Qn.BAR_BAR:r++,a=Vn.BAR_BAR;break;case Qn.AMP_AMP:r++,a=Vn.AMP_AMP;break;case Qn.FUNC:if(l=u.substring(s,r),a==Vn.IDENT){if(r++,"url"==l.toLowerCase()){i=Bi;continue}a=Vn.FUNC}break;case Qn.FUNCES:if(l=Zn(u.substring(s,r)),a==Vn.IDENT){if(r++,"url"==l.toLowerCase()){i=Bi;continue}a=Vn.FUNC}break;case Qn.COMMENT:i=fi,r++;continue;case Qn.COMMST:i=pi,r++;continue;case Qn.ENDNOTK:i=ei,r++;continue;case Qn.MINMIN:i=gi,">"!==u[++r]&&(a=Vn.IDENT,i=ni);continue;case Qn.CDO:a=Vn.CDO,l=u.substring(s,++r),i=ei;break;case Qn.CDC:a=Vn.CDC,l=u.substring(s,++r),i=ei;break;case Qn.TOINT:a=Vn.INT,i=oi,r++;continue;case Qn.TONUM:a=Vn.NUM,i=ai,r++;continue;case Qn.TOIDENT:a=Vn.IDENT,i=ni,r++;continue;case Qn.TOIDES:a=Vn.IDENT,i=Fi,d=r++;continue;case Qn.KILL1:r--;break;case Qn.KILL2:r-=2;break;case Qn.URL:s=r++,i=wi;continue;case Qn.URL1:s=++r,i=Si;continue;case Qn.URL2:s=++r,i=Ni;continue;case Qn.ENDURL:a=Vn.URL,l=Zn(u.substring(s,r)),r++;break;case Qn.FINURL:r++;break;case Qn.LT_BG:i=Ci,r++;continue;case Qn.LT_BG_M:i=vi,r++;continue;case Qn.CHKSP:if(r-d<8&&u.substring(d+1,r+1).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])|[ \t]$/)){r++;continue}case Qn.TERMURL:a=Vn.URL,l=Zn(u.substring(s,r)),r++,i=xi;continue;case Qn.CHKPOSN:if(++r-d<9&&u.substring(d+1,r).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])$/))continue;a=Vn.INVALID,l="E_CSS_UNEXPECTED_NEWLINE",i=ei;break;case Qn.CHKPOSS:if(r-d<9&&u.substring(d+1,r+1).match(/^[0-9a-fA-F]{0,6}[ \t]$/)){r++,i=ni;continue}l=Zn(u.substring(s,r));break;case Qn.URLESC:d=r++;continue;case Qn.IDESCH:r++,i=ri;continue;default:if(i!==ei){a=Vn.INVALID,l="E_CSS_UNEXPECTED_STATE";break}s=r,a=Vn.EOF}if(D.type=a,D.precededBySpace=h,D.num=c,D.text=l,D.position=s,++t>=e)break;i=ei,h=!1,D=o[t&n]}this.position=r,this.tail=t&n},t}(),Ii=null,Pi=null;function ki(){return Ii}function Oi(t){if(!Ii)throw new Error("E_TASK_NO_CONTEXT");Ii.name||(Ii.name=t);var e=Ii,n=new ji(e,e.top,t);return e.top=n,n.state=si.ACTIVE,n}function Ri(t){return new Hi(t)}function Li(t,e,n){var i=Oi(t);i.handler=n;try{e(i)}catch(t){i.task.raise(t,i)}return i.result()}!function(t){t[t.INIT=0]="INIT",t[t.ACTIVE=1]="ACTIVE",t[t.FINISHED=2]="FINISHED",t[t.DEAD=3]="DEAD"}(si||(si={}));var _i,Mi=function(){function t(){}var e=t.prototype;return e.currentTime=function(){return(new Date).valueOf()},e.setTimeout=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return setTimeout(t,e)})),e.clearTimeout=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){clearTimeout(t)})),t}(),Ui=function(){function t(t){this.timer=void 0,this.timeout=1,this.slice=25,this.sliceOverTime=0,this.queue=void 0,this.wakeupTime=null,this.timeoutToken=null,this.inTimeSlice=!1,this.order=0,this.timer=t,this.queue=new q,Pi||(Pi=this)}var e=t.prototype;return e.setSlice=function(t){this.slice=t},e.setTimeout=function(t){this.timeout=t},e.isTimeSliceOver=function(){return this.timer.currentTime()>=this.sliceOverTime},e.arm=function(){var t=this;if(!this.inTimeSlice){var e=this.queue.peek().scheduledTime,n=this.timer.currentTime();if(null!=this.timeoutToken){if(n+this.timeout>this.wakeupTime)return;this.timer.clearTimeout(this.timeoutToken)}var i=e-n;i<=this.timeout&&(i=this.timeout),this.wakeupTime=n+i,this.timeoutToken=this.timer.setTimeout((function(){t.timeoutToken=null,t.doTimeSlice()}),i)}},e.schedule=function(t,e){var n=t,i=this.timer.currentTime();n.order=this.order++,n.scheduledTime=i+(e||0),this.queue.add(n),this.arm()},e.doTimeSlice=function(){null!=this.timeoutToken&&(this.timer.clearTimeout(this.timeoutToken),this.timeoutToken=null),this.inTimeSlice=!0;try{var t=this.timer.currentTime();for(this.sliceOverTime=t+this.slice;this.queue.length();){var e=this.queue.peek();if(e.scheduledTime>t)break;if(this.queue.remove(),e.canceled||e.resumeInternal(),(t=this.timer.currentTime())>=this.sliceOverTime)break}}catch(t){h.error(t)}this.inTimeSlice=!1,this.queue.length()&&this.arm()},e.run=function(t,e){var n=new zi(this,e||"");n.top=new ji(n,null,"bootstrap"),n.top.state=si.ACTIVE,n.top.then((function(){var e=function(){n.running=!1;for(var t,e=R(n.callbacks);!(t=e()).done;){var i=t.value;try{i()}catch(t){h.error(t)}}};try{t().then((function(t){n.result=t,e()}))}catch(t){n.raise(t),e()}}));var i=Ii;return Ii=n,this.schedule(n.top.suspend("bootstrap")),Ii=i,n},t}(),Vi=function(){function t(t){this.task=void 0,this.scheduledTime=0,this.order=0,this.result=null,this.canceled=!1,this.task=t}var e=t.prototype;return e.compare=function(t){return t.scheduledTime-this.scheduledTime||t.order-this.order},e.getTask=function(){return this.task},e.schedule=function(t,e){this.result=t,this.task.scheduler.schedule(this,e)},e.resumeInternal=function(){var t=this.task;if(this.task=null,t&&t.continuation==this){t.continuation=null;var e=Ii;return Ii=t,t.top.finish(this.result),Ii=e,!0}return!1},e.cancel=function(){this.canceled=!0},t}(),zi=function(){function t(t,e){this.scheduler=void 0,this.name=void 0,this.callbacks=[],this.exception=null,this.running=!0,this.result=null,this.waitTarget=null,this.top=null,this.continuation=null,this.scheduler=t,this.name=e}var e=t.prototype;return e.getName=function(){return this.name},e.interrupt=function(t){if(this.raise(t||new Error("E_TASK_INTERRUPT")),this!==Ii&&this.continuation){this.continuation.cancel();var e=new Vi(this);this.waitTarget="interrupt",this.continuation=e,this.scheduler.schedule(e)}},e.getScheduler=function(){return this.scheduler},e.isRunning=function(){return this.running},e.whenDone=function(t){this.callbacks.push(t)},e.join=function(){var t=this,e=Oi("Task.join");if(this.running){var n=e.suspend(this);this.whenDone((function(){n.schedule(t.result)}))}else e.finish(this.result);return e.result()},e.unwind=function(){for(;this.top&&!this.top.handler;)this.top=this.top.parent;if(this.top&&this.top.handler&&this.exception){var t=this.exception;this.exception=null,this.top.handler(this.top,t)}else this.exception&&h.error(this.exception,"Unhandled exception in task",this.name)},e.raise=function(t,e){if(this.fillStack(t),e){for(var n=this.top;n&&n!=e;)n=n.parent;n==e&&(this.top=n)}this.exception=t,this.unwind()},e.fillStack=function(t){var e=t.frameTrace;if(!e){e=t.stack?t.stack+"\n\t---- async ---\n":"";for(var n=this.top;n;n=n.parent)e+="\t",e+=n.getName(),e+="\n";t.frameTrace=e}},t}(),Hi=function(){function t(t){this.value=void 0,this.value=t}var e=t.prototype;return e.then=function(t){t(this.value)},e.thenAsync=function(t){return t(this.value)},e.thenReturn=function(e){return new t(e)},e.thenFinish=function(t){t.finish(this.value)},e.isPending=function(){return!1},e.get=function(){return this.value},t}(),Gi=function(){function t(t){this.frame=void 0,this.frame=t}var e=t.prototype;return e.then=function(t){this.frame.then(t)},e.thenAsync=function(t){if(this.isPending()){var e=new ji(this.frame.task,this.frame.parent,"AsyncResult.thenAsync");return e.state=si.ACTIVE,this.frame.parent=e,this.frame.then((function(n){t(n).then((function(t){e.finish(t)}))})),e.result()}return t(this.frame.res)},e.thenReturn=function(t){return this.isPending()?this.thenAsync((function(){return new Hi(t)})):new Hi(t)},e.thenFinish=function(t){this.isPending()?this.then((function(e){t.finish(e)})):t.finish(this.frame.res)},e.isPending=function(){return this.frame.state==si.ACTIVE},e.get=function(){if(this.isPending())throw new Error("Result is pending");return this.frame.res},t}(),ji=function(){function t(t,e,n){this.task=void 0,this.parent=void 0,this.name=void 0,this.res=null,this.state=void 0,this.callback=null,this.handler=null,this.task=t,this.parent=e,this.name=n,this.state=si.INIT}var e=t.prototype;return e.checkEnvironment=function(){if(!Ii)throw new Error("F_TASK_NO_CONTEXT");if(this!==Ii.top)throw new Error("F_TASK_NOT_TOP_FRAME")},e.result=function(){return new Gi(this)},e.finish=function(t){this.checkEnvironment(),Ii&&!Ii.exception&&(this.res=t),this.state=si.FINISHED;var e=this.parent;if(Ii&&(Ii.top=e),this.callback){try{this.callback(t)}catch(t){this.task.raise(t,e)}this.state=si.DEAD}},e.getTask=function(){return this.task},e.getName=function(){return this.name},e.getScheduler=function(){return this.task.scheduler},e.then=function(t){switch(this.state){case si.ACTIVE:if(this.callback)throw new Error("F_TASK_FRAME_ALREADY_HAS_CALLBACK");this.callback=t;break;case si.FINISHED:var e=this.task,n=this.parent;try{t(this.res),this.state=si.DEAD}catch(t){this.state=si.DEAD,e.raise(t,n)}break;case si.DEAD:throw new Error("F_TASK_DEAD_FRAME");default:throw new Error("F_TASK_UNEXPECTED_FRAME_STATE "+this.state)}},e.timeSlice=function(){var t=Oi("Frame.timeSlice");return t.getScheduler().isTimeSliceOver()?(h.debug("-- time slice --"),t.suspend().schedule(!0)):t.finish(!0),t.result()},e.sleep=function(t){var e=Oi("Frame.sleep");return e.suspend().schedule(!0,t),e.result()},e.loop=function(t){var e=Oi("Frame.loop");return function n(i){try{for(;i;){var u=t();if(u.isPending())return void u.then(n);u.then((function(t){i=t}))}e.finish(!0)}catch(t){e.task.raise(t,e)}}(!0),e.result()},e.loopWithFrame=function(t){var e=Ii;if(!e)throw new Error("E_TASK_NO_CONTEXT");return this.loop((function(){var n;do{var i=new Wi(e,e.top);e.top=i,i.state=si.ACTIVE,t(i),n=i.result()}while(!n.isPending()&&n.get());return n}))},e.suspend=function(t){if(this.checkEnvironment(),this.task.continuation)throw new Error("E_TASK_ALREADY_SUSPENDED");var e=new Vi(this.task);return this.task.continuation=e,Ii=null,this.task.waitTarget=t||null,e},t}(),Wi=function(t){function e(e,n){return t.call(this,e,n,"loop")||this}N(e,t);var n=e.prototype;return n.continueLoop=function(){this.finish(!0)},n.breakLoop=function(){this.finish(!1)},e}(ji),Xi=function(){function t(t,e){this.fetch=void 0,this.name=void 0,this.arrived=!1,this.resource=null,this.task=null,this.piggybacks=[],this.fetch=t,this.name=e}var e=t.prototype;return e.start=function(){var t=this;this.task||(this.task=ki().getScheduler().run((function(){var e=Oi("Fetcher.run");return t.fetch().then((function(n){var i=t.piggybacks;if(t.arrived=!0,t.resource=n,t.task=null,t.piggybacks=[],i)for(var u=0;u<i.length;u++)try{i[u](n)}catch(t){h.error(t,"Error:")}e.finish(n)})),e.result()}),this.name))},e.piggyback=function(t){this.arrived?t(this.resource):this.piggybacks.push(t)},e.get=function(){return this.arrived?Ri(this.resource):(this.start(),this.task.join())},e.hasArrived=function(){return this.arrived},t}(),$i=function(t){if(0==t.length)return Ri(!0);if(1==t.length)return t[0].get().thenReturn(!0);var e=Oi("waitForFetches"),n=0;return e.loop((function(){for(;n<t.length;){var e=t[n++];if(!e.hasArrived())return e.get().thenReturn(!0)}return Ri(!1)})).then((function(){e.finish(!0)})),e.result()},Ki='\n@media screen {\n  [data-vivliostyle-viewer-viewport] {\n    background: #aaaaaa;\n  }\n\n  [data-vivliostyle-page-container] {\n    background: white;\n    z-index: 0;\n  }\n\n  [data-vivliostyle-viewer-viewport] {\n    box-sizing: border-box;\n    display: flex;\n    overflow: auto;\n    position: relative;\n  }\n\n  [data-vivliostyle-outer-zoom-box] {\n    margin: auto;\n    overflow: hidden;\n    flex: none;\n  }\n\n  [data-vivliostyle-viewer-viewport] [data-vivliostyle-spread-container] {\n    display: flex;\n    flex: none;\n    justify-content: center;\n    transform-origin: left top;\n  }\n\n  [data-vivliostyle-viewer-viewport][data-vivliostyle-page-progression="ltr"]\n    [data-vivliostyle-spread-container] {\n    flex-direction: row;\n  }\n\n  [data-vivliostyle-viewer-viewport][data-vivliostyle-page-progression="rtl"]\n    [data-vivliostyle-spread-container] {\n    flex-direction: row-reverse;\n  }\n\n  [data-vivliostyle-viewer-viewport] [data-vivliostyle-page-container] {\n    margin: 0 auto;\n    flex: none;\n    transform-origin: center top;\n  }\n\n  [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]\n    [data-vivliostyle-page-container][data-vivliostyle-page-side="left"] {\n    margin-right: 1px;\n    transform-origin: right top;\n  }\n\n  [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]\n    [data-vivliostyle-page-container][data-vivliostyle-page-side="right"] {\n    margin-left: 1px;\n    transform-origin: left top;\n  }\n\n  [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]\n    [data-vivliostyle-page-container][data-vivliostyle-unpaired-page="true"] {\n    margin-left: auto;\n    margin-right: auto;\n    transform-origin: center top;\n  }\n}\n',qi="\n[data-vivliostyle-layout-box] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  z-index: -1;\n  transform-origin: left top;\n}\n\n[data-vivliostyle-debug] [data-vivliostyle-layout-box] {\n  right: auto;\n  bottom: auto;\n  overflow: visible;\n  z-index: auto;\n}\n\n[data-vivliostyle-spread-container] {\n  transform: scale(var(--viv-outputScale,1));\n  transform-origin: left top;\n}\n\n/* Emulate high pixel ratio using zoom & transform:scale() */\n@supports (zoom: 8) {\n  [data-vivliostyle-layout-box] {\n    zoom: calc(var(--viv-outputPixelRatio,1) / var(--viv-devicePixelRatio,1));\n    transform: scale(calc(var(--viv-devicePixelRatio,1) / var(--viv-outputPixelRatio,1)));\n  }\n  [data-vivliostyle-spread-container] {\n    zoom: calc(var(--viv-outputPixelRatio,1) / var(--viv-devicePixelRatio,1));\n    transform: scale(calc(var(--viv-outputScale,1) * var(--viv-devicePixelRatio,1) / var(--viv-outputPixelRatio,1)));\n  }\n  /* Workaround for Chromium's default border etc. widths not zoomed but scaled down */\n  [data-vivliostyle-spread-container] :where([style*=border],[style*=outline],[style*=rule]) {\n    border-width: medium;\n    outline-width: medium;\n    column-rule-width: medium;\n  }\n  [data-vivliostyle-spread-container] ::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n  [data-vivliostyle-spread-container] ::-webkit-scrollbar-track {\n    background-color: #f4f4f4;\n  }\n  [data-vivliostyle-spread-container] ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background: #c7c7c7;\n  }\n  [data-vivliostyle-spread-container] ::-webkit-scrollbar-thumb:hover {\n    background: #7d7d7d;\n  }\n}\n\n[data-vivliostyle-page-container] {\n  position: relative;\n}\n\n[data-vivliostyle-bleed-box] {\n  position: absolute;\n  overflow: hidden;\n  background-origin: content-box !important;\n  box-sizing: border-box;\n}\n\n[data-vivliostyle-page-box] ~ [data-vivliostyle-page-box] {\n  display: none;\n}\n\n[data-vivliostyle-toc-box] {\n  position: absolute;\n  left: 3px;\n  top: 3px;\n  overflow: scroll;\n  overflow-x: hidden;\n  background: rgba(248, 248, 248, 0.9);\n  border-radius: 2px;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);\n}\n\n@media print {\n  [data-vivliostyle-toc-box] {\n    display: none;\n  }\n\n  [data-vivliostyle-outer-zoom-box],\n  [data-vivliostyle-spread-container] {\n    width: 100% !important;\n    height: 100% !important;\n  }\n\n  [data-vivliostyle-spread-container] {\n    --viv-outputScale: 1 !important;\n    --viv-devicePixelRatio: 1 !important;\n    zoom: normal !important;\n    transform: none !important;\n  }\n\n  @supports (zoom: 8) {\n    [data-vivliostyle-spread-container] [data-vivliostyle-page-container] {\n      zoom: var(--viv-outputPixelRatio,1);\n      transform: scale(calc(1 / var(--viv-outputPixelRatio,1)));\n      transform-origin: left top;\n    }\n  }\n\n  [data-vivliostyle-spread-container] [data-vivliostyle-page-container] {\n    display: block !important;\n    max-height: 100vh;\n  }\n\n  [data-vivliostyle-spread-container] [data-vivliostyle-page-container]:not(:last-child) {\n    break-after: page;\n  }\n\n  /* Gecko-only hack, see https://bugzilla.mozilla.org/show_bug.cgi?id=267029#c17 */\n  @-moz-document url-prefix()  {\n    [data-vivliostyle-spread-container] [data-vivliostyle-page-container]:nth-last-child(n + 2) {\n      top: -1px;\n      margin-top: 1px;\n      margin-bottom: -1px;\n    }\n    /* Workaround Gecko problem on page break */\n    [data-vivliostyle-spread-container] [data-vivliostyle-page-container] {\n      break-after: auto !important;\n      height: 100% !important;\n    }\n  }\n}\n",Yi="\n/*\n * Copyright 2013 Google, Inc.\n * Copyright 2015 Daishinsha Inc.\n * Copyright 2019 Vivliostyle Foundation\n *\n * CSS property validation.\n */\nNUM = POS_NUM | ZERO | NEGATIVE;\nNNEG_NUM = POS_NUM | ZERO;\nINT = POS_INT | ZERO | NEGATIVE;\nNNEG_INT = POS_INT | ZERO;\nPERCENTAGE = POS_PERCENTAGE | ZERO | NEGATIVE;\nSTRICT_PERCENTAGE = POS_PERCENTAGE | ZERO_PERCENTAGE | NEGATIVE;\nNNEG_PERCENTAGE = POS_PERCENTAGE | ZERO;\nLENGTH = POS_LENGTH | ZERO | NEGATIVE;\nNNEG_LENGTH = POS_LENGTH | ZERO;\nPLENGTH = LENGTH | PERCENTAGE;\nPPLENGTH = POS_LENGTH | ZERO | POS_PERCENTAGE;\nALENGTH = LENGTH | auto;\nAPLENGTH = PLENGTH | auto;\nPAPLENGTH = PPLENGTH | auto;\nANGLE = POS_ANGLE | ZERO | NEGATIVE;\nLENGTH_OR_NUM = LENGTH | NUM;\nANGLE_OR_NUM = ANGLE | NUM;\nMIN_MAX_FIT_CONTENT = min-content | max-content | fit-content;\nBG_POSITION_TERM = PLENGTH | left | center | right | top | bottom;\nURI_OR_NONE = URI | none;\nIMAGE = URI | IMAGE_FUNCTION | none;\nbackground-attachment = COMMA( [scroll | fixed | local]+ );\nbackground-color = COLOR;\nbackground-image = COMMA( IMAGE+ );\nbackground-position = COMMA( SPACE(BG_POSITION_TERM{1,4})+ ); /* relaxed */\nbackground-repeat = COMMA( [repeat | repeat-x | repeat-y | no-repeat]+ );\nborder-collapse = collapse | separate;\nBORDER_SIDE_COLOR = COLOR;\nBORDER_SIDE_STYLE = none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset;\nBORDER_SIDE_WIDTH = thin: 1px | medium: 3px | thick: 5px | NNEG_LENGTH;\nborder-spacing = LENGTH LENGTH?;\nborder-top-color = BORDER_SIDE_COLOR;\nborder-right-color = BORDER_SIDE_COLOR;\nborder-bottom-color = BORDER_SIDE_COLOR;\nborder-left-color = BORDER_SIDE_COLOR;\nborder-top-style = BORDER_SIDE_STYLE;\nborder-right-style = BORDER_SIDE_STYLE;\nborder-bottom-style = BORDER_SIDE_STYLE;\nborder-left-style = BORDER_SIDE_STYLE;\nborder-top-width = BORDER_SIDE_WIDTH;\nborder-right-width = BORDER_SIDE_WIDTH;\nborder-bottom-width = BORDER_SIDE_WIDTH;\nborder-left-width = BORDER_SIDE_WIDTH;\nBORDER_RADIUS = PLENGTH{1,2};\nborder-top-left-radius = BORDER_RADIUS;\nborder-top-right-radius = BORDER_RADIUS;\nborder-bottom-right-radius = BORDER_RADIUS;\nborder-bottom-left-radius = BORDER_RADIUS;\nborder-image-source = IMAGE;\nborder-image-slice = [NUM | PERCENTAGE]{1,4} || fill; /* relaxed */\nborder-image-width = [NUM | PLENGTH | auto]{1,4};\nborder-image-outset = [NUM | LENGTH]{1,4};\nborder-image-repeat = [ stretch | repeat | round | space ]{1,2};\nbottom = APLENGTH;\ncaption-side = top | bottom;\nclear = none | left | right | top | bottom | both | all | same;\nclip = rect(ALENGTH{4}) | rect(SPACE(ALENGTH{4})) | auto;\ncolor = COLOR;\nLIST_STYLE_TYPE = IDENT;\nTYPE_OR_UNIT_IN_ATTR = string | color | url | integer | number | length | angle | time | frequency;\nATTR = attr(SPACE(IDENT TYPE_OR_UNIT_IN_ATTR?) [ STRING | IDENT | COLOR | INT | NUM | PLENGTH | ANGLE | POS_TIME | FREQUENCY]?);\nCONTENT_LIST = [ STRING | URI | counter(IDENT LIST_STYLE_TYPE?) |\n    counters(IDENT STRING LIST_STYLE_TYPE?) | ATTR |\n    target-counter([ STRING | URI ] IDENT LIST_STYLE_TYPE?) |\n    target-counter(ATTR IDENT LIST_STYLE_TYPE?) |\n    target-counters([ STRING | URI ] IDENT STRING LIST_STYLE_TYPE?) |\n    target-counters(ATTR IDENT STRING LIST_STYLE_TYPE?) |\n    leader([ dotted | solid | space ] | STRING ) |\n    open-quote | close-quote | no-open-quote | no-close-quote |\n    content([ text | before | after | first-letter ]?) |\n    string(IDENT [first | start | last | first-except]?) |\n    element(IDENT [first | start | last | first-except]?) ]+;\nCONTENT = normal | none | CONTENT_LIST;\ncontent = CONTENT;\nCOUNTER = [ IDENT INT? ]+ | none;\ncounter-increment = COUNTER;\ncounter-reset = COUNTER;\ncounter-set = COUNTER;\ncursor = COMMA(URI* [ auto | crosshair | default | pointer | move | e-resize | ne-resize | nw-resize |\n    n-resize | se-resize | sw-resize | s-resize | w-resize | text | wait | help | progress ]);\ndirection = ltr | rtl;\ndisplay = inline | block | list-item | inline-block | table | inline-table | table-row-group |\n    table-header-group | table-footer-group | table-row | table-column-group | table-column |\n    table-cell | table-caption | none | oeb-page-head | oeb-page-foot | flex | inline-flex |\n    ruby | ruby-base | ruby-text | ruby-base-container | ruby-text-container | run-in | compact | marker |\n    flow-root | grid | inline-grid | contents;\nempty-cells = show | hide;\nFAMILY = SPACE(IDENT+) | STRING;\nFAMILY_LIST = COMMA( FAMILY+ );\nfont-family = FAMILY_LIST;\nfont-size = xx-small | x-small | small | medium | large | x-large | xx-large | larger | smaller | PPLENGTH;\nfont-style = normal | italic | oblique;\nfont-weight = normal | bold | bolder | lighter | POS_NUM;\nheight = PAPLENGTH | MIN_MAX_FIT_CONTENT;\nleft = APLENGTH;\nletter-spacing = normal | LENGTH_OR_NUM;\nline-height = normal | POS_NUM | PPLENGTH;\nlist-style-image = IMAGE;\nlist-style-position = inside | outside;\nlist-style-type = LIST_STYLE_TYPE;\nmargin-right = APLENGTH;\nmargin-left = APLENGTH;\nmargin-top = APLENGTH;\nmargin-bottom = APLENGTH;\nNPLENGTH = none | PLENGTH;\nmax-height = NPLENGTH | MIN_MAX_FIT_CONTENT;\nmax-width = NPLENGTH | MIN_MAX_FIT_CONTENT;\nmin-height = APLENGTH | MIN_MAX_FIT_CONTENT;\nmin-width = APLENGTH | MIN_MAX_FIT_CONTENT;\norphans = POS_INT;\noutline-offset = LENGTH;\noutline-color = COLOR | invert;\noutline-style = BORDER_SIDE_STYLE;\noutline-width = BORDER_SIDE_WIDTH;\noverflow = visible | hidden | scroll | auto | clip;\npadding-right = PPLENGTH;\npadding-left = PPLENGTH;\npadding-top = PPLENGTH;\npadding-bottom = PPLENGTH;\nPAGE_BREAK = auto | always | avoid | left | right | recto | verso;\npage-break-after = PAGE_BREAK;\npage-break-before = PAGE_BREAK;\npage-break-inside = avoid | auto;\nposition = static | relative | absolute | fixed | running(IDENT);\nquotes = [STRING STRING]+ | none | auto;\nright = APLENGTH;\ntable-layout = auto | fixed;\ntext-align = left | right | center | justify | start | end;\ntext-indent = PLENGTH;\ntext-transform = capitalize | uppercase | lowercase | none;\ntop = APLENGTH;\nvertical-align = baseline | sub | super | top | text-top | middle | bottom | text-bottom | PLENGTH;\nvisibility = visible | hidden | collapse;\nwhite-space = normal | pre | nowrap | pre-wrap | pre-line | break-spaces;\nwidows = POS_INT;\nwidth = PAPLENGTH | MIN_MAX_FIT_CONTENT;\nword-spacing = normal | LENGTH_OR_NUM;\nz-index = auto | INT;\n\n[epub,moz,webkit]hyphens = auto | manual | none;\n[webkit]hyphenate-character = auto | STRING;\n\n/* css-logical */\nmargin-block-start = APLENGTH;\nmargin-block-end = APLENGTH;\nmargin-inline-start = APLENGTH;\nmargin-inline-end = APLENGTH;\npadding-block-start = APLENGTH;\npadding-block-end = APLENGTH;\npadding-inline-start = APLENGTH;\npadding-inline-end = APLENGTH;\nborder-block-start-color = BORDER_SIDE_COLOR;\nborder-block-end-color = BORDER_SIDE_COLOR;\nborder-inline-start-color = BORDER_SIDE_COLOR;\nborder-inline-end-color = BORDER_SIDE_COLOR;\nborder-block-start-style = BORDER_SIDE_STYLE;\nborder-block-end-style = BORDER_SIDE_STYLE;\nborder-inline-start-style = BORDER_SIDE_STYLE;\nborder-inline-end-style = BORDER_SIDE_STYLE;\nborder-block-start-width = BORDER_SIDE_WIDTH;\nborder-block-end-width = BORDER_SIDE_WIDTH;\nborder-inline-start-width = BORDER_SIDE_WIDTH;\nborder-inline-end-width = BORDER_SIDE_WIDTH;\nblock-start = APLENGTH;\nblock-end = APLENGTH;\ninline-start = APLENGTH;\ninline-end = APLENGTH;\nblock-size = PAPLENGTH | MIN_MAX_FIT_CONTENT;\ninline-size = PAPLENGTH | MIN_MAX_FIT_CONTENT;\nmax-block-size = NPLENGTH | MIN_MAX_FIT_CONTENT;\nmax-inline-size = NPLENGTH | MIN_MAX_FIT_CONTENT;\nmin-block-size = APLENGTH | MIN_MAX_FIT_CONTENT;\nmin-inline-size = APLENGTH | MIN_MAX_FIT_CONTENT;\n\nSHAPE = auto | rectangle( PLENGTH{4} ) |  ellipse( PLENGTH{4} ) |  circle( PLENGTH{3} ) |\n    polygon( SPACE(PLENGTH+)+ );\n[epubx]shape-inside = SHAPE;\n[epubx,webkit]shape-outside = SHAPE;\n[epubx]wrap-flow = auto | both | start | end | maximum | clear | around /* epub al */;\n\nTRANSFORM_FUNCTION = matrix(NUM{6}) | translate(PLENGTH{1,2}) | translateX(PLENGTH) | translateY(PLENGTH) |\n scale(NUM{1,2}) | scaleX(NUM) | scaleY(NUM) | rotate(ANGLE) | skewX(ANGLE) | skewY(ANGLE);\n[epub]transform = none | TRANSFORM_FUNCTION+;\n[epub]transform-origin = [[[ top | bottom | left | right] PLENGTH?] | center | PLENGTH]{1,2}; /* relaxed */\n\nBOX = border-box | padding-box | content-box;\nSHADOW = SPACE(inset || LENGTH{2,4} || COLOR); /* relaxed */\n[webkit]background-size = COMMA( SPACE( [PLENGTH | auto ]{1,2} | cover | contain)+ );\n[webkit]background-origin = COMMA( BOX+ );\n[webkit]background-clip = COMMA( BOX+ );\n[webkit]box-shadow = none | COMMA( SHADOW+ );\ntext-shadow = none |  COMMA( SHADOW+ );\n[webkit]box-decoration-break = slice | clone;\nFILTER_FUNCTION = blur(LENGTH) | brightness(NUM | PERCENTAGE) | contrast(NUM | PERCENTAGE) | drop-shadow(SPACE(LENGTH{2,3} COLOR?))\n                | grayscale(NUM | PERCENTAGE) | hue-rotate(ANGLE) | invert(NUM | PERCENTAGE) | opacity(NUM | PERCENTAGE)\n                | saturate(NUM | PERCENTAGE) | sepia(NUM | PERCENTAGE);\nFILTER_FUNCTION_LIST = FILTER_FUNCTION+;\n[webkit]filter = none | FILTER_FUNCTION_LIST;\n\nopacity = NUM;\n\n[moz,webkit]column-width = LENGTH | auto;\n[moz,webkit]column-count = INT | auto;\n[moz,webkit]column-gap = LENGTH | normal;\n[moz,webkit]column-rule-color = COLOR;\n[moz,webkit]column-rule-style = BORDER_SIDE_STYLE;\n[moz,webkit]column-rule-width = BORDER_SIDE_WIDTH;\nBREAK = auto | avoid | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region;\nbreak-before = BREAK;\nbreak-after = BREAK;\nbreak-inside = auto | avoid | avoid-page | avoid-column | avoid-region;\n[webkit]column-span = none | auto | all;\n[moz]column-fill = auto | balance | balance-all;\nmargin-break = auto | keep | discard;\n\nsrc = COMMA([SPACE(URI format(STRING+)?) | local(FAMILY)]+); /* for font-face */\n\n[epubx,webkit]flow-from = IDENT;\n[epubx,webkit]flow-into = IDENT;\n[epubx]flow-linger = INT | none;\n[epubx]flow-priority = INT;\n[epubx]flow-options = none | [ exclusive || last || static ];\n[epubx]page = INT | auto | IDENT; /* page: IDENT is for CSS Paged Media */\n[epubx]min-page-width = LENGTH;\n[epubx]min-page-height = LENGTH;\n[epubx]required = true | false;\n[epubx]enabled = true | false;\n[epubx]conflicting-partitions = COMMA(IDENT+);\n[epubx]required-partitions = COMMA(IDENT+);\n[epubx]snap-height = LENGTH | none;\n[epubx]snap-width = LENGTH | none;\n[epubx]flow-consume = all | some;\n[epubx]utilization = NUM;\n[epubx]text-zoom = font-size | scale;\n\n[adapt]template = URI_OR_NONE;\n[adapt]behavior = IDENT;\n\n/* CSS Fonts */\nCOMMON_LIG_VALUES        = [ common-ligatures | no-common-ligatures ];\nDISCRETIONARY_LIG_VALUES = [ discretionary-ligatures | no-discretionary-ligatures ];\nHISTORICAL_LIG_VALUES    = [ historical-ligatures | no-historical-ligatures ];\nCONTEXTUAL_ALT_VALUES    = [ contextual | no-contextual ];\nfont-variant-ligatures = normal | none | [ COMMON_LIG_VALUES || DISCRETIONARY_LIG_VALUES || HISTORICAL_LIG_VALUES || CONTEXTUAL_ALT_VALUES ];\nfont-variant-caps = normal | small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps;\nNUMERIC_FIGURE_VALUES   = [ lining-nums | oldstyle-nums ];\nNUMERIC_SPACING_VALUES  = [ proportional-nums | tabular-nums ];\nNUMERIC_FRACTION_VALUES = [ diagonal-fractions | stacked-fractions ];\nfont-variant-numeric = normal | [ NUMERIC_FIGURE_VALUES || NUMERIC_SPACING_VALUES || NUMERIC_FRACTION_VALUES || ordinal || slashed-zero ];\nEAST_ASIAN_VARIANT_VALUES = [ jis78 | jis83 | jis90 | jis04 | simplified | traditional ];\nEAST_ASIAN_WIDTH_VALUES   = [ full-width | proportional-width ];\nfont-variant-east-asian = normal | [ EAST_ASIAN_VARIANT_VALUES || EAST_ASIAN_WIDTH_VALUES || ruby ];\nfont-variant_css2 = normal | small-caps; /* for font shorthand */\nfont-size-adjust = none | NNEG_NUM;\n[webkit]font-kerning = auto | normal | none;\nfont-feature-settings = COMMA( normal | SPACE( STRING [ on | off | INT ]? )+ );\nFONT_STRETCH_CSS3_VALUES = normal | wider | narrower | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded;\nfont-stretch = FONT_STRETCH_CSS3_VALUES | PERCENTAGE;\nfont-stretch_css3 = FONT_STRETCH_CSS3_VALUES; /* for font shorthand */\nfont-display = [ auto | block | swap | fallback | optional ];\nunicode-range = COMMA( URANGE+ );\n\n/* CSS Images */\nimage-resolution = RESOLUTION;\nobject-fit = fill | contain | cover | none | scale-down;\nobject-position = COMMA( SPACE(BG_POSITION_TERM{1,4})+ ); /* relaxed */\n\n/* CSS Paged Media */\nPAGE_SIZE = a10 | a9 | a8 | a7 | a6 | a5 | a4 | a3 | a2 | a1 | a0\n          | b10 | b9 | b8 | b7 | b6 | b5 | b4 | b3 | b2 | b1 | b0\n          | c10 | c9 | c8 | c7 | c6 | c5 | c4 | c3 | c2 | c1 | c0\n          | jis-b10 | jis-b9 | jis-b8 | jis-b7 | jis-b6 | jis-b5 | jis-b4 | jis-b3 | jis-b2 | jis-b1 | jis-b0\n          | letter | legal | ledger;\nbleed = auto | LENGTH;\nmarks = none | [ crop || cross ];\nsize = POS_LENGTH{1,2} | auto | [ PAGE_SIZE || [ portrait | landscape ] ];\ncrop-offset = auto | LENGTH;\n\n/* CSS Page Floats */\nfloat-reference = inline | column | region | page;\nfloat = block-start | block-end | inline-start | inline-end | snap-block | snap-inline | left | right | top | bottom | none | footnote;\nfloat-min-wrap-block = PPLENGTH;\n\n/* CSS Ruby */\nruby-align = start | center | space-between | space-around;\nruby-position = over | under | inter-character;\n\n/* CSS Size Adjust */\n[moz]text-size-adjust = auto | none | POS_PERCENTAGE;\n\n/* CSS Text */\n[webkit]line-break = auto | loose | normal | strict | anywhere;\noverflow-wrap = normal | break-word | anywhere;\n[moz]tab-size = NNEG_INT | NNEG_LENGTH;\n[moz]text-align-last = auto | start | end | left | right | center | justify;\ntext-justify = auto | none | inter-word | inter-character;\nword-break = normal | keep-all | break-all | break-word;\ntext-spacing-trim = auto | normal | space-all | trim-both | trim-auto |\n    [[ trim-start | space-start | space-first ] ||\n     [ trim-end | space-end | allow-end ] ||\n     [ trim-adjacent | space-adjacent ]];\ntext-autospace = normal | auto | no-autospace |\n    [[ ideograph-alpha || ideograph-numeric || punctuation ] || [ insert | replace ]];\nhanging-punctuation = none | [ first || [ force-end | allow-end ] || last ];\n\n/* CSS Text Decoration */\n[webkit]text-decoration-color = COLOR;\n[webkit]text-decoration-line = none | [ underline || overline || line-through || blink ];\n[webkit]text-decoration-skip = none | [ objects || spaces || ink || edges || box-decoration ];\n[webkit]text-decoration-style = solid | double | dotted | dashed | wavy;\n[webkit]text-decoration-thickness = from-font | APLENGTH;\n[epub,webkit]text-emphasis-color = COLOR;\n[webkit]text-emphasis-position = [ over | under ] [ right | left ];\n[epub,webkit]text-emphasis-style = none | [[ filled | open ] || [ dot | circle | double-circle | triangle | sesame ]] | STRING;\n[webkit]text-underline-position = auto | [ under || [ left | right ]];\n\n/* CSS Transforms */\n[webkit]backface-visibility = visible | hidden;\n\n/* CSS UI */\nbox-sizing = content-box | padding-box | border-box;\ntext-overflow = [clip | ellipsis | STRING]{1,2};\n\n/* CSS Writing Modes */\n[epub,webkit]text-combine = none | horizontal;\ntext-combine-upright = none | all; /* relaxed */\n[epub,webkit]text-orientation = mixed | upright | sideways-right | sideways-left | sideways | use-glyph-orientation /* the following values are kept for backward-compatibility */ | vertical-right | rotate-right | rotate-left | rotate-normal | auto;\nunicode-bidi = normal | embed | isolate | bidi-override | isolate-override | plaintext;\n[epub,webkit]writing-mode = horizontal-tb | vertical-rl | lr-tb | rl-tb | tb-rl | lr | rl | tb;\n\n/* CSS Flex box */\nFLEX_BASIS = content | PAPLENGTH;\nflex-direction = row | row-reverse | column | column-reverse;\nflex-wrap = nowrap | wrap | wrap-reverse;\norder = INT;\nflex-grow = NNEG_NUM;\nflex-shrink = NNEG_NUM;\nflex-basis = FLEX_BASIS;\nflex = none | [ [ NNEG_NUM NNEG_NUM? ] || FLEX_BASIS ];\njustify-content = flex-start | flex-end | center | space-between | space-around;\nalign-items = flex-start | flex-end | center | baseline | stretch;\nalign-self = auto | flex-start | flex-end | center | baseline | stretch;\nalign-content = flex-start | flex-end | center | space-between | space-around | stretch;\n\n/* Pointer Events */\ntouch-action = auto | none | [ pan-x || pan-y ] | manipulation;\n\n/* SVG 2 */\nOPACITY_VALUE = NUM | PERCENTAGE;\nDASH_ARRAY = COMMA( SPACE( [ LENGTH | PERCENTAGE | NUM ]+ )+ );\nPAINT = none | child | child(INT) | COLOR | SPACE( URI [none | COLOR]? ) | context-fill | context-stroke;\ncolor-interpolation = auto | sRGB | linearRGB;\ncolor-rendering = auto | optimizeSpeed | optimizeQuality;\nfill = PAINT;\nfill-opacity = OPACITY_VALUE;\nfill-rule = nonzero | evenodd;\nglyph-orientation-vertical = auto | NUM | ANGLE;\nimage-rendering = auto | optimizeSpeed | optimizeQuality | crisp-edges | pixelated;\nmarker-start = none | URI;\nmarker-mid = none | URI;\nmarker-end = none | URI;\npointer-events = bounding-box | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | none;\npaint-order = normal | [ fill || stroke || markers ];\nshape-rendering = auto | optimizeSpeed | crispEdges | geometricPrecision;\nstop-color = COLOR;\nstop-opacity = OPACITY_VALUE;\nstroke = PAINT;\nstroke-dasharray = none | DASH_ARRAY;\nstroke-dashoffset = PERCENTAGE | LENGTH_OR_NUM;\nstroke-linecap = butt | round | square;\nstroke-linejoin = miter | round | bevel;\nstroke-miterlimit = NUM;\nstroke-opacity = OPACITY_VALUE;\nstroke-width = PERCENTAGE | LENGTH_OR_NUM;\ntext-anchor = start | middle | end;\ntext-rendering = auto | optimizeSpeed | optimizeLegibility | geometricPrecision;\nvector-effect = none | SPACE( [ non-scaling-stroke | non-scaling-size | non-rotation | fixed-position ]+ [ viewport | screen ]? );\n\n/* SVG 1.1 */\nalignment-baseline = auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical;\nbaseline-shift = baseline | sub | super | PERCENTAGE | LENGTH_OR_NUM;\ndominant-baseline = auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge;\nmask = none | URI;\n\n/* css-masking-1 */\nSHAPE_RADIUS = PLENGTH | closest-side | farthest-side;\nFILL_RULE = nonzero | evenodd;\nSHAPE_BOX = BOX | margin-box;\nGEOMETRY_BOX = SHAPE_BOX | fill-box | stroke-box | view-box;\nBASIC_SHAPE =\n    inset( SPACE( PLENGTH{1,4} [ round PLENGTH{1,4} [ SLASH PLENGTH{1,4} ]? ]? ) )\n  | circle(  SPACE( [SHAPE_RADIUS]?    [at BG_POSITION_TERM{1,4}]? ) )\n  | ellipse( SPACE( SHAPE_RADIUS{2}? [at BG_POSITION_TERM{1,4}]? ) )\n  | polygon( FILL_RULE? COMMA( SPACE( PLENGTH{2} )+ )+ );\n[webkit]clip-path = none | URI | [ BASIC_SHAPE || GEOMETRY_BOX ];\nclip-rule = nonzero | evenodd;\n\n/* filters */\nflood-color = COLOR;\nflood-opacity = OPACITY_VALUE;\nlighting-color = COLOR;\n\n/* compositing-1 */\nBLEND_MODE = normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity;\nmix-blend-mode = BLEND_MODE;\nisolation = auto | isolate;\nbackground-blend-mode = COMMA( BLEND_MODE+ );\n\n/* CSS GCPM */\nstring-set = COMMA( SPACE( IDENT CONTENT_LIST )+ | none );\nfootnote-policy = auto | line;\n\n/* CSS Repeated Headers and Footers */\n[viv]repeat-on-break = auto | none | header | footer;\n\n/* Compatibility */\n[webkit]text-fill-color = COLOR;\n[webkit]text-stroke-color = COLOR;\n[webkit]text-stroke-width = BORDER_SIDE_WIDTH;\n\nDEFAULTS\n\nbackground-attachment: scroll;\nbackground-color: transparent;\nbackground-image: none;\nbackground-repeat: repeat;\nbackground-position: 0% 0%;\nbackground-clip: border-box;\nbackground-origin: padding-box;\nbackground-size: auto;\nborder-top-color: currentColor;\nborder-right-color: currentColor;\nborder-bottom-color: currentColor;\nborder-left-color: currentColor;\nborder-top-style: none;\nborder-right-style: none;\nborder-bottom-style: none;\nborder-left-style: none;\nborder-top-width: 3px;\nborder-right-width: 3px;\nborder-bottom-width: 3px;\nborder-left-width: 3px;\nborder-top-left-radius: 0;\nborder-top-right-radius: 0;\nborder-bottom-right-radius: 0;\nborder-bottom-left-radius: 0;\nborder-image-source: none;\nborder-image-slice: 100%;\nborder-image-width: 1;\nborder-image-outset: 0;\nborder-image-repeat: stretch;\ncolumn-count: auto;\ncolumn-gap: normal;\ncolumn-width: auto;\ncolumn-rule-color: currentColor;\ncolumn-rule-style: none;\ncolumn-rule-width: 3px;\ncolumn-fill: balance;\noutline-color: currentColor;\noutline-style: none;\noutline-width: 3px;\nflex-direction: row;\nflex-wrap: nowrap;\nfont-family: serif;\nfont-style: normal;\nfont-size: medium;\nfont-size-adjust: none;\nfont-kerning: auto;\nfont-feature-settings: normal;\nfont-variant-ligatures: normal;\nfont-variant-caps: normal;\nfont-variant-numeric: normal;\nfont-variant-east-asian: normal;\nfont-weight: normal;\nfont-stretch: normal;\nline-height: normal;\nlist-style-image: none;\nlist-style-position: outside;\nlist-style-type: disc;\nmargin-bottom: auto;\nmargin-left: auto;\nmargin-right: auto;\nmargin-top: auto;\npadding-bottom: auto;\npadding-left: auto;\npadding-right: auto;\npadding-top: auto;\ntext-autospace: normal;\ntext-emphasis-color: currentColor;\ntext-emphasis-style: none;\ntext-spacing-trim: normal;\ntext-stroke-color: currentColor;\ntext-stroke-width: 0;\nmarker-start: none;\nmarker-mid: none;\nmarker-end: none;\n\n/* css-logical */\nborder-block-start-color: currentColor;\nborder-block-end-color: currentColor;\nborder-inline-start-color: currentColor;\nborder-inline-end-color: currentColor;\nborder-block-start-style: none;\nborder-block-end-style: none;\nborder-inline-start-style: none;\nborder-inline-end-style: none;\nborder-block-start-width: 3px;\nborder-block-end-width: 3px;\nborder-inline-start-width: 3px;\nborder-inline-end-width: 3px;\n\nSHORTHANDS\n\nall = ALL;\nbackground = COMMA background-image [background-position [ / background-size ]] background-repeat\n     background-attachment [background-origin background-clip] background-color; /* background-color is a special case, see the code */\nborder-top = border-top-width border-top-style border-top-color;\nborder-right = border-right-width border-right-style border-right-color;\nborder-bottom = border-bottom-width border-bottom-style border-bottom-color;\nborder-left = border-left-width border-left-style border-left-color;\nborder-width = INSETS border-top-width border-right-width border-bottom-width border-left-width;\nborder-style = INSETS border-top-style border-right-style border-bottom-style border-left-style;\nborder-color = INSETS border-top-color border-right-color border-bottom-color border-left-color;\nborder = border-width border-style border-color;\nborder-image = border-image-source border-image-slice [ / border-image-width [ / border-image-outset ] ]\n     border-image-repeat;\nborder-radius = INSETS_SLASH border-top-left-radius border-top-right-radius\n     border-bottom-right-radius border-bottom-left-radius;\n[moz,webkit]columns = column-width column-count;\n[moz,webkit]column-rule = column-rule-width column-rule-style column-rule-color;\nflex-flow = flex-direction flex-wrap;\noeb-column-number = column-count;\noutline = outline-width outline-style outline-color;\nlist-style = list-style-position list-style-type list-style-image;\nmargin = INSETS margin-top margin-right margin-bottom margin-left;\npadding = INSETS padding-top padding-right padding-bottom padding-left;\nfont = FONT font-style font-variant_css2 font-weight font-stretch_css3 /* font-size line-height font-family are special-cased */;\nfont-variant = font-variant-ligatures font-variant-caps font-variant-numeric font-variant-east-asian;\n[epub,webkit]text-emphasis = text-emphasis-style text-emphasis-color;\nmarker = INSETS marker-start marker-mid marker-end;\n[webkit]text-stroke = text-stroke-width text-stroke-color;\ntext-decoration = text-decoration-line text-decoration-color text-decoration-style text-decoration-thickness;\ntext-spacing = TEXT_SPACING text-autospace text-spacing-trim;\n\n/* css-logical */\nmargin-block = INSETS margin-block-start margin-block-end;\nmargin-inline = INSETS margin-inline-start margin-inline-end;\npadding-block = INSETS padding-block-start padding-block-end;\npadding-inline = INSETS padding-inline-start padding-inline-end;\nborder-block-width = INSETS border-block-start-width border-block-end-width;\nborder-block-style = INSETS border-block-start-style border-block-end-style;\nborder-block-color = INSETS border-block-start-color border-block-end-color;\nborder-inline-width = INSETS border-inline-start-width border-inline-end-width;\nborder-inline-style = INSETS border-inline-start-style border-inline-end-style;\nborder-inline-color = INSETS border-inline-start-color border-inline-end-color;\nborder-block = border-block-width border-block-style border-block-color;\nborder-inline = border-inline-width border-inline-style border-inline-color;\nborder-block-start = border-block-start-width border-block-start-style border-block-start-color;\nborder-block-end = border-block-end-width border-block-end-style border-block-end-color;\nborder-inline-start = border-inline-start-width border-inline-start-style border-inline-start-color;\nborder-inline-end = border-inline-end-width border-inline-end-style border-inline-end-color;\ninset-block-start = block-start;\ninset-block-end = block-end;\ninset-inline-start = inline-start;\ninset-inline-end = inline-end;\ninset-block = INSETS block-start block-end;\ninset-inline = INSETS inline-start inline-end;\ninset = INSETS top right bottom left;\n\n/* old names  */\nword-wrap = overflow-wrap;\n[adapt,webkit]margin-before = margin-block-start;\n[adapt,webkit]margin-after = margin-block-end;\n[adapt,webkit]margin-start = margin-inline-start;\n[adapt,webkit]margin-end = margin-inline-end;\n[adapt,webkit]padding-before = padding-block-start;\n[adapt,webkit]padding-after = padding-block-end;\n[adapt,webkit]padding-start = padding-inline-start;\n[adapt,webkit]padding-end = padding-inline-end;\n[adapt,webkit]border-before-color = border-block-start-color;\n[adapt,webkit]border-after-color = border-block-end-color;\n[adapt,webkit]border-start-color = border-inline-start-color;\n[adapt,webkit]border-end-color = border-inline-end-color;\n[adapt,webkit]border-before-style = border-block-start-style;\n[adapt,webkit]border-after-style = border-block-end-style;\n[adapt,webkit]border-start-style = border-inline-start-style;\n[adapt,webkit]border-end-style = border-inline-end-style;\n[adapt,webkit]border-before-width = border-block-start-width;\n[adapt,webkit]border-after-width = border-block-end-width;\n[adapt,webkit]border-start-width = border-inline-start-width;\n[adapt,webkit]border-end-width = border-inline-end-width;\n[adapt,webkit]before = block-start;\n[adapt,webkit]after = block-end;\n[adapt,webkit]start = inline-start;\n[adapt,webkit]end = inline-end;\n\n",Zi='\n<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://www.pyroxy.com/ns/shadow">\n<head>\n<style><![CDATA[\n\n.-vivliostyle-footnote-content {\n  float: footnote;\n}\n\n.-vivliostyle-table-cell-container {\n  display: block;\n}\n\n]]></style>\n</head>\n<body>\n\n<s:template id="footnote"><s:content/><s:include class="-vivliostyle-footnote-content"/></s:template>\n\n<s:template id="table-cell"><div data-vivliostyle-flow-root="true" class="-vivliostyle-table-cell-container"><s:content/></div></s:template>\n\n</body>\n</html>',Qi='\n@namespace "http://www.w3.org/1999/xhtml";\n\n:root {\n  hyphens: -epubx-expr(pref-hyphenate? "auto": "manual");\n}\n:root[data-vivliostyle-epub-spine-properties~="page-spread-left"] {\n  break-before: left;\n}\n:root[data-vivliostyle-epub-spine-properties~="page-spread-right"] {\n  break-before: right;\n}\n\n@-adapt-footnote-area {\n  display: block;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n}\n\n@-adapt-footnote-area ::before {\n  display: block;\n  border-block-start-width: 1px;\n  border-block-start-style: solid;\n  border-block-start-color: black;\n  margin-block-end: 0.4em;\n  margin-inline-start: 0;\n  margin-inline-end: 60%;\n}\n\n/* default page master */\n@-epubx-page-master :background-host {\n  @-epubx-partition :layout-host {\n    -epubx-flow-from: body;\n    top: -epubx-expr(header.margin-bottom-edge);\n    bottom: -epubx-expr(page-height - footer.margin-top-edge);\n    left: 0px;\n    right: 0px;\n    column-width: 25em;\n  }\n  @-epubx-partition footer :oeb-page-foot {\n    writing-mode: horizontal-tb;\n    -epubx-flow-from: oeb-page-foot;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n  }\n  @-epubx-partition header :oeb-page-head {\n    writing-mode: horizontal-tb;\n    -epubx-flow-from: oeb-page-head;\n    top: 0px;\n    left: 0px;\n    right: 0px;\n  }\n}\n\n@page {\n  @top-left-corner {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @top-left {\n    text-align: left;\n    vertical-align: middle;\n  }\n  @top-center {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @top-right {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @top-right-corner {\n    text-align: left;\n    vertical-align: middle;\n  }\n  @left-top {\n    text-align: center;\n    vertical-align: top;\n  }\n  @left-middle {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @left-bottom {\n    text-align: center;\n    vertical-align: bottom;\n  }\n  @right-top {\n    text-align: center;\n    vertical-align: top;\n  }\n  @right-middle {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @right-bottom {\n    text-align: center;\n    vertical-align: bottom;\n  }\n  @bottom-left-corner {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @bottom-left {\n    text-align: left;\n    vertical-align: middle;\n  }\n  @bottom-center {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @bottom-right {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @bottom-right-corner {\n    text-align: left;\n    vertical-align: middle;\n  }\n}\n\n@media print {\n  @page {\n    margin: 10%;\n  }\n}\n',Ji='\n@namespace "http://www.w3.org/1999/xhtml";\n@namespace m "http://www.w3.org/1998/Math/MathML";\n@namespace epub "http://www.idpf.org/2007/ops";\n\nhtml,\naddress,\nblockquote,\nbody,\ndd,\ndiv,\ndl,\ndt,\nfieldset,\nform,\nframe,\nframeset,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nnoframes,\nol,\np,\nul,\ncenter,\ndir,\nhr,\nmenu,\npre,\ndetails,\ndialog,\nlegend,\nlisting,\noptgroup,\noption,\nplaintext,\nsearch,\nxmp,\narticle,\nsection,\nnav,\naside,\nhgroup,\nfooter,\nheader,\nfigure,\nfigcaption,\nmain {\n  display: block;\n}\nli {\n  display: list-item;\n}\nhead {\n  display: none !important;\n}\ntable {\n  display: table;\n}\ntr {\n  display: table-row;\n}\nthead {\n  display: table-header-group;\n  break-after: avoid;\n}\ntbody {\n  display: table-row-group;\n}\ntfoot {\n  display: table-footer-group;\n  break-before: avoid;\n}\ncol {\n  display: table-column;\n}\ncolgroup {\n  display: table-column-group;\n}\ntd,\nth {\n  display: table-cell;\n}\ncaption {\n  display: table-caption;\n  text-align: center;\n}\nth {\n  font-weight: bolder;\n  text-align: center;\n}\n*[hidden],\nlink,\nstyle,\nscript {\n  display: none;\n}\nh1 {\n  font-size: 2em;\n  margin-block: 0.67em;\n}\nh2 {\n  font-size: 1.5em;\n  margin-block: 0.83em;\n}\nh3 {\n  font-size: 1.17em;\n  margin-block: 1em;\n}\nh4 {\n  font-size: 1em;\n  margin-block: 1.33em;\n}\nh5 {\n  font-size: 0.83em;\n  margin-block: 1.67em;\n}\nh6 {\n  font-size: 0.67em;\n  margin-block: 2.33em;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-weight: bold;\n  break-after: avoid;\n}\np,\nblockquote,\nfigure,\nul,\nol,\ndl,\ndir,\nmenu {\n  margin-block: 1em;\n}\nb,\nstrong {\n  font-weight: bolder;\n}\nblockquote,\nfigure {\n  margin-inline: 40px;\n}\ni,\ncite,\ndfn,\nem,\nvar,\naddress {\n  font-style: italic;\n}\npre,\ntt,\ncode,\nkbd,\nsamp {\n  font-family: monospace;\n  text-spacing: none;\n  hanging-punctuation: none;\n}\nlisting,\nplaintext,\nxmp,\npre {\n  white-space: pre;\n}\npre[wrap] {\n  white-space: pre-wrap;\n}\nbutton,\ntextarea,\ninput,\nselect {\n  display: inline-block;\n}\nbig {\n  font-size: 1.17em;\n}\nsmall,\nsub,\nsup {\n  font-size: 0.83em;\n}\nsub {\n  vertical-align: sub;\n}\nsup {\n  vertical-align: super;\n}\ntable {\n  box-sizing: border-box;\n  border-spacing: 2px;\n  border-collapse: separate;\n  text-indent: initial;\n}\nthead,\ntbody,\ntfoot,\ntable > tr {\n  vertical-align: middle;\n}\ntr,\ntd,\nth {\n  vertical-align: inherit;\n}\ns,\nstrike,\ndel {\n  text-decoration: line-through;\n}\nhr {\n  border-style: inset;\n  border-width: 1px;\n  margin-block: 0.5em;\n}\nhr[color],\nhr[noshade] {\n  border-style: solid;\n}\nol,\nul,\ndir,\nmenu {\n  padding-inline-start: 40px;\n}\ndd {\n  margin-inline-start: 40px;\n}\nol ul,\nul ol,\nul ul,\nol ol {\n  margin-block: 0;\n}\nu,\nins {\n  text-decoration: underline;\n}\ncenter {\n  text-align: center;\n}\nq::before {\n  content: open-quote;\n}\nq::after {\n  content: close-quote;\n}\n\nruby {\n  display: ruby;\n}\nrp {\n  display: none;\n}\nrbc {\n  display: ruby-base-container;\n}\nrtc {\n  display: ruby-text-container;\n}\nrb {\n  display: ruby-base;\n  white-space: nowrap;\n}\nrt {\n  display: ruby-text;\n}\nrtc,\nrt {\n  text-emphasis: none;\n  white-space: nowrap;\n  line-height: 1;\n}\nrtc,\nrt {\n  font-size: 50%;\n}\nrtc:lang(zh-TW),\nrt:lang(zh-TW) {\n  font-size: 30%;\n}\nrtc > rt,\nrtc > rt:lang(zh-TW) {\n  font-size: 100%;\n}\n\n/* Bidi settings */\nbdo[dir="ltr"] {\n  direction: ltr;\n  unicode-bidi: bidi-override;\n}\nbdo[dir="rtl"] {\n  direction: rtl;\n  unicode-bidi: bidi-override;\n}\n*[dir="ltr"] {\n  direction: ltr;\n  unicode-bidi: isolate;\n}\n*[dir="rtl"] {\n  direction: rtl;\n  unicode-bidi: isolate;\n}\n\n/* MathML */\nm|math[display="block"] {\n  display: block;\n}\n\n/*------------------ epub-specific ---------------------*/\n\na[epub|type="noteref"] {\n  font-size: 0.75em;\n  vertical-align: super;\n  line-height: 0.01;\n}\n\na[epub|type="noteref"]:href-epub-type(footnote) {\n  -adapt-template: url(user-agent.xml#footnote);\n  text-decoration: none;\n}\n\naside[epub|type="footnote"] {\n  display: none;\n}\n\naside[epub|type="footnote"]:footnote-content {\n  display: block;\n  margin: 0.25em;\n  font-size: 1.2em;\n  line-height: 1.2;\n}\n\nepub|trigger {\n  display: none;\n}\n\nepub|switch {\n  display: inline;\n}\n\nepub|default {\n  display: inline;\n}\n\nepub|case {\n  display: none;\n}\n\nepub|case[required-namespace::supported] {\n  display: inline;\n}\n\nepub|case[required-namespace::supported] ~ epub|case {\n  display: none;\n}\n\nepub|case[required-namespace::supported] ~ epub|default {\n  display: none;\n}\n',tu='\n@namespace "http://www.w3.org/1999/xhtml";\n\n*:not([data-vivliostyle-role=doc-toc],\n  [data-vivliostyle-role=doc-toc] *,\n  :has([data-vivliostyle-role=doc-toc]),\n  :is(h1,h2,h3,h4,h5,h6):has(+:not(nav)[data-vivliostyle-role=doc-toc])) {\n  display: none;\n}\n\n[hidden] {\n  display: revert;\n}\n\n[data-vivliostyle-role=doc-toc] li a {\n  -adapt-behavior: toc-node-anchor;\n}\n\n[data-vivliostyle-role=doc-toc] li {\n  -adapt-behavior: toc-node;\n}\n\n[data-vivliostyle-role=doc-toc] li > :not(ul,ol):first-child {\n  -adapt-behavior: toc-node-first-child;\n}\n\n[data-vivliostyle-role=doc-toc] :is(ol,ul),\n[data-vivliostyle-role=doc-toc]:is(ol,ul) {\n  -adapt-behavior: toc-container;\n}\n',eu='\n[data-viv-margin-discard~="block-start"] {\n  margin-block-start: 0 !important;\n}\n[data-viv-margin-discard~="block-end"] {\n  margin-block-end: 0 !important;\n}\n[data-viv-margin-discard~="inline-start"] {\n  margin-inline-start: 0 !important;\n}\n[data-viv-margin-discard~="inline-end"] {\n  margin-inline-end: 0 !important;\n}\n\n[data-viv-box-break~="inline-start"]:not([data-viv-box-break~="clone"]) {\n  margin-inline-start: 0 !important;\n  padding-inline-start: 0 !important;\n  border-inline-start-width: 0 !important;\n  border-start-start-radius: 0 !important;\n  border-end-start-radius: 0 !important;\n}\n[data-viv-box-break~="inline-end"]:not([data-viv-box-break~="clone"]) {\n  margin-inline-end: 0 !important;\n  padding-inline-end: 0 !important;\n  border-inline-end-width: 0 !important;\n  border-start-end-radius: 0 !important;\n  border-end-end-radius: 0 !important;\n}\n[data-viv-box-break~="block-start"]:not([data-viv-box-break~="clone"]) {\n  margin-block-start: 0 !important;\n  padding-block-start: 0 !important;\n  border-block-start-width: 0 !important;\n  border-start-start-radius: 0 !important;\n  border-start-end-radius: 0 !important;\n}\n[data-viv-box-break~="block-end"]:not([data-viv-box-break~="clone"]) {\n  margin-block-end: 0 !important;\n  padding-block-end: 0 !important;\n  border-block-end-width: 0 !important;\n  border-end-start-radius: 0 !important;\n  border-end-end-radius: 0 !important;\n}\n[data-viv-box-break~="block-start"][data-viv-box-break~="text-start"] {\n  text-indent: 0 !important;\n}\n[data-viv-box-break~="block-end"][data-viv-box-break~="text-end"][data-viv-box-break~="justify"] {\n  text-align-last: justify !important;\n}\n[data-viv-box-break~="block-end"][data-viv-box-break~="text-end"][data-viv-box-break~="justify"] > * {\n  text-align-last: auto;\n}\n[data-viv-box-break~="block-end"][data-viv-box-break~="text-end"]:not([data-viv-box-break~="justify"]) {\n  text-align-last: auto !important;\n}\n\nspan.viv-anonymous-block {\n  display: block;\n}\n\n[data-vivliostyle-page-container] {\n  text-spacing-trim: space-all;\n  text-autospace: no-autospace;\n}\nviv-ts-open.viv-ts-auto > viv-ts-inner,\nviv-ts-open.viv-ts-trim > viv-ts-inner {\n  margin-inline-start: -0.5em;\n}\nviv-ts-close.viv-ts-auto > viv-ts-inner,\nviv-ts-close.viv-ts-trim > viv-ts-inner {\n  letter-spacing: -0.5em;\n}\nviv-ts-close.viv-hang-end > viv-ts-inner,\nviv-ts-close.viv-hang-last > viv-ts-inner {\n  letter-spacing: -1em;\n}\nviv-ts-open.viv-ts-auto::before,\nviv-ts-close.viv-ts-auto::after,\nviv-ts-close.viv-hang-end::after {\n  content: " ";\n  font-family: Courier, monospace;\n  word-spacing: normal;\n  letter-spacing: -0.11em;\n  line-height: 0;\n  text-orientation: mixed;\n  visibility: hidden;\n}\nviv-ts-close.viv-hang-end:not(.viv-hang-hw)::after {\n  letter-spacing: 0.4em;\n}\nviv-ts-close.viv-hang-hw > viv-ts-inner {\n  letter-spacing: -0.5em;\n}\nviv-ts-open.viv-hang-first > viv-ts-inner {\n  display: inline-block;\n  line-height: 1;\n  inline-size: 1em;\n  text-indent: 0;\n  text-align: end;\n  text-align-last: end;\n  margin-inline-start: -1em;\n}\nviv-ts-thin-sp::after {\n  content: " ";\n  font-family: Times, serif;\n  word-spacing: normal;\n  letter-spacing: -0.125em;\n  line-height: 0;\n  text-orientation: mixed;\n}\n\nspan[data-viv-leader] {\n  text-combine-upright: none;\n  text-orientation: mixed;\n  white-space: pre;\n}\n';function nu(t,e,n,i,u){var r=Oi("ajax"),o=new XMLHttpRequest,a=r.suspend(o),s={status:0,statusText:"",url:t,contentType:null,responseText:null,responseXML:null,responseBlob:null};o.open(n||"GET",t,!0),e&&(o.responseType=e),o.onreadystatechange=function(){if(4===o.readyState){if(s.status=o.status,s.url=o.responseURL,s.statusText=o.statusText||404==o.status&&"Not Found"||"",200==s.status||0==s.status)if(e&&e!==_i.DOCUMENT||!o.responseXML||"parsererror"==o.responseXML.documentElement.localName)if((!e||e===_i.DOCUMENT)&&o.response instanceof Document)s.responseXML=o.response,s.contentType=o.response.contentType;else{var n=o.response;e&&e!==_i.TEXT||"string"!=typeof n?n?s.responseBlob="string"==typeof n?iu([n]):n:h.warn("Unexpected empty success response for",t):s.responseText=n;var i=o.getResponseHeader("Content-Type");i&&(s.contentType=i.replace(/(.*);.*$/,"$1"))}else s.responseXML=o.responseXML,s.contentType=o.responseXML.contentType;a.schedule(s)}};try{i?(o.setRequestHeader("Content-Type",u||"text/plain; charset=UTF-8"),o.send(i)):(/^file:|^https?:\/\/[^/]+\.githubusercontent\.com|\.(xhtml|xht|opf)$/i.test(t)?/\/aozorabunko\/[^/]+\/cards\/[^/]+\/files\/[^/.]+\.html$/.test(t)?o.overrideMimeType("text/html; charset=Shift_JIS"):/\.(html|htm)$/i.test(t)?o.overrideMimeType("text/html; charset=UTF-8"):/\.(xhtml|xht|xml|opf)$/i.test(t)?o.overrideMimeType("application/xml; charset=UTF-8"):/\.(txt|css)$/i.test(t)?o.overrideMimeType("text/plain; charset=UTF-8"):o.overrideMimeType("text/html; charset=UTF-8"):/^data:,(<|%3c)/i.test(t)?o.overrideMimeType("text/html; charset=UTF-8"):/^data:,/i.test(t)&&o.overrideMimeType("text/plain; charset=UTF-8"),o.send(null))}catch(e){h.warn(e,"Error fetching "+t),a.schedule(s)}return r.result()}function iu(t,e){return new Blob(t,{type:e||"application/octet-stream"})}!function(t){t.DEFAULT="",t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(_i||(_i={}));var uu=function(){function t(t,e){this.parser=void 0,this.type=void 0,this.resources={},this.fetchers={},this.parser=t,this.type=e}var e=t.prototype;return e.load=function(t,e,n){t=V(t);var i=this.resources[t];return void 0!==i?Ri(i):this.fetch(t,e,n).get()},e.fetchInner=function(t,e,n){var i=this,u=Oi("fetch"),r=t.endsWith("?viv-toc-box");r&&(t=t.replace("?viv-toc-box",""));var o=X("user-agent.xml",j),a=!r&&t===o;return a&&(t="data:application/xml,"+encodeURIComponent(Zi)),nu(t,this.type).then((function(s){if(s.status>=400&&e)throw new Error((n||"Failed to fetch required resource: "+t)+" ("+s.status+(s.statusText?" "+s.statusText:"")+")");r?(t+="?viv-toc-box",s.url+="?viv-toc-box"):a&&(s.url=t=o),i.parser(s,i).then((function(e){delete i.fetchers[t],i.resources[t]=e,u.finish(e)}))})),u.result()},e.fetch=function(t,e,n){var i=this;if(t=V(t),this.resources[t])return null;var u=this.fetchers[t];return u||(u=new Xi((function(){return i.fetchInner(t,e,n)}),"Fetch "+t),this.fetchers[t]=u,u.start()),u},e.get=function(t){return this.resources[V(t)]},e.delete=function(t){delete this.resources[V(t)]},t}();function ru(t,e){var n=t.responseText;return Ri(n?U(n):null)}function ou(t,e,n){var i=new Xi((function(){var i=Oi("loadElement"),u=i.suspend(t),r=!1,o=function(t){r||(r=!0,u.schedule(t?t.type:"timeout"))};return t.addEventListener("load",o,!1),t.addEventListener("error",o,!1),t.addEventListener("abort",o,!1),t.namespaceURI==G.SVG?(e&&t.setAttributeNS(G.XLINK,"xlink:href",e),setTimeout(o,300)):"script"===t.localName?setTimeout(o,3e3):e&&(t.src=e,n&&(t.alt=n)),i.result()}),"loadElement "+(e||t.localName));return i.start(),i}var au,su=33554432,lu=50331648,cu=67108864;!function(t){t.USER_AGENT="UA",t.USER="User",t.AUTHOR="Author"}(au||(au={}));var hu,Du=function(){function t(t){this.scope=void 0,this.flavor=void 0,this.scope=t,this.flavor=au.AUTHOR}var e=t.prototype;return e.getCurrentToken=function(){return null},e.getScope=function(){return this.scope},e.error=function(t,e){},e.startStylesheet=function(t){this.flavor=t},e.tagSelector=function(t,e){},e.classSelector=function(t){},e.pseudoclassSelector=function(t,e){},e.pseudoelementSelector=function(t,e){},e.idSelector=function(t){},e.attributeSelector=function(t,e,n,i){},e.descendantSelector=function(){},e.childSelector=function(){},e.adjacentSiblingSelector=function(){},e.followingSiblingSelector=function(){},e.nextSelector=function(){},e.startSelectorRule=function(){},e.startFontFaceRule=function(){},e.startFootnoteRule=function(t){},e.startViewportRule=function(){},e.startDefineRule=function(){},e.startRegionRule=function(){},e.startPageRule=function(){},e.startPageMarginBoxRule=function(t){},e.startWhenRule=function(t){},e.startMediaRule=function(t){this.startWhenRule(t)},e.startFlowRule=function(t){},e.startPageTemplateRule=function(){},e.startPageMasterRule=function(t,e,n){},e.startPartitionRule=function(t,e,n){},e.startPartitionGroupRule=function(t,e,n){},e.startRuleBody=function(){},e.property=function(t,e,n){},e.endRule=function(){},e.startFuncWithSelector=function(t){},e.endFuncWithSelector=function(){},e.pushSelectorText=function(t){},e.getImportantSpecificity=function(){switch(this.flavor){case au.USER_AGENT:return 0;case au.USER:return 100663296;default:return 83886080}},e.getBaseSpecificity=function(){switch(this.flavor){case au.USER_AGENT:return 0;case au.USER:return 16777216;default:return su}},t}(),du=function(t){function e(){var e;return(e=t.call(this,null)||this).stack=[],e.tokenizer=null,e.slave=null,e}N(e,t);var n=e.prototype;return n.pushHandler=function(t){this.stack.push(this.slave),this.slave=t},n.popHandler=function(){this.slave=this.stack.pop()},n.getCurrentToken=function(){return this.tokenizer?this.tokenizer.token():null},n.getScope=function(){return this.slave.getScope()},n.error=function(t,e){this.slave.error(t,e)},n.errorMsg=function(t,e){var n;h.warn(t,null!=(n=null==e?void 0:e.toString())?n:"")},n.startStylesheet=function(e){t.prototype.startStylesheet.call(this,e),this.stack.length>0&&(this.slave=this.stack[0],this.stack=[]),this.slave.startStylesheet(e)},n.tagSelector=function(t,e){this.slave.tagSelector(t,e)},n.classSelector=function(t){this.slave.classSelector(t)},n.pseudoclassSelector=function(t,e){this.slave.pseudoclassSelector(t,e)},n.pseudoelementSelector=function(t,e){this.slave.pseudoelementSelector(t,e)},n.idSelector=function(t){this.slave.idSelector(t)},n.attributeSelector=function(t,e,n,i){this.slave.attributeSelector(t,e,n,i)},n.descendantSelector=function(){this.slave.descendantSelector()},n.childSelector=function(){this.slave.childSelector()},n.adjacentSiblingSelector=function(){this.slave.adjacentSiblingSelector()},n.followingSiblingSelector=function(){this.slave.followingSiblingSelector()},n.nextSelector=function(){this.slave.nextSelector()},n.startSelectorRule=function(){this.slave.startSelectorRule()},n.startFontFaceRule=function(){this.slave.startFontFaceRule()},n.startFootnoteRule=function(t){this.slave.startFootnoteRule(t)},n.startViewportRule=function(){this.slave.startViewportRule()},n.startDefineRule=function(){this.slave.startDefineRule()},n.startRegionRule=function(){this.slave.startRegionRule()},n.startPageRule=function(){this.slave.startPageRule()},n.startPageMarginBoxRule=function(t){this.slave.startPageMarginBoxRule(t)},n.startWhenRule=function(t){this.slave.startWhenRule(t)},n.startFlowRule=function(t){this.slave.startFlowRule(t)},n.startPageTemplateRule=function(){this.slave.startPageTemplateRule()},n.startPageMasterRule=function(t,e,n){this.slave.startPageMasterRule(t,e,n)},n.startPartitionRule=function(t,e,n){this.slave.startPartitionRule(t,e,n)},n.startPartitionGroupRule=function(t,e,n){this.slave.startPartitionGroupRule(t,e,n)},n.startRuleBody=function(){this.slave.startRuleBody()},n.property=function(t,e,n){this.slave.property(t,e,n)},n.endRule=function(){this.slave.endRule()},n.startFuncWithSelector=function(t){this.slave.startFuncWithSelector(t)},n.endFuncWithSelector=function(){this.slave.endFuncWithSelector()},n.pushSelectorText=function(t){this.slave.pushSelectorText(t)},e}(Du),fu=function(t){function e(e,n,i){var u;return(u=t.call(this,e)||this).owner=void 0,u.topLevel=void 0,u.depth=0,u.owner=n,u.topLevel=i,n&&(u.flavor=n.flavor),u}N(e,t);var n=e.prototype;return n.getCurrentToken=function(){return this.owner.getCurrentToken()},n.error=function(t,e){this.owner.errorMsg(t,e)},n.startRuleBody=function(){this.depth++},n.endRule=function(){0!=--this.depth||this.topLevel||this.owner.popHandler()},e}(Du),pu=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.report=function(t){this.error(t,this.getCurrentToken())},n.reportAndSkip=function(t){this.report(t),this.owner.pushHandler(new fu(this.scope,this.owner,!1))},n.startSelectorRule=function(){this.reportAndSkip("E_CSS_UNEXPECTED_SELECTOR")},n.startFontFaceRule=function(){this.reportAndSkip("E_CSS_UNEXPECTED_FONT_FACE")},n.startFootnoteRule=function(t){this.reportAndSkip("E_CSS_UNEXPECTED_FOOTNOTE")},n.startViewportRule=function(){this.reportAndSkip("E_CSS_UNEXPECTED_VIEWPORT")},n.startDefineRule=function(){this.reportAndSkip("E_CSS_UNEXPECTED_DEFINE")},n.startRegionRule=function(){this.reportAndSkip("E_CSS_UNEXPECTED_REGION")},n.startPageRule=function(){this.reportAndSkip("E_CSS_UNEXPECTED_PAGE")},n.startWhenRule=function(t){this.reportAndSkip("E_CSS_UNEXPECTED_WHEN")},n.startFlowRule=function(t){this.reportAndSkip("E_CSS_UNEXPECTED_FLOW")},n.startPageTemplateRule=function(){this.reportAndSkip("E_CSS_UNEXPECTED_PAGE_TEMPLATE")},n.startPageMasterRule=function(t,e,n){this.reportAndSkip("E_CSS_UNEXPECTED_PAGE_MASTER")},n.startPartitionRule=function(t,e,n){this.reportAndSkip("E_CSS_UNEXPECTED_PARTITION")},n.startPartitionGroupRule=function(t,e,n){this.reportAndSkip("E_CSS_UNEXPECTED_PARTITION_GROUP")},n.startFuncWithSelector=function(t){this.reportAndSkip("E_CSS_UNEXPECTED_SELECTOR_FUNC")},n.endFuncWithSelector=function(){this.reportAndSkip("E_CSS_UNEXPECTED_END_SELECTOR_FUNC")},n.property=function(t,e,n){this.error("E_CSS_UNEXPECTED_PROPERTY",this.getCurrentToken())},e}(fu),gu=[],Eu=[],Cu=[],vu=[],Fu=[],mu=[],Au=[],bu=[],yu=[],Bu=[],wu=[],Su=[],Nu=[];!function(t){t[t.SELECTOR_NAME_1=1]="SELECTOR_NAME_1",t[t.SELECTOR_NAME=2]="SELECTOR_NAME",t[t.SELECTOR_ANY_1=3]="SELECTOR_ANY_1",t[t.SELECTOR_ANY=4]="SELECTOR_ANY",t[t.SELECTOR_ID_1=5]="SELECTOR_ID_1",t[t.SELECTOR_ID=6]="SELECTOR_ID",t[t.SELECTOR_CLASS_1=7]="SELECTOR_CLASS_1",t[t.SELECTOR_CLASS=8]="SELECTOR_CLASS",t[t.SELECTOR_ATTR_1=9]="SELECTOR_ATTR_1",t[t.SELECTOR_ATTR=10]="SELECTOR_ATTR",t[t.SELECTOR_CHILD=11]="SELECTOR_CHILD",t[t.SELECTOR_SIBLING=12]="SELECTOR_SIBLING",t[t.SELECTOR_BODY=13]="SELECTOR_BODY",t[t.SELECTOR_PSEUDOCLASS=14]="SELECTOR_PSEUDOCLASS",t[t.VAL_IDENT=15]="VAL_IDENT",t[t.VAL_HASH=16]="VAL_HASH",t[t.VAL_NUM=17]="VAL_NUM",t[t.VAL_INT=18]="VAL_INT",t[t.VAL_NUMERIC=19]="VAL_NUMERIC",t[t.VAL_STR=20]="VAL_STR",t[t.VAL_URL=21]="VAL_URL",t[t.VAL_COMMA=22]="VAL_COMMA",t[t.VAL_SLASH=23]="VAL_SLASH",t[t.VAL_FUNC=24]="VAL_FUNC",t[t.VAL_C_PAR=25]="VAL_C_PAR",t[t.VAL_END=26]="VAL_END",t[t.RULE_END=27]="RULE_END",t[t.IDENT=28]="IDENT",t[t.SELECTOR_START=29]="SELECTOR_START",t[t.AT=30]="AT",t[t.EXPR_IDENT=31]="EXPR_IDENT",t[t.EXPR_NUM=32]="EXPR_NUM",t[t.EXPR_NUMERIC=33]="EXPR_NUMERIC",t[t.EXPR_STR=34]="EXPR_STR",t[t.EXPR_PARAM=35]="EXPR_PARAM",t[t.EXPR_PREFIX=36]="EXPR_PREFIX",t[t.EXPR_INFIX=37]="EXPR_INFIX",t[t.EXPR_FUNC=38]="EXPR_FUNC",t[t.EXPR_C_PAR=39]="EXPR_C_PAR",t[t.EXPR_O_PAR=40]="EXPR_O_PAR",t[t.SELECTOR_NEXT=41]="SELECTOR_NEXT",t[t.SELECTOR_PSEUDOELEM=42]="SELECTOR_PSEUDOELEM",t[t.EXPR_O_BRC=43]="EXPR_O_BRC",t[t.VAL_FINISH=44]="VAL_FINISH",t[t.EXPR_INFIX_NAME=45]="EXPR_INFIX_NAME",t[t.PROP=46]="PROP",t[t.VAL_BANG=47]="VAL_BANG",t[t.VAL_BRC=48]="VAL_BRC",t[t.EXPR_SEMICOL=49]="EXPR_SEMICOL",t[t.ERROR_PUSH=50]="ERROR_PUSH",t[t.ERROR_POP=51]="ERROR_POP",t[t.ERROR_POP_DECL=52]="ERROR_POP_DECL",t[t.ERROR_SEMICOL=53]="ERROR_SEMICOL",t[t.VAL_PLUS=54]="VAL_PLUS",t[t.SELECTOR_PSEUDOCLASS_1=55]="SELECTOR_PSEUDOCLASS_1",t[t.SELECTOR_FOLLOWING_SIBLING=56]="SELECTOR_FOLLOWING_SIBLING",t[t.VAL_URANGE=57]="VAL_URANGE",t[t.SELECTOR_PSEUDOELEM_1=58]="SELECTOR_PSEUDOELEM_1",t[t.DONE=200]="DONE"}(hu||(hu={}));var xu,Tu=Vn.LAST+1,Iu=Vn.LAST+2,Pu=Vn.LAST+3;gu[Vn.IDENT]=hu.IDENT,gu[Vn.STAR]=hu.SELECTOR_START,gu[Vn.HASH]=hu.SELECTOR_START,gu[Vn.CLASS]=hu.SELECTOR_START,gu[Vn.O_BRK]=hu.SELECTOR_START,gu[Vn.COLON]=hu.SELECTOR_START,gu[Vn.COL_COL]=hu.SELECTOR_START,gu[Vn.AT]=hu.AT,gu[Vn.C_BRC]=hu.RULE_END,gu[Vn.EOF]=hu.DONE,Eu[Vn.IDENT]=hu.PROP,Eu[Vn.EOF]=hu.DONE,mu[Vn.IDENT]=hu.SELECTOR_NAME,mu[Vn.STAR]=hu.SELECTOR_ANY,mu[Vn.HASH]=hu.SELECTOR_ID,mu[Vn.CLASS]=hu.SELECTOR_CLASS,mu[Vn.O_BRK]=hu.SELECTOR_ATTR,mu[Vn.COLON]=hu.SELECTOR_PSEUDOCLASS,mu[Vn.COL_COL]=hu.SELECTOR_PSEUDOELEM,Cu[Vn.GT]=hu.SELECTOR_CHILD,Cu[Vn.PLUS]=hu.SELECTOR_SIBLING,Cu[Vn.TILDE]=hu.SELECTOR_FOLLOWING_SIBLING,Cu[Vn.IDENT]=hu.SELECTOR_NAME_1,Cu[Vn.STAR]=hu.SELECTOR_ANY_1,Cu[Vn.HASH]=hu.SELECTOR_ID_1,Cu[Vn.CLASS]=hu.SELECTOR_CLASS_1,Cu[Vn.O_BRK]=hu.SELECTOR_ATTR_1,Cu[Vn.O_BRC]=hu.SELECTOR_BODY,Cu[Vn.COLON]=hu.SELECTOR_PSEUDOCLASS_1,Cu[Vn.COL_COL]=hu.SELECTOR_PSEUDOELEM_1,Cu[Vn.COMMA]=hu.SELECTOR_NEXT,vu[Vn.GT]=hu.SELECTOR_CHILD,vu[Vn.PLUS]=hu.SELECTOR_SIBLING,vu[Vn.TILDE]=hu.SELECTOR_FOLLOWING_SIBLING,vu[Vn.IDENT]=hu.SELECTOR_NAME_1,vu[Vn.STAR]=hu.SELECTOR_ANY_1,vu[Vn.HASH]=hu.SELECTOR_ID_1,vu[Vn.CLASS]=hu.SELECTOR_CLASS_1,vu[Vn.O_BRK]=hu.SELECTOR_ATTR_1,vu[Vn.COLON]=hu.SELECTOR_PSEUDOCLASS_1,Fu[Vn.IDENT]=hu.SELECTOR_NAME,Fu[Vn.STAR]=hu.SELECTOR_ANY,Fu[Vn.HASH]=hu.SELECTOR_ID,Fu[Vn.CLASS]=hu.SELECTOR_CLASS,Fu[Vn.COLON]=hu.SELECTOR_PSEUDOCLASS,Fu[Vn.COL_COL]=hu.SELECTOR_PSEUDOELEM,Fu[Vn.O_BRK]=hu.SELECTOR_ATTR,Fu[Vn.O_BRC]=hu.SELECTOR_BODY,Au[Vn.IDENT]=hu.VAL_IDENT,Au[Vn.HASH]=hu.VAL_HASH,Au[Vn.NUM]=hu.VAL_NUM,Au[Vn.INT]=hu.VAL_INT,Au[Vn.NUMERIC]=hu.VAL_NUMERIC,Au[Vn.STR]=hu.VAL_STR,Au[Vn.URL]=hu.VAL_URL,Au[Vn.URANGE]=hu.VAL_URANGE,Au[Vn.COMMA]=hu.VAL_COMMA,Au[Vn.SLASH]=hu.VAL_SLASH,Au[Vn.FUNC]=hu.VAL_FUNC,Au[Vn.C_PAR]=hu.VAL_C_PAR,Au[Vn.SEMICOL]=hu.VAL_END,Au[Vn.C_BRC]=hu.VAL_BRC,Au[Vn.BANG]=hu.VAL_BANG,Au[Vn.PLUS]=hu.VAL_PLUS,Au[Vn.EOF]=hu.VAL_FINISH,bu[Vn.IDENT]=hu.EXPR_IDENT,bu[Vn.NUM]=hu.EXPR_NUM,bu[Vn.INT]=hu.EXPR_NUM,bu[Vn.NUMERIC]=hu.EXPR_NUMERIC,bu[Vn.STR]=hu.EXPR_STR,bu[Vn.O_PAR]=hu.EXPR_O_PAR,bu[Vn.FUNC]=hu.EXPR_FUNC,bu[Vn.BANG]=hu.EXPR_PREFIX,bu[Vn.MINUS]=hu.EXPR_PREFIX,bu[Vn.DOLLAR]=hu.EXPR_PARAM,yu[Vn.IDENT]=hu.EXPR_INFIX_NAME,yu[Vn.COMMA]=hu.EXPR_INFIX,yu[Vn.GT]=hu.EXPR_INFIX,yu[Vn.LT]=hu.EXPR_INFIX,yu[Vn.GT_EQ]=hu.EXPR_INFIX,yu[Vn.LT_EQ]=hu.EXPR_INFIX,yu[Vn.EQ]=hu.EXPR_INFIX,yu[Vn.EQ_EQ]=hu.EXPR_INFIX,yu[Vn.BANG_EQ]=hu.EXPR_INFIX,yu[Vn.AMP_AMP]=hu.EXPR_INFIX,yu[Vn.BAR_BAR]=hu.EXPR_INFIX,yu[Vn.PLUS]=hu.EXPR_INFIX,yu[Vn.MINUS]=hu.EXPR_INFIX,yu[Vn.SLASH]=hu.EXPR_INFIX,yu[Vn.PERCENT]=hu.EXPR_INFIX,yu[Vn.STAR]=hu.EXPR_INFIX,yu[Vn.COLON]=hu.EXPR_INFIX,yu[Vn.QMARK]=hu.EXPR_INFIX,yu[Vn.C_PAR]=hu.EXPR_C_PAR,yu[Vn.O_BRC]=hu.EXPR_O_BRC,yu[Vn.SEMICOL]=hu.EXPR_SEMICOL,Bu[Vn.EOF]=hu.DONE,Bu[Vn.O_BRC]=hu.ERROR_PUSH,Bu[Vn.C_BRC]=hu.ERROR_POP,Bu[Vn.O_BRK]=hu.ERROR_PUSH,Bu[Vn.C_BRK]=hu.ERROR_POP,Bu[Vn.O_PAR]=hu.ERROR_PUSH,Bu[Vn.C_PAR]=hu.ERROR_POP,Bu[Vn.SEMICOL]=hu.ERROR_SEMICOL,wu[Vn.EOF]=hu.DONE,wu[Vn.O_BRC]=hu.ERROR_PUSH,wu[Vn.C_BRC]=hu.ERROR_POP_DECL,wu[Vn.O_BRK]=hu.ERROR_PUSH,wu[Vn.C_BRK]=hu.ERROR_POP,wu[Vn.O_PAR]=hu.ERROR_PUSH,wu[Vn.C_PAR]=hu.ERROR_POP,wu[Vn.SEMICOL]=hu.ERROR_SEMICOL,Su[Vn.EOF]=hu.DONE,Su[Vn.O_BRC]=hu.ERROR_PUSH,Su[Vn.C_BRC]=hu.ERROR_POP,Su[Vn.O_BRK]=hu.ERROR_PUSH,Su[Vn.C_BRK]=hu.ERROR_POP,Su[Vn.O_PAR]=hu.ERROR_PUSH,Su[Vn.C_PAR]=hu.ERROR_POP,Nu[Vn.C_PAR]=0,Nu[Vn.COMMA]=0,Nu[Vn.QMARK]=1,Nu[Vn.COLON]=1,Nu[Vn.AMP_AMP]=2,Nu[Vn.BAR_BAR]=2,Nu[Vn.LT]=3,Nu[Vn.GT]=3,Nu[Vn.LT_EQ]=3,Nu[Vn.GT_EQ]=3,Nu[Vn.EQ]=3,Nu[Vn.EQ_EQ]=3,Nu[Vn.BANG_EQ]=3,Nu[Vn.PLUS]=4,Nu[Vn.MINUS]=4,Nu[Vn.STAR]=5,Nu[Vn.SLASH]=5,Nu[Vn.PERCENT]=5,Nu[Vn.EOF]=6,Nu[Tu]=2,Nu[Iu]=2,function(t){t[t.PROP=0]="PROP",t[t.WHEN=1]="WHEN",t[t.MEDIA=2]="MEDIA",t[t.IMPORT=3]="IMPORT",t[t.SUPPORTS=4]="SUPPORTS"}(xu||(xu={}));var ku=function(){function t(t,e,n,i){this.actions=void 0,this.tokenizer=void 0,this.handler=void 0,this.baseURL=void 0,this.valStack=[],this.namespacePrefixToURI={},this.defaultNamespaceURI=null,this.propName=null,this.propImportant=!1,this.exprContext=void 0,this.result=null,this.importReady=!1,this.importURL=null,this.importCondition=null,this.errorBrackets=[],this.ruleStack=[],this.regionRule=!1,this.pageRule=!1,this.inStyleDeclaration=!1,this.actions=t,this.tokenizer=e,this.handler=n,this.baseURL=i,this.exprContext=xu.MEDIA}var e=t.prototype;return e.extractVals=function(t,e){for(var n=[],i=this.valStack;e<i.length&&(n.push(i[e++]),e!==i.length);){if(i[e++]!==t)throw new Error("Unexpected state");e===i.length&&n.push(Pe)}return n},e.valStackReduce=function(t,e){var n,i=this.valStack,u=i.length,r=0;do{if(n=i[--u],")"===t&&n instanceof Ye)if(")"===n.text)r++;else if("("===n.text){if(0===r)return null;r--}}while(void 0!==n&&"string"!=typeof n);var o=i.length-(u+1);if(o>1&&i.splice(u+1,o,new Xe(i.slice(u+1,i.length))),","==t)return null;u++;do{n=i[--u]}while(void 0!==n&&("string"!=typeof n||","==n));if(o=i.length-(u+1),"("==n){")"!=t&&e.type!==Vn.EOF&&(this.handler.error("E_CSS_MISMATCHED_C_PAR",e),this.actions=wu);var a=new Ke(i[u-1],this.extractVals(",",u+1));if(i.splice(u-1,o+2,a),"var"===a.name){var s=a.values[0]instanceof _e&&a.values[0].name;ln(s)&&s!==this.propName||(this.handler.error("E_CSS_INVALID_VAR "+a.toString(),e),this.actions=wu)}return a}if(";"!=t||u>=0)return this.handler.error("E_CSS_UNEXPECTED_VAL_END",e),this.actions=wu,null;if(o>1)return new $e(this.extractVals(",",u+1));var l=i[0];return l instanceof Te?l:l?new Ye(l.toString()):Pe},e.exprError=function(t,e){this.actions=this.propName?wu:Bu,h.warn(t,e.toString())},e.exprStackReduce=function(t,e){for(var n,i=this.valStack,u=this.handler,r=i.pop();;){var o=i.pop();if(t==Vn.C_PAR){for(var a=[r];o==Vn.COMMA;)a.unshift(i.pop()),o=i.pop();if("string"==typeof o){if("{"==o){for(;a.length>=2;){var s=a.shift(),l=a.shift(),c=new te(u.getScope(),s,l);a.unshift(c)}return i.push(new qe(a[0])),!0}if("("==o){var h=i.pop(),D=i.pop();r=new Ee(u.getScope(),Ot(D,h),a),t=Vn.EOF;continue}}if(o==Vn.O_PAR){r.isMediaName()&&(r=new Fe(u.getScope(),r,null)),t=Vn.EOF;continue}}else if("string"==typeof o){i.push(o);break}if(o<0)if(o==-Vn.BANG)r=new Kt(u.getScope(),r);else if(o==-Vn.MINUS)r=new Yt(u.getScope(),r);else{if(o!=-Pu)return this.exprError("F_UNEXPECTED_STATE",e),!1;r=new qt(u.getScope(),r)}else{if(Nu[t]>Nu[o]){i.push(o);break}switch(n=i.pop(),o){case Vn.AMP_AMP:r=new Zt(u.getScope(),n,r);break;case Tu:r=new Qt(u.getScope(),n,r);break;case Iu:r=new ee(u.getScope(),n,r);break;case Vn.BAR_BAR:r=new Jt(u.getScope(),n,r);break;case Vn.LT:r=new ne(u.getScope(),n,r);break;case Vn.GT:r=new ue(u.getScope(),n,r);break;case Vn.LT_EQ:r=new ie(u.getScope(),n,r);break;case Vn.GT_EQ:r=new re(u.getScope(),n,r);break;case Vn.EQ:case Vn.EQ_EQ:r=new oe(u.getScope(),n,r);break;case Vn.BANG_EQ:r=new ae(u.getScope(),n,r);break;case Vn.PLUS:r=new se(u.getScope(),n,r);break;case Vn.MINUS:r=new le(u.getScope(),n,r);break;case Vn.STAR:r=new ce(u.getScope(),n,r);break;case Vn.SLASH:r=new he(u.getScope(),n,r);break;case Vn.PERCENT:r=new De(u.getScope(),n,r);break;case Vn.COLON:if(!(i.length>1))return this.exprError("E_CSS_EXPR_COND",e),!1;switch(i[i.length-1]){case Vn.QMARK:i.pop(),r=new Ce(u.getScope(),i.pop(),n,r);break;case Vn.O_PAR:if(!n.isMediaName())return this.exprError("E_CSS_MEDIA_TEST",e),!1;r=new Fe(u.getScope(),n,r)}break;case Vn.QMARK:if(t!=Vn.COLON)return this.exprError("E_CSS_EXPR_COND",e),!1;case Vn.O_PAR:return i.push(n),i.push(o),i.push(r),!1;default:return this.exprError("F_UNEXPECTED_STATE",e),!1}}}return i.push(r),!1},e.readSupportsTest=function(t){var e,n,i=t.type===Vn.FUNC,u=this.tokenizer;if(i)e=t.position+(n=t.text).length+1;else{if(t.type!==Vn.O_PAR)return null;var r=u.nthToken(1),o=u.nthToken(2);if(r.type===Vn.IDENT&&o.type===Vn.COLON)u.consume(),u.consume(),n=r.text,e=o.position+1;else{if(r.type===Vn.O_PAR||r.type===Vn.FUNC||r.type===Vn.IDENT&&"not"===r.text.toLowerCase()&&(o.type===Vn.O_PAR||o.type===Vn.FUNC))return null;e=t.position+1}}for(var a,s=0,l=0;s>=0;)switch(u.consume(),(a=u.token()).type){case Vn.C_PAR:s--;break;case Vn.O_PAR:case Vn.FUNC:s++;break;case Vn.COMMA:0===s&&l++;break;case Vn.EOF:return this.exprError("E_CSS_UNEXPECTED_EOF",a),null}u.consume();var c=i&&"selector"===n&&l>0?"":u.input.substring(e,a.position).trim();return new me(this.handler.getScope(),n,c,i)},e.readPseudoParams=function(){for(var t=[];;){var e=this.tokenizer.token();switch(e.type){case Vn.IDENT:t.push(e.text);break;case Vn.PLUS:t.push("+");break;case Vn.NUM:case Vn.INT:t.push(e.num);break;default:return t}this.tokenizer.consume()}},e.readNthPseudoParams=function(){var t=!1,e=this.tokenizer.token();if(e.type===Vn.PLUS)t=!0,this.tokenizer.consume(),e=this.tokenizer.token();else if(e.type===Vn.IDENT&&("even"===e.text||"odd"===e.text))return this.tokenizer.consume(),[2,"odd"===e.text?1:0];switch(e.type){case Vn.NUMERIC:if(t&&e.num<0)return null;case Vn.IDENT:if(t&&"-"===e.text.charAt(0))return null;if("n"===e.text||"-n"===e.text){if(t&&e.precededBySpace)return null;var n="-n"===e.text?-1:1;e.type===Vn.NUMERIC&&(n=e.num);var i=0;this.tokenizer.consume();var u=(e=this.tokenizer.token()).type===Vn.MINUS,r=e.type===Vn.PLUS||u;if(r&&(this.tokenizer.consume(),e=this.tokenizer.token()),e.type===Vn.INT){if(1/(i=e.num)==-1/0){if(i=0,r)return null}else if(i<0){if(r)return null}else if(i>=0&&!r)return null;this.tokenizer.consume()}else if(r)return null;return[n,u&&i>0?-i:i]}if("n-"===e.text||"-n-"===e.text){if(t&&e.precededBySpace)return null;var o="-n-"===e.text?-1:1;if(e.type===Vn.NUMERIC&&(o=e.num),this.tokenizer.consume(),(e=this.tokenizer.token()).type===Vn.INT)return e.num<0||1/e.num==-1/0?null:(this.tokenizer.consume(),[o,e.num])}else{var a=e.text.match(/^n(-[0-9]+)$/);if(a)return t&&e.precededBySpace?null:(this.tokenizer.consume(),[e.type===Vn.NUMERIC?e.num:1,parseInt(a[1],10)]);if(a=e.text.match(/^-n(-[0-9]+)$/))return this.tokenizer.consume(),[-1,parseInt(a[1],10)]}return null;case Vn.INT:return t&&(e.precededBySpace||e.num<0)?null:(this.tokenizer.consume(),[0,e.num])}return null},e.makeCondition=function(t,e){var n=this.handler.getScope();if(!n)return null;if(e=e||n._true,t)for(var i,u=R(t.split(/\s+/));!(i=u()).done;)switch(i.value){case"vertical":e=be(n,e,new Kt(n,new fe(n,"pref-horizontal")));break;case"horizontal":e=be(n,e,new fe(n,"pref-horizontal"));break;case"day":e=be(n,e,new Kt(n,new fe(n,"pref-night-mode")));break;case"night":e=be(n,e,new fe(n,"pref-night-mode"));break;default:e=n._false}return e===n._true?null:new qe(e)},e.isInsidePropertyOnlyRule=function(){switch(this.ruleStack[this.ruleStack.length-1]){case"[selector]":case"font-face":case"-epubx-flow":case"-epubx-viewport":case"-epubx-define":case"-adapt-footnote-area":return!0}return!1},e.runParser=function(t,e,n,i,u,r){var o,a,s,l,c,h,D,d=this.handler,f=this.tokenizer,p=this.valStack,g=null;for(n&&(this.inStyleDeclaration=!0),i&&(this.exprContext=xu.MEDIA,this.valStack.push("{"));t>0;--t)if(o=f.token(),u&&null===g&&"("===f.input[g=o.position-1]&&g++,this.actions===Au&&this.errorBrackets.length>0&&(o.type===this.errorBrackets[this.errorBrackets.length-1]||o.type===Vn.SEMICOL||o.type===Vn.BANG)){if(o.type===this.errorBrackets[this.errorBrackets.length-1]&&(this.errorBrackets.pop(),o.type===Vn.C_PAR&&this.valStackReduce(")",o))){f.consume();continue}p.push(new Ye(o.toString())),f.consume()}else switch(this.actions[o.type]){case hu.IDENT:if(!this.inStyleDeclaration||f.nthToken(1).type!=Vn.COLON){this.isInsidePropertyOnlyRule()?(d.error("E_CSS_COLON_EXPECTED",f.nthToken(1)),this.actions=wu):(this.actions=mu,d.startSelectorRule());continue}this.propName=o.text,this.propImportant=!1,f.consume(),f.consume(),this.actions=Au,p.splice(0,p.length);continue;case hu.PROP:if(f.nthToken(1).type!=Vn.COLON){this.actions=wu,d.error("E_CSS_COLON_EXPECTED",f.nthToken(1));continue}this.propName=o.text,this.propImportant=!1,f.consume(),f.consume(),this.actions=Au,p.splice(0,p.length);continue;case hu.SELECTOR_START:this.actions=mu,d.startSelectorRule();continue;case hu.SELECTOR_NAME_1:if(!o.precededBySpace){this.actions=Su,d.error("E_CSS_SPACE_EXPECTED",o);continue}d.descendantSelector();case hu.SELECTOR_NAME:if(f.nthToken(1).type==Vn.BAR)if(f.consume(),f.consume(),null!=(s=this.namespacePrefixToURI[o.text]))switch((o=f.token()).type){case Vn.IDENT:d.tagSelector(s,o.text),this.actions=u?vu:Cu,f.consume();break;case Vn.STAR:d.tagSelector(s,null),this.actions=u?vu:Cu,f.consume();break;default:this.actions=Bu,d.error("E_CSS_NAMESPACE",o)}else this.actions=Bu,d.error("E_CSS_UNDECLARED_PREFIX",o);else d.tagSelector(this.defaultNamespaceURI,o.text),this.actions=u?vu:Cu,f.consume();continue;case hu.SELECTOR_ANY_1:if(!o.precededBySpace){this.actions=Su,d.error("E_CSS_SPACE_EXPECTED",o);continue}d.descendantSelector();case hu.SELECTOR_ANY:if(f.nthToken(1).type==Vn.BAR)switch(f.consume(),f.consume(),(o=f.token()).type){case Vn.IDENT:d.tagSelector(null,o.text),this.actions=u?vu:Cu,f.consume();break;case Vn.STAR:d.tagSelector(null,null),this.actions=u?vu:Cu,f.consume();break;default:this.actions=Bu,d.error("E_CSS_NAMESPACE",o)}else d.tagSelector(this.defaultNamespaceURI,null),this.actions=u?vu:Cu,f.consume();continue;case hu.SELECTOR_ID_1:o.precededBySpace&&d.descendantSelector();case hu.SELECTOR_ID:if(!o.text){d.error("E_CSS_SYNTAX",o),f.consume();continue}d.idSelector(o.text),this.actions=u?vu:Cu,f.consume();continue;case hu.SELECTOR_CLASS_1:o.precededBySpace&&d.descendantSelector();case hu.SELECTOR_CLASS:d.classSelector(o.text),this.actions=u?vu:Cu,f.consume();continue;case hu.SELECTOR_PSEUDOCLASS_1:o.precededBySpace&&d.descendantSelector();case hu.SELECTOR_PSEUDOCLASS:f.consume();t:switch((o=f.token()).type){case Vn.IDENT:d.pseudoclassSelector(o.text,null),f.consume(),this.actions=u?vu:Cu;continue;case Vn.FUNC:switch(l=o.text,f.consume(),l){case"is":case"not":case"where":case"has":this.actions=mu,d.startFuncWithSelector(l),this.actions=this.runParser(Number.POSITIVE_INFINITY,!1,!1,!1,!0,"has"===l)?Cu:Su;continue;case"lang":case"href-epub-type":if((o=f.token()).type===Vn.IDENT){D=[o.text],f.consume();break}break t;case"nth-child":case"nth-of-type":case"nth-last-child":case"nth-last-of-type":case"nth":if(D=this.readNthPseudoParams())break;break t;default:D=this.readPseudoParams()}if((o=f.token()).type==Vn.C_PAR){d.pseudoclassSelector(l,D),f.consume(),this.actions=u?vu:Cu;continue}}d.error("E_CSS_PSEUDOCLASS_SYNTAX",o),this.actions=Bu;continue;case hu.SELECTOR_PSEUDOELEM_1:o.precededBySpace&&d.descendantSelector();case hu.SELECTOR_PSEUDOELEM:switch(f.consume(),(o=f.token()).type){case Vn.IDENT:d.pseudoelementSelector(o.text,null),this.actions=u?vu:Cu,f.consume();continue;case Vn.FUNC:if(l=o.text,f.consume(),"nth-fragment"==l){if(null===(D=this.readNthPseudoParams()))break}else D=this.readPseudoParams();if((o=f.token()).type==Vn.C_PAR){d.pseudoelementSelector(l,D),this.actions=u?vu:Cu,f.consume();continue}}d.error("E_CSS_PSEUDOELEM_SYNTAX",o),this.actions=Bu;continue;case hu.SELECTOR_ATTR_1:o.precededBySpace&&d.descendantSelector();case hu.SELECTOR_ATTR:if(f.consume(),(o=f.token()).type==Vn.IDENT)l=o.text,f.consume();else if(o.type==Vn.STAR)l=null,f.consume();else{if(o.type!=Vn.BAR){this.actions=Su,d.error("E_CSS_ATTR",o),f.consume();continue}l=""}if((o=f.token()).type==Vn.BAR){if(null==(s=l?this.namespacePrefixToURI[l]:l)){this.actions=Su,d.error("E_CSS_UNDECLARED_PREFIX",o),f.consume();continue}if(f.consume(),(o=f.token()).type!=Vn.IDENT){this.actions=Su,d.error("E_CSS_ATTR_NAME_EXPECTED",o);continue}l=o.text,f.consume(),o=f.token()}else s="";switch(o.type){case Vn.EQ:case Vn.TILDE_EQ:case Vn.BAR_EQ:case Vn.HAT_EQ:case Vn.DOLLAR_EQ:case Vn.STAR_EQ:case Vn.COL_COL:c=o.type,f.consume(),o=f.token();break;case Vn.C_BRK:d.attributeSelector(s,l,Vn.EOF,null),this.actions=u?vu:Cu,f.consume();continue;default:this.actions=Su,d.error("E_CSS_ATTR_OP_EXPECTED",o);continue}switch(o.type){case Vn.IDENT:case Vn.STR:d.attributeSelector(s,l,c,o.text),f.consume(),o=f.token();break;default:this.actions=Su,d.error("E_CSS_ATTR_VAL_EXPECTED",o);continue}if(o.type!=Vn.C_BRK){this.actions=Su,d.error("E_CSS_ATTR",o);continue}this.actions=u?vu:Cu,f.consume();continue;case hu.SELECTOR_CHILD:d.childSelector(),this.actions=Fu,f.consume();continue;case hu.SELECTOR_SIBLING:d.adjacentSiblingSelector(),this.actions=Fu,f.consume();continue;case hu.SELECTOR_FOLLOWING_SIBLING:d.followingSiblingSelector(),this.actions=Fu,f.consume();continue;case hu.SELECTOR_BODY:this.regionRule?(this.ruleStack.push("-epubx-region"),this.regionRule=!1):this.pageRule?(this.ruleStack.push("page"),this.pageRule=!1,this.inStyleDeclaration=!0):(this.ruleStack.push("[selector]"),this.inStyleDeclaration=!0),d.startRuleBody(),this.actions=gu,f.consume();continue;case hu.SELECTOR_NEXT:d.nextSelector(),this.actions=mu,f.consume();continue;case hu.VAL_IDENT:p.push(Me(o.text)),f.consume();continue;case hu.VAL_HASH:c=parseInt(o.text,16),p.push(new He(o.text)),f.consume();continue;case hu.VAL_NUM:p.push(new Ve(o.num)),f.consume();continue;case hu.VAL_INT:p.push(new ze(o.num)),f.consume();continue;case hu.VAL_NUMERIC:p.push(new Ue(o.num,o.text)),f.consume();continue;case hu.VAL_STR:p.push(new Re(o.text)),f.consume();continue;case hu.VAL_URL:p.push(new Ge(X(o.text,this.baseURL))),f.consume();continue;case hu.VAL_URANGE:p.push(new je(o.text)),f.consume();continue;case hu.VAL_COMMA:this.valStackReduce(",",o),p.push(","),f.consume();continue;case hu.VAL_SLASH:p.push(Oe),f.consume();continue;case hu.VAL_FUNC:"-epubx-expr"==(l=o.text.toLowerCase())||"env"==l?(this.actions=bu,this.exprContext=xu.PROP,p.push("{")):(p.push(l),p.push("("),this.errorBrackets.length>0&&this.errorBrackets.push(Vn.C_PAR)),f.consume();continue;case hu.VAL_C_PAR:this.valStackReduce(")",o),f.consume();continue;case hu.VAL_BANG:if(f.consume(),o=f.token(),a=f.nthToken(1),o.type==Vn.IDENT&&"important"==o.text.toLowerCase()&&(a.type==Vn.SEMICOL||a.type==Vn.EOF||a.type==Vn.C_BRC)){f.consume(),this.propImportant=!0;continue}this.exprError("E_CSS_SYNTAX",o);continue;case hu.VAL_PLUS:switch((a=f.nthToken(1)).type){case Vn.NUM:case Vn.NUMERIC:case Vn.INT:if(!a.precededBySpace){f.consume();continue}}p.push(new Ye("+")),f.consume();continue;case hu.VAL_END:f.consume();case hu.VAL_BRC:(h=this.valStackReduce(";",o))&&this.propName&&d.property(this.propName,h,this.propImportant),this.actions=n?Eu:gu;continue;case hu.VAL_FINISH:for(f.consume();p.length>0;){var E=p.length;if(!(h=this.valStackReduce(";",o))||p.length===E)break}return e?(this.result=h,!0):(this.propName&&h&&d.property(this.propName,h,this.propImportant),!0);case hu.EXPR_IDENT:if((a=f.nthToken(1)).type==Vn.CLASS)f.nthToken(2).type!=Vn.O_PAR||f.nthToken(2).precededBySpace?(p.push(new fe(d.getScope(),Ot(o.text,a.text))),this.actions=yu):(p.push(o.text,a.text,"("),f.consume()),f.consume();else{if(this.exprContext==xu.MEDIA||this.exprContext==xu.IMPORT)"not"==o.text.toLowerCase()?(f.consume(),p.push(new pe(d.getScope(),!0,a.text))):("only"==o.text.toLowerCase()&&(f.consume(),o=a),p.push(new pe(d.getScope(),!1,o.text)));else{if(this.exprContext===xu.SUPPORTS&&"not"===o.text.toLowerCase()&&p[p.length-1]!==Tu&&p[p.length-1]!==Iu&&(a.type===Vn.O_PAR||a.type===Vn.FUNC)){p.push(-Pu),f.consume();continue}p.push(new fe(d.getScope(),o.text))}this.actions=yu}f.consume();continue;case hu.EXPR_FUNC:if(this.exprContext===xu.SUPPORTS){p.push(this.readSupportsTest(o)),this.actions=yu;continue}p.push(null,o.text,"("),f.consume();continue;case hu.EXPR_NUM:p.push(new ve(d.getScope(),o.num)),f.consume(),this.actions=yu;continue;case hu.EXPR_NUMERIC:"%"==(l=o.text)&&(l=this.propName&&this.propName.match(/height|^(top|bottom)$/)?"vh":"vw"),p.push(new de(d.getScope(),o.num,l)),f.consume(),this.actions=yu;continue;case hu.EXPR_STR:p.push(new ve(d.getScope(),o.text)),f.consume(),this.actions=yu;continue;case hu.EXPR_PARAM:f.consume(),(o=f.token()).type!=Vn.INT||o.precededBySpace?this.exprError("E_CSS_SYNTAX",o):(p.push(new Ae(d.getScope(),o.num)),f.consume(),this.actions=yu);continue;case hu.EXPR_PREFIX:p.push(-o.type),f.consume();continue;case hu.EXPR_INFIX:this.actions=bu,this.exprStackReduce(o.type,o),p.push(o.type),f.consume();continue;case hu.EXPR_INFIX_NAME:"and"===o.text.toLowerCase()&&p[p.length-2]!==Iu&&p[p.length-2]!==-Pu?(this.actions=bu,this.exprStackReduce(Tu,o),p.push(Tu),f.consume()):"or"===o.text.toLowerCase()&&p[p.length-2]!==Tu&&p[p.length-2]!==-Pu?(this.actions=bu,this.exprStackReduce(Iu,o),p.push(Iu),f.consume()):this.exprError("E_CSS_SYNTAX",o);continue;case hu.EXPR_C_PAR:this.exprStackReduce(o.type,o)&&(this.actions=Au),f.consume();continue;case hu.EXPR_O_BRC:this.exprStackReduce(Vn.C_PAR,o)&&(this.propName||this.exprContext==xu.IMPORT?this.exprError("E_CSS_UNEXPECTED_BRC",o):(this.exprContext==xu.WHEN?d.startWhenRule(p.pop()):d.startMediaRule(p.pop()),this.ruleStack.push("media"),d.startRuleBody(),this.actions=gu)),f.consume();continue;case hu.EXPR_SEMICOL:if(this.exprStackReduce(Vn.C_PAR,o))return this.propName||this.exprContext!=xu.IMPORT?(this.exprError("E_CSS_UNEXPECTED_SEMICOL",o),this.actions=gu,f.consume(),!1):(this.importCondition=p.pop(),this.importReady=!0,this.actions=gu,f.consume(),!1);f.consume();continue;case hu.EXPR_O_PAR:if(this.exprContext===xu.SUPPORTS){var C=this.readSupportsTest(o);if(C){p.push(C),this.actions=yu;continue}}p.push(o.type),f.consume();continue;case hu.RULE_END:if(this.actions=gu,f.consume(),d.endRule(),this.inStyleDeclaration=!1,this.ruleStack.length)switch(this.ruleStack.pop(),this.ruleStack[this.ruleStack.length-1]){case"page":case"-epubx-page-master":case"-epubx-partition-group":this.inStyleDeclaration=!0}continue;case hu.AT:switch(l=o.text.toLowerCase()){case"import":if(f.consume(),(o=f.token()).type==Vn.STR||o.type==Vn.URL){if(this.importURL=o.text,f.consume(),(o=f.token()).type==Vn.SEMICOL||o.type==Vn.EOF)return this.importReady=!0,f.consume(),!1;this.propName=null,this.exprContext=xu.IMPORT,this.actions=bu,p.push("{");continue}d.error("E_CSS_IMPORT_SYNTAX",o),this.actions=Bu;continue;case"namespace":switch(f.consume(),(o=f.token()).type){case Vn.IDENT:if(l=o.text,f.consume(),((o=f.token()).type==Vn.STR||o.type==Vn.URL)&&f.nthToken(1).type==Vn.SEMICOL){this.namespacePrefixToURI[l]=o.text,f.consume(),f.consume();continue}break;case Vn.STR:case Vn.URL:if(f.nthToken(1).type==Vn.SEMICOL){this.defaultNamespaceURI=o.text,f.consume(),f.consume();continue}}d.error("E_CSS_NAMESPACE_SYNTAX",o),this.actions=Bu;continue;case"charset":if(f.consume(),(o=f.token()).type==Vn.STR&&f.nthToken(1).type==Vn.SEMICOL){"utf-8"!=(l=o.text.toLowerCase())&&"utf-16"!=l&&d.error("E_CSS_UNEXPECTED_CHARSET "+l,o),f.consume(),f.consume();continue}d.error("E_CSS_CHARSET_SYNTAX",o),this.actions=Bu;continue;case"font-face":case"-epubx-page-template":case"-epubx-define":case"-epubx-viewport":if(f.nthToken(1).type==Vn.O_BRC){switch(f.consume(),f.consume(),l){case"font-face":d.startFontFaceRule(),this.inStyleDeclaration=!0;break;case"-epubx-page-template":d.startPageTemplateRule();break;case"-epubx-define":d.startDefineRule(),this.inStyleDeclaration=!0;break;case"-epubx-viewport":d.startViewportRule(),this.inStyleDeclaration=!0}this.ruleStack.push(l),d.startRuleBody();continue}break;case"-adapt-footnote-area":switch(f.consume(),(o=f.token()).type){case Vn.O_BRC:f.consume(),d.startFootnoteRule(null),this.ruleStack.push(l),d.startRuleBody(),this.inStyleDeclaration=!0;continue;case Vn.COL_COL:if(f.consume(),(o=f.token()).type==Vn.IDENT&&f.nthToken(1).type==Vn.O_BRC){l=o.text,f.consume(),f.consume(),d.startFootnoteRule(l),this.ruleStack.push("-adapt-footnote-area"),d.startRuleBody(),this.inStyleDeclaration=!0;continue}}break;case"-epubx-region":f.consume(),d.startRegionRule(),this.regionRule=!0,this.actions=mu;continue;case"page":f.consume(),d.startPageRule(),this.pageRule=!0,this.actions=Fu;continue;case"top-left-corner":case"top-left":case"top-center":case"top-right":case"top-right-corner":case"right-top":case"right-middle":case"right-bottom":case"bottom-right-corner":case"bottom-right":case"bottom-center":case"bottom-left":case"bottom-left-corner":case"left-bottom":case"left-middle":case"left-top":if(f.consume(),(o=f.token()).type==Vn.O_BRC){f.consume(),d.startPageMarginBoxRule(l),this.ruleStack.push(l),d.startRuleBody(),this.inStyleDeclaration=!0;continue}break;case"-epubx-when":f.consume(),this.propName=null,this.exprContext=xu.WHEN,this.actions=bu,p.push("{");continue;case"media":f.consume(),this.propName=null,this.exprContext=xu.MEDIA,this.actions=bu,p.push("{");continue;case"supports":f.consume(),this.propName=null,this.exprContext=xu.SUPPORTS,this.actions=bu,p.push("{");continue;case"-epubx-flow":if(f.nthToken(1).type==Vn.IDENT&&f.nthToken(2).type==Vn.O_BRC){d.startFlowRule(f.nthToken(1).text),f.consume(),f.consume(),f.consume(),this.ruleStack.push(l),d.startRuleBody(),this.inStyleDeclaration=!0;continue}break;case"-epubx-page-master":case"-epubx-partition":case"-epubx-partition-group":f.consume();var v=null,F=null,m=[];for((o=f.token()).type==Vn.IDENT&&(v=o.text,f.consume(),o=f.token()),o.type==Vn.COLON&&f.nthToken(1).type==Vn.IDENT&&(F=f.nthToken(1).text,f.consume(),f.consume(),o=f.token());o.type==Vn.FUNC&&"class"==o.text.toLowerCase()&&f.nthToken(1).type==Vn.IDENT&&f.nthToken(2).type==Vn.C_PAR;)m.push(f.nthToken(1).text),f.consume(),f.consume(),f.consume(),o=f.token();if(o.type==Vn.O_BRC){switch(f.consume(),l){case"-epubx-page-master":d.startPageMasterRule(v,F,m);break;case"-epubx-partition":d.startPartitionRule(v,F,m);break;case"-epubx-partition-group":d.startPartitionGroupRule(v,F,m)}this.ruleStack.push(l),d.startRuleBody(),this.inStyleDeclaration=!0;continue}break;case"":d.error("E_CSS_UNEXPECTED_AT"+l,o),this.actions=Su;continue;default:d.error("E_CSS_AT_UNKNOWN "+l,o),this.actions=Bu;continue}d.error("E_CSS_AT_SYNTAX "+l,o),this.actions=Bu;continue;case hu.ERROR_PUSH:this.errorBrackets.push(o.type+1),f.consume();continue;case hu.ERROR_POP_DECL:if(0==this.errorBrackets.length){this.actions=gu;continue}case hu.ERROR_POP:if(u&&0==this.errorBrackets.length&&o.type==Vn.C_PAR)return f.consume(),d.endFuncWithSelector(),!0;this.errorBrackets.length>0&&this.errorBrackets[this.errorBrackets.length-1]==o.type&&this.errorBrackets.pop(),0==this.errorBrackets.length&&o.type==Vn.C_BRC&&(this.actions=gu),f.consume();continue;case hu.ERROR_SEMICOL:0==this.errorBrackets.length&&(this.actions=gu),f.consume();continue;case hu.DONE:return!0;default:if(i)return!!this.exprStackReduce(Vn.C_PAR,o)&&(this.result=p.pop(),!0);if(u){switch(o.type){case Vn.COMMA:case Vn.C_PAR:if(this.actions===mu)d.error("E_CSS_SYNTAX",o);else{var A=f.input.substring(g,o.position);d.pushSelectorText(A),g=o.position+1}if(o.type===Vn.COMMA){d.nextSelector(),this.actions=mu,f.consume();continue}return d.endFuncWithSelector(),f.consume(),!0;case Vn.GT:case Vn.PLUS:case Vn.TILDE:if(r){this.actions=Cu;continue}break;case Vn.O_BRC:case Vn.O_BRK:case Vn.O_PAR:this.errorBrackets.push(o.type+1)}d.error("E_CSS_SYNTAX",o),f.consume(),this.actions=Su;continue}if(this.actions!==Bu&&this.actions!==Su&&this.actions!==wu){if(o.type==Vn.INVALID)d.error("E_CSS_SYNTAX",o);else{if(this.actions===Au){switch(o.type){case Vn.O_PAR:case Vn.O_BRC:case Vn.O_BRK:this.errorBrackets.push(o.type+1)}p.push(new Ye(o.toString())),f.consume();continue}if(o.type===Vn.O_BRC&&this.actions==bu&&p.length>0){d.startMediaRule(p.pop()),this.ruleStack.push("media"),d.startRuleBody(),this.actions=gu,f.consume();continue}if(o.type===Vn.SEMICOL&&this.actions==bu)return this.actions=gu,f.consume(),!1;d.error("E_CSS_SYNTAX",o)}this.actions=this.isInsidePropertyOnlyRule()?wu:Su;continue}f.consume();continue}return!1},t}(),Ou=function(t){function e(e){var n;return(n=t.call(this,null)||this).scope=void 0,n.scope=e,n}N(e,t);var n=e.prototype;return n.error=function(t,e){h.warn(t,e.toString())},n.getScope=function(){return this.scope},e}(Du);function Ru(t,e,n,i,u){return Li("parseStylesheetFromText",(function(r){(function(t,e,n,i,u){var r=Oi("parseStylesheet"),o=new ku(gu,t,e,n),a=null;return u&&(a=function(t,e,n){var i=new ku(bu,t,e,n);return i.runParser(Number.POSITIVE_INFINITY,!1,!1,!0,!1),i.result}(new Ti(u,e),e,n)),(a=o.makeCondition(i,a&&a.toExpr()))&&(e.startMediaRule(a),e.startRuleBody()),r.loop((function(){for(var t=function(){if(o.importReady){var t=X(o.importURL,n);o.importCondition&&(e.startMediaRule(o.importCondition),e.startRuleBody());var i=Oi("parseStylesheet.import");return Lu(t,e,null,null).then((function(){o.importCondition&&e.endRule(),o.importReady=!1,o.importURL=null,o.importCondition=null,i.finish(!0)})),{v:i.result()}}var u=r.timeSlice();if(u.isPending)return{v:u}};!o.runParser(100,!1,!1,!1,!1);){var i=t();if("object"==typeof i)return i.v}return Ri(!1)})).then((function(){a&&e.endRule(),r.finish(!0)})),r.result()})(new Ti(t,e),e,n,i,u).thenFinish(r)}),(function(e,n){h.warn(n,"Failed to parse stylesheet text: "+t),e.finish(!1)}))}function Lu(t,e,n,i){return Li("parseStylesheetFromURL",(function(u){nu(t).then((function(r){r.responseText?Ru(r.responseText,e,t,n,i).then((function(e){e||h.warn("Failed to parse stylesheet from "+t),u.finish(!0)})):u.finish(!0)}))}),(function(e,n){h.warn(n,"Exception while fetching and parsing:",t),e.finish(!0)}))}function _u(t,e,n){var i=new ku(Au,e,new Ou(t),n);return i.runParser(Number.POSITIVE_INFINITY,!0,!1,!1,!1),i.result}var Mu={"z-index":!0,"column-count":!0,"flow-linger":!0,opacity:!0,page:!0,"flow-priority":!0,utilization:!0};function Uu(t,e,n){return t-=n,0===e?0===t:t%e==0&&t/e>=0}var Vu=function(){function t(t){this.matchers=void 0,this.matchers=t}return t.prototype.matches=function(){return this.matchers.some((function(t){return t.matches()}))},t}(),zu=function(){function t(t){this.matchers=void 0,this.matchers=t}return t.prototype.matches=function(){return this.matchers.every((function(t){return t.matches()}))},t}(),Hu=function(){function t(t,e,n){this.elementOffset=void 0,this.a=void 0,this.b=void 0,this.elementOffset=t,this.a=e,this.b=n}return t.registerFragmentIndex=function(e,n,i){var u=t.fragmentIndices;(!u[e]||u[e].priority<=i)&&(u[e]={fragmentIndex:n,priority:i})},t.clearFragmentIndices=function(){t.fragmentIndices={}},t.prototype.matches=function(){var e=t.fragmentIndices[this.elementOffset];return null!=e&&null!=e.fragmentIndex&&Uu(e.fragmentIndex,this.a,this.b)},t}();Hu.fragmentIndices={};var Gu=function(){function t(){}return t.buildViewConditionMatcher=function(t,e){var n=e.split("_");return"NFS"==n[0]?new Hu(t,parseInt(n[1],10),parseInt(n[2],10)):null},t.buildAllMatcher=function(t){return new zu(t)},t.buildAnyMatcher=function(t){return new Vu(t)},t}();function ju(t){var e,n;return"clone"===(null==t||null==(e=t.style)?void 0:e["box-decoration-break"])||"clone"===(null==t||null==(n=t.style)?void 0:n["-webkit-box-decoration-break"])}function Wu(t){var e=t.getAttribute("data-viv-box-break");return e?e.split(" "):[]}function Xu(t,e){t.setAttribute("data-viv-box-break",e.join(" "))}function $u(t,e){var n=Wu(t);n.includes(e)||(n.push(e),Xu(t,n))}function Ku(t,e){var n=function(t){var e=t.getAttribute("data-viv-margin-discard");return e?e.split(" "):[]}(t);n.includes(e)||(n.push(e),function(t,e){t.setAttribute("data-viv-margin-discard",e.join(" "))}(t,n))}var qu={page:!0,left:!0,right:!0,recto:!0,verso:!0,column:!0,region:!0};function Yu(t){return!!qu[t]}var Zu={left:!0,right:!0,recto:!0,verso:!0};function Qu(t){return!!Zu[t]}var Ju,tr,er,nr,ir,ur,rr={avoid:!0,"avoid-page":!0,"avoid-column":!0,"avoid-region":!0};function or(t){return!!rr[t]}function ar(t,e){if(!t)return e;if(!e)return t;if(Qu(e))return e;if(Qu(t))return t;var n=Yu(t),i=Yu(e);if(!n||!i)return i?e:n?t:or(e)?e:or(t)?t:e;switch(e){case"column":return t;case"region":return"column"===t?e:t;default:return e}}function sr(t){return Yu(t)?t:"auto"}function lr(t){return t.reduce((function(t,e){return e[0]===r.default.DELETE?t:t+e[1]}),"")}function cr(t,e,n){var i=0,u=0;return t.some((function(t){for(var o=0;o<t[1].length;o++){switch(t[0]*n){case r.default.INSERT:i++;break;case r.default.DELETE:i--,u++;break;case r.default.EQUAL:u++}if(u>e)return!0}return!1})),Math.max(Math.min(e,u-1)+i,0)}d("SIMPLE_PROPERTY",(function(t){var e=t.name,n=t.value;switch(e){case"page-break-before":case"page-break-after":case"page-break-inside":return{name:e.replace(/^page-/,""),value:n===Je.always?Je.page:n,important:t.important};default:return t}})),function(t){t.isInstanceOfBlockFormattingContext=function(t){return t&&"Block"===t.formattingContextType}}(Ju||(Ju={})),function(t){!function(t){t.INLINE="inline",t.COLUMN="column",t.REGION="region",t.PAGE="page"}(t.FloatReference||(t.FloatReference={}))}(tr||(tr={})),function(t){t.isInstanceOfAfterIfContinuesLayoutConstraint=function(t){return t&&"AfterIfContinue"==t.flagmentLayoutConstraintType}}(er||(er={})),function(t){t.isInstanceOfRepetitiveElementsOwnerFormattingContext=function(t){return!!t&&("RepetitiveElementsOwner"===t.formattingContextType||ir.isInstanceOfTableFormattingContext(t))},t.isInstanceOfRepetitiveElementsOwnerLayoutConstraint=function(t){return!!t&&("RepetitiveElementsOwner"===t.flagmentLayoutConstraintType||ir.isInstanceOfTableRowLayoutConstraint(t))}}(nr||(nr={})),function(t){t.isInstanceOfTableFormattingContext=function(t){return t&&"Table"===t.formattingContextType},t.isInstanceOfTableRowLayoutConstraint=function(t){return t&&"TableRow"===t.flagmentLayoutConstraintType}}(ir||(ir={})),function(t){!function(t){t[t.IGNORE=0]="IGNORE",t[t.NEWLINE=1]="NEWLINE",t[t.PRESERVE=2]="PRESERVE"}(t.Whitespace||(t.Whitespace={})),function(t){t[t.NONE=0]="NONE",t[t.CONTENT=1]="CONTENT",t[t.ROOTLESS=2]="ROOTLESS",t[t.ROOTED=3]="ROOTED"}(t.ShadowType||(t.ShadowType={}))}(ur||(ur={}));var hr={transform:!0,"transform-origin":!0},Dr={top:!0,bottom:!0,left:!0,right:!0},dr=function(t,e,n){this.target=void 0,this.name=void 0,this.value=void 0,this.target=t,this.name=e,this.value=n},fr={show:function(t){t.style.visibility="visible"},hide:function(t){t.style.visibility="hidden"},play:function(t){t.currentTime=0,t.play()},pause:function(t){t.pause()},resume:function(t){t.play()},mute:function(t){t.muted=!0},unmute:function(t){t.muted=!1}};function pr(t,e){var n=fr[e];return n?function(){for(var e=0;e<t.length;e++)try{n(t[e])}catch(t){}}:null}var gr=function(t){function e(e,n){var i;return(i=t.call(this)||this).container=void 0,i.bleedBox=void 0,i.pageAreaElement=null,i.delayedItems=[],i.hrefHandler=void 0,i.elementsById={},i.dimensions={width:0,height:0},i.isFirstPage=!1,i.isLastPage=!1,i.isBlankPage=!1,i.isAutoPageWidth=!0,i.isAutoPageHeight=!0,i.spineIndex=0,i.position=null,i.offset=-1,i.side=null,i.fetchers=[],i.marginBoxes={top:{},bottom:{},left:{},right:{}},i.pageType=null,i.container=e,i.bleedBox=n,i.hrefHandler=function(t){var e=t.currentTarget,n=e.getAttribute("href")||e.getAttributeNS(G.XLINK,"href");n&&i.dispatchEvent({type:"hyperlink",target:null,currentTarget:null,anchorElement:e,href:n,preventDefault:function(){t.preventDefault()}})},i}N(e,t);var n=e.prototype;return n.setAutoPageWidth=function(t){this.isAutoPageWidth=t,t?this.container.setAttribute(e.AUTO_PAGE_WIDTH_ATTRIBUTE,"true"):this.container.removeAttribute(e.AUTO_PAGE_WIDTH_ATTRIBUTE)},n.setAutoPageHeight=function(t){this.isAutoPageHeight=t,t?this.container.setAttribute(e.AUTO_PAGE_HEIGHT_ATTRIBUTE,"true"):this.container.removeAttribute(e.AUTO_PAGE_HEIGHT_ATTRIBUTE)},n.registerElementWithId=function(t,e){var n=this.elementsById[e];n?n.push(t):this.elementsById[e]=[t]},n.finish=function(t,e){var n=this;Object.keys(this.elementsById).forEach((function(t){for(var e=n.elementsById[t],i=0;i<e.length;)n.container.contains(e[i])?i++:e.splice(i,1);0===e.length&&delete n.elementsById[t]}));for(var i=this.delayedItems,u=0;u<i.length;u++){var r=i[u];(r.target!==this.container||"transform"!==r.name||this.isAutoPageWidth||this.isAutoPageHeight)&&tt(r.target,r.name,r.value.toString())}var o=e.getElementClientRect(this.container);this.dimensions.width=o.width,this.dimensions.height=o.height;for(var a=0;a<t.length;a++){var s=t[a],l=this.elementsById[s.ref],c=this.elementsById[s.observer];if(l&&c){var h=pr(l,s.action);if(h)for(var D=0;D<c.length;D++)c[D].addEventListener(s.event,h,!1)}}},e}(pt);gr.AUTO_PAGE_WIDTH_ATTRIBUTE="data-vivliostyle-auto-page-width",gr.AUTO_PAGE_HEIGHT_ATTRIBUTE="data-vivliostyle-auto-page-height";var Er="data-adapt-spec",Cr=ur.Whitespace;function vr(t){switch(t){case"normal":case"nowrap":return Cr.IGNORE;case"pre-line":return Cr.NEWLINE;case"pre":case"pre-wrap":case"break-spaces":return Cr.PRESERVE;default:return null}}function Fr(t,e){if(!t)return!0;if(1==t.nodeType)return!1;var n=t.textContent;switch(e){case Cr.PRESERVE:return 0==n.length;case Cr.NEWLINE:return!!n.match(/^[ \t]*$/);default:return!!n.match(/^[ \t\r\n\f]*$/)}}var mr=function(t,e){this.flowName=void 0,this.parentFlowName=void 0,this.forcedBreakOffsets=[],this.formattingContext=null,this.flowName=t,this.parentFlowName=e},Ar=function(){function t(t,e,n,i,u,r,o,a,s){this.flowName=void 0,this.element=void 0,this.startOffset=void 0,this.priority=void 0,this.linger=void 0,this.exclusive=void 0,this.repeated=void 0,this.last=void 0,this.breakBefore=void 0,this.startPage=-1,this.flowName=t,this.element=e,this.startOffset=n,this.priority=i,this.linger=u,this.exclusive=r,this.repeated=o,this.last=a,this.breakBefore=s}return t.prototype.isBetter=function(t){return!!this.exclusive&&(!t.exclusive||this.priority>t.priority||this.last)},t}();function br(t,e){return t.top-e.top}function yr(t,e){return e.right-t.right}function Br(t,e){var n,i;return t===e||!(!t||!e)&&(t.node===e.node||!!t.shadowContext&&!!e.shadowContext&&t.shadowType===ur.ShadowType.ROOTLESS&&e.shadowType===ur.ShadowType.ROOTLESS&&(null==(n=t.node)?void 0:n.outerHTML)===(null==(i=e.node)?void 0:i.outerHTML))&&t.shadowType===e.shadowType&&Ir(t.shadowContext,e.shadowContext)&&Ir(t.nodeShadow,e.nodeShadow)&&Br(t.shadowSibling,e.shadowSibling)}function wr(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.offsetInNode!==e.offsetInNode||t.after!==e.after||t.steps.length!==e.steps.length)return!1;for(var n=0;n<t.steps.length;n++)if(!Br(t.steps[n],e.steps[n]))return!1;return!0}function Sr(t,e){return{steps:[{node:t.sourceNode,shadowType:xr.NONE,shadowContext:t.shadowContext,nodeShadow:null,shadowSibling:null,formattingContext:null,fragmentIndex:null!=e?e:t.fragmentIndex}],offsetInNode:0,after:!1,preprocessedTextContent:t.preprocessedTextContent}}function Nr(t,e){var n=new kr(t.node,e,0);return n.shadowType=t.shadowType,n.shadowContext=t.shadowContext,n.nodeShadow=t.nodeShadow,n.shadowSibling=t.shadowSibling?Nr(t.shadowSibling,e.copy()):null,n.formattingContext=t.formattingContext,n.fragmentIndex=t.fragmentIndex+1,n}var xr=ur.ShadowType,Tr=function(){function t(t,e,n,i,u,r,o){this.owner=void 0,this.root=void 0,this.xmldoc=void 0,this.parentShadow=void 0,this.type=void 0,this.styler=void 0,this.subShadow=null,this.owner=t,this.root=e,this.xmldoc=n,this.parentShadow=i,this.type=r,this.styler=o,u&&(u.subShadow=this)}return t.prototype.equals=function(t){return!!t&&this.owner===t.owner&&this.xmldoc===t.xmldoc&&this.type===t.type&&Ir(this.parentShadow,t.parentShadow)},t}();function Ir(t,e){return t===e||!!t&&!!e&&t.equals(e)}var Pr=function(t,e){this.outer=void 0,this.count=void 0,this.outer=t,this.count=e},kr=function(){function t(t,e,n){this.sourceNode=void 0,this.parent=void 0,this.boxOffset=void 0,this.offsetInNode=0,this.after=!1,this.shadowType=void 0,this.shadowContext=void 0,this.nodeShadow=null,this.shadowSibling=null,this.shared=!1,this.inline=!0,this.overflow=!1,this.breakPenalty=void 0,this.display=null,this.floatReference=void 0,this.floatSide=null,this.clearSide=null,this.floatMinWrapBlock=null,this.columnSpan=null,this.verticalAlign="baseline",this.captionSide="top",this.inlineBorderSpacing=0,this.blockBorderSpacing=0,this.flexContainer=!1,this.whitespace=void 0,this.hyphenateCharacter=void 0,this.breakWord=void 0,this.establishesBFC=!1,this.containingBlockForAbsolute=!1,this.breakBefore=null,this.breakAfter=null,this.viewNode=null,this.clearSpacer=null,this.inheritedProps=void 0,this.vertical=void 0,this.direction=void 0,this.firstPseudo=void 0,this.lang=null,this.preprocessedTextContent=null,this.formattingContext=void 0,this.repeatOnBreak=null,this.pluginProps={},this.fragmentIndex=1,this.afterIfContinues=null,this.footnotePolicy=null,this.pageType=void 0,this.sourceNode=t,this.parent=e,this.boxOffset=n,this.shadowType=xr.NONE,this.shadowContext=e?e.shadowContext:null,this.breakPenalty=e?e.breakPenalty:0,this.floatReference=tr.FloatReference.INLINE,this.whitespace=e?e.whitespace:Cr.IGNORE,this.hyphenateCharacter=e?e.hyphenateCharacter:null,this.breakWord=!!e&&e.breakWord,this.inheritedProps=e?e.inheritedProps:{},this.vertical=!!e&&e.vertical,this.direction=e?e.direction:"ltr",this.firstPseudo=e?e.firstPseudo:null,this.formattingContext=e?e.formattingContext:null,this.pageType=e?e.pageType:null}var e=t.prototype;return e.resetView=function(){this.inline=!0,this.breakPenalty=this.parent?this.parent.breakPenalty:0,this.viewNode=null,this.clearSpacer=null,this.offsetInNode=0,this.after=!1,this.display=null,this.floatReference=tr.FloatReference.INLINE,this.floatSide=null,this.clearSide=null,this.floatMinWrapBlock=null,this.columnSpan=null,this.verticalAlign="baseline",this.flexContainer=!1,this.whitespace=this.parent?this.parent.whitespace:Cr.IGNORE,this.hyphenateCharacter=this.parent?this.parent.hyphenateCharacter:null,this.breakWord=!!this.parent&&this.parent.breakWord,this.breakBefore=null,this.breakAfter=null,this.nodeShadow=null,this.establishesBFC=!1,this.containingBlockForAbsolute=!1,this.vertical=!!this.parent&&this.parent.vertical,this.nodeShadow=null,this.preprocessedTextContent=null,this.formattingContext=this.parent?this.parent.formattingContext:null,this.repeatOnBreak=null,this.pluginProps={},this.fragmentIndex=1,this.afterIfContinues=null,this.footnotePolicy=null},e.cloneItem=function(){var e=new t(this.sourceNode,this.parent,this.boxOffset);return e.offsetInNode=this.offsetInNode,e.after=this.after,e.nodeShadow=this.nodeShadow,e.shadowType=this.shadowType,e.shadowContext=this.shadowContext,e.shadowSibling=this.shadowSibling,e.inline=this.inline,e.breakPenalty=this.breakPenalty,e.display=this.display,e.floatReference=this.floatReference,e.floatSide=this.floatSide,e.clearSide=this.clearSide,e.floatMinWrapBlock=this.floatMinWrapBlock,e.columnSpan=this.columnSpan,e.verticalAlign=this.verticalAlign,e.captionSide=this.captionSide,e.inlineBorderSpacing=this.inlineBorderSpacing,e.blockBorderSpacing=this.blockBorderSpacing,e.establishesBFC=this.establishesBFC,e.containingBlockForAbsolute=this.containingBlockForAbsolute,e.flexContainer=this.flexContainer,e.whitespace=this.whitespace,e.hyphenateCharacter=this.hyphenateCharacter,e.breakWord=this.breakWord,e.breakBefore=this.breakBefore,e.breakAfter=this.breakAfter,e.viewNode=this.viewNode,e.clearSpacer=this.clearSpacer,e.firstPseudo=this.firstPseudo,e.vertical=this.vertical,e.overflow=this.overflow,e.preprocessedTextContent=this.preprocessedTextContent,e.formattingContext=this.formattingContext,e.repeatOnBreak=this.repeatOnBreak,e.pluginProps=Object.create(this.pluginProps),e.fragmentIndex=this.fragmentIndex,e.afterIfContinues=this.afterIfContinues,e.footnotePolicy=this.footnotePolicy,e},e.modify=function(){return this.shared?this.cloneItem():this},e.copy=function(){var t=this;do{if(t.shared)break;t.shared=!0,t=t.parent}while(t);return this},e.clone=function(){for(var t,e=this.cloneItem(),n=e;null!=(t=n.parent);)t=t.cloneItem(),n.parent=t,n=t;return e},e.toNodePositionStep=function(){return{node:this.sourceNode,shadowType:this.shadowType,shadowContext:this.shadowContext,nodeShadow:this.nodeShadow,shadowSibling:this.shadowSibling?this.shadowSibling.toNodePositionStep():null,formattingContext:this.formattingContext,fragmentIndex:this.fragmentIndex}},e.toNodePosition=function(){var t,e,n,i=this,u=[];i.shadowType!==ur.ShadowType.ROOTLESS||i.floatReference===tr.FloatReference.INLINE&&"footnote"!==i.floatSide||null==(t=i.shadowContext)||null==(e=t.styler)||null==(n=e.style)||!n._pseudos||(i=i.parent);do{i.firstPseudo&&i.parent&&i.parent.firstPseudo!==i.firstPseudo||u.push(i.toNodePositionStep()),i=i.parent}while(i);return{steps:u,offsetInNode:this.preprocessedTextContent?cr(this.preprocessedTextContent,this.offsetInNode,-1):this.offsetInNode,after:this.after,preprocessedTextContent:this.preprocessedTextContent}},e.isInsideBFC=function(){for(var t=this.parent;t;){if(t.establishesBFC)return!0;t=t.parent}return!1},e.getContainingBlockForAbsolute=function(){for(var t=this.parent;t;){if(t.containingBlockForAbsolute)return t;t=t.parent}return null},e.belongsTo=function(t){return this.formattingContext===t&&!!this.parent&&this.parent.formattingContext===t},t}(),Or=function(){function t(t){this.primary=void 0,this.floats=null,this.primary=t}var e=t.prototype;return e.clone=function(){var e=new t(this.primary);if(this.floats){e.floats=[];for(var n=0;n<this.floats.length;++n)e.floats[n]=this.floats[n]}return e},e.isSamePosition=function(t){if(!t)return!1;if(this===t)return!0;if(!wr(this.primary,t.primary))return!1;if(this.floats){if(!t.floats||this.floats.length!==t.floats.length)return!1;for(var e=0;e<this.floats.length;e++)if(!wr(this.floats[e],t.floats[e]))return!1}else if(t.floats)return!1;return!0},t}(),Rr=function(){function t(t,e){this.chunkPosition=void 0,this.flowChunk=void 0,this.chunkPosition=t,this.flowChunk=e}var e=t.prototype;return e.clone=function(){return new t(this.chunkPosition.clone(),this.flowChunk)},e.isSamePosition=function(t){return!!t&&(this===t||this.chunkPosition.isSamePosition(t.chunkPosition))},t}(),Lr=function(){function t(){this.positions=[],this.startBreakType=null,this.breakAfter=null}var e=t.prototype;return e.clone=function(){for(var e=new t,n=this.positions,i=e.positions,u=0;u<n.length;u++)i[u]=n[u].clone();return e.startBreakType=this.startBreakType,e.breakAfter=this.breakAfter,e},e.isSamePosition=function(t){if(this===t)return!0;if(!t||this.positions.length!==t.positions.length)return!1;for(var e=0;e<this.positions.length;e++)if(!this.positions[e].isSamePosition(t.positions[e]))return!1;return!0},e.hasContent=function(t){return this.positions.length>0&&this.positions[0].flowChunk.startOffset<=t},t}(),_r=function(){function t(){this.page=0,this.flows={},this.flowPositions={},this.isBlankPage=!1,this.highestSeenOffset=0,this.highestSeenNode=void 0,this.lookupPositionOffset=void 0}var e=t.prototype;return e.clone=function(){var e=new t;for(var n in e.page=this.page,e.isBlankPage=this.isBlankPage,e.highestSeenNode=this.highestSeenNode,e.highestSeenOffset=this.highestSeenOffset,e.lookupPositionOffset=this.lookupPositionOffset,e.flows=this.flows,this.flowPositions)e.flowPositions[n]=this.flowPositions[n].clone();return e},e.isSamePosition=function(t){if(this===t)return!0;if(!t||this.page!==t.page)return!1;var e=Object.keys(this.flowPositions),n=Object.keys(t.flowPositions);if(e.length!==n.length)return!1;for(var i=0,u=e;i<u.length;i++){var r=u[i];if(!this.flowPositions[r].isSamePosition(t.flowPositions[r]))return!1}return!0},e.hasContent=function(t,e){var n=this.flowPositions[t];return!!n&&n.hasContent(e)},e.startSideOfFlow=function(t){var e,n=null==(e=this.flowPositions[t])?void 0:e.startBreakType;return n&&Qu(n)?n:"any"},e.firstFlowChunkOfFlow=function(t){var e=this.flowPositions[t];if(!e)return null;var n=e.positions[0];return n?n.flowChunk:null},t}(),Mr=function(){function t(t){this.element=void 0,this.left=0,this.top=0,this.marginLeft=0,this.marginRight=0,this.marginTop=0,this.marginBottom=0,this.borderLeft=0,this.borderRight=0,this.borderTop=0,this.borderBottom=0,this.paddingLeft=0,this.paddingRight=0,this.paddingTop=0,this.paddingBottom=0,this.width=0,this.height=0,this.originX=0,this.originY=0,this.exclusions=null,this.innerShape=null,this.computedBlockSize=0,this.snapWidth=0,this.snapHeight=0,this.snapOffsetX=0,this.snapOffsetY=0,this.vertical=!1,this.rtl=!1,this.element=t}var e=t.prototype;return e.getInsetTop=function(){return this.marginTop+this.borderTop+this.paddingTop},e.getInsetBottom=function(){return this.marginBottom+this.borderBottom+this.paddingBottom},e.getInsetLeft=function(){return this.marginLeft+this.borderLeft+this.paddingLeft},e.getInsetRight=function(){return this.marginRight+this.borderRight+this.paddingRight},e.getInsetBefore=function(){return this.vertical?this.getInsetRight():this.getInsetTop()},e.getInsetAfter=function(){return this.vertical?this.getInsetLeft():this.getInsetBottom()},e.getInsetStart=function(){return this.vertical?this.getInsetTop():this.getInsetLeft()},e.getInsetEnd=function(){return this.vertical?this.getInsetBottom():this.getInsetRight()},e.getBeforeEdge=function(t){return this.vertical?t.right:t.top},e.getAfterEdge=function(t){return this.vertical?t.left:t.bottom},e.getStartEdge=function(t){return this.vertical?this.rtl?t.bottom:t.top:this.rtl?t.right:t.left},e.getEndEdge=function(t){return this.vertical?this.rtl?t.top:t.bottom:this.rtl?t.left:t.right},e.getInlineSize=function(t){return this.vertical?t.bottom-t.top:t.right-t.left},e.getBoxSize=function(t){return this.vertical?t.right-t.left:t.bottom-t.top},e.getBoxDir=function(){return this.vertical?-1:1},e.getInlineDir=function(){return this.rtl?-1:1},e.copyFrom=function(t){this.element=t.element,this.left=t.left,this.top=t.top,this.marginLeft=t.marginLeft,this.marginRight=t.marginRight,this.marginTop=t.marginTop,this.marginBottom=t.marginBottom,this.borderLeft=t.borderLeft,this.borderRight=t.borderRight,this.borderTop=t.borderTop,this.borderBottom=t.borderBottom,this.paddingLeft=t.paddingLeft,this.paddingRight=t.paddingRight,this.paddingTop=t.paddingTop,this.paddingBottom=t.paddingBottom,this.width=t.width,this.height=t.height,this.originX=t.originX,this.originY=t.originY,this.innerShape=t.innerShape,this.exclusions=t.exclusions,this.computedBlockSize=t.computedBlockSize,this.snapWidth=t.snapWidth,this.snapHeight=t.snapHeight,this.vertical=t.vertical,this.rtl=t.rtl},e.setVerticalPosition=function(t,e){this.top=t,this.height=e,tt(this.element,"top",t+"px"),tt(this.element,"height",e+"px")},e.setHorizontalPosition=function(t,e){this.left=t,this.width=e,tt(this.element,"left",t+"px"),tt(this.element,"width",e+"px")},e.setBlockPosition=function(t,e){this.vertical?this.setHorizontalPosition(t+(e+this.marginLeft+this.marginRight+this.paddingLeft+this.paddingRight+this.borderLeft+this.borderRight)*this.getBoxDir(),e):this.setVerticalPosition(t,e)},e.setInlinePosition=function(t,e){this.vertical?this.setVerticalPosition(this.rtl?t+(e+this.marginTop+this.marginBottom+this.paddingTop+this.paddingBottom+this.borderTop+this.borderBottom)*this.getInlineDir():t,e):this.setHorizontalPosition(this.rtl?t+(e+this.marginLeft+this.marginRight+this.paddingLeft+this.paddingRight+this.borderLeft+this.borderRight)*this.getInlineDir():t,e)},e.clear=function(){for(var t,e=this.element;t=e.lastChild;)e.removeChild(t)},e.getInnerShape=function(){var t=this.getInnerRect();return this.innerShape?this.innerShape.withOffset(t.x1,t.y1):Cn(t.x1,t.y1,t.x2,t.y2)},e.getInnerRect=function(){var t=this.originX+this.left+this.getInsetLeft(),e=this.originY+this.top+this.getInsetTop();return new cn(t,e,t+this.width,e+this.height)},e.getPaddingRect=function(){var t=this.originX+this.left+this.marginLeft+this.borderLeft,e=this.originY+this.top+this.marginTop+this.borderTop;return new cn(t,e,t+(this.paddingLeft+this.width+this.paddingRight),e+(this.paddingTop+this.height+this.paddingBottom))},e.getOuterShape=function(t,e){var n=this.getOuterRect();return Rn(t,n.x1,n.y1,n.x2-n.x1,n.y2-n.y1,e)},e.getOuterRect=function(){var t=this.originX+this.left,e=this.originY+this.top,n=this.getInsetLeft()+this.width+this.getInsetRight(),i=this.getInsetTop()+this.height+this.getInsetBottom();return new cn(t,e,t+n,e+i)},t}(),Ur=function(t){function e(e,n,i,u){var r;return(r=t.call(this)||this).elem=void 0,r.context=void 0,r.rootContentValue=void 0,r.exprContentListener=void 0,r.elem=e,r.context=n,r.rootContentValue=i,r.exprContentListener=u,r}N(e,t);var n=e.prototype;return n.visitStrInner=function(t,e){if(!e){var n;if(3===(null==(n=this.elem.lastChild)?void 0:n.nodeType))return void(this.elem.lastChild.textContent+=t);e=this.elem.ownerDocument.createTextNode(t)}this.elem.appendChild(e)},n.visitStr=function(t){return this.visitStrInner(t.str),null},n.visitURL=function(t){if(this.rootContentValue.url)this.elem.setAttribute("src",t.url);else{var e=this.elem.ownerDocument.createElementNS(G.XHTML,"img");e.setAttribute("src",t.url),this.elem.appendChild(e)}return null},n.visitSpaceList=function(t){return this.visitValues(t.values),null},n.visitExpr=function(t){var e=t.toExpr(),n=e.evaluate(this.context);if("string"==typeof n){e instanceof fe&&(n=_u(e.scope,new Ti(n,null),"").stringValue());var i=this.exprContentListener(e,n,this.elem.ownerDocument);!i&&n&&e instanceof ge&&e.str.startsWith("running-element-")&&(n=""),this.visitStrInner(n,i)}return null},e}(Ne);function Vr(t){return null!=t&&t!==Pe&&t!==Je.normal&&t!==Je.none&&!an(t)}var zr={"border-collapse":!0,"border-spacing":!0,"caption-side":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-rendering":!0,cursor:!0,direction:!0,"empty-cells":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,"font-kerning":!0,"font-size":!0,"font-size-adjust":!0,"font-family":!0,"font-feature-settings":!0,"font-style":!0,"font-stretch":!0,"font-variant-ligatures":!0,"font-variant-caps":!0,"font-variant-numeric":!0,"font-variant-east-asian":!0,"font-weight":!0,"glyph-orientation-vertical":!0,"hanging-punctuation":!0,hyphens:!0,"hyphenate-character":!0,"hyphenate-limit-chars":!0,"hyphenate-limit-last":!0,"image-rendering":!0,"image-resolution":!0,"letter-spacing":!0,"line-break":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,orphans:!0,"overflow-wrap":!0,"paint-order":!0,"pointer-events":!0,quotes:!0,"ruby-align":!0,"ruby-position":!0,"shape-rendering":!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,"text-align":!0,"text-align-last":!0,"text-anchor":!0,"text-autospace":!0,"text-decoration-skip":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-fill-color":!0,"text-combine-upright":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-rendering":!0,"text-size-adjust":!0,"text-spacing-trim":!0,"text-stroke-color":!0,"text-stroke-width":!0,"text-transform":!0,"text-underline-position":!0,visibility:!0,"white-space":!0,widows:!0,"word-break":!0,"word-spacing":!0,"writing-mode":!0},Hr=["image-resolution","orphans","widows"];var Gr={"http://www.idpf.org/2007/ops":!0,"http://www.w3.org/1999/xhtml":!0,"http://www.w3.org/2000/svg":!0},jr=["margin-%","padding-%","border-%-width","border-%-style","border-%-color","%"],Wr=["max-%","min-%","%"],Xr=function(){for(var t=["left","right","top","bottom"],e={width:!0,height:!0,"max-width":!0,"max-height":!0,"min-width":!0,"min-height":!0},n=0;n<jr.length;n++)for(var i=0;i<t.length;i++)e[jr[n].replace("%",t[i])]=!0;return e}();function $r(t,e){for(var n,i={},u=R(jr);!(n=u()).done;){var r=n.value;for(var o in t){var a=r.replace("%",o),s=r.replace("%",t[o]);i[a]=s,i[s]=a}}for(var l,c=R(Wr);!(l=c()).done;){var h=l.value;for(var D in e){var d=h.replace("%",D),f=h.replace("%",e[D]);i[d]=f,i[f]=d}}return i}var Kr=$r({"block-start":"right","block-end":"left","inline-start":"top","inline-end":"bottom"},{"block-size":"width","inline-size":"height"}),qr=$r({"block-start":"top","block-end":"bottom","inline-start":"left","inline-end":"right"},{"block-size":"height","inline-size":"width"}),Yr=$r({"block-start":"right","block-end":"left","inline-start":"bottom","inline-end":"top"},{"block-size":"width","inline-size":"height"}),Zr=$r({"block-start":"top","block-end":"bottom","inline-start":"right","inline-end":"left"},{"block-size":"height","inline-size":"width"}),Qr=function(){function t(t,e){this.value=void 0,this.priority=void 0,this.value=t,this.priority=e}var e=t.prototype;return e.getBaseValue=function(){return this},e.filterValue=function(e){var n=this.value.visit(e);return n===this.value?this:new t(n,this.priority)},e.increaseSpecificity=function(e){return 0==e?this:new t(this.value,this.priority+e)},e.evaluate=function(t,e,n,i){return e&&ln(e)?this.value:Va(t,this.value,e,n,i)},e.isEnabled=function(t){return!0},t}(),Jr=function(t){function e(e,n,i){var u;return(u=t.call(this,e,n)||this).condition=void 0,u.condition=i,u}N(e,t);var n=e.prototype;return n.getBaseValue=function(){return new Qr(this.value,this.priority)},n.filterValue=function(t){var n=this.value.visit(t);return n===this.value?this:new e(n,this.priority,this.condition)},n.increaseSpecificity=function(t){return 0==t?this:new e(this.value,this.priority+t,this.condition)},n.isEnabled=function(t){try{return!!this.condition.evaluate(t)}catch(t){h.warn(t)}return!1},e}(Qr);function to(t,e,n){return(!e||n.priority>=e.priority)&&n.isEnabled(t)?n.getBaseValue():e}function eo(t,e,n,i){if(n){var u=t[e];(!u||n.priority>=u.priority)&&(i?n.isEnabled(i)&&(t[e]=n.getBaseValue()):t[e]=n)}else delete t[e]}var no={"region-id":!0,"fragment-selector-id":!0};function io(t){return"_"===t.charAt(0)&&"_viewConditionalStyles"!==t}function uo(t){return"_"!==t.charAt(0)&&!no[t]}function ro(t){return!!zr[t]||ln(t)}function oo(t,e){return t[e]}function ao(t,e,n){n?t[e]=n:delete t[e]}function so(t,e){return t[e]}function lo(t,e){var n=t[e];return n||(t[e]=n={}),n}var co=function(t){var e=t._viewConditionalStyles;return e||(t._viewConditionalStyles=e=[]),e};function ho(t,e){return t[e]}function Do(t,e){var n=t[e];return n||(t[e]=n=[]),n}function fo(t,e,n,i,u,r,o){for(var a in[{id:u,styleKey:"_pseudos"},{id:r,styleKey:"_regions"}].forEach((function(t){if(t.id){var n=lo(e,t.styleKey);(e=n[t.id])||(n[t.id]=e={})}})),o&&co(e).push({styles:e={},matcher:o}),n)if(!io(a))if(no[a]){var s=ho(n,a),l=Do(e,a);Array.prototype.push.apply(l,s)}else{var c,h,D=oo(n,a);if(!D.isEnabled(t))continue;var d=D.increaseSpecificity(i);eo(e,a,d,t);var f=null==(c=t.style)||null==(h=c.validatorSet.shorthands[a])?void 0:h.propList;if(f)for(var p,g=R(f);!(p=g()).done;){var E=p.value,C=new Qr(Pe,d.priority);eo(e,E,C,t)}}}function po(t,e){if(t.length>0){t.sort((function(t,e){return e.getPriority()-t.getPriority()}));for(var n=null,i=t.length-1;i>=0;i--)(n=t[i]).chained=e,e=n;return n}return e}var go=function(t){function e(e,n){var i;return(i=t.call(this)||this).props=void 0,i.context=void 0,i.propName="",i.props=e,i.context=n,i}N(e,t);var n=e.prototype;return n.setPropName=function(t){this.propName=t},n.getFontSize=function(){var t=oo(this.props,"font-size");if(!t.value.isNumeric())return Mt.em;var e=t.value;if(!function(t){switch(null==t?void 0:t.toLowerCase()){case"px":case"in":case"pt":case"pc":case"cm":case"mm":case"q":return!0;default:return!1}}(e.unit))throw new Error("Unexpected state");return e.num*Mt[e.unit]},n.visitNumeric=function(t){return"font-size"===this.propName?Co(t,this.getFontSize(),this.context):"em"===t.unit||"ex"===t.unit||"rem"===t.unit||"lh"===t.unit||"rlh"===t.unit?Eo(t,this.getFontSize(),this.context):t},n.visitExpr=function(t){return"font-size"==this.propName?Va(this.context,t,this.propName).visit(this):t},e}(xe);function Eo(t,e,n){var i=t.unit,u=t.num;return"em"===i||"ex"===i?new Ue(u*(Mt[i]/Mt.em)*e,"px"):"rem"===i?new Ue(u*n.fontSize(),"px"):"rlh"===i?new Ue(u*n.rootLineHeight,"px"):t}function Co(t,e,n){var i=(t=Eo(t,e,n)).unit,u=t.num;return"px"===i?t:new Ue("%"===i?u/100*e:u*n.queryUnitSize(i,!1),"px")}var vo=function(){function t(){}var e=t.prototype;return e.apply=function(t){},e.mergeWith=function(t){return new mo([this,t])},e.clone=function(){return this},t}(),Fo=function(t){function e(e){var n;return(n=t.call(this)||this).conditionItem=void 0,n.conditionItem=e,n}return N(e,t),e.prototype.apply=function(t){t.pushConditionItem(this.conditionItem.fresh(t))},e}(vo),mo=function(t){function e(e){var n;return(n=t.call(this)||this).list=void 0,n.list=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){for(var e=0;e<this.list.length;e++)this.list[e].apply(t)},n.mergeWith=function(t){return this.list.push(t),this},n.clone=function(){return new e([].concat(this.list))},e}(vo),Ao=function(t){function e(e,n,i,u,r){var o;return(o=t.call(this)||this).style=void 0,o.specificity=void 0,o.pseudoelement=void 0,o.regionId=void 0,o.viewConditionId=void 0,o.style=e,o.specificity=n,o.pseudoelement=i,o.regionId=u,o.viewConditionId=r,o}return N(e,t),e.prototype.apply=function(t){fo(t.context,t.currentStyle,this.style,this.specificity,this.pseudoelement,this.regionId,t.buildViewConditionMatcher(this.viewConditionId))},e}(vo),bo=function(t){function e(){var e;return(e=t.call(this)||this).chained=null,e}N(e,t);var n=e.prototype;return n.apply=function(t){this.chained.apply(t)},n.getPriority=function(){return 0},n.makePrimary=function(t){return!1},e}(vo),yo=function(t){function e(e){var n;return(n=t.call(this)||this).className=void 0,n.className=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){t.currentClassNames.includes(this.className)&&this.chained.apply(t)},n.getPriority=function(){return 10},n.makePrimary=function(t){return this.chained&&t.insertInTable(t.classes,this.className,this.chained),!0},e}(bo),Bo=function(t){function e(e){var n;return(n=t.call(this)||this).id=void 0,n.id=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){t.currentId!=this.id&&t.currentXmlId!=this.id||this.chained.apply(t)},n.getPriority=function(){return 11},n.makePrimary=function(t){return this.chained&&t.insertInTable(t.ids,this.id,this.chained),!0},e}(bo),wo=function(t){function e(e){var n;return(n=t.call(this)||this).localName=void 0,n.localName=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){t.currentLocalName==this.localName&&this.chained.apply(t)},n.getPriority=function(){return 8},n.makePrimary=function(t){return this.chained&&t.insertInTable(t.tags,this.localName,this.chained),!0},e}(bo),So=function(t){function e(e,n){var i;return(i=t.call(this)||this).ns=void 0,i.localName=void 0,i.ns=e,i.localName=n,i}N(e,t);var n=e.prototype;return n.apply=function(t){t.currentLocalName==this.localName&&t.currentNamespace==this.ns&&this.chained.apply(t)},n.getPriority=function(){return 8},n.makePrimary=function(t){if(this.chained){var e=t.nsPrefix[this.ns];e||(e="ns"+t.nsCount+++":",t.nsPrefix[this.ns]=e),t.insertInTable(t.nstags,e+this.localName,this.chained)}return!0},e}(bo),No=function(t){function e(e){var n;return(n=t.call(this)||this).epubTypePatt=void 0,n.epubTypePatt=e,n}return N(e,t),e.prototype.apply=function(t){var e=t.currentElement;if(e&&"a"==t.currentLocalName){var n=e.getAttribute("href");if(n&&n.match(/^#/)){var i=n.substring(1),u=e.ownerDocument.getElementById(i);if(u){var r=u.getAttributeNS(G.epub,"type");r&&r.match(this.epubTypePatt)&&this.chained.apply(t)}}}},e}(bo),xo=function(t){function e(e){var n;return(n=t.call(this)||this).ns=void 0,n.ns=e,n}return N(e,t),e.prototype.apply=function(t){t.currentNamespace==this.ns&&this.chained.apply(t)},e}(bo),To=function(t){function e(e,n){var i;return(i=t.call(this)||this).ns=void 0,i.name=void 0,i.ns=e,i.name=n,i}return N(e,t),e.prototype.apply=function(t){t.currentElement&&t.currentElement.hasAttributeNS(this.ns,this.name)&&this.chained.apply(t)},e}(bo),Io=function(t){function e(e,n,i){var u;return(u=t.call(this)||this).ns=void 0,u.name=void 0,u.value=void 0,u.ns=e,u.name=n,u.value=i,u}N(e,t);var n=e.prototype;return n.apply=function(t){t.currentElement&&t.currentElement.getAttributeNS(this.ns,this.name)==this.value&&this.chained.apply(t)},n.getPriority=function(){return"type"==this.name&&this.ns==G.epub?9:0},n.makePrimary=function(t){return"type"==this.name&&this.ns==G.epub&&(this.chained&&t.insertInTable(t.epubtypes,this.value,this.chained),!0)},e}(bo),Po=function(t){function e(e,n){var i;return(i=t.call(this)||this).ns=void 0,i.name=void 0,i.ns=e,i.name=n,i}N(e,t);var n=e.prototype;return n.apply=function(t){if(t.currentElement){var e=t.currentElement.getAttributeNS(this.ns,this.name);e&&Gr[e]&&this.chained.apply(t)}},n.getPriority=function(){return 0},n.makePrimary=function(t){return!1},e}(bo),ko=function(t){function e(e,n,i){var u;return(u=t.call(this)||this).ns=void 0,u.name=void 0,u.regexp=void 0,u.ns=e,u.name=n,u.regexp=i,u}return N(e,t),e.prototype.apply=function(t){if(t.currentElement){var e=t.currentElement.getAttributeNS(this.ns,this.name);e&&e.match(this.regexp)&&this.chained.apply(t)}},e}(bo),Oo=function(t){function e(e){var n;return(n=t.call(this)||this).langRegExp=void 0,n.langRegExp=e,n}return N(e,t),e.prototype.apply=function(t){t.lang.match(this.langRegExp)&&this.chained.apply(t)},e}(bo),Ro=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.apply=function(t){t.isFirst&&this.chained.apply(t)},n.getPriority=function(){return 6},e}(bo),Lo=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.apply=function(t){t.isRoot&&this.chained.apply(t)},n.getPriority=function(){return 12},e}(bo),_o=function(t){function e(e,n){var i;return(i=t.call(this)||this).a=void 0,i.b=void 0,i.a=e,i.b=n,i}return N(e,t),e.prototype.matchANPlusB=function(t){return Uu(t,this.a,this.b)},e}(bo),Mo=function(t){function e(e,n){return t.call(this,e,n)||this}N(e,t);var n=e.prototype;return n.apply=function(t){this.matchANPlusB(t.currentSiblingOrder)&&this.chained.apply(t)},n.getPriority=function(){return 5},e}(_o),Uo=function(t){function e(e,n){return t.call(this,e,n)||this}N(e,t);var n=e.prototype;return n.apply=function(t){this.matchANPlusB(t.currentSiblingTypeCounts[t.currentNamespace][t.currentLocalName])&&this.chained.apply(t)},n.getPriority=function(){return 5},e}(_o),Vo=function(t){function e(e,n){return t.call(this,e,n)||this}N(e,t);var n=e.prototype;return n.apply=function(t){var e=t.currentFollowingSiblingOrder;null===e&&(e=t.currentFollowingSiblingOrder=t.currentElement.parentNode.childElementCount-t.currentSiblingOrder+1),this.matchANPlusB(e)&&this.chained.apply(t)},n.getPriority=function(){return 4},e}(_o),zo=function(t){function e(e,n){return t.call(this,e,n)||this}N(e,t);var n=e.prototype;return n.apply=function(t){var e=t.currentFollowingSiblingTypeCounts;if(!e[t.currentNamespace]){var n=t.currentElement;do{var i=n.namespaceURI,u=n.localName,r=e[i];r||(r=e[i]={}),r[u]=(r[u]||0)+1}while(n=n.nextElementSibling)}this.matchANPlusB(e[t.currentNamespace][t.currentLocalName])&&this.chained.apply(t)},n.getPriority=function(){return 4},e}(_o),Ho=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.apply=function(t){for(var e=t.currentElement.firstChild;e;){switch(e.nodeType){case Node.ELEMENT_NODE:return;case Node.TEXT_NODE:if(e.length>0)return}e=e.nextSibling}this.chained.apply(t)},n.getPriority=function(){return 4},e}(bo),Go=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.apply=function(t){!1===t.currentElement.disabled&&this.chained.apply(t)},n.getPriority=function(){return 5},e}(bo),jo=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.apply=function(t){!0===t.currentElement.disabled&&this.chained.apply(t)},n.getPriority=function(){return 5},e}(bo),Wo=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.apply=function(t){var e=t.currentElement;!0!==e.selected&&!0!==e.checked||this.chained.apply(t)},n.getPriority=function(){return 5},e}(bo),Xo=function(t){function e(e){var n;return(n=t.call(this)||this).condition=void 0,n.condition=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){if(t.conditions[this.condition])try{t.dependentConditions.push(this.condition),this.chained.apply(t)}finally{t.dependentConditions.pop()}},n.getPriority=function(){return 5},e}(bo),$o=function(t){function e(){var e;return(e=t.call(this)||this).applied=!1,e}N(e,t);var n=e.prototype;return n.apply=function(t){this.applied=!0},n.clone=function(){var t=new e;return t.applied=this.applied,t},e}(vo),Ko=function(t){function e(e){var n;(n=t.call(this)||this).checkAppliedAction=void 0,n.firstActions=[],n.checkAppliedAction=new $o;for(var i,u=R(e);!(i=u()).done;)n.firstActions.push(po(i.value,n.checkAppliedAction));return n}N(e,t);var n=e.prototype;return n.apply=function(t){for(var e,n=R(this.firstActions);!(e=n()).done&&(e.value.apply(t),!this.checkAppliedAction.applied););this.checkAppliedAction.applied===this.positive()&&this.chained.apply(t),this.checkAppliedAction.applied=!1},n.getPriority=function(){return Math.max.apply(Math,this.firstActions.map((function(t){return t instanceof bo?t.getPriority():0})))},n.positive=function(){return!0},n.relational=function(){return!1},e}(bo),qo=function(t){function e(){return t.apply(this,arguments)||this}return N(e,t),e.prototype.positive=function(){return!1},e}(Ko),Yo=function(t){function e(e){var n;return(n=t.call(this,[])||this).selectorTexts=void 0,n.selectorTexts=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){for(var e,n=R(this.selectorTexts);!(e=n()).done;){var i=e.value,u=void 0,r=void 0;/^\s*[+~]/.test(i)?(r=t.currentElement.parentNode,u=":scope > :nth-child("+(Array.from(r.children).indexOf(t.currentElement)+1)+") "+i):(r=t.currentElement,u=":scope "+i);try{if(r.querySelector(u)){this.checkAppliedAction.apply(t);break}}catch(t){}}this.checkAppliedAction.applied&&this.chained.apply(t),this.checkAppliedAction.applied=!1},n.relational=function(){return!0},e}(Ko),Zo=function(){function t(t,e,n){this.condition=void 0,this.viewConditionId=void 0,this.viewCondition=void 0,this.condition=t,this.viewConditionId=e,this.viewCondition=n}var e=t.prototype;return e.increment=function(t){t.increment(this.condition,this.viewCondition)},e.decrement=function(t){t.decrement(this.condition,this.viewCondition)},e.buildViewConditionMatcher=function(t){return t.buildViewConditionMatcher(this.viewConditionId)},t}(),Qo=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.fresh=function(t){return new e(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))},n.push=function(t,e){return 0==e&&this.increment(t),!1},n.pop=function(t,e){return 0==e&&(this.decrement(t),!0)},e}(Zo),Jo=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}N(e,t);var n=e.prototype;return n.fresh=function(t){return new e(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))},n.push=function(t,e){return 0==e?this.increment(t):1==e&&this.decrement(t),!1},n.pop=function(t,e){return 0==e?(this.decrement(t),!0):(1==e&&this.increment(t),!1)},e}(Zo),ta=function(t){function e(e,n,i){var u;return(u=t.call(this,e,n,i)||this).fired=!1,u}N(e,t);var n=e.prototype;return n.fresh=function(t){return new e(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))},n.push=function(t,e){return!!this.fired&&(this.decrement(t),!0)},n.pop=function(t,e){return this.fired?(this.decrement(t),!0):(0==e&&(this.fired=!0,this.increment(t)),!1)},e}(Zo),ea=function(t){function e(e,n,i){var u;return(u=t.call(this,e,n,i)||this).fired=!1,u}N(e,t);var n=e.prototype;return n.fresh=function(t){return new e(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))},n.push=function(t,e){return this.fired&&(-1==e?this.increment(t):0==e&&this.decrement(t)),!1},n.pop=function(t,e){if(this.fired){if(-1==e)return this.decrement(t),!0;0==e&&this.increment(t)}else 0==e&&(this.fired=!0,this.increment(t));return!1},e}(Zo),na=function(){function t(t,e){this.afterprop=void 0,this.element=void 0,this.afterprop=t,this.element=e}var e=t.prototype;return e.fresh=function(t){return this},e.push=function(t,e){return!1},e.pop=function(t,e){return 0==e&&(t.processPseudoelementProps(this.afterprop,this.element),!0)},t}(),ia=function(){function t(t){this.lang=void 0,this.lang=t}var e=t.prototype;return e.fresh=function(t){return this},e.push=function(t,e){return!1},e.pop=function(t,e){return 0==e&&(t.lang=this.lang,!0)},t}(),ua=function(){function t(t){this.oldQuotes=void 0,this.oldQuotes=t}var e=t.prototype;return e.fresh=function(t){return this},e.push=function(t,e){return!1},e.pop=function(t,e){return 0==e&&(t.quotes=this.oldQuotes,!0)},t}(),ra=function(t){function e(e){var n;return(n=t.call(this)||this).element=void 0,n.element=e,n}N(e,t);var n=e.prototype;return n.createValueFromString=function(t,e){return"url"===e?new Ge(t||"about:invalid"):new Re(t||"")},n.visitFunc=function(e){if("attr"!==e.name)return t.prototype.visitFunc.call(this,e);var n,i="string",u=null;if(e.values[0]instanceof Xe){var r=e.values[0].values;r.length>=2&&(i=r[1].stringValue()),u=r[0].stringValue()}else u=e.values[0].stringValue();return n=this.createValueFromString(e.values.length>1?e.values[1].stringValue():null,i),this.element&&this.element.hasAttribute(u)?this.createValueFromString(this.element.getAttribute(u),i):n},e}(xe);function oa(t){if(Vr(t)){if(t instanceof Re)return t.stringValue();if(t instanceof Xe)return t.values.map((function(t){return oa(t)})).join("")}return""}var aa=function(t){function e(e,n,i){var u;return(u=t.call(this)||this).cascade=void 0,u.element=void 0,u.counterResolver=void 0,u.cascade=e,u.element=n,u.counterResolver=i,u}N(e,t);var n=e.prototype;return n.visitIdent=function(t){var e=this.cascade,n=e.quotes,i=Math.floor(n.length/2)-1;switch(t.name){case"open-quote":var u=n[2*Math.min(i,e.quoteDepth)];return e.quoteDepth++,u;case"close-quote":return e.quoteDepth>0&&e.quoteDepth--,n[2*Math.min(i,e.quoteDepth)+1];case"no-open-quote":return e.quoteDepth++,new Re("");case"no-close-quote":return e.quoteDepth>0&&e.quoteDepth--,new Re("")}return t},n.format=function(t,e){var n,i=!1,u=!1;null!=(n=e.match(/^upper-(.*)/))?(i=!0,e=n[1]):null!=(n=e.match(/^lower-(.*)/))&&(u=!0,e=n[1]);var r="";return sa[e]?r=function(t,e){if(e>t[0]||e<=0||e!=Math.round(e))return"";for(var n="",i=1;i<t.length;i+=2){var u=t[i],r=Math.floor(e/u);if(r>20)return"";for(e-=r*u;r>0;)n+=t[i+1],r--}return n}(sa[e],t):la[e]?r=function(t,e){if(e<=0||e!=Math.round(e))return"";var n=function(t){for(var e=[],n=0;n<t.length;)if("-"==t.substr(n+1,1)){var i=t.charCodeAt(n),u=t.charCodeAt(n+2);n+=3;for(var r=i;r<=u;r++)e.push(String.fromCharCode(r))}else e.push(t.substr(n++,1));return e}(t),i="";do{var u=--e%n.length;i=n[u]+i,e=(e-u)/n.length}while(e>0);return i}(la[e],t):null!=ca[e]?r=ca[e]:"decimal-leading-zero"==e?1==(r=""+t).length&&(r="0"+r):r="cjk-ideographic"==e||"trad-chinese-informal"==e?function(t,e){if(t>9999||t<-9999)return""+t;if(0==t)return e.digits.charAt(0);var n=new it;if(t<0&&(n.append(e.negative),t=-t),t<10)n.append(e.digits.charAt(t));else if(!e.formal&&t<=19)n.append(e.markers.charAt(0)),0!=t&&n.append(e.digits.charAt(t-10));else{var i=Math.floor(t/1e3);i&&(n.append(e.digits.charAt(i)),n.append(e.markers.charAt(2)));var u=Math.floor(t/100)%10;u&&(n.append(e.digits.charAt(u)),n.append(e.markers.charAt(1)));var r=Math.floor(t/10)%10;r&&(n.append(e.digits.charAt(r)),n.append(e.markers.charAt(0)));var o=t%10;o&&n.append(e.digits.charAt(o))}return n.toString()}(t,ha):""+t,i?r.toUpperCase():u?r.toLowerCase():r},n.visitFuncCounter=function(t){var e=this,n=t[0].toString(),i=t.length>1?t[1].stringValue():"decimal",u=this.cascade.counters[n];if(u&&u.length)return new Re(this.format(u&&u.length&&u[u.length-1]||0,i));var r=new qe(this.counterResolver.getPageCounterVal(n,(function(t){return e.format(t||0,i)})));return new Xe([r])},n.visitFuncCounters=function(t){var e=this,n=t[0].toString(),i=t[1].stringValue(),u=t.length>2?t[2].stringValue():"decimal",r=this.cascade.counters[n],o=new it;if(r&&r.length)for(var a=0;a<r.length;a++)a>0&&o.append(i),o.append(this.format(r[a],u));var s=new qe(this.counterResolver.getPageCountersVal(n,(function(t){var n=[];if(t.length)for(var r=0;r<t.length;r++)n.push(e.format(t[r],u));var a=o.toString();return a.length&&n.push(a),n.length?n.join(i):e.format(0,u)})));return new Xe([s])},n.visitFuncTargetCounter=function(t){var e,n=this,i=t[0];e=i instanceof Ge?i.url:i.stringValue();var u=t[1].toString(),r=t.length>2?t[2].stringValue():"decimal",o=new qe(this.counterResolver.getTargetCounterVal(e,u,(function(t){return n.format(t||0,r)})));return new Xe([o])},n.visitFuncTargetCounters=function(t){var e,n=this,i=t[0];e=i instanceof Ge?i.url:i.stringValue();var u=t[1].toString(),r=t[2].stringValue(),o=t.length>3?t[3].stringValue():"decimal",a=new qe(this.counterResolver.getTargetCountersVal(e,u,(function(t){var e=t.map((function(t){return n.format(t,o)}));return e.length?e.join(r):n.format(0,o)})));return new Xe([a])},n.visitFuncString=function(t){var e=t.length>0?t[0].stringValue():"",n=t.length>1?t[1].stringValue():"first";return new qe(this.counterResolver.getNamedStringVal(e,n))},n.visitFuncElement=function(t){var e=t.length>0?t[0].stringValue():"",n=t.length>1?t[1].stringValue():"first";return new qe(this.counterResolver.getRunningElementVal(e,n))},n.visitFuncContent=function(t){var e=t.length>0?t[0].stringValue():"text",n="";switch(e){case"text":n=this.element.textContent;break;case"before":case"after":var i,u,r=so(this.cascade.currentStyle,"_pseudos");n=oa(null==r||null==(i=r[e])||null==(u=i.content)?void 0:u.value);break;case"first-letter":var o,a,s,l,c=so(this.cascade.currentStyle,"_pseudos"),h=(oa(null==c||null==(o=c.before)||null==(a=o.content)?void 0:a.value)||this.element.textContent||oa(null==c||null==(s=c.after)||null==(l=s.content)?void 0:l.value)).match(L);n=h?h[0]:""}return new Re(n)},n.visitFuncLeader=function(t){var e="";if(t[0]instanceof _e)switch(t[0].stringValue()){case"dotted":e=".";break;case"solid":e="_";break;case"space":e=" "}else t[0]instanceof Re&&(e=t[0].stringValue());return 0==e.length?new Re(""):new qe(new ge(null,(function(){return e}),"viv-leader"))},n.visitFunc=function(t){switch(t.name){case"counter":if(t.values.length<=2)return this.visitFuncCounter(t.values);break;case"counters":if(t.values.length<=3)return this.visitFuncCounters(t.values);break;case"target-counter":if(t.values.length<=3)return this.visitFuncTargetCounter(t.values);break;case"target-counters":if(t.values.length<=4)return this.visitFuncTargetCounters(t.values);break;case"string":if(t.values.length<=2)return this.visitFuncString(t.values);break;case"element":if(t.values.length<=2)return this.visitFuncElement(t.values);break;case"content":if(t.values.length<=1)return this.visitFuncContent(t.values);break;case"leader":if(t.values.length<=1)return this.visitFuncLeader(t.values)}return t},e}(xe);d(t.HOOKS.POST_LAYOUT_BLOCK,(function(t,e,n){for(var i,u=function(){for(var t=i.value,e=t.parent;e&&e.inline;)e=e.parent;var u=t.viewNode,r=u.parentElement,o=u.getAttribute("data-viv-leader-value"),a=u.textContent||o,s=n.clientLayout.getElementComputedStyle(r),l=s.writingMode,c=s.direction,h=s.marginInlineEnd;function D(t){if("rtl"===c){var e="‏";u.textContent=(t.startsWith(e)?"":e)+t+(t.endsWith(e)?"":e)}else u.textContent=t}u.style.marginInlineStart="1px",D(o),r.style.display="inline-block",r.style.textIndent="0";var d=n.clientLayout.getElementClientRect(e.viewNode),f=n.clientLayout.getElementClientRect(r),p=n.parseComputedLength(h);function g(){var t=n.clientLayout.getElementClientRect(r);return d.left>t.left||d.right<t.right||d.top>t.top||d.bottom<t.bottom}"vertical-rl"===l||"vertical-lr"===l?("rtl"===c?d.top+=p:d.bottom-=p,d.left=f.left,d.right=f.right,d.top=Math.min(f.top,d.top),d.bottom=Math.max(f.bottom,d.bottom)):("rtl"===c?d.left+=p:d.right-=p,d.top=f.top,d.bottom=f.bottom,d.left=Math.min(f.left,d.left),d.right=Math.max(f.right,d.right)),function(){var t,e;if(D(a),g())t=1,e=a.length/o.length;else{e=t=a.length/o.length;for(var n=0;n<16;n++){for(var i=a,u=0;u<1<<n;u++)i+=o;if(D(i),g()){e+=1<<n;break}}}for(var r=0;r<16;r++){for(var s="",l=Math.floor((t+e)/2),c=0;c<l;c++)s+=o;if(D(s),g())e=l;else{if(t==l)return;t=l}}D(o)}();var E=n.clientLayout.getElementClientRect(r);r.style.float="rtl"==c?"left":"right";var C=n.clientLayout.getElementClientRect(r);function v(t){for(var i=0,u=r.parentElement;u&&u!==e.viewNode;)i+=n.getComputedInsets(u)[t],u=u.parentElement;return i}var F=0;F="rtl"==c?"vertical-rl"==l||"vertical-lr"==l?E.top-C.top-v("top"):E.left-C.left-v("left"):"vertical-rl"==l||"vertical-lr"==l?C.bottom-E.bottom-v("bottom"):C.right-E.right-v("right"),F=Math.max(0,F-.1),r.style.float="",u.style.marginInlineStart=F+"px"},r=R(e.filter((function(t){return t.after&&1===t.viewNode.nodeType&&t.viewNode.getAttribute("data-viv-leader")})));!(i=r()).done;)u()}));var sa={roman:[4999,1e3,"M",900,"CM",500,"D",400,"CD",100,"C",90,"XC",50,"L",40,"XL",10,"X",9,"IX",5,"V",4,"IV",1,"I"],armenian:[9999,9e3,"ք",8e3,"փ",7e3,"ւ",6e3,"ց",5e3,"ր",4e3,"տ",3e3,"վ",2e3,"ս",1e3,"ռ",900,"ջ",800,"պ",700,"չ",600,"ո",500,"շ",400,"ն",300,"յ",200,"մ",100,"ճ",90,"ղ",80,"ձ",70,"հ",60,"կ",50,"ծ",40,"խ",30,"լ",20,"ի",10,"ժ",9,"թ",8,"ը",7,"է",6,"զ",5,"ե",4,"դ",3,"գ",2,"բ",1,"ա"],georgian:[19999,1e4,"ჵ",9e3,"ჰ",8e3,"ჯ",7e3,"ჴ",6e3,"ხ",5e3,"ჭ",4e3,"წ",3e3,"ძ",2e3,"ც",1e3,"ჩ",900,"შ",800,"ყ",700,"ღ",600,"ქ",500,"ფ",400,"ჳ",300,"ტ",200,"ს",100,"რ",90,"ჟ",80,"პ",70,"ო",60,"ჲ",50,"ნ",40,"მ",30,"ლ",20,"კ",10,"ი",9,"თ",8,"ჱ",7,"ზ",6,"ვ",5,"ე",4,"დ",3,"გ",2,"ბ",1,"ა"],hebrew:[999,400,"ת",300,"ש",200,"ר",100,"ק",90,"צ",80,"פ",70,"ע",60,"ס",50,"נ",40,"מ",30,"ל",20,"כ",19,"יט",18,"יח",17,"יז",16,"טז",15,"טו",10,"י",9,"ט",8,"ח",7,"ז",6,"ו",5,"ה",4,"ד",3,"ג",2,"ב",1,"א"]},la={latin:"a-z",alpha:"a-z",greek:"α-ρσ-ω",russian:"а-ик-щэ-я"},ca={square:"■",disc:"•",circle:"◦",none:""},ha={formal:!1,digits:"零一二三四五六七八九",markers:"十百千",negative:"負"},Da=1/1048576;function da(t,e){for(var n in t)e[n]=t[n].clone()}var fa,pa=function(){function t(){this.nsCount=0,this.nsPrefix={},this.tags={},this.nstags={},this.epubtypes={},this.classes={},this.ids={},this.pagetypes={},this.order=0}var e=t.prototype;return e.clone=function(){var e=new t;for(var n in e.nsCount=this.nsCount,this.nsPrefix)e.nsPrefix[n]=this.nsPrefix[n];return da(this.tags,e.tags),da(this.nstags,e.nstags),da(this.epubtypes,e.epubtypes),da(this.classes,e.classes),da(this.ids,e.ids),da(this.pagetypes,e.pagetypes),e.order=this.order,e},e.insertInTable=function(t,e,n){var i=t[e];i&&(n=i.mergeWith(n)),t[e]=n},e.createInstance=function(t,e,n,i){return new ga(this,t,e,n,i)},e.nextOrder=function(){return this.order+=Da},t}(),ga=function(){function t(t,e,n,i,u){this.context=void 0,this.counterListener=void 0,this.counterResolver=void 0,this.code=void 0,this.stack=[[],[]],this.conditions={},this.currentElement=null,this.currentElementOffset=null,this.currentStyle=null,this.currentClassNames=null,this.currentLocalName="",this.currentNamespace="",this.currentId="",this.currentXmlId="",this.currentNSTag="",this.currentEpubTypes=null,this.currentPageType=null,this.previousPageType=null,this.firstPageType=null,this.isFirst=!0,this.isRoot=!0,this.counters={},this.counterScoping=[{}],this.quotes=void 0,this.quoteDepth=0,this.lang="",this.siblingOrderStack=[0],this.currentSiblingOrder=0,this.siblingTypeCountsStack=[{}],this.currentSiblingTypeCounts=void 0,this.currentFollowingSiblingOrder=null,this.followingSiblingOrderStack=void 0,this.followingSiblingTypeCountsStack=[{}],this.currentFollowingSiblingTypeCounts=void 0,this.viewConditions={},this.dependentConditions=[],this.elementStack=void 0,this.context=e,this.counterListener=n,this.counterResolver=i,this.code=t,this.quotes=[new Re("“"),new Re("”"),new Re("‘"),new Re("’")],this.currentSiblingTypeCounts=this.siblingTypeCountsStack[0],this.followingSiblingOrderStack=[this.currentFollowingSiblingOrder],this.currentFollowingSiblingTypeCounts=this.siblingTypeCountsStack[0]}var e=t.prototype;return e.pushConditionItem=function(t){this.stack[this.stack.length-1].push(t)},e.increment=function(t,e){this.conditions[t]=(this.conditions[t]||0)+1,e&&(this.viewConditions[t]?this.viewConditions[t].push(e):this.viewConditions[t]=[e])},e.decrement=function(t,e){this.conditions[t]--,this.viewConditions[t]&&(this.viewConditions[t]=this.viewConditions[t].filter((function(t){return t!==e})),0===this.viewConditions[t].length&&delete this.viewConditions[t])},e.buildViewConditionMatcher=function(t){var e=this,n=null;t&&(n=Gu.buildViewConditionMatcher(this.currentElementOffset,t));var i=this.dependentConditions.map((function(t){var n=e.viewConditions[t];return n&&n.length>0?1===n.length?n[0]:Gu.buildAnyMatcher([].concat(n)):null})).filter((function(t){return t}));return i.length<=0?n:null===n?1===i.length?i[0]:Gu.buildAllMatcher(i):Gu.buildAllMatcher([n].concat(i))},e.applyAction=function(t,e){var n=t[e];n&&n.apply(this)},e.pushRule=function(t,e,n){this.currentElement=null,this.currentElementOffset=null,this.currentStyle=n,this.currentNamespace="",this.currentLocalName="",this.currentId="",this.currentXmlId="",this.currentClassNames=t,this.currentNSTag="",this.currentEpubTypes=Ea,this.currentPageType=e,this.applyActions()},e.defineCounter=function(t,e){this.counters[t]?this.counters[t].push(e):this.counters[t]=[e];var n=this.counterScoping[this.counterScoping.length-1];n||(this.counterScoping[this.counterScoping.length-1]=n={}),n[t]=!0},e.pushCounters=function(t){var e,n=Je.inline,i=t.display;i&&(n=i.evaluate(this.context));var u=Je.inline,r=t.float;r&&(u=r.evaluate(this.context));var o=null,a=null,s=null,l=t["counter-reset"];if(l){var c=l.evaluate(this.context);c&&(o=_n(c,!0))}var h=t["counter-set"];if(h){var D=h.evaluate(this.context);D&&(s=_n(D,!1))}var d,f,p,g,E=t["counter-increment"];if(E){var C=E.evaluate(this.context);C&&(a=_n(C,!1))}if("ol"!=this.currentLocalName&&"ul"!=this.currentLocalName||this.currentNamespace!=G.XHTML||(o||(o={}),o["ua-list-item"]=(null!=(d=null==(f=this.currentElement)?void 0:f.start)?d:1)-1),n===Je.list_item&&(a||(a={}),a["ua-list-item"]=1,/^\s*[-+]?\d/.test(null!=(p=null==(g=this.currentElement)?void 0:g.getAttribute("value"))?p:"")&&(o||(o={}),o["ua-list-item"]=this.currentElement.value-1)),(null==(e=this.currentElement)?void 0:e.parentNode.nodeType)===Node.DOCUMENT_NODE&&(o||(o={}),void 0===o.footnote&&(o.footnote=0)),u===Je.footnote&&(a||(a={}),void 0===a.footnote)){var v,F=null==(v=this.currentStyle["counter-increment"])?void 0:v.value;F&&(F===Je.footnote||F instanceof Xe&&F.values.includes(Je.footnote))||(a.footnote=1)}if(o)for(var m in o)this.defineCounter(m,o[m]);if(s)for(var A in s)if(this.counters[A]){var b=this.counters[A];b[b.length-1]=s[A]}else this.defineCounter(A,s[A]);if(a)for(var y in a){this.counters[y]||this.defineCounter(y,0);var B=this.counters[y];B[B.length-1]+=a[y]}if(n===Je.list_item){var w=this.counters["ua-list-item"];t["ua-list-item-count"]=new Qr(new Ve(w[w.length-1]),0)}this.counterScoping.push(null)},e.popCounters=function(){var t=this.counterScoping.pop();if(t)for(var e in t){var n=this.counters[e];n&&(1==n.length?delete this.counters[e]:n.pop())}},e.setNamedStrings=function(t){var e=t["string-set"];if(e){for(var n,i=R((e=e.filterValue(new aa(this,this.currentElement,this.counterResolver))).value instanceof $e?e.value.values:[e.value]);!(n=i()).done;){var u=n.value;if(u instanceof Xe){var r=u.values[0].stringValue(),o=u.values.slice(1).map((function(t){return oa(t)})).join("");this.counterResolver.setNamedString(r,o,this.currentElementOffset)}}delete t["string-set"]}},e.setRunningElement=function(t){var e=t.position;if((null==e?void 0:e.value)instanceof Ke&&"running"===e.value.name){var n=e.value.values[0].stringValue();this.counterResolver.setRunningElement(n,this.currentElementOffset)}},e.processPseudoelementProps=function(t,e){this.pushCounters(t);var n=t.content;n&&(t.content=n.filterValue(new aa(this,e,this.counterResolver))),this.popCounters()},e.pushElement=function(t,e,n,i){var u=this;this.currentPageType=null,this.currentElement=e,this.currentElementOffset=i,this.currentStyle=n,this.currentNamespace=e.namespaceURI,this.currentLocalName=e.localName;var r=this.code.nsPrefix[this.currentNamespace];this.currentNSTag=r?r+this.currentLocalName:"",this.currentId=e.getAttribute("id"),this.currentXmlId=e.getAttributeNS(G.XML,"id");var o=e.getAttribute("class");this.currentClassNames=o?o.split(/\s+/):Ea;var a=e.getAttributeNS(G.epub,"type");this.currentEpubTypes=a?a.split(/\s+/):Ea;var s=nt(e);s&&(this.stack[this.stack.length-1].push(new ia(this.lang)),this.lang=s.toLowerCase());var l=this.isRoot,c=this.siblingOrderStack;this.currentSiblingOrder=++c[c.length-1],c.push(0);var h=this.siblingTypeCountsStack,D=this.currentSiblingTypeCounts=h[h.length-1],d=D[this.currentNamespace];d||(d=D[this.currentNamespace]={}),d[this.currentLocalName]=(d[this.currentLocalName]||0)+1,h.push({});var f=this.followingSiblingOrderStack;this.currentFollowingSiblingOrder=null!==f[f.length-1]?--f[f.length-1]:null,f.push(null);var p=this.followingSiblingTypeCountsStack,g=this.currentFollowingSiblingTypeCounts=p[p.length-1];g&&g[this.currentNamespace]&&g[this.currentNamespace][this.currentLocalName]--,p.push({}),this.applyActions(),this.applyVarFilter([this.currentStyle],t,e),this.applyCalcFilter(this.currentStyle,this.context),this.applyAttrFilter(e);var E=n.quotes,C=null;if(E){var v=E.evaluate(this.context);v&&(C=new ua(this.quotes),v===Je.none?this.quotes=[new Re(""),new Re("")]:v===Je.auto||v===Je.initial?this.quotes=[new Re("“"),new Re("”"),new Re("‘"),new Re("’")]:v instanceof Xe&&(this.quotes=v.values))}this.pushCounters(this.currentStyle);var F=this.currentId||this.currentXmlId||e.getAttribute("name")||"";if(l||F){var m={};Object.keys(this.counters).forEach((function(t){m[t]=Array.from(u.counters[t])})),this.counterListener.countersOfId(F,m)}var A=so(this.currentStyle,"_pseudos");if(A)for(var b,y=!0,B=R(Ca);!(b=B()).done;){var w=b.value;w||(y=!1);var S,N,x=A[w];x&&(("before"!==w&&"after"!==w||Vr(null==(S=x.content)?void 0:S.value))&&("footnote-call"!==w&&"footnote-marker"!==w||(null==(N=oo(this.currentStyle,"float"))?void 0:N.value)===Je.footnote)?y?this.processPseudoelementProps(x,e):this.stack[this.stack.length-2].push(new na(x,e)):delete A[w])}this.setNamedStrings(this.currentStyle),this.setRunningElement(this.currentStyle),C&&this.stack[this.stack.length-2].push(C)},e.applyAttrFilterInner=function(t,e){for(var n in e)uo(n)&&!ln(n)&&(e[n]=e[n].filterValue(t))},e.applyAttrFilter=function(t){var e=new ra(t),n=this.currentStyle,i=so(n,"_pseudos");for(var u in i)this.applyAttrFilterInner(e,i[u]);this.applyAttrFilterInner(e,n)},e.applyVarFilter=function(t,e,n){var i=t[0],u=new Ma(t,e,n),r={};for(var o in i)if(io(o)){var a=so(i,o);for(var s in a)this.applyVarFilter([a[s]].concat(t),e,n)}else if(uo(o)){for(var l=oo(i,o),c=l.value,h=0;;h++){if(h>=32){c=Pe;break}var D=c.visit(u);if(u.error){c=Pe,u.error=!1;break}if(D===c)break;c=D}if(c!==l.value){var d,f=e.validatorSet,p=null==f||null==(d=f.shorthands[o])?void 0:d.clone();if(p)if(an(c)){for(var g,E=R(p.propList);!(g=E()).done;){var C=g.value,v=new Qr(c,l.priority),F=oo(i,C);ao(r,C,to(this.context,F,v))}delete i[o]}else{var m=_u(e.scope,new Ti(c.toString(),null),"");if(m&&(m.visit(p),!p.error)){for(var A,b=R(p.propList);!(A=b()).done;){var y,B,w=A.value,S=new Qr(null!=(y=null!=(B=p.values[w])?B:f.defaultValues[w])?y:Je.initial,l.priority),N=oo(i,w);ao(r,w,to(this.context,N,S))}delete i[o]}}else i[o]=new Qr(c,l.priority)}if(r[o]){var x=oo(i,o);x&&x.value!==Pe&&eo(r,o,x,this.context)}}for(var T in r)i[T]=r[T]},e.applyCalcFilter=function(t,e){var n=new Ua(e);for(var i in t)if(io(i)){var u=so(t,i);for(var r in u)this.applyCalcFilter(u[r],e)}else if(uo(i)&&!ln(i)){var o=oo(t,i),a=o.value.visit(n);a!==o.value&&(t[i]=new Qr(a,o.priority))}},e.applyActions=function(){var t;for(t=0;t<this.currentClassNames.length;t++)this.applyAction(this.code.classes,this.currentClassNames[t]);for(t=0;t<this.currentEpubTypes.length;t++)this.applyAction(this.code.epubtypes,this.currentEpubTypes[t]);this.applyAction(this.code.ids,this.currentId),this.applyAction(this.code.tags,this.currentLocalName),""!=this.currentLocalName&&this.applyAction(this.code.tags,"*"),this.applyAction(this.code.nstags,this.currentNSTag),null!==this.currentPageType&&(this.applyAction(this.code.pagetypes,this.currentPageType),this.applyAction(this.code.pagetypes,"*")),this.stack.push([]);for(var e=1;e>=-1;--e){var n=this.stack[this.stack.length-e-2];for(t=0;t<n.length;)n[t].push(this,e)?n.splice(t,1):t++}this.isFirst=!0,this.isRoot=!1},e.pop=function(){for(var t=1;t>=-1;--t)for(var e=this.stack[this.stack.length-t-2],n=0;n<e.length;)e[n].pop(this,t)?e.splice(n,1):n++;this.stack.pop(),this.isFirst=!1},e.popRule=function(){this.pop()},e.popElement=function(t){this.siblingOrderStack.pop(),this.siblingTypeCountsStack.pop(),this.followingSiblingOrderStack.pop(),this.followingSiblingTypeCountsStack.pop(),this.pop(),this.popCounters()},t}(),Ea=[],Ca=["before","transclusion-before","footnote-call","footnote-marker","inner","first-letter","first-line","","transclusion-after","after"];!function(t){t[t.TOP=0]="TOP",t[t.SELECTOR=1]="SELECTOR",t[t.RULE=2]="RULE"}(fa||(fa={}));var va=null,Fa=function(t){function e(e,n,i,u,r,o,a){var s;return(s=t.call(this,e,n,a)||this).condition=void 0,s.regionId=void 0,s.validatorSet=void 0,s.chain=null,s.specificity=0,s.elementStyle=null,s.conditionCount=0,s.pseudoelement=null,s.footnoteContent=!1,s.cascade=void 0,s.state=void 0,s.viewConditionId=null,s.insideSelectorRule=void 0,s.invalid=!1,s.condition=i,s.regionId=r,s.validatorSet=o,s.cascade=u?u.cascade:va?va.clone():new pa,s.state=fa.TOP,s}N(e,t);var n=e.prototype;return n.insertNonPrimary=function(t){this.cascade.insertInTable(this.cascade.tags,"*",t)},n.processChain=function(t){var e=po(this.chain,t);e!==t&&e.makePrimary(this.cascade)||this.insertNonPrimary(e)},n.isInsideSelectorRule=function(t){return this.state!=fa.TOP&&(this.reportAndSkip(t),!0)},n.tagSelector=function(t,e){(e||t)&&(e&&(this.specificity+=1),this.chain.push(e&&t?new So(t,e.toLowerCase()):e?new wo(e.toLowerCase()):new xo(t)))},n.invalidSelector=function(t){h.warn(t),this.chain.push(new Xo("")),this.setInvalid()},n.setInvalid=function(){this.invalid=!0;for(var t=this;t instanceof ba;t=t.parent)t.parent.invalid=!0},n.classSelector=function(t){this.pseudoelement?this.invalidSelector("::"+this.pseudoelement+" followed by ."+t):(this.specificity+=256,this.chain.push(new yo(t)))},n.pseudoclassSelector=function(t,e){if(this.pseudoelement)this.invalidSelector("::"+this.pseudoelement+" followed by :"+t);else{switch(t.toLowerCase()){case"enabled":this.chain.push(new Go);break;case"disabled":this.chain.push(new jo);break;case"checked":this.chain.push(new Wo);break;case"root":case"scope":this.chain.push(new Lo);break;case"link":this.chain.push(new wo("a")),this.chain.push(new To("","href"));break;case"-adapt-href-epub-type":case"href-epub-type":if(e&&1==e.length&&"string"==typeof e[0]){var n=new RegExp("(^|s)"+ct(e[0])+"($|s)");this.chain.push(new No(n))}else this.chain.push(new Xo(""));break;case"-adapt-footnote-content":case"footnote-content":this.footnoteContent=!0;break;case"visited":case"active":case"hover":case"focus":this.chain.push(new Xo(""));break;case"lang":this.chain.push(e&&1==e.length&&"string"==typeof e[0]?new Oo(new RegExp("^"+ct(e[0].toLowerCase())+"($|-)")):new Xo(""));break;case"nth-child":case"nth-last-child":case"nth-of-type":case"nth-last-of-type":var i=ma[t.toLowerCase()];this.chain.push(e&&2==e.length?new i(e[0],e[1]):new Xo(""));break;case"first-child":this.chain.push(new Ro);break;case"last-child":this.chain.push(new Vo(0,1));break;case"first-of-type":this.chain.push(new Uo(0,1));break;case"last-of-type":this.chain.push(new zo(0,1));break;case"only-child":this.chain.push(new Ro),this.chain.push(new Vo(0,1));break;case"only-of-type":this.chain.push(new Uo(0,1)),this.chain.push(new zo(0,1));break;case"empty":this.chain.push(new Ho);break;case"before":case"after":case"first-line":case"first-letter":return void this.pseudoelementSelector(t,e);default:return void this.invalidSelector("Unknown pseudo-class :"+t)}this.specificity+=256}},n.pseudoelementSelector=function(t,e){switch(t){case"before":case"after":case"first-line":case"first-letter":case"footnote-call":case"footnote-marker":case"inner":case"after-if-continues":if(this.pseudoelement)return void this.invalidSelector("Double pseudo-element ::"+this.pseudoelement+"::"+t);this.pseudoelement=t;break;case"first-n-lines":if(e&&1==e.length&&"number"==typeof e[0]){var n=Math.round(e[0]);if(n>0&&n==e[0]){if(this.pseudoelement)return void this.invalidSelector("Double pseudo-element ::"+this.pseudoelement+"::"+t);this.pseudoelement="first-"+n+"-lines";break}}this.chain.push(new Xo(""));break;case"nth-fragment":e&&2==e.length?this.viewConditionId="NFS_"+e[0]+"_"+e[1]:this.chain.push(new Xo(""));break;default:return void this.invalidSelector("Unknown pseudo-element ::"+t)}this.specificity+=1},n.idSelector=function(t){this.specificity+=65536,this.chain.push(new Bo(t))},n.attributeSelector=function(t,e,n,i){var u;switch(this.specificity+=256,e=e.toLowerCase(),i=i||"",n){case Vn.EOF:u=new To(t,e);break;case Vn.EQ:u=new Io(t,e,i);break;case Vn.TILDE_EQ:u=!i||i.match(/\s/)?new Xo(""):new ko(t,e,new RegExp("(^|\\s)"+ct(i)+"($|\\s)"));break;case Vn.BAR_EQ:u=new ko(t,e,new RegExp("^"+ct(i)+"($|-)"));break;case Vn.HAT_EQ:u=i?new ko(t,e,new RegExp("^"+ct(i))):new Xo("");break;case Vn.DOLLAR_EQ:u=i?new ko(t,e,new RegExp(ct(i)+"$")):new Xo("");break;case Vn.STAR_EQ:u=i?new ko(t,e,new RegExp(ct(i))):new Xo("");break;case Vn.COL_COL:if("supported"!=i)return void this.invalidSelector("Unsupported :: attr selector op: "+i);u=new Po(t,e);break;default:return void this.invalidSelector("Unsupported attr selector: "+n)}this.chain.push(u)},n.descendantSelector=function(){var t="d"+Aa++;this.processChain(new Fo(new Qo(t,this.viewConditionId,null))),this.chain=[new Xo(t)],this.viewConditionId=null},n.childSelector=function(){var t="c"+Aa++;this.processChain(new Fo(new Jo(t,this.viewConditionId,null))),this.chain=[new Xo(t)],this.viewConditionId=null},n.adjacentSiblingSelector=function(){var t="a"+Aa++;this.processChain(new Fo(new ta(t,this.viewConditionId,null))),this.chain=[new Xo(t)],this.viewConditionId=null},n.followingSiblingSelector=function(){var t="f"+Aa++;this.processChain(new Fo(new ea(t,this.viewConditionId,null))),this.chain=[new Xo(t)],this.viewConditionId=null},n.nextSelector=function(){this.finishChain(),this.pseudoelement=null,this.footnoteContent=!1,this.specificity=0,this.chain=[]},n.startSelectorRule=function(){this.isInsideSelectorRule("E_CSS_UNEXPECTED_SELECTOR")||(this.state=fa.SELECTOR,this.elementStyle={},this.pseudoelement=null,this.specificity=0,this.footnoteContent=!1,this.chain=[],this.invalid=!1)},n.error=function(e,n){t.prototype.error.call(this,e,n),this.state==fa.SELECTOR&&(this.state=fa.TOP),this.setInvalid()},n.startStylesheet=function(e){t.prototype.startStylesheet.call(this,e),this.state=fa.TOP},n.startRuleBody=function(){this.finishChain(),t.prototype.startRuleBody.call(this),this.state==fa.SELECTOR&&(this.state=fa.TOP)},n.endRule=function(){t.prototype.endRule.call(this),this.insideSelectorRule=fa.TOP},n.finishChain=function(){this.chain&&(this.processChain(this.makeApplyRuleAction(this.specificity)),this.chain=null,this.pseudoelement=null,this.viewConditionId=null,this.footnoteContent=!1,this.specificity=0)},n.makeApplyRuleAction=function(t){var e=this.regionId;return this.footnoteContent&&(e=e?"xxx-bogus-xxx":"footnote"),new Ao(this.elementStyle,t,this.pseudoelement,e,this.viewConditionId)},n.special=function(t,e){var n;n=this.condition?new Jr(e,0,this.condition):new Qr(e,0),Do(this.elementStyle,t).push(n)},n.property=function(t,e,n){this.validatorSet.validatePropertyAndHandleShorthand(t,e,n,this)},n.invalidPropertyValue=function(t,e){this.report("E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},n.unknownProperty=function(t,e){this.report("E_INVALID_PROPERTY "+t+": "+e.toString())},n.simpleProperty=function(t,e,n){"display"!=t||e!==Je.oeb_page_head&&e!==Je.oeb_page_foot||(this.simpleProperty("flow-options",new Xe([Je.exclusive,Je._static]),n),this.simpleProperty("flow-into",e,n),e=Je.block),p("SIMPLE_PROPERTY").forEach((function(i){var u=i({name:t,value:e,important:n});t=u.name,e=u.value,n=u.important}));var i=(n?this.getImportantSpecificity():this.getBaseSpecificity())+this.cascade.nextOrder(),u=this.condition?new Jr(e,i,this.condition):new Qr(e,i);eo(this.elementStyle,t,u)},n.finish=function(){return this.cascade},n.startFuncWithSelector=function(t){var e;switch(t){case"is":e=new ba(this);break;case"not":e=new ya(this);break;case"where":e=new Ba(this);break;case"has":e=new wa(this)}e&&(e.startSelectorRule(),this.owner.pushHandler(e))},e}(pu),ma={"nth-child":Mo,"nth-of-type":Uo,"nth-last-child":Vo,"nth-last-of-type":zo},Aa=0,ba=function(t){function e(e){var n;return(n=t.call(this,e.scope,e.owner,e.condition,e,e.regionId,e.validatorSet,!1)||this).parent=void 0,n.parentChain=void 0,n.chains=[],n.maxSpecificity=0,n.selectorTexts=[],n.parent=e,n.parentChain=e.chain,n}N(e,t);var n=e.prototype;return n.nextSelector=function(){this.chain&&this.chains.push(this.chain),this.maxSpecificity=Math.max(this.maxSpecificity,this.specificity),this.chain=[],this.pseudoelement=null,this.viewConditionId=null,this.footnoteContent=!1,this.specificity=0},n.endFuncWithSelector=function(){this.chain&&this.chains.push(this.chain),this.chains.length>0?(this.maxSpecificity=Math.max(this.maxSpecificity,this.specificity),this.parentChain.push(this.relational()?new Yo(this.selectorTexts):this.positive()?new Ko(this.chains):new qo(this.chains)),this.increasingSpecificity()&&(this.parent.specificity+=this.maxSpecificity)):this.parentChain.push(new Xo("")),this.owner.popHandler()},n.startRuleBody=function(){this.reportAndSkip("E_CSS_UNEXPECTED_RULE_BODY")},n.error=function(n,i){t.prototype.error.call(this,n,i),this.chain=null,this.pseudoelement=null,this.viewConditionId=null,this.footnoteContent=!1,this.specificity=0;for(var u=!1,r=this;r instanceof e;r=r.parent)if(r.forgiving()){u=!0;break}u||this.owner.popHandler()},n.pushSelectorText=function(t){this.chain&&this.relational()&&this.selectorTexts.push(t)},n.positive=function(){return!0},n.increasingSpecificity=function(){return!0},n.forgiving=function(){return!0},n.relational=function(){return!1},e}(Fa),ya=function(t){function e(){return t.apply(this,arguments)||this}N(e,t);var n=e.prototype;return n.positive=function(){return!1},n.forgiving=function(){return!1},e}(ba),Ba=function(t){function e(){return t.apply(this,arguments)||this}return N(e,t),e.prototype.increasingSpecificity=function(){return!1},e}(ba),wa=function(t){function e(){return t.apply(this,arguments)||this}return N(e,t),e.prototype.relational=function(){return!0},e}(ba),Sa=function(t){function e(e,n){return t.call(this,e,n,!1)||this}return N(e,t),e.prototype.property=function(t,e,n){if(this.scope.values[t])this.error("E_CSS_NAME_REDEFINED "+t,this.getCurrentToken());else{var i=t.match(/height|^(top|bottom)$/)?"vh":"vw",u=new de(this.scope,100,i);this.scope.defineName(t,e.toExpr(this.scope,u))}},e}(pu),Na=function(t){function e(e,n,i,u,r,o){var a;return(a=t.call(this,e,n,!1)||this).condition=void 0,a.elementStyle=void 0,a.validatorSet=void 0,a.ruleType=void 0,a.order=void 0,a.condition=i,a.elementStyle=u,a.validatorSet=r,a.ruleType=o,a.order=0,a}N(e,t);var n=e.prototype;return n.property=function(t,e,n){n?h.warn("E_IMPORTANT_NOT_ALLOWED"):this.validatorSet.validatePropertyAndHandleShorthand(t,e,n,this)},n.invalidPropertyValue=function(t,e){h.warn("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},n.unknownProperty=function(t,e){h.warn("E_INVALID_PROPERTY",t+":",e.toString())},n.simpleProperty=function(t,e,n){var i=n?this.getImportantSpecificity():this.getBaseSpecificity();i+=this.order,this.order+=Da;var u=this.condition?new Jr(e,i,this.condition):new Qr(e,i);eo(this.elementStyle,t,u)},e}(pu),xa=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).validatorSet=void 0,i.elementStyle={},i.order=0,i.validatorSet=n,i}N(e,t);var n=e.prototype;return n.property=function(t,e,n){this.validatorSet.validatePropertyAndHandleShorthand(t,e,n,this)},n.invalidPropertyValue=function(t,e){h.warn("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},n.unknownProperty=function(t,e){h.warn("E_INVALID_PROPERTY",t+":",e.toString())},n.simpleProperty=function(t,e,n){var i=n?cu:lu;i+=this.order,this.order+=Da;var u=new Qr(e,i);eo(this.elementStyle,t,u)},e}(Ou);function Ta(t,e){var n=co(t);n&&n.forEach((function(t){t.matcher.matches()&&e(t.styles)}))}function Ia(t,e,n){Ta(n,(function(n){La(t,n,e)}))}function Pa(t,e,n){var i=t["writing-mode"];if(i){var u=i.evaluate(e,"writing-mode");if(u&&u!==Je.inherit&&u!==Je.revert&&u!==Je.unset)return u===Je.vertical_rl}return n}function ka(t,e,n){var i=t.direction;if(i){var u=i.evaluate(e,"direction");if(u&&u!==Je.inherit&&u!==Je.revert&&u!==Je.unset)return u===Je.rtl}return n}function Oa(t,e,n,i,u){var r={};for(var o in t)uo(o)&&(r[o]=oo(t,o));return Ia(r,e,t),Ra(t,n,i,(function(t,n){La(r,n,e),Ia(r,e,n)})),r}function Ra(t,e,n,i){var u=so(t,"_regions");if((e||n)&&u){if(n){var r=["footnote"];e=e?e.concat(r):r}for(var o,a=R(e);!(o=a()).done;){var s=o.value,l=u[s];l&&i(s,l)}}}function La(t,e,n){for(var i in e)if(uo(i)){var u=oo(e,i);t[i]=to(n,t[i],u)}}var _a=function(t,e,n,i,u){var r=n?i?Yr:Kr:i?Zr:qr;for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];if(!a)continue;var s=r[o],l=void 0;if(s){var c=t[s];if(c&&c.priority>a.priority)continue;l=Xr[s]?s:o}else l=o;e[l]=u(o,a)}},Ma=function(t){function e(e,n,i){var u;return(u=t.call(this)||this).elementStyles=void 0,u.styler=void 0,u.element=void 0,u.elementStyles=e,u.styler=n,u.element=i,u}N(e,t);var n=e.prototype;return n.getVarValue=function(t){var e,n,i=null!=(e=this.element)?e:this.styler.root;if(null!=(n=this.elementStyles)&&n.length){for(var u,r=R(this.elementStyles);!(u=r()).done;){var o,a=null==(o=u.value[t])?void 0:o.value;if(a)return a}this.element&&(i=this.element.parentElement)}for(;i;i=i.parentElement){var s,l,c=null==(s=this.styler.getStyle(i,!1))||null==(l=s[t])?void 0:l.value;if(c)return c}return null},n.visitFunc=function(e){if("var"!==e.name)return t.prototype.visitFunc.call(this,e);var n=e.values[0]instanceof _e&&e.values[0].name;return n&&ln(n)?this.getVarValue(n)||(e.values.length<2?(this.error=!0,Pe):2===e.values.length?e.values[1]:new $e(e.values.slice(1))):(this.error=!0,Pe)},e}(xe),Ua=function(t){function e(e,n,i,u){var r;return(r=t.call(this)||this).context=void 0,r.resolveViewportUnit=void 0,r.percentRef=void 0,r.vertical=void 0,r.context=e,r.resolveViewportUnit=n,r.percentRef=i,r.vertical=u,r}N(e,t);var n=e.prototype;return n.visitFunc=function(e){var n=t.prototype.visitFunc.call(this,e);if("calc"!==e.name)return n;var i=n.toString().replace(/^calc\b/,"-epubx-expr");if(/\d(%|em|ex|cap|ch|ic|lh|p?v[whbi]|p?vmin|p?vmax)\W|\Wvar\(\s*--/i.test(i))return n;var u=_u(this.context.rootScope,new Ti(i,null),"");if(u instanceof qe)try{var r=u.expr.evaluate(this.context);"number"==typeof r&&(n=new Ue(r,"px"))}catch(t){h.warn(t)}return n},n.visitNumeric=function(t){return this.resolveViewportUnit&&(_t(t.unit)||function(t){switch(null==t?void 0:t.toLowerCase()){case"rem":case"rlh":return!0;default:return!1}}(t.unit))?new Ue(t.num*this.context.queryUnitSize(t.unit,!1,this.vertical),"px"):"number"==typeof this.percentRef&&"%"===t.unit?new Ue(t.num*this.percentRef/100,"px"):t},e}(xe);function Va(t,e,n,i,u){try{if(e instanceof qe)return e.expr instanceof ge&&(e.expr.str.startsWith("named-string-")||e.expr.str.startsWith("running-element-"))?e:function(t,e,n){var i=e.evaluate(t);switch(typeof i){case"number":return function(t){return!!Mu[t]}(n)?i==Math.round(i)?new ze(i):new Ve(i):new Ue(i,"px");case"string":return i?_u(e.scope,new Ti(i,null),""):Pe;case"boolean":return i?Je._true:Je._false;case"undefined":return Pe}throw new Error("E_UNEXPECTED")}(t,e.expr,n);if(e instanceof Ue||e instanceof Ke||e instanceof Xe||e instanceof $e)return e.visit(new Ua(t,!0,i,u))}catch(t){return h.warn(t),Pe}return e}function za(t,e){var n={};return Object.keys(t).forEach((function(i){var u=n[i]={},r=t[i];Object.keys(r).forEach((function(t){u[t]=r[t].map((function(t){var n=e?t.physical:t.logical;return{regexp:new RegExp("(-?)"+(e?t.logical:t.physical)+"(-?)"),to:"$1"+n+"$2"}}))}))})),n}function Ha(t,e,n,i){var u=i[e];if(!u)throw new Error("unknown writing-mode: "+e);var r=u[n||"ltr"];if(!r)throw new Error("unknown direction: "+n);for(var o,a=R(r);!(o=a()).done;){var s=o.value,l=t.replace(s.regexp,s.to);if(l!==t)return l}return t}var Ga={"horizontal-tb":{ltr:[{logical:"inline-start",physical:"left"},{logical:"inline-end",physical:"right"},{logical:"block-start",physical:"top"},{logical:"block-end",physical:"bottom"},{logical:"inline-size",physical:"width"},{logical:"block-size",physical:"height"}],rtl:[{logical:"inline-start",physical:"right"},{logical:"inline-end",physical:"left"},{logical:"block-start",physical:"top"},{logical:"block-end",physical:"bottom"},{logical:"inline-size",physical:"width"},{logical:"block-size",physical:"height"}]},"vertical-rl":{ltr:[{logical:"inline-start",physical:"top"},{logical:"inline-end",physical:"bottom"},{logical:"block-start",physical:"right"},{logical:"block-end",physical:"left"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}],rtl:[{logical:"inline-start",physical:"bottom"},{logical:"inline-end",physical:"top"},{logical:"block-start",physical:"right"},{logical:"block-end",physical:"left"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}]},"vertical-lr":{ltr:[{logical:"inline-start",physical:"top"},{logical:"inline-end",physical:"bottom"},{logical:"block-start",physical:"left"},{logical:"block-end",physical:"right"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}],rtl:[{logical:"inline-start",physical:"bottom"},{logical:"inline-end",physical:"top"},{logical:"block-start",physical:"left"},{logical:"block-end",physical:"right"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}]}},ja=za(Ga,!0);function Wa(t,e,n){return Ha(t,e,n||null,ja)}var Xa=za(Ga,!1);function $a(t,e,n){return Ha(t,e,n||null,Xa)}var Ka,qa={"horizontal-tb":[{logical:"line-left",physical:"left"},{logical:"line-right",physical:"right"},{logical:"over",physical:"top"},{logical:"under",physical:"bottom"}],"vertical-rl":[{logical:"line-left",physical:"top"},{logical:"line-right",physical:"bottom"},{logical:"over",physical:"right"},{logical:"under",physical:"left"}],"vertical-lr":[{logical:"line-left",physical:"top"},{logical:"line-right",physical:"bottom"},{logical:"over",physical:"right"},{logical:"under",physical:"left"}]};function Ya(t,e,n){var i={display:e.style.display,position:e.style.position,width:e.style.width,maxWidth:e.style.maxWidth,minWidth:e.style.minWidth,height:e.style.height,maxHeight:e.style.maxHeight,minHeight:e.style.minHeight},u=e.parentNode,r=e.ownerDocument.createElement("div");function o(n){return t.getElementComputedStyle(e).getPropertyValue(n)}tt(r,"position",i.position),u.insertBefore(r,e),r.appendChild(e),tt(e,"width","auto"),tt(e,"max-width","none"),tt(e,"min-width","0"),tt(e,"height","auto"),tt(e,"max-height","none"),tt(e,"min-height","0");var a=J("writing-mode"),s=(a?o(a[0]):null)||o("writing-mode"),l="vertical-rl"===s||"tb-rl"===s||"vertical-lr"===s||"tb-lr"===s,c=l?"height":"width",h=l?"width":"height";function D(){return tt(e,"display","block"),tt(e,"position","static"),o(c)}function d(){tt(e,"display","inline-block"),tt(r,c,"99999999px");var t=o(c);return tt(r,c,""),t}function f(){tt(e,"display","inline-block"),tt(r,c,"0");var t=o(c);return tt(r,c,""),t}function p(){var t=D(),e=f(),n=parseFloat(t);if(n<=parseFloat(e))return e;var i=d();return n<=parseFloat(i)?t:i}function g(){return o(h)}function E(){throw new Error("Getting fill-available block size is not implemented")}var C={};return n.forEach((function(t){var n,u;switch(t){case Ka.FILL_AVAILABLE_INLINE_SIZE:u=D();break;case Ka.MAX_CONTENT_INLINE_SIZE:u=d();break;case Ka.MIN_CONTENT_INLINE_SIZE:u=f();break;case Ka.FIT_CONTENT_INLINE_SIZE:u=p();break;case Ka.FILL_AVAILABLE_BLOCK_SIZE:u=E();break;case Ka.MAX_CONTENT_BLOCK_SIZE:case Ka.MIN_CONTENT_BLOCK_SIZE:case Ka.FIT_CONTENT_BLOCK_SIZE:u=g();break;case Ka.FILL_AVAILABLE_WIDTH:u=l?E():D();break;case Ka.FILL_AVAILABLE_HEIGHT:u=l?D():E();break;case Ka.MAX_CONTENT_WIDTH:u=l?g():d();break;case Ka.MAX_CONTENT_HEIGHT:u=l?d():g();break;case Ka.MIN_CONTENT_WIDTH:u=l?g():f();break;case Ka.MIN_CONTENT_HEIGHT:u=l?f():g();break;case Ka.FIT_CONTENT_WIDTH:u=l?g():p();break;case Ka.FIT_CONTENT_HEIGHT:u=l?p():g()}"0px"!==u||1!==e.childNodes.length||"img"!==(null==(n=e.firstElementChild)?void 0:n.localName)||e.firstElementChild.complete||(u="1px"),C[t]=parseFloat(u),tt(e,"position",i.position),tt(e,"display",i.display)})),tt(e,"width",i.width),tt(e,"max-width",i.maxWidth),tt(e,"min-width",i.minWidth),tt(e,"height",i.height),tt(e,"max-height",i.maxHeight),tt(e,"min-height",i.minHeight),u.insertBefore(e,r),u.removeChild(r),C}!function(t){t.FILL_AVAILABLE_INLINE_SIZE="fill-available inline size",t.FILL_AVAILABLE_BLOCK_SIZE="fill-available block size",t.FILL_AVAILABLE_WIDTH="fill-available width",t.FILL_AVAILABLE_HEIGHT="fill-available height",t.MAX_CONTENT_INLINE_SIZE="max-content inline size",t.MAX_CONTENT_BLOCK_SIZE="max-content block size",t.MAX_CONTENT_WIDTH="max-content width",t.MAX_CONTENT_HEIGHT="max-content height",t.MIN_CONTENT_INLINE_SIZE="min-content inline size",t.MIN_CONTENT_BLOCK_SIZE="min-content block size",t.MIN_CONTENT_WIDTH="min-content width",t.MIN_CONTENT_HEIGHT="min-content height",t.FIT_CONTENT_INLINE_SIZE="fit-content inline size",t.FIT_CONTENT_BLOCK_SIZE="fit-content block size",t.FIT_CONTENT_WIDTH="fit-content width",t.FIT_CONTENT_HEIGHT="fit-content height"}(Ka||(Ka={}));var Za=tr.FloatReference;function Qa(t){switch(t){case Za.INLINE:return!1;case Za.COLUMN:case Za.REGION:case Za.PAGE:return!0;default:throw new Error("Unknown float-reference: "+t)}}var Ja=function(){function t(t,e,n,i,u,r){this.nodePosition=void 0,this.floatReference=void 0,this.floatSide=void 0,this.clearSide=void 0,this.flowName=void 0,this.floatMinWrapBlock=void 0,this.order=null,this.id=null,this.nodePosition=t,this.floatReference=e,this.floatSide=n,this.clearSide=i,this.flowName=u,this.floatMinWrapBlock=r}var e=t.prototype;return e.getOrder=function(){if(null===this.order)throw new Error("The page float is not yet added");return this.order},e.getId=function(){if(!this.id)throw new Error("The page float is not yet added");return this.id},e.isAllowedOnContext=function(t){return t.isAnchorAlreadyAppeared(this.getId())},e.isAllowedToPrecede=function(t){return!1},t}(),ts=function(){function t(){this.floats=[],this.nextPageFloatIndex=0}var e=t.prototype;return e.nextOrder=function(){return this.nextPageFloatIndex++},e.createPageFloatId=function(t){return"pf"+t},e.addPageFloat=function(t){if(this.floats.findIndex((function(e){return wr(e.nodePosition,t.nodePosition)}))>=0)throw new Error("A page float with the same source node is already registered");var e=t.order=this.nextOrder();t.id=this.createPageFloatId(e),this.floats.push(t)},e.findPageFloatByNodePosition=function(t){var e=this.floats.findIndex((function(e){return wr(e.nodePosition,t)}));return e>=0?this.floats[e]:null},e.findPageFloatById=function(t){var e=this.floats.findIndex((function(e){return e.id===t}));return e>=0?this.floats[e]:null},t}(),es=function(){function t(t,e,n,i,u){this.floatReference=void 0,this.floatSide=void 0,this.continuations=void 0,this.area=void 0,this.continues=void 0,this.floatReference=t,this.floatSide=e,this.continuations=n,this.area=i,this.continues=u}var e=t.prototype;return e.hasFloat=function(t){return this.continuations.some((function(e){return e.float===t}))},e.findNotAllowedFloat=function(t){for(var e=this.continuations.length-1;e>=0;e--){var n=this.continuations[e].float;if(!n.isAllowedOnContext(t))return n}return null},e.getOuterShape=function(){return this.area.getOuterShape(null,null)},e.getOuterRect=function(){return this.area.getOuterRect()},e.getOrder=function(){var t=this.continuations.map((function(t){return t.float}));return Math.min.apply(null,t.map((function(t){return t.getOrder()})))},e.shouldBeStashedBefore=function(t){return this.getOrder()<t.getOrder()},e.addContinuations=function(t){var e=this;t.forEach((function(t){e.continuations.push(t)}))},e.getFlowName=function(){var t=this.continuations[0].float.flowName;return this.continuations.every((function(e){return e.float.flowName===t})),t},t}(),ns=function(){function t(t,e){this.float=void 0,this.nodePosition=void 0,this.float=t,this.nodePosition=e}return t.prototype.equals=function(t){return!!t&&(this===t||this.float===t.float&&wr(this.nodePosition,t.nodePosition))},t}(),is=function(){function t(t,e,n,i,u,r,o){this.parent=void 0,this.floatReference=void 0,this.container=void 0,this.flowName=void 0,this.generatingNodePosition=void 0,this.children=[],this.writingMode=void 0,this.direction=void 0,this.invalidated=!1,this.floatStore=void 0,this.forbiddenFloats=[],this.floatFragments=[],this.stashedFloatFragments=[],this.floatAnchors={},this.floatsDeferredToNext=[],this.floatsDeferredFromPrevious=void 0,this.layoutConstraints=[],this.locked=!1,this.parent=t,this.floatReference=e,this.container=n,this.flowName=i,this.generatingNodePosition=u,t&&t.children.push(this),this.writingMode=r||t&&t.writingMode||Je.horizontal_tb,this.direction=o||t&&t.direction||Je.ltr,this.floatStore=t?t.floatStore:new ts;var a=this.getPreviousSibling();this.floatsDeferredFromPrevious=a?[].concat(a.floatsDeferredToNext):[]}var e=t.prototype;return e.getParent=function(t){if(!this.parent)throw new Error("No PageFloatLayoutContext for "+t);return this.parent},e.getPreviousSiblingOf=function(t,e,n,i){var u=this.children.indexOf(t);u<0&&(u=this.children.length);for(var r=u-1;r>=0;r--){var o=this.children[r];if(o.floatReference===e&&o.flowName===n&&wr(o.generatingNodePosition,i))return o;if(o=o.getPreviousSiblingOf(null,e,n,i))return o}return null},e.getPreviousSibling=function(){for(var t,e=this,n=this.parent;n;){if(t=n.getPreviousSiblingOf(e,this.floatReference,this.flowName,this.generatingNodePosition))return t;e=n,n=n.parent}return null},e.getContainer=function(t){return t&&t!==this.floatReference?this.getParent(t).getContainer(t):this.container},e.setContainer=function(t){this.container=t,this.reattachFloatFragments()},e.addPageFloat=function(t){this.floatStore.addPageFloat(t)},e.getPageFloatLayoutContext=function(t){return t===this.floatReference?this:this.getParent(t).getPageFloatLayoutContext(t)},e.findPageFloatByNodePosition=function(t){return this.floatStore.findPageFloatByNodePosition(t)},e.forbid=function(t){var e=t.getId(),n=t.floatReference;n===this.floatReference?this.forbiddenFloats.includes(e)||(this.forbiddenFloats.push(e),(new rs).findByFloat(t).forbid(t,this)):this.getParent(n).forbid(t)},e.isForbidden=function(t){var e=t.getId(),n=t.floatReference;return n===this.floatReference?this.forbiddenFloats.includes(e):this.getParent(n).isForbidden(t)},e.addPageFloatFragment=function(t,e){var n=t.floatReference;n!==this.floatReference?this.getParent(n).addPageFloatFragment(t,e):this.floatFragments.includes(t)||(this.floatFragments.push(t),this.floatFragments.sort((function(t,e){return t.getOrder()-e.getOrder()}))),e||this.invalidate()},e.removePageFloatFragment=function(t,e){var n=t.floatReference;if(n!==this.floatReference)this.getParent(n).removePageFloatFragment(t,e);else{var i=this.floatFragments.indexOf(t);if(i>=0){var u=this.floatFragments.splice(i,1)[0],r=u.area&&u.area.element;r&&r.parentNode&&r.parentNode.removeChild(r),e||this.invalidate()}}},e.findPageFloatFragment=function(t){if(t.floatReference!==this.floatReference)return this.getParent(t.floatReference).findPageFloatFragment(t);var e=this.floatFragments.findIndex((function(e){return e.hasFloat(t)}));return e>=0?this.floatFragments[e]:null},e.hasFloatFragments=function(t){return!(!(this.floatFragments.length>0)||t&&!this.floatFragments.some(t))||!!this.parent&&this.parent.hasFloatFragments(t)},e.hasContinuingFloatFragmentsInFlow=function(t){return this.hasFloatFragments((function(e){return e.continues&&e.getFlowName()===t}))},e.registerPageFloatAnchor=function(t,e){this.floatAnchors[t.getId()]=e},e.collectPageFloatAnchors=function(){var t=Object.assign({},this.floatAnchors);return this.children.reduce((function(t,e){return Object.assign(t,e.collectPageFloatAnchors())}),t)},e.isAnchorAlreadyAppeared=function(t){if(this.getDeferredPageFloatContinuations().some((function(e){return e.float.getId()===t})))return!0;var e=this.collectPageFloatAnchors()[t];return!!e&&!(!this.container||!this.container.element)&&this.container.element.contains(e)},e.deferPageFloat=function(t){var e=t.float;if(e.floatReference===this.floatReference){var n=this.floatsDeferredToNext.findIndex((function(t){return t.float===e}));n>=0?this.floatsDeferredToNext.splice(n,1,t):this.floatsDeferredToNext.push(t)}else this.getParent(e.floatReference).deferPageFloat(t)},e.hasPrecedingFloatsDeferredToNext=function(t,e){if(!e&&t.floatReference!==this.floatReference)return this.getParent(t.floatReference).hasPrecedingFloatsDeferredToNext(t,!1);var n=t.getOrder();return!!this.floatsDeferredToNext.some((function(e){return e.float.getOrder()<n&&!t.isAllowedToPrecede(e.float)}))||!!this.parent&&this.parent.hasPrecedingFloatsDeferredToNext(t,!0)},e.getLastFollowingFloatInFragments=function(t){var e=t.getOrder(),n=null;if(this.floatFragments.forEach((function(t){t.continuations.forEach((function(t){var i=t.float,u=i.getOrder();u>e&&(!n||u>n.getOrder())&&(n=i)}))})),this.parent){var i=this.parent.getLastFollowingFloatInFragments(t);i&&(!n||i.getOrder()>n.getOrder())&&(n=i)}return n},e.getDeferredPageFloatContinuations=function(t){t=t||this.flowName;var e=this.floatsDeferredFromPrevious.filter((function(e){return!t||e.float.flowName===t}));return this.parent&&(e=this.parent.getDeferredPageFloatContinuations(t).concat(e)),e.sort((function(t,e){return t.float.getOrder()-e.float.getOrder()}))},e.getPageFloatContinuationsDeferredToNext=function(t){t=t||this.flowName;var e=this.floatsDeferredToNext.filter((function(e){return!t||e.float.flowName===t}));return this.parent?this.parent.getPageFloatContinuationsDeferredToNext(t).concat(e):e},e.getFloatsDeferredToNextInChildContexts=function(){for(var t=[],e=[],n=this.children.length-1;n>=0;n--){var i=this.children[n];e.includes(i.flowName)||(e.push(i.flowName),t=(t=t.concat(i.floatsDeferredToNext.map((function(t){return t.float})))).concat(i.getFloatsDeferredToNextInChildContexts()))}return t},e.checkAndForbidNotAllowedFloat=function(){if(this.checkAndForbidFloatFollowingDeferredFloat())return!0;for(var t=this.floatFragments.length-1;t>=0;t--){var e=this.floatFragments[t],n=e.findNotAllowedFloat(this);if(n)return this.locked?this.invalidate():(this.removePageFloatFragment(e),this.forbid(n),this.removeEndFloatFragments(e.floatSide)),!0}return!(this.floatReference!==Za.REGION||!this.parent.locked)&&this.parent.checkAndForbidNotAllowedFloat()},e.checkAndForbidFloatFollowingDeferredFloat=function(){var t=this,e=this.getFloatsDeferredToNextInChildContexts(),n=this.floatFragments.reduce((function(t,e){return t.concat(e.continuations.map((function(t){return t.float})))}),[]);n.sort((function(t,e){return e.getOrder()-t.getOrder()}));for(var i,u=function(){var n=i.value,u=n.getOrder();if(e.some((function(t){return!n.isAllowedToPrecede(t)&&u>t.getOrder()}))){if(t.locked)t.invalidate();else{t.forbid(n);var r=t.findPageFloatFragment(n);t.removePageFloatFragment(r)}return{v:!0}}},r=R(n);!(i=r()).done;){var o=u();if("object"==typeof o)return o.v}return!1},e.finish=function(){var t=this;if(!this.checkAndForbidNotAllowedFloat()){for(var e=this.floatsDeferredToNext.length-1;e>=0;e--)if(!this.floatsDeferredToNext[e].float.isAllowedOnContext(this)){if(this.locked)return void this.invalidate();this.floatsDeferredToNext.splice(e,1)}this.floatsDeferredFromPrevious.forEach((function(e){t.floatsDeferredToNext.findIndex((function(t){return e.equals(t)}))>=0||t.floatFragments.some((function(t){return t.hasFloat(e.float)}))||t.floatsDeferredToNext.push(e)}))}},e.hasSameContainerAs=function(t){return!!this.container&&!!t.container&&this.container.element===t.container.element},e.invalidate=function(){var t=this;this.invalidated=!0,this.locked||(this.container&&(this.children.forEach((function(e){t.hasSameContainerAs(e)&&e.floatFragments.forEach((function(t){var e=t.area.element;e&&e.parentNode&&e.parentNode.removeChild(e)}))})),this.container.clear()),this.children.forEach((function(t){t.layoutConstraints.splice(0)})),this.children.splice(0),Object.keys(this.floatAnchors).forEach((function(e){delete t.floatAnchors[e]})))},e.detachChildren=function(){var t=this.children.splice(0);return t.forEach((function(t){t.floatFragments.forEach((function(t){var e=t.area.element;e&&e.parentNode&&e.parentNode.removeChild(e)}))})),t},e.attachChildren=function(t){var e=this;t.forEach((function(t){e.children.push(t),t.reattachFloatFragments()}))},e.isInvalidated=function(){return this.invalidated||!!this.parent&&this.parent.isInvalidated()},e.validate=function(){this.invalidated=!1},e.toLogical=function(t){return $a(t,this.writingMode.toString(),this.direction.toString())},e.toPhysical=function(t){return Wa(t,this.writingMode.toString(),this.direction.toString())},e.removeEndFloatFragments=function(t){var e=this.toLogical(t);if("block-end"===e||"inline-end"===e)for(var n=0;n<this.floatFragments.length;){var i=this.floatFragments[n];this.toLogical(i.floatSide)===e?this.removePageFloatFragment(i):n++}},e.stashEndFloatFragments=function(t){var e=t.floatReference;if(e===this.floatReference){var n=this.toLogical(t.floatSide);if("block-end"===n||"snap-block"===n||"inline-end"===n)for(var i=0;i<this.floatFragments.length;){var u=this.floatFragments[i],r=this.toLogical(u.floatSide);(r===n||"snap-block"===n&&"block-end"===r)&&u.shouldBeStashedBefore(t)?(this.stashedFloatFragments.push(u),this.floatFragments.splice(i,1)):i++}}else this.getParent(e).stashEndFloatFragments(t)},e.restoreStashedFragments=function(t){var e=this;t===this.floatReference?(this.stashedFloatFragments.forEach((function(t){e.addPageFloatFragment(t,!0)})),this.stashedFloatFragments.splice(0)):this.getParent(t).restoreStashedFragments(t)},e.discardStashedFragments=function(t){t===this.floatReference?this.stashedFloatFragments.splice(0):this.getParent(t).discardStashedFragments(t)},e.getStashedFloatFragments=function(t){return t===this.floatReference?this.stashedFloatFragments.concat().sort((function(t,e){return e.getOrder()-t.getOrder()})):this.getParent(t).getStashedFloatFragments(t)},e.getLimitValue=function(t,e,n,i){var u=this.toLogical(t),r=this.toPhysical(t),o=this.getLimitValueInner(u,e,n,i);if(this.parent&&this.parent.container){var a=this.parent.getLimitValue(r,e,n,i);switch(r){case"top":case"left":return Math.max(o,a);case"bottom":case"right":return Math.min(o,a)}}return o},e.getLimitValueInner=function(t,e,n,i){var u=this.getLimitValuesInner(e,n,i);switch(t){case"block-start":return this.container.vertical?u.right:u.top;case"block-end":return this.container.vertical?u.left:u.bottom;case"inline-start":return this.container.vertical?this.container.rtl?u.bottom:u.top:this.container.rtl?u.right:u.left;case"inline-end":return this.container.vertical?this.container.rtl?u.top:u.bottom:this.container.rtl?u.left:u.right;default:throw new Error("Unknown logical side: "+t)}},e.getLimitValuesInner=function(t,e,n){var i=this,u=this.container.originX,r=this.container.originY,o=this.container.getPaddingRect(),a={top:o.y1-r,left:o.x1-u,bottom:o.y2-r,right:o.x2-u,floatMinWrapBlockStart:0,floatMinWrapBlockEnd:0};function s(n,i,u){return"%"===n.unit?u*n.num/100:t.convertLengthToPx(n,i,e)}var l=this.floatFragments;return l.length>0&&(a=l.reduce((function(t,e){if(n&&!n(e,i))return t;var u=i.toLogical(e.floatSide),r=e.area,a=e.continuations[0].float.floatMinWrapBlock,l=t.top,c=t.left,h=t.bottom,D=t.right,d=t.floatMinWrapBlockStart,f=t.floatMinWrapBlockEnd;switch(u){case"inline-start":r.vertical?l=Math.max(l,r.top+r.height):c=Math.max(c,r.left+r.width);break;case"block-start":r.vertical?(a&&r.left<D&&(d=s(a,r.rootViewNodes[0],o.x2-o.x1)),D=Math.min(D,r.left)):(a&&r.top+r.height>l&&(d=s(a,r.rootViewNodes[0],o.y2-o.y1)),l=Math.max(l,r.top+r.height));break;case"inline-end":r.vertical?h=Math.min(h,r.top):D=Math.min(D,r.left);break;case"block-end":r.vertical?(a&&r.left+r.width>c&&(f=s(a,r.rootViewNodes[0],o.x2-o.x1)),c=Math.max(c,r.left+r.width)):(a&&r.top<h&&(f=s(a,r.rootViewNodes[0],o.y2-o.y1)),h=Math.min(h,r.top));break;default:throw new Error("Unknown logical float side: "+u)}return{top:l,left:c,bottom:h,right:D,floatMinWrapBlockStart:d,floatMinWrapBlockEnd:f}}),a)),a.left+=u,a.right+=u,a.top+=r,a.bottom+=r,a},e.setFloatAreaDimensions=function(t,e,n,i,u,r,o){if(e!==this.floatReference)return this.getParent(e).setFloatAreaDimensions(t,e,n,i,u,r,o);var a=this.toLogical(n);if("snap-block"===a){if(!o["block-start"]&&!o["block-end"])return null}else if(!o[a])return null;var s,l,c,h,D=this.getLimitValue("block-start",t.layoutContext,t.clientLayout),d=this.getLimitValue("block-end",t.layoutContext,t.clientLayout),f=this.getLimitValue("inline-start",t.layoutContext,t.clientLayout),p=this.getLimitValue("inline-end",t.layoutContext,t.clientLayout),g=t.vertical?t.originX:t.originY,E=t.vertical?t.originY:t.originX;function C(e,n){var i=e(t.bands,n);return i?(t.vertical&&(i=Bn(i)),D=t.vertical?Math.min(D,i.x2):Math.max(D,i.y1),d=t.vertical?Math.max(d,i.x1):Math.min(d,i.y2),!0):r}if(D=t.vertical?Math.min(D,t.left+t.getInsetLeft()+t.width+t.getInsetRight()+g):Math.max(D,t.top+g),d=t.vertical?Math.max(d,t.left+g):Math.min(d,t.top+t.getInsetTop()+t.height+t.getInsetBottom()+g),u){var v=t.vertical?yn(new cn(d,f,D,p)):new cn(f,D,p,d);if(("block-start"===a||"snap-block"===a||"inline-start"===a)&&!C(xn,v))return null;if(("block-end"===a||"snap-block"===a||"inline-end"===a)&&!C(Tn,v))return null;if(s=(c=(d-D)*t.getBoxDir())-t.getInsetBefore()-t.getInsetAfter(),l=(h=(p-f)*t.getInlineDir())-t.getInsetStart()-t.getInsetEnd(),!r&&(s<=0||l<=0))return null}else{c=(s=t.computedBlockSize)+t.getInsetBefore()+t.getInsetAfter();var F=(d-D)*t.getBoxDir();if("snap-block"===a){if(null===i)a="block-start";else{var m=this.container.getPaddingRect();a=this.container.getBoxDir()*(i-(this.container.vertical?m.x2:m.y1))<=this.container.getBoxDir()*((this.container.vertical?m.x1:m.y2)-i-c)?"block-start":"block-end"}if(!o[a]){if(!o["block-end"])return null;a="block-end"}}if(!r&&F<c)return null;h=(l="inline-start"===a||"inline-end"===a?Ya(t.clientLayout,t.element,[Ka.FIT_CONTENT_INLINE_SIZE])[Ka.FIT_CONTENT_INLINE_SIZE]:t.adjustContentRelativeSize?t.getContentInlineSize():t.vertical?t.height:t.width)+t.getInsetStart()+t.getInsetEnd();var A=(p-f)*t.getInlineDir();if(!r&&A<h)return null}switch(D-=g,d-=g,f-=E,p-=E,a){case"inline-start":case"block-start":case"snap-block":t.setInlinePosition(f,l),t.setBlockPosition(D,s);break;case"inline-end":case"block-end":t.setInlinePosition(p-h*t.getInlineDir(),l),t.setBlockPosition(d-c*t.getBoxDir(),s);break;default:throw new Error("unknown float direction: "+n)}return a},e.getFloatFragmentExclusions=function(){var t=this.floatFragments.map((function(t){return t.getOuterShape()}));return this.parent?this.parent.getFloatFragmentExclusions().concat(t):t},e.reattachFloatFragments=function(){var t=this.container.element&&this.container.element.parentNode;t&&this.floatFragments.forEach((function(e){t.appendChild(e.area.element)}))},e.getMaxReachedAfterEdge=function(){var t=this.getContainer().vertical;return this.floatFragments.reduce((function(e,n){var i=n.getOuterRect();return t?Math.min(e,i.x1):Math.max(e,i.y2)}),t?1/0:0)},e.getBlockStartEdgeOfBlockEndFloats=function(){var t=this.getContainer().vertical;return this.floatFragments.filter((function(t){return"block-end"===t.floatSide})).reduce((function(e,n){var i=n.getOuterRect();return t?Math.max(e,i.x2):Math.min(e,i.y1)}),t?0:1/0)},e.getPageFloatClearEdge=function(t,e){function n(t){return function(e){return t.isAnchorAlreadyAppeared(e.float.getId())}}function i(t,e){return t.continuations.some(n(e))}for(var u=e.getPaddingRect(),r=e.vertical?u.x1:u.y2,o=this;o;){if(o.floatsDeferredToNext.some(n(o)))return r;o=o.parent}var a=this.getLimitValue("block-start",e.layoutContext,e.clientLayout,i);return this.getLimitValue("block-end",e.layoutContext,e.clientLayout,i)*e.getBoxDir()<r*e.getBoxDir()?r:a},e.getPageFloatPlacementCondition=function(t,e,n){var i=this;if(t.floatReference!==this.floatReference)return this.getParent(t.floatReference).getPageFloatPlacementCondition(t,e,n);var u={"block-start":!0,"block-end":!0,"inline-start":!0,"inline-end":!0};if(!n)return u;var r,o=this.toLogical(e),a=this.toLogical(n);r="all"===a?["block-start","block-end","inline-start","inline-end"]:"both"===a?["inline-start","inline-end"]:"same"===a?"snap-block"===o?["block-start","block-end"]:[o]:[a];var s=t.getOrder();function l(t){return function(e){return e.floatSide===t&&e.getOrder()<s}}function c(t,e){return t.children.some((function(t){return t.floatFragments.some(l(e))||c(t,e)}))}function h(t,e){var n=t.parent;return!!n&&(n.floatFragments.some(l(e))||h(n,e))}return r.forEach((function(t){switch(t){case"block-start":case"inline-start":u[t]=!c(i,t);break;case"block-end":case"inline-end":u[t]=!h(i,t);break;default:throw new Error("Unexpected side: "+t)}})),u},e.getLayoutConstraints=function(){return(this.parent?this.parent.getLayoutConstraints():[]).concat(this.layoutConstraints)},e.addLayoutConstraint=function(t,e){e===this.floatReference?this.layoutConstraints.push(t):this.getParent(e).addLayoutConstraint(t,e)},e.isColumnFullWithPageFloats=function(t){for(var e=t.layoutContext,n=t.clientLayout,i=this,u=null;i&&i.container;){var r=i.getLimitValuesInner(e,n);u?t.vertical?(r.right<u.right&&(u.right=r.right,u.floatMinWrapBlockStart=r.floatMinWrapBlockStart),r.left>u.left&&(u.left=r.left,u.floatMinWrapBlockEnd=r.floatMinWrapBlockEnd)):(r.top>u.top&&(u.top=r.top,u.floatMinWrapBlockStart=r.floatMinWrapBlockStart),r.bottom<u.bottom&&(u.bottom=r.bottom,u.floatMinWrapBlockEnd=r.floatMinWrapBlockEnd)):u=r,i=i.parent}var o=Math.max(u.floatMinWrapBlockStart,u.floatMinWrapBlockEnd);return(t.vertical?u.right-u.left:u.bottom-u.top)<=o},e.getMaxBlockSizeOfPageFloats=function(){var t=this.getContainer().vertical;return this.floatFragments.length?Math.max.apply(null,this.floatFragments.map((function(e){var n=e.area;return t?n.width:n.height}))):0},e.lock=function(){this.locked=!0},e.unlock=function(){this.locked=!1},e.isLocked=function(){return this.locked},t}(),us=[],rs=function(){function t(){}t.register=function(t){us.push(t)};var e=t.prototype;return e.findByNodeContext=function(t){for(var e=us.length-1;e>=0;e--){var n=us[e];if(n.appliesToNodeContext(t))return n}throw new Error("No PageFloatLayoutStrategy found for "+t)},e.findByFloat=function(t){for(var e=us.length-1;e>=0;e--){var n=us[e];if(n.appliesToFloat(t))return n}throw new Error("No PageFloatLayoutStrategy found for "+t)},t}();rs.register(new(function(){function t(){}var e=t.prototype;return e.appliesToNodeContext=function(t){return Qa(t.floatReference)},e.appliesToFloat=function(t){return!0},e.createPageFloat=function(t,e,n){var i=t.floatReference,u=t.floatSide,r=t.toNodePosition();return n.resolveFloatReferenceFromColumnSpan(i,t.columnSpan,t).thenAsync((function(n){var o=new Ja(r,i=n,u,t.clearSide,e.flowName,t.floatMinWrapBlock);return e.addPageFloat(o),Ri(o)}))},e.createPageFloatFragment=function(t,e,n,i){return new es(t[0].float.floatReference,e,t,n,i)},e.findPageFloatFragment=function(t,e){return e.findPageFloatFragment(t)},e.adjustPageFloatArea=function(t,e,n){},e.forbid=function(t,e){},t}()));var os=es,as=function(t){function e(e,n,i,u,r){var o;return(o=t.call(this,e,n,"block-end",null,i,r)||this).footnotePolicy=void 0,o.footnotePolicy=u,o}return N(e,t),e.prototype.isAllowedToPrecede=function(t){return!(t instanceof e)},e}(Ja),ss=function(t){function e(e,n,i,u){return t.call(this,e,"block-end",n,i,u)||this}N(e,t);var n=e.prototype;return n.getOrder=function(){return 1/0},n.shouldBeStashedBefore=function(t){return t instanceof as||this.getOrder()<t.getOrder()},e}(os),ls=function(){function t(t){this.footnote=void 0,this.footnote=t}return t.prototype.allowLayout=function(t){return!wr(t.toNodePosition(),this.footnote.nodePosition)},t}();function cs(t){var e,n=t.toString();switch(n){case"inline-flex":e="flex";break;case"inline-grid":e="grid";break;case"inline-table":e="table";break;case"inline":case"table-row-group":case"table-column":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row":case"table-cell":case"table-caption":case"inline-block":e="block";break;default:e=n}return Me(e)}function hs(t){return t===Je.absolute||t===Je.fixed}function Ds(t){return t instanceof Ke&&"running"===t.name}function ds(t,e,n,i){return t===Je.none||(hs(e)?(n=Je.none,t=cs(t)):(n&&n!==Je.none&&!an(n)||i)&&(t=cs(t))),{display:t,position:e,float:n}}function fs(t,e,n,i){return ds(t,e,n,i).display===Je.block}function ps(t){switch(t.toString()){case"inline":case"inline-block":case"inline-list-item":case"inline-flex":case"inline-grid":case"ruby":case"inline-table":return!0;default:return!1}}function gs(t){switch(t.toString()){case"ruby-base":case"ruby-text":case"ruby-base-container":case"ruby-text-container":return!0;default:return!1}}function Es(t,e,n,i){var u=t.viewNode;if(!u)return NaN;var r=1===u.nodeType?u:u.parentElement;if(r&&r.namespaceURI===G.XHTML){var o=r.style;if(o&&ps(o.display)&&/^([\d\.]|super|(text-)?top)/.test(o.verticalAlign))return NaN}if(u===r){if(t.after||!t.inline){if(t.after&&!t.inline&&r.querySelector("ruby")){var a=r.parentNode,s=r.nextSibling;a.removeChild(r),a.insertBefore(r,s)}var l=e.getElementClientRect(r);if(0===l.left&&0===l.top&&0===l.right&&0===l.bottom)return NaN;if(l.right>=l.left&&l.bottom>=l.top)return t.after?i?l.left:l.bottom:i?l.right:l.top}return NaN}var c=u.ownerDocument.createRange(),h=u.textContent.length;if(!h)return NaN;t.after&&(n+=h),n>=h&&(n=h-1),c.setStart(u,n),c.setEnd(u,n+1);var D=e.getRangeClientRects(c);return(D=D.filter((function(t){return t.right>t.left&&t.bottom>t.top}))).length?i?Math.min.apply(null,D.map((function(t){return t.left}))):Math.max.apply(null,D.map((function(t){return t.bottom}))):NaN}function Cs(t,e,n){var i=e.clientLayout.getElementClientRect(t),u=e.getComputedMargin(t);return n?i.width+u.left+u.right:i.height+u.top+u.bottom}function vs(t){for(;t;){if(t.parentNode===t.ownerDocument)return!1;t=t.parentNode}return!0}function Fs(t,e){if(t)for(var n;(n=t.lastChild)!=e;)t.removeChild(n)}function ms(t){return!!t.getAttribute(Er)}function As(t){var e;if(1!==(null==t?void 0:t.nodeType))return!1;var n=t;if(ms(n))return!0;var i=null==(e=n.style)?void 0:e.position;return"absolute"===i||"fixed"===i}function bs(t){var e=null==t?void 0:t.viewNode;return 1===(null==e?void 0:e.nodeType)&&ms(e)}function ys(t){for(var e=t.parent;e;e=e.parent)if("inline"!==e.display&&ps(e.display))return e;return null}rs.register(new(function(){function t(){}var e=t.prototype;return e.appliesToNodeContext=function(t){return"footnote"===t.floatSide},e.appliesToFloat=function(t){return t instanceof as},e.createPageFloat=function(t,e,n){var i=Za.REGION,u=e.getPageFloatLayoutContext(i);e.getPageFloatLayoutContext(Za.PAGE).hasSameContainerAs(u)&&(i=Za.PAGE);var r=t.toNodePosition(),o=new as(r,i,e.flowName,t.footnotePolicy,t.floatMinWrapBlock);return e.addPageFloat(o),Ri(o)},e.createPageFloatFragment=function(t,e,n,i){return new ss(t[0].float.floatReference,t,n,i)},e.findPageFloatFragment=function(t,e){return e.getPageFloatLayoutContext(t.floatReference).floatFragments.filter((function(t){return t instanceof ss}))[0]||null},e.adjustPageFloatArea=function(t,e,n){t.isFootnote=!0,t.adjustContentRelativeSize=!1;var i=t.element;t.vertical=n.layoutContext.applyFootnoteStyle(e.vertical,n.layoutContext.nodeContext&&"rtl"===n.layoutContext.nodeContext.direction,i),t.convertPercentageSizesToPx(i),n.setComputedInsets(i,t),n.setComputedWidthAndHeight(i,t)},e.forbid=function(t,e){var n=t;if(n.footnotePolicy===Je.line){var i=new ls(n);e.addLayoutConstraint(i,n.floatReference)}},t}()));var Bs=function(){function t(){}var e=t.prototype;return e.calculateOffset=function(t){return ws(this.getNodeContext(),t.collectElementsOffset())},e.breakPositionChosen=function(t){},e.getNodeContext=function(){return null},t}();function ws(t,e){return{current:e.reduce((function(e,n){return e+n.calculateOffset(t)}),0),minimum:e.reduce((function(e,n){return e+n.calculateMinimumOffset(t)}),0)}}var Ss=function(t){function e(e,n,i,u){var r;return(r=t.call(this)||this).position=void 0,r.breakOnEdge=void 0,r.overflows=void 0,r.computedBlockSize=void 0,r.overflowIfRepetitiveElementsDropped=void 0,r.isEdgeUpdated=!1,r.edge=0,r.position=e,r.breakOnEdge=n,r.overflows=i,r.computedBlockSize=u,r.overflowIfRepetitiveElementsDropped=i,r}N(e,t);var n=e.prototype;return n.findAcceptableBreak=function(t,e){return this.updateOverflows(t),e<this.getMinBreakPenalty()?null:t.findEdgeBreakPosition(this)},n.getMinBreakPenalty=function(){if(!this.isEdgeUpdated)throw new Error("EdgeBreakPosition.prototype.updateEdge not called");var t=this.isFirstContentOfRepetitiveElementsOwner()&&!this.overflowIfRepetitiveElementsDropped;return(or(this.breakOnEdge)?1:0)+(this.overflows&&!t?3:0)+(this.position.parent?this.position.parent.breakPenalty:0)},n.updateEdge=function(t){var e,n=t.calculateClonedPaddingBorder(this.position);if(this.edge=Es(this.position,t.clientLayout,0,t.vertical)+n,this.position.after||this.position.inline){if(this.position.after&&"table-cell"===(null==(e=this.position.shadowContext)?void 0:e.root.id)){var i=t.element.parentElement,u=null==i?void 0:i.closest("table, [style*='display: table;']");if(u){for(var r="collapse"===u.style.borderCollapse,o=0,a=0,s=i;s;s=s.parentElement){var l=t.clientLayout.getElementComputedStyle(s);if((s===i||s===u&&!r)&&(o+=t.parseComputedLength(l.paddingBlockEnd)),s!==u||r||(o+=t.parseComputedLength(l.borderSpacing.replace(/^\S+ (\S+)$/,"$1"))),r?a=Math.max(a,t.parseComputedLength(l.borderBlockEndWidth)):s!==i&&s!==u||(a+=t.parseComputedLength(l.borderBlockEndWidth)),s===u)break}this.edge+=(t.vertical?-1:1)*(o+a)}}}else{var c=t.parseComputedLength(t.clientLayout.getElementComputedStyle(this.position.viewNode).marginBlockStart);this.edge-=(t.vertical?-1:1)*c}this.isEdgeUpdated=!0},n.updateOverflows=function(t){this.isEdgeUpdated||this.updateEdge(t);var e=this.edge,n=this.calculateOffset(t);this.overflowIfRepetitiveElementsDropped=t.isOverflown(e+(t.vertical?-1:1)*n.minimum),this.overflows=this.position.overflow=t.isOverflown(e+(t.vertical?-1:1)*n.current)},n.getNodeContext=function(){return this.position},n.isFirstContentOfRepetitiveElementsOwner=function(){var t=this.getNodeContext();if(!t||!t.parent)return!1;var e=t.parent.formattingContext;if(!nr.isInstanceOfRepetitiveElementsOwnerFormattingContext(e))return!1;var n=e.getRepetitiveElements();return!!n&&n.isFirstContentNode(t)},e}(Bs),Ns=function(){function e(){}return e.prototype.find=function(e){for(var n=p(t.HOOKS.RESOLVE_LAYOUT_PROCESSOR),i=0;i<n.length;i++){var u=n[i](e);if(u)return u}throw new Error("No processor found for a formatting context: "+e.getName())},e}(),xs=function(){function t(){}var e=t.prototype;return e.layout=function(t,e,n){return e.isFloatNodeContext(t)?e.layoutFloatOrFootnote(t):e.isBreakable(t)?e.layoutBreakableBlock(t):e.layoutUnbreakable(t)},e.createEdgeBreakPosition=function(t,e,n,i){return new Ss(t.copy(),e,n,i)},e.startNonInlineElementNode=function(t){return!1},e.afterNonInlineElementNode=function(t,e){return!1},e.clearOverflownViewNodes=function(t,e,n,i){var u;if(n.viewNode&&n.viewNode.parentNode&&(n.shadowType!==ur.ShadowType.ROOTLESS||!bs(n))){var r=n.viewNode;"viv-ts-inner"===(null==(u=r.parentElement)?void 0:u.localName)&&(r=r.parentElement.parentElement);var o=r.parentNode;Fs(o,r),i&&o.removeChild(r)}},e.finishBreak=function(t,e,n,i){return t.clearOverflownViewNodes(e,n||null!=e.viewNode&&1==e.viewNode.nodeType&&!e.after),i&&t.layoutContext.processFragmentedBlockEdge(e),Ri(!0)},t}(),Ts=function(){function t(t){this.parent=void 0,this.formattingContextType="Block",this.parent=t}var e=t.prototype;return e.getName=function(){return"Block formatting context (BlockFormattingContext)"},e.isFirstTime=function(t,e){return e},e.getParent=function(){return this.parent},e.saveState=function(){},e.restoreState=function(t){},t}(),Is=new xs,Ps=Ju.isInstanceOfBlockFormattingContext;d(t.HOOKS.RESOLVE_FORMATTING_CONTEXT,(function(t,e,n,i,u,r){var o=t.parent;return!o&&t.formattingContext||o&&t.formattingContext!==o.formattingContext?null:t.establishesBFC||!t.formattingContext&&fs(n,i,u,r)?new Ts(o?o.formattingContext:null):null})),d(t.HOOKS.RESOLVE_LAYOUT_PROCESSOR,(function(t){return t instanceof Ts?Is:null}));var ks=function(){function t(){this.initialBreakPositions=null,this.initialStateOfFormattingContext=null,this.initialPosition=void 0,this.initialFragmentLayoutConstraints=void 0}var e=t.prototype;return e.layout=function(t,e){return this.prepareLayout(t,e),this.tryLayout(t,e)},e.tryLayout=function(t,e){var n=this,i=Oi("AbstractLayoutRetryer.tryLayout");this.saveState(t,e);var u=this.resolveLayoutMode(t);return u.doLayout(t,e).then((function(r){var o=u.accept(r,e);(o=u.postLayout(r,n.initialPosition,e,o))?i.finish(r):(n.clearNodes(n.initialPosition),n.restoreState(t,e),n.tryLayout(n.initialPosition,e).thenFinish(i))})),i.result()},e.prepareLayout=function(t,e){},e.clearNodes=function(t){for(var e,n,i=t.viewNode||t.parent.viewNode;e=i.lastChild;)i.removeChild(e);for(;n=i.nextSibling;)n.parentNode.removeChild(n)},e.saveState=function(t,e){this.initialPosition=t.copy(),this.initialBreakPositions=[].concat(e.breakPositions),this.initialFragmentLayoutConstraints=[].concat(e.fragmentLayoutConstraints),t.formattingContext&&(this.initialStateOfFormattingContext=t.formattingContext.saveState())},e.restoreState=function(t,e){e.breakPositions=this.initialBreakPositions,e.fragmentLayoutConstraints=this.initialFragmentLayoutConstraints,t.formattingContext&&t.formattingContext.restoreState(this.initialStateOfFormattingContext)},t}(),Os=function(){function t(){}var e=t.prototype;return e.initialState=function(t){return{nodeContext:t,atUnforcedBreak:!1,break:!1}},e.startNonDisplayableNode=function(t){},e.afterNonDisplayableNode=function(t){},e.startIgnoredTextNode=function(t){},e.afterIgnoredTextNode=function(t){},e.startNonElementNode=function(t){},e.afterNonElementNode=function(t){},e.startInlineElementNode=function(t){},e.afterInlineElementNode=function(t){},e.startNonInlineElementNode=function(t){},e.afterNonInlineElementNode=function(t){},e.finish=function(t){},t}(),Rs=function(){function t(t,e){this.strategy=void 0,this.layoutContext=void 0,this.strategy=t,this.layoutContext=e}return t.prototype.iterate=function(t){var e=this,n=this.strategy,i=n.initialState(t),u=Oi("LayoutIterator");return u.loopWithFrame((function(t){for(var u;i.nodeContext;){var r=((u=i.nodeContext.viewNode?1!==i.nodeContext.viewNode.nodeType?Fr(i.nodeContext.viewNode,i.nodeContext.whitespace)?i.nodeContext.after?n.afterIgnoredTextNode(i):n.startIgnoredTextNode(i):i.nodeContext.after?n.afterNonElementNode(i):n.startNonElementNode(i):i.nodeContext.inline?i.nodeContext.after?n.afterInlineElementNode(i):n.startInlineElementNode(i):i.nodeContext.after?n.afterNonInlineElementNode(i):n.startNonInlineElementNode(i):i.nodeContext.after?n.afterNonDisplayableNode(i):n.startNonDisplayableNode(i))&&u.isPending()?u:Ri(!0)).thenAsync((function(){return i.break?Ri(null):e.layoutContext.nextInTree(i.nodeContext,i.atUnforcedBreak)}));if(r.isPending())return void r.then((function(e){i.break?t.breakLoop():(i.nodeContext=e,t.continueLoop())}));if(i.break)return void t.breakLoop();i.nodeContext=r.get()}n.finish(i),t.breakLoop()})).then((function(){u.finish(i.nodeContext)})),u.result()},t}(),Ls=function(t){function e(e){var n;return(n=t.call(this)||this).leadingEdge=void 0,n.leadingEdge=e,n}N(e,t);var n=e.prototype;return n.startNonInlineBox=function(t){},n.endEmptyNonInlineBox=function(t){},n.endNonInlineBox=function(t){},n.initialState=function(t){return{nodeContext:t,atUnforcedBreak:!!this.leadingEdge&&t.after,break:!1,leadingEdge:this.leadingEdge,breakAtTheEdge:null,onStartEdges:!1,leadingEdgeContexts:[],lastAfterNodeContext:null}},n.processForcedBreak=function(t,e){var n=!t.leadingEdge&&Yu(t.breakAtTheEdge);if(n){var i=t.nodeContext=t.leadingEdgeContexts[0]||t.nodeContext;i.viewNode.parentNode.removeChild(i.viewNode),e.pageBreakType=t.breakAtTheEdge}return n},n.saveEdgeAndProcessOverflow=function(t,e){var n=e.checkOverflowAndSaveEdgeAndBreakPosition(t.lastAfterNodeContext,null,!0,t.breakAtTheEdge);return n&&(t.nodeContext=(t.lastAfterNodeContext||t.nodeContext).modify(),t.nodeContext.overflow=!0),n},n.processLayoutConstraint=function(t,e,n){var i=t.nodeContext,u=!e.allowLayout(i);return u&&(n.checkOverflowAndSaveEdgeAndBreakPosition(t.lastAfterNodeContext,null,!1,t.breakAtTheEdge),(i=t.nodeContext=i.modify()).overflow=!0),u},n.startNonElementNode=function(t){t.onStartEdges=!1},n.startNonInlineElementNode=function(t){return t.leadingEdgeContexts.push(t.nodeContext.copy()),t.breakAtTheEdge=ar(t.breakAtTheEdge,t.nodeContext.breakBefore),t.onStartEdges=!0,this.startNonInlineBox(t)},n.afterNonInlineElementNode=function(t){var e;return(t.onStartEdges?((e=this.endEmptyNonInlineBox(t))&&e.isPending()?e:Ri(!0)).thenAsync((function(){return t.break||(t.leadingEdgeContexts=[],t.leadingEdge=!1,t.atUnforcedBreak=!1,t.breakAtTheEdge=null),Ri(!0)})):(e=this.endNonInlineBox(t))&&e.isPending()?e:Ri(!0)).thenAsync((function(){return t.break||(t.onStartEdges=!1,t.lastAfterNodeContext=t.nodeContext.copy(),t.breakAtTheEdge=ar(t.breakAtTheEdge,t.nodeContext.breakAfter)),Ri(!0)}))},e}(Os),_s=[],Ms={first:!1,forceEnd:!1,allowEnd:!1,last:!1};function Us(t){var e=t instanceof Te?t:"string"==typeof t?Me(t):Je.none;if(e===Je.none)return Ms;for(var n,i=e instanceof Xe?e.values:[e],u=Object.create(Ms),r=R(i);!(n=r()).done;){var o=n.value;if(o instanceof _e)switch(o.name){case"first":u.first=!0;break;case"force-end":u.forceEnd=!0,u.allowEnd=!1;break;case"allow-end":u.forceEnd=!1,u.allowEnd=!0;break;case"last":u.last=!0}}return u}function Vs(t){return!(t.first||t.last||t.forceEnd||t.allowEnd)}var zs={trimStart:!1,spaceFirst:!1,trimEnd:!1,allowEnd:!1,trimAdjacent:!1},Hs={trimStart:!1,spaceFirst:!1,trimEnd:!1,allowEnd:!0,trimAdjacent:!0},Gs={trimStart:!0,spaceFirst:!1,trimEnd:!0,allowEnd:!1,trimAdjacent:!0};function js(t){var e=t instanceof Te?t:"string"==typeof t?Me(t):Je.normal;if(e===Je.normal)return Hs;if(e===Je.auto)return Gs;for(var n,i=e instanceof Xe?e.values:[e],u=Object.create(Hs),r=R(i);!(n=r()).done;){var o=n.value;if(o instanceof _e)switch(o.name){case"trim-both":case"trim-auto":return Gs;case"space-all":return zs;case"trim-start":u.trimStart=!0,u.spaceFirst=!1;break;case"space-start":u.trimStart=!1,u.spaceFirst=!1;break;case"space-first":u.trimStart=!1,u.spaceFirst=!0;break;case"trim-end":u.trimEnd=!0,u.allowEnd=!1;break;case"space-end":u.trimEnd=!1,u.allowEnd=!1;break;case"allow-end":u.trimEnd=!1,u.allowEnd=!0;break;case"trim-adjacent":u.trimAdjacent=!0;break;case"space-adjacent":u.trimAdjacent=!1}}return u}var Ws={ideographAlpha:!1,ideographNumeric:!1},Xs={ideographAlpha:!0,ideographNumeric:!0};function $s(t){var e=t instanceof Te?t:"string"==typeof t?Me(t):Je.normal;if(e===Je.normal||e===Je.auto)return Xs;if(e===Je.none)return Ws;for(var n,i=e instanceof Xe?e.values:[e],u=Object.create(Ws),r=R(i);!(n=r()).done;){var o=n.value;if(o instanceof _e)switch(o.name){case"no-autospace":return Ws;case"ideograph-alpha":u.ideographAlpha=!0;break;case"ideograph-numeric":u.ideographNumeric=!0}}return u}function Ks(t,e){return!(t.ideographAlpha||t.ideographNumeric||e.trimStart||e.spaceFirst||e.trimEnd||e.allowEnd||e.trimAdjacent)}function qs(t){return t?(t=t.toLowerCase(),/^zh\b.*-(hant|tw|hk)\b/.test(t)?"zh-hant":/^zh\b/.test(t)?"zh-hans":/^ja\b/.test(t)?"ja":/^ko\b/.test(t)?"ko":t):null}var Ys=new(function(){function e(){}var n=e.prototype;return n.getPolyfilledInheritedProps=function(){return["hanging-punctuation","text-autospace","text-spacing-trim"]},n.preprocessSingleDocument=function(t){t.body&&this.preprocessForTextSpacing(t.body)},n.preprocessForTextSpacing=function(t){for(var e=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_TEXT),n=e.nextNode();n;n=e.nextNode()){var i;if(n.parentElement.namespaceURI===G.XHTML&&"true"!==(null==(i=n.parentElement.dataset)?void 0:i.mathTypeset)){var u=n.textContent.replace(/(?![\(\)\[\]\{\}])[\(\)\[\]\{\}\xAB\xBB\u0F3A-\u0F3D\u169B\u169C\u2018-\u201F\u2039\u203A\u2045\u2046\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2E02-\u2E05\u2E09\u2E0A\u2E0C\u2E0D\u2E1C\u2E1D\u2E20-\u2E29\u2E42\u2E55-\u2E5C\u3000-\u3002\u3008-\u3011\u3014-\u301B\u301D-\u301F\uFD3E\uFD3F\uFE17\uFE18\uFE35-\uFE44\uFE47\uFE48\uFE59-\uFE5E\uFF08\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF3B\uFF3D\uFF5B\uFF5D\uFF5F-\uFF64](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*(?=(?:[\0-\u02FF\u0370-\u0482\u048A-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u060F\u061B-\u064A\u0660-\u066F\u0671-\u06D5\u06DD\u06DE\u06E5\u06E6\u06E9\u06EE-\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4-\u07FC\u07FE-\u0815\u081A\u0824\u0828\u082E-\u0858\u085C-\u0897\u08A0-\u08C9\u08E2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0964-\u0980\u0984-\u09BB\u09BD\u09C5\u09C6\u09C9\u09CA\u09CE-\u09D6\u09D8-\u09E1\u09E4-\u09FD\u09FF\u0A00\u0A04-\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A6F\u0A72-\u0A74\u0A76-\u0A80\u0A84-\u0ABB\u0ABD\u0AC6\u0ACA\u0ACE-\u0AE1\u0AE4-\u0AF9\u0B00\u0B04-\u0B3B\u0B3D\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B61\u0B64-\u0B81\u0B83-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE-\u0BD6\u0BD8-\u0BFF\u0C05-\u0C3B\u0C3D\u0C45\u0C49\u0C4E-\u0C54\u0C57-\u0C61\u0C64-\u0C80\u0C84-\u0CBB\u0CBD\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CE1\u0CE4-\u0CF2\u0CF4-\u0CFF\u0D04-\u0D3A\u0D3D\u0D45\u0D49\u0D4E-\u0D56\u0D58-\u0D61\u0D64-\u0D80\u0D84-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF4-\u0E30\u0E32\u0E33\u0E3B-\u0E46\u0E4F-\u0EB0\u0EB2\u0EB3\u0EBD-\u0EC7\u0ECF-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F40-\u0F70\u0F85\u0F88-\u0F8C\u0F98\u0FBD-\u0FC5\u0FC7-\u102A\u103F-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u109E-\u135C\u1360-\u1711\u1716-\u1731\u1735-\u1751\u1754-\u1771\u1774-\u17B3\u17D4-\u17DC\u17DE-\u180A\u180E\u1810-\u1884\u1887-\u18A8\u18AA-\u191F\u192C-\u192F\u193C-\u1A16\u1A1C-\u1A54\u1A5F\u1A7D\u1A7E\u1A80-\u1AAF\u1ACF-\u1AFF\u1B05-\u1B33\u1B45-\u1B6A\u1B74-\u1B7F\u1B83-\u1BA0\u1BAE-\u1BE5\u1BF4-\u1C23\u1C38-\u1CCF\u1CD3\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA-\u1DBF\u1E00-\u20CF\u20F1-\u2CEE\u2CF2-\u2D7E\u2D80-\u2DDF\u2E00-\u3029\u3030-\u3098\u309B-\uA66E\uA673\uA67E-\uA69D\uA6A0-\uA6EF\uA6F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA82D-\uA87F\uA882-\uA8B3\uA8C6-\uA8DF\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA954-\uA97F\uA984-\uA9B2\uA9C1-\uA9E4\uA9E6-\uAA28\uAA37-\uAA42\uAA44-\uAA4B\uAA4E-\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2-\uAAEA\uAAF0-\uAAF4\uAAF7-\uABE2\uABEB\uABEE-\uD7FF\uE000-\uFB1D\uFB1F-\uFDFF\uFE10-\uFE1F\uFE30-\uFFFF]|\uD800[\uDC00-\uDDFC\uDDFE-\uDEDF\uDEE1-\uDF75\uDF7B-\uDFFF]|[\uD801\uD808-\uD80C\uD80E-\uD819\uD81C-\uD82E\uD830-\uD832\uD835\uD837\uD83B-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD802[\uDC00-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDEE4\uDEE7-\uDFFF]|\uD803[\uDC00-\uDD23\uDD28-\uDEAA\uDEAD-\uDEFC\uDF00-\uDF45\uDF51-\uDF81\uDF86-\uDFFF]|\uD804[\uDC03-\uDC37\uDC47-\uDC6F\uDC71\uDC72\uDC75-\uDC7E\uDC83-\uDCAF\uDCBB-\uDCC1\uDCC3-\uDCFF\uDD03-\uDD26\uDD35-\uDD44\uDD47-\uDD72\uDD74-\uDD7F\uDD83-\uDDB2\uDDC1-\uDDC8\uDDCD\uDDD0-\uDE2B\uDE38-\uDE3D\uDE3F\uDE40\uDE42-\uDEDE\uDEEB-\uDEFF\uDF04-\uDF3A\uDF3D\uDF45\uDF46\uDF49\uDF4A\uDF4E-\uDF56\uDF58-\uDF61\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC00-\uDC34\uDC47-\uDC5D\uDC5F-\uDCAF\uDCC4-\uDDAE\uDDB6\uDDB7\uDDC1-\uDDDB\uDDDE-\uDE2F\uDE41-\uDEAA\uDEB8-\uDF1C\uDF2C-\uDFFF]|\uD806[\uDC00-\uDC2B\uDC3B-\uDD2F\uDD36\uDD39\uDD3A\uDD3F\uDD41\uDD44-\uDDD0\uDDD8\uDDD9\uDDE1-\uDDE3\uDDE5-\uDE00\uDE0B-\uDE32\uDE3A\uDE3F-\uDE46\uDE48-\uDE50\uDE5C-\uDE89\uDE9A-\uDFFF]|\uD807[\uDC00-\uDC2E\uDC37\uDC40-\uDC91\uDCA8\uDCB7-\uDD30\uDD37-\uDD39\uDD3B\uDD3E\uDD46\uDD48-\uDD89\uDD8F\uDD92\uDD98-\uDEF2\uDEF7-\uDEFF\uDF02\uDF04-\uDF33\uDF3B-\uDF3D\uDF43-\uDFFF]|\uD80D[\uDC00-\uDC3F\uDC41-\uDC46\uDC56-\uDFFF]|\uD81A[\uDC00-\uDEEF\uDEF5-\uDF2F\uDF37-\uDFFF]|\uD81B[\uDC00-\uDF4E\uDF50\uDF88-\uDF8E\uDF93-\uDFE3\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD82F[\uDC00-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC8E\uDC90-\uDD2F\uDD37-\uDEAD\uDEAF-\uDEEB\uDEF0-\uDFFF]|\uD839[\uDC00-\uDCEB\uDCF0-\uDFFF]|\uD83A[\uDC00-\uDCCF\uDCD7-\uDD43\uDD4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))|(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])(?=(?![\(\)\[\]\{\}])[\(\)\[\]\{\}\xAB\xBB\u0F3A-\u0F3D\u169B\u169C\u2018-\u201F\u2039\u203A\u2045\u2046\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2E02-\u2E05\u2E09\u2E0A\u2E0C\u2E0D\u2E1C\u2E1D\u2E20-\u2E29\u2E42\u2E55-\u2E5C\u3000-\u3002\u3008-\u3011\u3014-\u301B\u301D-\u301F\uFD3E\uFD3F\uFE17\uFE18\uFE35-\uFE44\uFE47\uFE48\uFE59-\uFE5E\uFF08\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF3B\uFF3D\uFF5B\uFF5D\uFF5F-\uFF64])|(?!(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*(?=(?!(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9\uFF01-\uFF60]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BEF\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D66-\u0D6F\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F29\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD30-\uDD39\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC66-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))|(?!(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9\uFF01-\uFF60]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BEF\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D66-\u0D6F\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F29\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD30-\uDD39\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC66-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*(?=(?!(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))/g,"$&\0").split("\0");if(u.length>1){for(var r=u.length-1,o=0;o<r;o++)n.parentNode.insertBefore(document.createTextNode(u[o]),n);n.textContent=u[r]}}}},n.processGeneratedContent=function(t,e,n,i,u,r){u=qs(u);var o=$s(e),a=js(n),s=Us(i);if(!Vs(s)||!Ks(o,a)){this.preprocessForTextSpacing(t);var l=t.style.whiteSpace;0===(r?t.offsetHeight:t.offsetWidth)&&(t.style.whiteSpace="pre");for(var c=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_TEXT),h=null,D=null,d=c.nextNode();d;d=D){D=c.nextNode();var f=!h,p=!h||/\n$/.test(h.textContent),g=!D||/^\n/.test(D.textContent);this.processTextSpacing(d,f||p,f,p,g,!D,h,D,o,a,s,u,r),h=d}t.style.whiteSpace=l}},n.postLayoutBlock=function(t,e){var n=this,i=!t||1===t.fragmentIndex&&function(){for(var t=e[0],n=t;;n=n.parent)if(!n||!n.inline){var i;if(1!==(null==(i=n)?void 0:i.fragmentIndex))return!1;break}if(!t.inline)return!0;for(var u=t.viewNode.previousSibling;u;u=u.previousSibling)if(!Fr(u,t.whitespace)&&!r(u))return!1;return!0}(),u=i||function(){for(var t,n=e[0];n&&n.inline;){var i;if((t=null==(i=n.viewNode)?void 0:i.previousSibling)&&(3===t.nodeType&&/^[ \t\r\n\f]*$/.test(t.textContent)&&n.whitespace!==Cr.PRESERVE&&(t=t.previousSibling),t))break;n=n.parent}for(;t;){if(1===t.nodeType){var u;if("br"===t.localName)return!0;var r=null==(u=t.style)?void 0:u.display;if(r&&"inline"!==r)return!/^(inline|ruby)\b/.test(r)}else if(3===t.nodeType)if(n.whitespace===Cr.PRESERVE){if(/\n$/.test(t.textContent))return!0}else if(n.whitespace===Cr.NEWLINE&&/\n[ \t\r\n\f]*$/.test(t.textContent))return!0;t=t.lastChild}return!1}();function r(t){var e;if(1!==(null==t?void 0:t.nodeType))return!1;var n=t;if(n.hasAttribute(Er))return!0;var i=null!=(e=n.style)?e:{},u=i.position,r=i.float;return"absolute"===u||"fixed"===u||r&&"none"!==r}for(var o=-1,a=function(){var a=e[s];if(!a.after&&a.inline&&!a.display&&a.parent&&a.viewNode.parentNode&&a.viewNode.nodeType===Node.TEXT_NODE&&!Fr(a.viewNode,a.whitespace)){var l,c,h,D,d,f=function(t){var e,n;if(1===(null==(e=t.viewNode)?void 0:e.nodeType))return"br"===t.viewNode.localName;if(3===(null==(n=t.viewNode)?void 0:n.nodeType)){var i;if(t.whitespace===Cr.PRESERVE){if(/\n$/.test(t.viewNode.textContent))return!0}else if(t.whitespace===Cr.NEWLINE&&/\n[ \t\r\n\f]*$/.test(t.viewNode.textContent))return!0;if("br"===(null==(i=t.viewNode.previousElementSibling)?void 0:i.localName))return Fr(t.viewNode,t.whitespace)}return!1},p=function(t){var e,n;if(1===(null==(e=t.viewNode)?void 0:e.nodeType))return"br"===t.viewNode.localName;if(3===(null==(n=t.viewNode)?void 0:n.nodeType)){var i;if(t.whitespace===Cr.PRESERVE){if(/^\n/.test(t.viewNode.textContent))return!0}else if(t.whitespace===Cr.NEWLINE&&/^[ \t\r\n\f]*\n/.test(t.viewNode.textContent))return!0;if("br"===(null==(i=t.viewNode.nextElementSibling)?void 0:i.localName))return Fr(t.viewNode,t.whitespace)}return!1},g=qs(null!=(l=null!=(c=null!=(h=a.lang)?h:a.parent.lang)?c:null==t?void 0:t.lang)?l:null==t||null==(D=t.parent)?void 0:D.lang),E=$s(a.inheritedProps["text-autospace"]),C=js(a.inheritedProps["text-spacing-trim"]),v=Us(a.inheritedProps["hanging-punctuation"]);if(Vs(v)&&Ks(E,C))return"continue";if(/\b(flex|grid)\b/.test(a.parent.display))return"continue";o<0&&(o=s);for(var F=null,m=null,A=s===o,b=s===o&&i,y=s===o&&u,B=!1,w=!1,S=s-1;S>=0;S--){var N,x=e[S];if(f(x)){y=!0;break}if(!x.display&&x.viewNode.nodeType===Node.TEXT_NODE&&x.viewNode.textContent.length>0){F=x.viewNode;break}if(x.display&&!/^(inline|ruby)\b/.test(x.display)||1===(null==(N=x.viewNode)?void 0:N.nodeType)&&("br"===x.viewNode.localName||gt[x.viewNode.localName]))break;0===S&&(A=!0,i&&(b=!0,y=!0))}for(var T=s+1;T<e.length;T++){var I,P=e[T];if(p(P)){B=!0;break}if(P.viewNode!==a.viewNode&&!P.display&&P.viewNode.nodeType===Node.TEXT_NODE&&P.viewNode.textContent.length>0){m=P.viewNode;break}if(P.display&&!/^(inline|ruby)\b/.test(P.display)||1===(null==(I=P.viewNode)?void 0:I.nodeType)&&("br"===P.viewNode.localName||gt[P.viewNode.localName])){T===e.length-1&&r(P.viewNode)&&(w=!0);break}if(T===e.length-1){B=!0,w=!0;for(var k=P.viewNode.nextSibling;k;k=k.nextSibling)if(!r(k)){w=!1;break}}}if("inline-block"===(null==(d=a.parent)?void 0:d.display)){if(!b){for(var O=a.parent.viewNode.firstChild;Fr(O,a.whitespace);)O=O.nextSibling;a.viewNode===O&&(b=!0)}if(!w){for(var R=a.parent.viewNode.lastChild;Fr(R,a.whitespace);)R=R.previousSibling;a.viewNode===R&&(w=!0)}}n.processTextSpacing(a.viewNode,A,b,y,B,w,F,m,E,C,v,g,a.vertical)}},s=0;s<e.length;s++)a()},n.processTextSpacing=function(t,e,n,i,u,r,o,a,s,l,c,h,D){var d,f,p,g=t.textContent,E=t.ownerDocument;function C(){if(e)return!0;if(!o)return!1;d||(d=E.createRange()).selectNode(t);var n=d.getClientRects()[0];f||(f=E.createRange()).selectNode(o);var i=f.getClientRects(),u=i[i.length-1];return!(!n||!u)&&(D?n.top<u.top+u.height-n.width||n.left+n.width<u.left+n.width/10||n.left>u.left+u.width-n.width/10:n.left<u.left+u.width-n.height||n.top>u.top+u.height-n.height/10||n.top+n.height<u.top+n.height/10)}function v(){if(!a)return!1;d||(d=E.createRange()).selectNode(t);var e=d.getClientRects()[0];p||(p=E.createRange()).selectNode(a);var n=p.getClientRects()[0];return!(!e||!n)&&(D?e.top+e.height>n.top+e.width||e.left>n.left+n.width-e.width/10||e.left+e.width<n.left+e.width/10:e.left+e.width>n.left+e.height||e.top+e.height<n.top+e.height/10||e.top>n.top+n.height-e.height/10)}var F,m=!1,A=!1,b=!1,y=!1;if(n&&c.first&&/^["'\(\[\{\xAB\xBB\u0F3A\u0F3C\u169B\u2018-\u201F\u2039\u203A\u2045\u207D\u208D\u2308\u230A\u2329\u2768\u276A\u276C\u276E\u2770\u2772\u2774\u27C5\u27E6\u27E8\u27EA\u27EC\u27EE\u2983\u2985\u2987\u2989\u298B\u298D\u298F\u2991\u2993\u2995\u2997\u29D8\u29DA\u29FC\u2E02-\u2E05\u2E09\u2E0A\u2E0C\u2E0D\u2E1C\u2E1D\u2E20-\u2E22\u2E24\u2E26\u2E28\u2E42\u2E55\u2E57\u2E59\u2E5B\u3000\u3008\u300A\u300C\u300E\u3010\u3014\u3016\u3018\u301A\u301D\uFD3F\uFE17\uFE35\uFE37\uFE39\uFE3B\uFE3D\uFE3F\uFE41\uFE43\uFE47\uFE59\uFE5B\uFE5D\uFF08\uFF3B\uFF5B\uFF5F\uFF62](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g)?(F="viv-ts-open",m=!0,A=!0):r&&c.last&&/^["'\)\]\}\xAB\xBB\u0F3B\u0F3D\u169C\u2018\u2019\u201B-\u201D\u201F\u2039\u203A\u2046\u207E\u208E\u2309\u230B\u232A\u2769\u276B\u276D\u276F\u2771\u2773\u2775\u27C6\u27E7\u27E9\u27EB\u27ED\u27EF\u2984\u2986\u2988\u298A\u298C\u298E\u2990\u2992\u2994\u2996\u2998\u29D9\u29DB\u29FD\u2E02-\u2E05\u2E09\u2E0A\u2E0C\u2E0D\u2E1C\u2E1D\u2E20\u2E21\u2E23\u2E25\u2E27\u2E29\u2E56\u2E58\u2E5A\u2E5C\u3009\u300B\u300D\u300F\u3011\u3015\u3017\u3019\u301B\u301E\u301F\uFD3E\uFE18\uFE36\uFE38\uFE3A\uFE3C\uFE3E\uFE40\uFE42\uFE44\uFE48\uFE5A\uFE5C\uFE5E\uFF09\uFF3D\uFF5D\uFF60\uFF63](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g)?(F="viv-ts-close",m=!0,b=!0):(c.forceEnd||c.allowEnd)&&/^[\u3001\u3002\uFF0C\uFF0E\uFF61\uFF64](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g)?(F="viv-ts-close",m=!0,y=!0):(l.trimStart||l.spaceFirst||l.trimAdjacent)&&/^[\u2018\u201C\u2329\u3008\u300A\u300C\u300E\u3010\u3014\u3016\u3018\u301A\u301D\uFF08\uFF3B\uFF5B\uFF5F](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g)?(F="viv-ts-open",m=!0):(l.trimEnd||l.allowEnd||l.trimAdjacent)&&(/^[\u2019\u201D\u232A\u3009\u300B\u300D\u300F\u3011\u3015\u3017\u3019\u301B\u301E\u301F\uFF09\uFF3D\uFF5D\uFF60](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g)||"zh-hans"===h&&/^[\uFF1A\uFF1B](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g)||"zh-hant"!==h&&/^[\u3001\u3002\uFF0C\uFF0E](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g))&&(F="viv-ts-close",m=!0),m){var B=function(t){var e=parseFloat(E.defaultView.getComputedStyle(t).fontSize);return(D?t.offsetHeight:t.offsetWidth)>.7*e},w=function(){return D?S.offsetLeft:S.offsetTop};if("viv-ts-inner"===t.parentElement.localName)return;var S=E.createElement(F),N=E.createElement("viv-ts-inner");S.appendChild(N),t.parentNode.insertBefore(S,t),N.appendChild(t);var x=B(N);if(x||A||b||y)if("viv-ts-open"===F)if(A)S.className="viv-hang-first";else if(n||i)S.className=l.trimStart?"viv-ts-trim":"viv-ts-space";else if(l.trimStart||l.spaceFirst||!C()){if(l.trimAdjacent&&o&&/[\(\)\[\]\{\}\xAB\xB7\xBB\u0F3A-\u0F3D\u169B\u169C\u2018-\u201F\u2027\u2039\u203A\u2045\u2046\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2E02-\u2E05\u2E09\u2E0A\u2E0C\u2E0D\u2E1C\u2E1D\u2E20-\u2E29\u2E42\u2E55-\u2E5C\u3000-\u3002\u3008-\u3011\u3014-\u301B\u301D-\u301F\u30FB\uFD3E\uFD3F\uFE17\uFE18\uFE35-\uFE44\uFE47\uFE48\uFE59-\uFE5E\uFF08\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF3B\uFF3D\uFF5B\uFF5D\uFF5F\uFF60\uFF62\uFF63](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(o.textContent)&&(!/[\)\]\}\xBB\u0F3B\u0F3D\u169C\u2019\u201D\u203A\u2046\u207E\u208E\u2309\u230B\u232A\u2769\u276B\u276D\u276F\u2771\u2773\u2775\u27C6\u27E7\u27E9\u27EB\u27ED\u27EF\u2984\u2986\u2988\u298A\u298C\u298E\u2990\u2992\u2994\u2996\u2998\u29D9\u29DB\u29FD\u2E03\u2E05\u2E0A\u2E0D\u2E1D\u2E21\u2E23\u2E25\u2E27\u2E29\u2E56\u2E58\u2E5A\u2E5C\u3009\u300B\u300D\u300F\u3011\u3015\u3017\u3019\u301B\u301E\u301F\uFD3E\uFE18\uFE36\uFE38\uFE3A\uFE3C\uFE3E\uFE40\uFE42\uFE44\uFE48\uFE5A\uFE5C\uFE5E\uFF09\uFF3D\uFF5D\uFF60\uFF63](?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(o.textContent)||"viv-ts-inner"===o.parentElement.localName&&B(o.parentElement)))S.className="viv-ts-trim";else if((l.trimStart||l.spaceFirst)&&C()){var T=w();S.className="viv-ts-auto",T!==w()||C()||(S.className="viv-ts-trim")}}else S.className="viv-ts-space";else if("viv-ts-close"===F)if(b)S.className=x?"viv-hang-last":"viv-hang-last viv-hang-hw";else if(r||u){var I=w();y?(S.className=x?c.allowEnd&&l.allowEnd?"viv-ts-auto":"viv-hang-end":"viv-hang-end viv-hang-hw",c.allowEnd&&I===w()&&(l.trimEnd?S.className="viv-ts-trim":l.allowEnd?(S.className="viv-hang-end",I===w()&&(S.className="")):S.className="viv-ts-space")):l.trimEnd?S.className="viv-ts-trim":l.allowEnd?(S.className="viv-ts-auto",I===w()&&(S.className="")):S.className="viv-ts-space"}else if(a&&/^[\)\]\}\xB7\xBB\u0F3B\u0F3D\u169C\u2019\u201D\u2027\u203A\u2046\u207E\u208E\u2309\u230B\u232A\u2769\u276B\u276D\u276F\u2771\u2773\u2775\u27C6\u27E7\u27E9\u27EB\u27ED\u27EF\u2984\u2986\u2988\u298A\u298C\u298E\u2990\u2992\u2994\u2996\u2998\u29D9\u29DB\u29FD\u2E03\u2E05\u2E0A\u2E0D\u2E1D\u2E21\u2E23\u2E25\u2E27\u2E29\u2E56\u2E58\u2E5A\u2E5C\u3000-\u3002\u3009\u300B\u300D\u300F\u3011\u3015\u3017\u3019\u301B\u301E\u301F\u30FB\uFD3E\uFE18\uFE36\uFE38\uFE3A\uFE3C\uFE3E\uFE40\uFE42\uFE44\uFE48\uFE5A\uFE5C\uFE5E\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF3D\uFF5D\uFF60\uFF63]/.test(a.textContent))x&&l.trimAdjacent&&(S.className="viv-ts-trim");else if(y){var P=v(),k=P&&c.allowEnd;k||(S.className=x?"viv-hang-end":"viv-hang-end viv-hang-hw"),x?k&&l.trimEnd?S.className="viv-ts-auto":k||v()?!P&&c.allowEnd&&(l.trimEnd?(S.className="viv-ts-auto",v()||(S.className="viv-hang-end")):(S.className="viv-ts-space",v()||(l.allowEnd?(S.className="viv-ts-auto",v()||(S.className="viv-hang-end")):S.className="viv-hang-end"))):S.className="":P||v()||(S.className="")}else if(l.trimEnd||l.allowEnd)if(v())S.className=l.allowEnd?"viv-ts-space":"viv-ts-auto";else{var O=w();S.className="viv-ts-auto",O===w()&&(S.className="")}}function R(t){var e,n=null==t||null==(e=t.ownerDocument.defaultView)?void 0:e.getComputedStyle(t);return!!n&&("upright"===n.textOrientation||"all"===n.textCombineUpright||"horizontal"===n["-webkit-text-combine"])}function L(t,e){if(1===t.nodeType){var n=E.defaultView.getComputedStyle(t);if(parseFloat(n.marginInlineEnd)||parseFloat(n.borderInlineEndWidth)||parseFloat(n.paddingInlineEnd))return!0}var i=t.parentElement;if(i&&!i.contains(e))return L(i,e);if(1===e.nodeType){var u=E.defaultView.getComputedStyle(e);if(parseFloat(u.marginInlineStart)||parseFloat(u.borderInlineStartWidth)||parseFloat(u.paddingInlineStart))return!0}var r=e.parentElement;return!(!r||r.contains(t))&&L(t,r)}(s.ideographAlpha||s.ideographNumeric)&&(!(o&&/^(?!(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/.test(g)&&(s.ideographAlpha&&/(?!(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9\uFF01-\uFF60]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(o.textContent)||s.ideographNumeric&&/(?![\uFF01-\uFF60])(?:[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD801[\uDCA0-\uDCA9]|\uD803[\uDD30-\uDD39]|\uD804[\uDC66-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF39]|\uD806[\uDCE0-\uDCE9\uDD50-\uDD59]|\uD807[\uDC50-\uDC59\uDD50-\uDD59\uDDA0-\uDDA9\uDF50-\uDF59]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD839[\uDCF0-\uDCF9]|\uD83A[\uDD50-\uDD59]|\uD83E[\uDFF0-\uDFF9])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(o.textContent)))||D&&R(o.parentElement)||L(o,t)||t.parentNode.insertBefore(E.createElement("viv-ts-thin-sp"),t),!(a&&/(?!(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/.test(g)&&(s.ideographAlpha&&/^(?!(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u30FF\u31C0-\u31FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9\uFF01-\uFF60]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/.test(a.textContent)||s.ideographNumeric&&/^(?![\uFF01-\uFF60])(?:[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD801[\uDCA0-\uDCA9]|\uD803[\uDD30-\uDD39]|\uD804[\uDC66-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF39]|\uD806[\uDCE0-\uDCE9\uDD50-\uDD59]|\uD807[\uDC50-\uDC59\uDD50-\uDD59\uDDA0-\uDDA9\uDF50-\uDF59]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD839[\uDCF0-\uDCF9]|\uD83A[\uDD50-\uDD59]|\uD83E[\uDFF0-\uDFF9])/.test(a.textContent)))||D&&R(a.parentElement)||L(t,a)||t.parentNode.insertBefore(E.createElement("viv-ts-thin-sp"),t.nextSibling))},n.registerHooks=function(){d(t.HOOKS.POLYFILLED_INHERITED_PROPS,this.getPolyfilledInheritedProps.bind(this)),d(t.HOOKS.PREPROCESS_SINGLE_DOCUMENT,this.preprocessSingleDocument.bind(this)),d(t.HOOKS.POST_LAYOUT_BLOCK,this.postLayoutBlock.bind(this),!0)},e}());Ys.registerHooks();var Zs=(new DOMParser).parseFromString('<root xmlns="'+G.SHADOW+'"/>',"text/xml"),Qs=["footnote-marker","first-5-lines","first-4-lines","first-3-lines","first-2-lines","first-line","first-letter","before","","after"],Js="data-adapt-pseudo";function tl(t){return t.getAttribute(Js)||""}function el(t,e){t.setAttribute(Js,e)}var nl=function(){function t(t,e,n,i,u){this.element=void 0,this.style=void 0,this.styler=void 0,this.context=void 0,this.exprContentListener=void 0,this.contentProcessed={},this.element=t,this.style=e,this.styler=n,this.context=i,this.exprContentListener=u}var e=t.prototype;return e.getStyle=function(t,e){var n=tl(t);this.styler&&n&&n.match(/after$/)&&(this.style=this.styler.getStyle(this.element,!0),this.styler=null);var i=so(this.style,"_pseudos")[n]||{};if(n.match(/^first-/)&&!i["x-first-pseudo"]){var u,r=1;"first-letter"==n?r=0:null!=(u=n.match(/^first-([0-9]+)-lines$/))&&(r=u[1]-0),i["x-first-pseudo"]=new Qr(new ze(r),0)}return i},e.processContent=function(t,e,n){var i=tl(t);if(!this.contentProcessed[i]){this.contentProcessed[i]=!0;var u=e.content;u&&Vr(u)&&(u.visit(new Ur(t,this.context,u,this.exprContentListener)),function(t){Ys.preprocessForTextSpacing(t)}(t))}},t}(),il=Hu.registerFragmentIndex,ul=function(){function t(t,e){this.sourceNode=void 0,this.styler=void 0,this.sourceNode=t,this.styler=e}var e=t.prototype;return e.createElement=function(t,e){var n=this,i=e.viewNode.ownerDocument.createElement("div"),u=new Dl(t,i,e),r=u.getColumn().pageBreakType;return u.getColumn().pageBreakType=null,u.layout(this.createNodePositionForPseudoElement(),!0).thenAsync((function(){n.styler.contentProcessed["after-if-continues"]=!1,u.getColumn().pageBreakType=r;var t=i.firstChild;return tt(t,"display","block"),Ri(t)}))},e.createNodePositionForPseudoElement=function(){var t=Zs.createElementNS(G.XHTML,"div");el(t,"after-if-continues");var e=this.createShadowContext(t);return new Or({steps:[{node:t,shadowType:e.type,shadowContext:e,nodeShadow:null,shadowSibling:null}],offsetInNode:0,after:!1,preprocessedTextContent:null})},e.createShadowContext=function(t){return new Tr(this.sourceNode,t,null,null,null,ur.ShadowType.ROOTED,this.styler)},t}(),rl=function(){function t(t,e,n){this.nodeContext=void 0,this.afterIfContinues=void 0,this.pseudoElementHeight=void 0,this.flagmentLayoutConstraintType="AfterIfContinue",this.nodeContext=t,this.afterIfContinues=e,this.pseudoElementHeight=n}var e=t.prototype;return e.allowLayout=function(t,e,n){return!(e&&!t||t&&t.overflow)},e.nextCandidate=function(t){return!1},e.postLayout=function(t,e,n,i){},e.finishBreak=function(t,e){var n=this;return this.getRepetitiveElements().affectTo(t)?this.afterIfContinues.createElement(e,this.nodeContext).thenAsync((function(t){return n.nodeContext.viewNode.appendChild(t),Ri(!0)})):Ri(!0)},e.getRepetitiveElements=function(){return new ol(this.nodeContext,this.pseudoElementHeight)},e.equalsTo=function(e){return e instanceof t&&this.afterIfContinues==e.afterIfContinues},e.getPriorityOfFinishBreak=function(){return 9},t}(),ol=function(){function t(t,e){this.nodeContext=void 0,this.pseudoElementHeight=void 0,this.nodeContext=t,this.pseudoElementHeight=e}var e=t.prototype;return e.calculateOffset=function(t){return this.affectTo(t)?this.pseudoElementHeight:0},e.calculateMinimumOffset=function(t){return this.calculateOffset(t)},e.affectTo=function(t){if(!t)return!1;var e=t.shadowContext?t.shadowContext.owner:t.sourceNode;if(e===this.nodeContext.sourceNode)return!!t.after;for(var n=e.parentNode;n;n=n.parentNode)if(n===this.nodeContext.sourceNode)return!0;return!1},t}();function al(t,e){if(!t||!t.afterIfContinues||t.after||e.isFloatNodeContext(t))return Ri(t);var n=t.afterIfContinues;return n.createElement(e,t).thenAsync((function(i){var u=function(t,e,n){var i=t.viewNode;i.appendChild(n);var u=Cs(n,e,t.vertical);return i.removeChild(n),u}(t,e,i);return e.fragmentLayoutConstraints.push(new rl(t,n,u)),Ri(t)}))}function sl(t,e){return t.thenAsync((function(t){return al(t,e)}))}var ll=function(){function t(t){this.constraints=void 0,this.constraints=t}return t.prototype.allowLayout=function(t){return this.constraints.every((function(e){return e.allowLayout(t)}))},t}(),cl=function(t){function e(e,n){var i;return(i=t.call(this)||this).checkPoints=void 0,i.penalty=void 0,i.alreadyEvaluated=!1,i.breakNodeContext=null,i.checkPoints=e,i.penalty=n,i}N(e,t);var n=e.prototype;return n.findAcceptableBreak=function(t,e){return e<this.getMinBreakPenalty()?null:(this.alreadyEvaluated||(this.breakNodeContext=t.findBoxBreakPosition(this,e>0),this.alreadyEvaluated=!!this.breakNodeContext||e>0||!!t.pseudoParent),this.breakNodeContext)},n.getMinBreakPenalty=function(){return this.penalty},n.getNodeContext=function(){return this.alreadyEvaluated?this.breakNodeContext:this.checkPoints[this.checkPoints.length-1]},e}(Bs),hl=function(e){function n(t,n,i,u,r){var o;return(o=e.call(this,t)||this).layoutContext=void 0,o.clientLayout=void 0,o.layoutConstraint=void 0,o.pageFloatLayoutContext=void 0,o.last=void 0,o.viewDocument=void 0,o.flowRootFormattingContext=null,o.isFloat=!1,o.isFootnote=!1,o.startEdge=0,o.endEdge=0,o.beforeEdge=0,o.afterEdge=0,o.footnoteEdge=0,o.box=null,o.chunkPositions=null,o.bands=null,o.overflown=!1,o.breakPositions=null,o.pageBreakType=null,o.forceNonfitting=!0,o.leftFloatEdge=0,o.rightFloatEdge=0,o.bottommostFloatTop=0,o.stopAtOverflow=!0,o.lastAfterPosition=null,o.fragmentLayoutConstraints=[],o.pseudoParent=null,o.nodeContextOverflowingDueToRepetitiveElements=null,o.blockDistanceToBlockEndFloats=NaN,o.breakAtTheEdgeBeforeFloat=null,o.layoutContext=n,o.clientLayout=i,o.layoutConstraint=u,o.pageFloatLayoutContext=r,o.last=t.lastChild,o.viewDocument=t.ownerDocument,r.setContainer(k(o)),o}N(n,e);var i=n.prototype;return i.getTopEdge=function(){return this.vertical?this.rtl?this.endEdge:this.startEdge:this.beforeEdge},i.getBottomEdge=function(){return this.vertical?this.rtl?this.startEdge:this.endEdge:this.afterEdge},i.getLeftEdge=function(){return this.vertical?this.afterEdge:this.rtl?this.endEdge:this.startEdge},i.getRightEdge=function(){return this.vertical?this.beforeEdge:this.rtl?this.startEdge:this.endEdge},i.isFloatNodeContext=function(t){return!(!t.floatSide||this.isFloat&&!t.parent)},i.stopByOverflow=function(t){return this.stopAtOverflow&&!!t&&t.overflow},i.isOverflown=function(t){return this.vertical?t<this.footnoteEdge:t>this.footnoteEdge},i.getExclusions=function(){var t=this.pageFloatLayoutContext.getFloatFragmentExclusions();return this.exclusions.concat(t)},i.openAllViews=function(t){var e=this,n=Oi("openAllViews"),i=t.steps;this.layoutContext.setViewRoot(this.element,this.isFootnote);var u=i.length-1,r=null;return n.loop((function(){for(;u>=0&&(r=Nr(i[u],r),u!==i.length-1||r.formattingContext||(r.formattingContext=e.flowRootFormattingContext),0!=u||(r.offsetInNode=e.calculateOffsetInNodeForNodeContext(t),r.after=t.after,r.preprocessedTextContent=t.preprocessedTextContent,!r.after));){var n=e.layoutContext.setCurrent(r,0==u&&0==r.offsetInNode);if(u--,n.isPending())return n}return Ri(!1)})).then((function(){n.finish(r)})),n.result()},i.calculateOffsetInNodeForNodeContext=function(t){return t.preprocessedTextContent?cr(t.preprocessedTextContent,t.offsetInNode,1):t.offsetInNode},i.maybePeelOff=function(t,e){if(t.firstPseudo&&t.inline&&!t.after&&0==t.firstPseudo.count&&1!=t.viewNode.nodeType){var n,i,u=t.viewNode.textContent,r=u.match(L),o=r?r[0].length:0;if(!r&&3===(null==(n=t.sourceNode)?void 0:n.nodeType)&&3===(null==(i=t.sourceNode.nextSibling)?void 0:i.nodeType)&&u===t.sourceNode.textContent){var a=u+t.sourceNode.nextSibling.textContent,s=a.match(L);if(s){var l=s[0];o=l.length,t.sourceNode.textContent=l,t.viewNode.textContent=l,t.sourceNode.nextSibling.textContent=a.substr(o)}}return this.layoutContext.peelOff(t,o)}return Ri(t)},i.buildViewToNextBlockEdge=function(t,e){var n=this,i=!1,u=Oi("buildViewToNextBlockEdge");return u.loopWithFrame((function(u){t.viewNode&&!bs(t)&&e.push(t.copy()),n.maybePeelOff(t,0).then((function(r){r!==t&&(bs(t=r)||e.push(t.copy())),n.nextInTree(t).then((function(e){(t=e)?(!i&&n.layoutConstraint.allowLayout(t)||(i=!0,(t=t.modify()).overflow=!0),n.isFloatNodeContext(t)&&(Qa(t.floatReference)||"footnote"===t.floatSide)?n.layoutFloatOrFootnote(t).then((function(e){t=e,n.pageFloatLayoutContext.isInvalidated()&&(t=null),t?u.continueLoop():u.breakLoop()})):t.inline?u.continueLoop():u.breakLoop()):u.breakLoop()}))}))})).then((function(){u.finish(t)})),u.result()},i.nextInTree=function(t,e){return sl(this.layoutContext.nextInTree(t,e),this)},i.buildDeepElementView=function(t){var e=this;if(!t.viewNode)return Ri(t);var n=[],i=t.sourceNode,u=Oi("buildDeepElementView");return u.loopWithFrame((function(u){t.viewNode&&t.inline&&!bs(t)?n.push(t.copy()):(n.length>0&&e.postLayoutBlock(t,n),n=[]),e.maybePeelOff(t,0).then((function(r){var o=r;if(o!==t){for(var a=o;a&&a.sourceNode!=i;)a=a.parent;if(null==a)return t=o,void u.breakLoop();bs(o)||n.push(o.copy())}e.nextInTree(o).then((function(n){(t=n)&&t.sourceNode!=i?e.layoutConstraint.allowLayout(t)?u.continueLoop():((t=t.modify()).overflow=!0,e.stopAtOverflow?u.breakLoop():u.continueLoop()):u.breakLoop()}))}))})).then((function(){n.length>0&&e.postLayoutBlock(t,n),u.finish(t)})),u.result()},i.createFloat=function(t,e,n,i){var u=this.viewDocument.createElement("div");return this.vertical?(i>=this.height&&(i-=.1),i<1&&(i=0),tt(u,"height",n+"px"),tt(u,"width",i+"px")):(n>=this.width&&(n-=.1),n<1&&(n=0),tt(u,"width",n+"px"),tt(u,"height",i+"px")),tt(u,"float",e),tt(u,"clear",e),this.element.insertBefore(u,t),u},i.killFloats=function(){for(var t=this.element.firstChild;t;){var e=t.nextSibling;if(1==t.nodeType){var n=t,i=n.style.cssFloat;if("left"!=i&&"right"!=i&&"none"!==i)break;this.element.removeChild(n)}t=e}},i.createFloats=function(){for(var t,e=this.element.firstChild,n=this.bands,i=this.vertical?this.getTopEdge():this.getLeftEdge(),u=this.vertical?this.getBottomEdge():this.getRightEdge(),r=null,o=R(n);!(t=o()).done;){var a=t.value,s=a.y2-a.y1;a.left=this.createFloat(e,"left",a.x1-i,s),a.right=this.createFloat(e,"right",u-a.x2,s),a.x1<u&&a.x2>i?r=a:r||tt(a.right,"float","none")}if(r){var l=n[n.length-1],c=this.vertical?-this.getLeftEdge():this.getBottomEdge();r!==l&&l.y2>=c&&(this.footnoteEdge=this.vertical?-r.y2:r.y2)}},i.calculateEdge=function(t,e,n,i){var u;if(t&&vs(t.viewNode))return NaN;if(t&&t.after&&!t.inline&&(u=Es(t,this.clientLayout,0,this.vertical),!isNaN(u)))return u;for(var r=i-(t=e[n]).boxOffset;;){if(u=Es(t,this.clientLayout,r,this.vertical),!isNaN(u))return u;if(r>0)r--;else{if(--n<0)return this.beforeEdge;1!=(t=e[n]).viewNode.nodeType&&(r=t.viewNode.textContent.length)}}},i.parseComputedLength=function(t){var e=t.match(/^(-?[0-9]*(\.[0-9]*)?)px$/);return e?this.clientLayout.adjustLengthValue(parseFloat(e[0])):0},i.getComputedMargin=function(t){var e=this.clientLayout.getElementComputedStyle(t),n=new Dn(0,0,0,0);return e&&(n.left=this.parseComputedLength(e.marginLeft),n.top=this.parseComputedLength(e.marginTop),n.right=this.parseComputedLength(e.marginRight),n.bottom=this.parseComputedLength(e.marginBottom)),n},i.getComputedPaddingBorder=function(t){var e=this.clientLayout.getElementComputedStyle(t),n=new Dn(0,0,0,0);return e&&(n.left=this.parseComputedLength(e.borderLeftWidth)+this.parseComputedLength(e.paddingLeft),n.top=this.parseComputedLength(e.borderTopWidth)+this.parseComputedLength(e.paddingTop),n.right=this.parseComputedLength(e.borderRightWidth)+this.parseComputedLength(e.paddingRight),n.bottom=this.parseComputedLength(e.borderBottomWidth)+this.parseComputedLength(e.paddingBottom)),n},i.getComputedInsets=function(t){var e=this.clientLayout.getElementComputedStyle(t),n=new Dn(0,0,0,0);if(e){if("border-box"==e.boxSizing)return this.getComputedMargin(t);n.left=this.parseComputedLength(e.marginLeft)+this.parseComputedLength(e.borderLeftWidth)+this.parseComputedLength(e.paddingLeft),n.top=this.parseComputedLength(e.marginTop)+this.parseComputedLength(e.borderTopWidth)+this.parseComputedLength(e.paddingTop),n.right=this.parseComputedLength(e.marginRight)+this.parseComputedLength(e.borderRightWidth)+this.parseComputedLength(e.paddingRight),n.bottom=this.parseComputedLength(e.marginBottom)+this.parseComputedLength(e.borderBottomWidth)+this.parseComputedLength(e.paddingBottom)}return n},i.setComputedInsets=function(t,e){var n=this.clientLayout.getElementComputedStyle(t);n&&(e.marginLeft=this.parseComputedLength(n.marginLeft),e.borderLeft=this.parseComputedLength(n.borderLeftWidth),e.paddingLeft=this.parseComputedLength(n.paddingLeft),e.marginTop=this.parseComputedLength(n.marginTop),e.borderTop=this.parseComputedLength(n.borderTopWidth),e.paddingTop=this.parseComputedLength(n.paddingTop),e.marginRight=this.parseComputedLength(n.marginRight),e.borderRight=this.parseComputedLength(n.borderRightWidth),e.paddingRight=this.parseComputedLength(n.paddingRight),e.marginBottom=this.parseComputedLength(n.marginBottom),e.borderBottom=this.parseComputedLength(n.borderBottomWidth),e.paddingBottom=this.parseComputedLength(n.paddingBottom))},i.setComputedWidthAndHeight=function(t,e){var n=this.clientLayout.getElementComputedStyle(t);n&&(e.width=this.parseComputedLength(n.width),e.height=this.parseComputedLength(n.height))},i.layoutUnbreakable=function(t){return this.buildDeepElementView(t)},i.layoutFloat=function(t){var e=this,n=Oi("layoutFloat"),i=t.viewNode,u=function(t,e,n){var i=e?"vertical-rl":"horizontal-tb";if("top"!==t&&"bottom"!==t||(t=$a(t,i,n)),"block-start"===t&&(t="inline-start"),"block-end"===t&&(t="inline-end"),"inline-start"===t||"inline-end"===t){var u=function(t,e){var n=qa[e];if(!n)throw new Error("unknown writing-mode: "+e);for(var i=0;i<n.length;i++)if(n[i].physical===t)return n[i].logical;return t}(Wa(t,i,n),i);"line-left"===u?t="left":"line-right"===u&&(t="right")}return"left"!==t&&"right"!==t&&(h.warn("Invalid float value: "+t+". Fallback to left."),t="left"),t}(t.floatSide,t.vertical,t.direction);return tt(i,"float","none"),tt(i,"display","inline-block"),tt(i,"vertical-align","top"),this.buildDeepElementView(t).then((function(r){for(var o=e.clientLayout.getElementClientRect(i),a=e.getComputedMargin(i),s=new cn(o.left-a.left,o.top-a.top,o.right+a.right,o.bottom+a.bottom),l=e.rtl?e.endEdge:e.startEdge,c=e.rtl?e.startEdge:e.endEdge,h=t.parent;h&&h.inline;)h=h.parent;if(h){var D=h.viewNode.ownerDocument.createElement("div");D.style.left="0px",D.style.top="0px",e.vertical?(D.style.bottom="0px",D.style.width="1px"):(D.style.right="0px",D.style.height="1px"),h.viewNode.appendChild(D);var d=e.clientLayout.getElementClientRect(D);l=Math.max(e.rtl?e.getEndEdge(d):e.getStartEdge(d),l),c=Math.min(e.rtl?e.getStartEdge(d):e.getEndEdge(d),c),h.viewNode.removeChild(D);var f=e.vertical?s.y2-s.y1:s.x2-s.x1;"left"==u?c=Math.max(c,l+f):l=Math.min(l,c-f),t.firstPseudo||h.viewNode.appendChild(t.viewNode)}var p=new cn(l,e.getBoxDir()*e.beforeEdge,c,e.getBoxDir()*e.afterEdge),g=s;e.vertical&&(g=yn(s));var E=e.getBoxDir();if(g.y1<e.bottommostFloatTop*E){var C=g.y2-g.y1;g.y1=e.bottommostFloatTop*E,g.y2=g.y1+C}!function(t,e,n,i){for(var u=n.y1,r=n.x2-n.x1,o=n.y2-n.y1,a=Nn(e,u);;){var s=u+o;if(s>t.y2)return!1;for(var l=t.x1,c=t.x2,h=a;h<e.length&&e[h].y1<s;h++){var D=e[h];D.x1>l&&(l=D.x1),D.x2<c&&(c=D.x2)}if(l+r<=c||a>=e.length)return"left"==i?(n.x1=l,n.x2=l+r):(n.x1=c-r,n.x2=c),n.y2+=u-n.y1,n.y1=u,!0;u=e[a].y2,a++}}(p,e.bands,g,u),e.vertical&&(s=Bn(g));var v,F=e.getComputedInsets(i);tt(i,"width",s.x2-s.x1-F.left-F.right+"px"),tt(i,"height",s.y2-s.y1-F.top-F.bottom+"px"),tt(i,"position","absolute"),tt(i,"display",t.display);var m=null;if(h&&(m=h.containingBlockForAbsolute?h:h.getContainingBlockForAbsolute()),m){var A=m.viewNode.ownerDocument.createElement("div");A.style.position="absolute",m.vertical?A.style.right="0":A.style.left="0",A.style.top="0",m.viewNode.appendChild(A),v=e.clientLayout.getElementClientRect(A),m.viewNode.removeChild(A)}else v={left:e.getLeftEdge()-e.paddingLeft,right:e.getRightEdge()+e.paddingRight,top:e.getTopEdge()-e.paddingTop};(m?m.vertical:e.vertical)?tt(i,"right",v.right-s.x2+"px"):tt(i,"left",s.x1-v.left+"px"),tt(i,"top",s.y1-v.top+"px"),t.clearSpacer&&(t.clearSpacer.parentNode.removeChild(t.clearSpacer),t.clearSpacer=null);var b=e.vertical?s.x1:s.y2,y=e.vertical?s.x2:s.y1;e.isOverflown(b)&&0!=e.breakPositions.length?((t=t.modify()).overflow=!0,n.finish(t)):(e.killFloats(),p=new cn(e.getLeftEdge(),e.getTopEdge(),e.getRightEdge(),e.getBottomEdge()),e.vertical&&(p=yn(p)),function(t,e,n,i,u){for(i||(i=[new fn(n.y1,n.y2,n.x1,n.x2)]);i.length>0&&i[0].y2<=t.y1;)i.shift();if(0!=i.length){var r;i[0].y1<t.y1&&(i[0].y1=t.y1);var o=0==e.length?t.y1:e[e.length-1].y2;o<t.y2&&e.push(new fn(o,t.y2,t.x1,t.x2));for(var a,s=Nn(e,i[0].y1),l=R(i);!(a=l()).done;){var c=a.value;if(s==e.length)break;for(e[s].y1<c.y1&&(r=e[s],s++,e.splice(s,0,new fn(c.y1,r.y2,r.x1,r.x2)),r.y2=c.y1);s<e.length&&((r=e[s++]).y2>c.y2&&(e.splice(s,0,new fn(c.y2,r.y2,r.x1,r.x2)),r.y2=c.y2),c.x1!=c.x2&&("left"==u?r.x1=Math.min(c.x2,t.x2):r.x2=Math.max(c.x1,t.x1)),r.y2!=c.y2););}Sn(t,e)}}(p,e.bands,g,null,u),e.createFloats(),"left"==u?e.leftFloatEdge=b:e.rightFloatEdge=b,e.bottommostFloatTop=y,e.updateMaxReachedAfterEdge(b),n.finish(r))})),n.result()},i.setupFloatArea=function(t,e,n,i,u,r){var o=this.pageFloatLayoutContext,a=o.getContainer(e),s=t.element;a.element.parentNode.appendChild(s),t.isFloat=!0,t.originX=a.originX,t.originY=a.originY,t.vertical=a.vertical,t.rtl=a.rtl,t.marginLeft=t.marginRight=t.marginTop=t.marginBottom=0,t.borderLeft=t.borderRight=t.borderTop=t.borderBottom=0,t.paddingLeft=t.paddingRight=t.paddingTop=t.paddingBottom=0,t.exclusions=(a.exclusions||[]).concat(),t.forceNonfitting=!o.hasFloatFragments(),t.innerShape=null;var l=a.getPaddingRect();t.setHorizontalPosition(l.x1-a.originX,l.x2-l.x1),t.setVerticalPosition(l.y1-a.originY,l.y2-l.y1),u.adjustPageFloatArea(t,a,this),t.init();var c=!!o.setFloatAreaDimensions(t,e,n,i,!0,!o.hasFloatFragments(),r);return c?(t.killFloats(),t.init()):a.element.parentNode.removeChild(s),c},i.createPageFloatArea=function(t,e,n,i,u){var r=this.element.ownerDocument.createElement("div");tt(r,"position","absolute");var o=this.pageFloatLayoutContext.getPageFloatLayoutContext(t.floatReference),a=new is(null,Za.COLUMN,null,this.pageFloatLayoutContext.flowName,t.nodePosition,null,null),s=o.getContainer(),l=new El(e,r,this.layoutContext.clone(),this.clientLayout,this.layoutConstraint,a,s);return a.setContainer(l),this.setupFloatArea(l,t.floatReference,e,n,i,u)?l:null},i.layoutSinglePageFloatFragment=function(t,e,n,i,u,r,o){var a=this.pageFloatLayoutContext,s=(t=(o?o.continuations:[]).concat(t))[0].float,l=a.getPageFloatPlacementCondition(s,e,n),c=this.createPageFloatArea(s,e,r,u,l),h={floatArea:c,pageFloatFragment:null,newPosition:null};if(!c)return Ri(h);var D=Oi("layoutSinglePageFloatFragment"),d=!1,f=0;return D.loopWithFrame((function(e){if(f>=t.length)e.breakLoop();else{var n=new Or(t[f].nodePosition);c.layout(n,!0).then((function(t){h.newPosition=t,!t||i?(f++,e.continueLoop()):(d=!0,e.breakLoop())}))}})).then((function(){if(!d){var n=a.setFloatAreaDimensions(c,s.floatReference,e,r,!1,i,l);if(n){var o=u.createPageFloatFragment(t,n,c,!!h.newPosition);a.addPageFloatFragment(o,!0),h.pageFloatFragment=o}else d=!0}D.finish(h)})),D.result()},i.layoutPageFloatInner=function(t,e,n,i){var u=this,r=this.pageFloatLayoutContext,o=t.float;function a(e,n){n?r.removePageFloatFragment(n,!0):e&&e.element.parentNode.removeChild(e.element),r.restoreStashedFragments(o.floatReference),r.deferPageFloat(t)}r.stashEndFloatFragments(o);var s=Oi("layoutPageFloatInner");return this.layoutSinglePageFloatFragment([t],o.floatSide,o.clearSide,!r.hasFloatFragments(),e,n,i).then((function(t){var e=t.floatArea,n=t.pageFloatFragment,l=t.newPosition;n?u.layoutStashedPageFloats(o.floatReference,[i]).then((function(t){if(t){if(r.addPageFloatFragment(n),r.discardStashedFragments(o.floatReference),l){var i=new ns(o,l.primary);r.deferPageFloat(i)}s.finish(!0)}else a(e,n),s.finish(!1)})):(a(e,n),s.finish(!1))})),s.result()},i.layoutStashedPageFloats=function(t,e){var n=this,i=this.pageFloatLayoutContext,u=i.getStashedFloatFragments(t),r=[],o=[],a=!1,s=Oi("layoutStashedPageFloats"),l=0;return s.loopWithFrame((function(t){if(l>=u.length)t.breakLoop();else{var i=u[l];if(e.includes(i))return l++,void t.continueLoop();var s=(new rs).findByFloat(i.continuations[0].float);n.layoutSinglePageFloatFragment(i.continuations,i.floatSide,null,!1,s,null).then((function(e){var n=e.floatArea;n&&r.push(n);var i=e.pageFloatFragment;i?(o.push(i),l++,t.continueLoop()):(a=!0,t.breakLoop())}))}})).then((function(){a?(o.forEach((function(t){i.removePageFloatFragment(t,!0)})),r.forEach((function(t){var e=t.element;e&&e.parentNode&&e.parentNode.removeChild(e)}))):u.forEach((function(t){var e=t.area.element;e&&e.parentNode&&e.parentNode.removeChild(e)})),s.finish(!a)})),s.result()},i.setFloatAnchorViewNode=function(t){var e=t.viewNode.parentNode,n=e.ownerDocument.createElement("span");n.setAttribute(Er,"1"),"footnote"===t.floatSide&&this.layoutContext.applyPseudoelementStyle(t,"footnote-call",n),e.appendChild(n),e.removeChild(t.viewNode);var i=t.modify();return i.after=!0,i.viewNode=n,i},i.resolveFloatReferenceFromColumnSpan=function(t,e,n){var i=this,u=Oi("resolveFloatReferenceFromColumnSpan"),r=this.pageFloatLayoutContext,o=r.getPageFloatLayoutContext(Za.REGION);return r.getContainer().width<o.getContainer().width&&t===Za.COLUMN?e===Je.auto?this.buildDeepElementView(n.copy()).then((function(e){var n=e.viewNode,r=Ya(i.clientLayout,n,[Ka.MIN_CONTENT_INLINE_SIZE])[Ka.MIN_CONTENT_INLINE_SIZE],o=i.getComputedMargin(n);u.finish((r+=i.vertical?o.top+o.bottom:o.left+o.right)>i.width?Za.REGION:t)})):u.finish(e===Je.all?Za.REGION:t):u.finish(t),u.result()},i.layoutPageFloat=function(t){var e=this,n=this.pageFloatLayoutContext,i=(new rs).findByNodeContext(t),u=n.findPageFloatByNodePosition(t.toNodePosition());return(u?Ri(u):i.createPageFloat(t,n,this)).thenAsync((function(u){var r=Sr(t,0),o=e.setFloatAnchorViewNode(t),a=i.findPageFloatFragment(u,n),s=new ns(u,r);if(a&&a.hasFloat(u))return n.registerPageFloatAnchor(u,o.viewNode),Ri(o);if(n.isForbidden(u)||n.hasPrecedingFloatsDeferredToNext(u))return n.deferPageFloat(s),n.registerPageFloatAnchor(u,o.viewNode),Ri(o);if(e.nodeContextOverflowingDueToRepetitiveElements)return Ri(null);var l=Es(o,e.clientLayout,0,e.vertical);return e.isOverflown(l)?Ri(o):e.layoutPageFloatInner(s,i,l,a).thenAsync((function(t){return t?Ri(null):(n.registerPageFloatAnchor(u,o.viewNode),Ri(o))}))}))},i.processLineStyling=function(t,e,n){var i=this,u=Oi("processLineStyling"),r=n.concat([]);n.splice(0,n.length);var o=0,a=t.firstPseudo;return 0==a.count&&(a=a.outer),u.loopWithFrame((function(n){if(a){var u=i.findLinePositions(r),s=a.count-o;if(u.length<=s)n.breakLoop();else{var l=i.findAcceptableBreakInside(r,u[s-1],!0);null!=l?i.finishBreak(l,!1,!1).then((function(){o+=s,i.layoutContext.peelOff(l,0).then((function(u){a=(t=u).firstPseudo,i.buildViewToNextBlockEdge(t,r=[]).then((function(t){e=t,n.continueLoop()}))}))})):n.breakLoop()}}else n.breakLoop()})).then((function(){Array.prototype.push.apply(n,r),u.finish(e)})),u.result()},i.isLoneImage=function(t){return!(2!=t.length&&this.breakPositions.length>0)&&t[0].sourceNode==t[1].sourceNode&&gt[t[0].sourceNode.localName]},i.getTrailingMarginEdgeAdjustment=function(t){for(var e=0,n=0,i=t.length-1;i>=0;i--){var u=t[i];if(!u.after||!u.viewNode||1!=u.viewNode.nodeType)break;var r=this.getComputedMargin(u.viewNode),o=this.vertical?-r.left:r.bottom;o>0?e=Math.max(e,o):n=Math.min(n,o)}return e+n},i.layoutBreakableBlock=function(t){var e=this,n=Oi("layoutBreakableBlock"),i=[];return this.buildViewToNextBlockEdge(t,i).then((function(u){var r=i.length-1;if(r<0)n.finish(u);else{e.postLayoutBlock(u,i);var o=e.calculateEdge(u,i,r,i[r].boxOffset),a=!1;if(!u||!vs(u.viewNode)){var s=ws(u,e.collectElementsOffset());a=e.isOverflown(o+(e.vertical?-1:1)*s.minimum),e.isOverflown(o+(e.vertical?-1:1)*s.current)&&!e.nodeContextOverflowingDueToRepetitiveElements&&(e.nodeContextOverflowingDueToRepetitiveElements=u)}null==u&&(o+=e.getTrailingMarginEdgeAdjustment(i)),e.updateMaxReachedAfterEdge(o),(t.firstPseudo?e.processLineStyling(t,u,i):Ri(u)).then((function(t){i.length>0&&(e.saveBoxBreakPosition(i),a&&!e.isLoneImage(i)&&t&&((t=t.modify()).overflow=!0)),n.finish(t)}))}})),n.result()},i.postLayoutBlock=function(e,n){var i=this;p(t.HOOKS.POST_LAYOUT_BLOCK).forEach((function(t){t(e,n,i)}))},i.findEndOfLine=function(t,e,n){for(var i,u=this.vertical?t-1:t+1,r=0,o=e[0].boxOffset,a=r,s=e.length-1,l=e[s].boxOffset;o<l;){i=o+Math.ceil((l-o)/2),a=r;for(var c=s;a<c;){var h=a+Math.ceil((c-a)/2);e[h].boxOffset>i?c=h-1:a=h}var D=this.calculateEdge(null,e,a,i);if(this.vertical?D<=u:D>=u){for(l=i-1;e[a].boxOffset==i;)a--;s=a}else n&&this.updateMaxReachedAfterEdge(D),o=i,r=a}return{nodeContext:e[a],index:o,checkPointIndex:a}},i.findAcceptableBreakInside=function(t,e,n){var i,u=this.findEndOfLine(e,t,!0),r=u.nodeContext,o=r.viewNode;if(1!=o.nodeType&&"viv-ts-inner"!==(null==(i=o.parentElement)?void 0:i.localName)){var a=o;r=this.resolveTextNodeBreaker(r).breakTextNode(a,r,u.index,t,u.checkPointIndex,n)}else{var s=ys(r);if(s){var l;if((null==(l=this.breakPositions)?void 0:l[0])instanceof cl&&null!=s&&s.viewNode.contains(this.breakPositions[0].checkPoints[0].viewNode))return null;r=s}}return this.clearOverflownViewNodes(r,!1),r},i.resolveTextNodeBreaker=function(e){return p(t.HOOKS.RESOLVE_TEXT_NODE_BREAKER).reduce((function(t,n){return n(e)||t}),dl.instance)},i.getRangeBoxes=function(t,e){for(var n,i=[],u=t.ownerDocument.createRange(),r=!1,o=t,a=null,s=!1,l=!0;l;){var c=!0;do{var h=null;o==e&&(l=1===e.nodeType&&!(!e.firstChild||r));var D=1===o.nodeType?o:null;D?r?r=!1:ms(D)?c=!s:!D.firstChild||gt[D.localName]||/^r(uby|[bt]c?)$/.test(D.localName)||"inline"!==(n=this.clientLayout.getElementComputedStyle(D).display)&&(ps(n)||gs(n))?((c=!s)&&("ruby"===D.localName&&o.firstChild&&(o=o.firstChild),u.setStartBefore(o),s=!0),a=o,o.contains(e)&&(l=!1)):h=o.firstChild:(s||(null==o.parentNode?l=!1:(u.setStartBefore(o),s=!0)),a=o),h||(h=o.nextSibling)||(r=!0,h=o.parentNode),o=h}while(c&&l);if(s){u.setEndAfter(a);for(var d=this.clientLayout.getRangeClientRects(u),f=0;f<d.length;f++)i.push(d[f]);s=!1}}return i},i.findLinePositions=function(t){var e=[],n=this.getRangeBoxes(t[0].viewNode,t[t.length-1].viewNode);n.sort(this.vertical?yr:br);for(var i=0,u=0,r=0,o=0,a=0,s=this.getBoxDir();;){if(a<n.length){var l=n[a],c=1;if(o>0){var h=Math.max(this.getBoxSize(l),1);c=s*this.getBeforeEdge(l)<s*i?s*(this.getAfterEdge(l)-i)/h:s*this.getAfterEdge(l)>s*u?s*(u-this.getBeforeEdge(l))/h:1}if(0==o||c>=.6||c>=.2&&this.getStartEdge(l)>=r-1){r=this.getEndEdge(l),this.vertical?(i=0==o?l.right:Math.max(i,l.right),u=0==o?l.left:Math.min(u,l.left)):(i=0==o?l.top:Math.min(i,l.top),u=0==o?l.bottom:Math.max(u,l.bottom)),o++,a++;continue}}if(o>0&&(e.push(u),o=0),a>=n.length)break}return e.sort(Dt),this.vertical&&e.reverse(),e},i.calculateClonedPaddingBorder=function(t){for(var e=0,n=t;n;n=n.parent)if(!n.inline&&ju(n.viewNode)){var i=this.getComputedPaddingBorder(n.viewNode);e+=n.vertical?-i.left:i.bottom,"table"===n.display&&(e+=(n.vertical?-1:1)*n.blockBorderSpacing)}return e},i.getOffsetByRepetitiveElements=function(t){return(t?t.calculateOffset(this):ws(null,this.collectElementsOffset())).current},i.findBoxBreakPosition=function(t,e){var n,i=this,u=this.element.parentNode,r=this.element.nextSibling;u.removeChild(this.element),u.insertBefore(this.element,r);for(var o,a,s=t.checkPoints,l=s[0];l.parent&&l.inline;)l=l.parent;e?(o=1,a=1):(o=Math.max((l.inheritedProps.widows||2)-0,1),a=Math.max((l.inheritedProps.orphans||2)-0,1));var c=this.calculateClonedPaddingBorder(l),h=this.findLinePositions(s),D=this.footnoteEdge-c,d=this.getBoxDir(),f=this.getOffsetByRepetitiveElements(t);D-=d*f;var p=this.findFirstOverflowingEdgeAndCheckPoint(s);isNaN(p.edge)&&(p.edge=1/0*d);var g=ht(h.length,(function(t){var e=h[t];return i.vertical?e<D||e<=p.edge:e>D||e>=p.edge})),E=g<=0;E&&(g=ht(h.length,(function(t){return i.vertical?h[t]<D:h[t]>D})));var C,v=s[s.length-1].viewNode;if("viv-ts-inner"===(null==(n=v)?void 0:n.parentElement.localName)&&(v=v.parentElement.parentElement),(g===h.length&&v.nextSibling||g>=h.length-1&&v.parentElement.querySelector(".MJXc-display"))&&(o=0),(g=Math.min(h.length-o,g))<a)return null;if(D=h[g-1],C=E?p.checkPoint:this.findAcceptableBreakInside(t.checkPoints,D,e)){var F=this.getAfterEdgeOfBlockContainer(C);!isNaN(F)&&F<D&&(D=F),this.computedBlockSize=d*(D-this.beforeEdge)+f}return C},i.getAfterEdgeOfBlockContainer=function(t){var e=t;do{e=e.parent}while(e&&e.inline);return e?((e=e.copy().modify()).after=!0,Es(e,this.clientLayout,0,this.vertical)):NaN},i.findFirstOverflowingEdgeAndCheckPoint=function(t){var e=t.findIndex((function(t){return t.overflow}));if(e<0)return{edge:NaN,checkPoint:null};var n=t[e];return{edge:this.calculateEdge(null,t,e,n.boxOffset),checkPoint:n}},i.findEdgeBreakPosition=function(t){return this.computedBlockSize=t.computedBlockSize+this.getOffsetByRepetitiveElements(t),t.position},i.finishBreak=function(t,e,n){var i=(new Ns).find(t.formattingContext).finishBreak(this,t,e,n);return i||(i=Is.finishBreak(this,t,e,n)),i},i.findAcceptableBreakPosition=function(){var t=null,e=null,n=0,i=0;do{n=i,i=Number.MAX_VALUE;for(var u=this.breakPositions.length-1;u>=0&&!e;--u){e=(t=this.breakPositions[u]).findAcceptableBreak(this,n);var r=t.getMinBreakPenalty();r>n&&(i=Math.min(i,r))}}while(i>n&&!e&&this.forceNonfitting);return{breakPosition:e?t:null,nodeContext:e}},i.doFinishBreak=function(t,e,n,i){var u=this;if(this.pageFloatLayoutContext.isInvalidated()||this.pageBreakType||!e)return Ri(t);var r=Oi("doFinishBreak"),o=!1;if(!t){if(this.forceNonfitting)return h.warn("Could not find any page breaks?!!"),this.skipTailEdges(e).then((function(t){t?((t=t.modify()).overflow=!1,u.finishBreak(t,o,!0).then((function(){r.finish(t)}))):r.finish(t)})),r.result();t=n,o=!0,this.computedBlockSize=i}return this.finishBreak(t,o,!0).then((function(){r.finish(t)})),r.result()},i.isBreakable=function(t){return!!t.after||t.sourceNode.namespaceURI!==G.SVG&&!t.flexContainer},i.zeroIndent=function(t){var e=t.toString();return""==e||"auto"==e||!!e.match(/^0+(.0*)?[^0-9]/)},i.checkOverflowAndSaveEdge=function(t,e){if(!t)return!1;if(vs(t.viewNode))return!1;var n=Es(t,this.clientLayout,0,this.vertical),i=ws(t,this.collectElementsOffset()),u=this.isOverflown(n+(this.vertical?-1:1)*i.minimum);if(this.isOverflown(n+(this.vertical?-1:1)*i.current)&&!this.nodeContextOverflowingDueToRepetitiveElements)this.nodeContextOverflowingDueToRepetitiveElements=t;else if(e){var r=n+this.getTrailingMarginEdgeAdjustment(e),o=this.footnoteEdge-this.getBoxDir()*i.current;n=this.vertical?Math.min(n,Math.max(r,o)):Math.max(n,Math.min(r,o))}return this.updateMaxReachedAfterEdge(n),u},i.checkOverflowAndSaveEdgeAndBreakPosition=function(t,e,n,i){if(!t)return!1;if(vs(t.viewNode))return!1;var u=this.checkOverflowAndSaveEdge(t,e);return!n&&u||this.saveEdgeBreakPosition(t,i,u),u},i.applyClearance=function(t){if(!t.viewNode.parentNode)return!1;var e=this.getComputedMargin(t.viewNode),n=t.viewNode.ownerDocument.createElement("div");this.vertical?(n.style.bottom="0px",n.style.width="1px",n.style.marginRight=e.right+"px"):(n.style.right="0px",n.style.height="1px",n.style.marginTop=e.top+"px"),t.viewNode.parentNode.insertBefore(n,t.viewNode);var i=this.clientLayout.getElementClientRect(n),u=this.getBeforeEdge(i),r=this.getBoxDir(),o=t.clearSide,a=1/0*-this.getBoxDir();switch("all"===o&&(a=this.pageFloatLayoutContext.getPageFloatClearEdge(o,this)),o){case"left":a=r*Math.max(a*r,this.leftFloatEdge*r);break;case"right":a=r*Math.max(a*r,this.rightFloatEdge*r);break;default:a=r*Math.max(a*r,Math.max(this.rightFloatEdge*r,this.leftFloatEdge*r))}if(u*r>=a*r)return t.viewNode.parentNode.removeChild(n),!1;var s=Math.max(1,(a-u)*r);this.vertical?n.style.width=s+"px":n.style.height=s+"px",i=this.clientLayout.getElementClientRect(n);var l=this.getAfterEdge(i);if(!t.floatSide)if(this.vertical){var c=l+e.right-a;c>0==e.right>=0&&(c+=e.right),n.style.marginLeft=c+"px"}else{var h=a-(l+e.top);h>0==e.top>=0&&(h+=e.top),n.style.marginBottom=h+"px"}return t.clearSpacer=n,!0},i.isBFC=function(t){return!!Ps(t)||!!nr.isInstanceOfRepetitiveElementsOwnerFormattingContext(t)},i.skipEdges=function(t,e,n){var i,u=this,r=t.after?null==(i=t.parent)?void 0:i.formattingContext:t.formattingContext;if(r&&!this.isBFC(r))return Ri(t);var o=Oi("skipEdges"),a=!n&&e&&t&&t.after,s=n,l=null,c=[],h=[],D=!1;function d(){return!!n||!e&&Yu(s)&&!function(){if(!l)return!1;if(t.floatSide)return!1;for(var e=l;null!=(n=e)&&n.parent;e=e.parent){for(var n,i,u=e.after?e.viewNode:null==(i=e.viewNode)?void 0:i.previousSibling;u&&(Fr(u,e.parent.whitespace)||As(u));)u=u.previousSibling;if(u)return!1}return!0}()}var f=function(){(t=c[0]||t).viewNode.parentNode.removeChild(t.viewNode),u.pageBreakType=s};return o.loopWithFrame((function(n){for(;t;){var i=(new Ns).find(t.formattingContext);do{if(!t.viewNode)break;if(t.inline&&1!=t.viewNode.nodeType){if(Fr(t.viewNode,t.whitespace))break;if(!t.after)return d()?f():u.checkOverflowAndSaveEdgeAndBreakPosition(l,null,!0,s)?(t=(u.stopAtOverflow&&l||t).modify()).overflow=!0:(t=t.modify()).breakBefore=s,void n.breakLoop()}if(!t.after){if(t.floatSide&&(u.breakAtTheEdgeBeforeFloat=or(s)?s:null),i&&i.startNonInlineElementNode(t))break;if(t.clearSide&&u.applyClearance(t)&&e&&0===u.breakPositions.length&&u.saveEdgeBreakPosition(t.copy(),s,!1),t.inline||t.repeatOnBreak||!(l?ys(l):u.breakPositions[u.breakPositions.length-1]instanceof cl)||u.saveEdgeBreakPosition(t.copy(),s,!1),!u.isBFC(t.formattingContext)||nr.isInstanceOfRepetitiveElementsOwnerFormattingContext(t.formattingContext)||u.isFloatNodeContext(t)||t.flexContainer||!t.nodeShadow&&!t.sourceNode.firstElementChild&&Fr(t.sourceNode.firstChild,t.whitespace))return c.push(t.copy()),s=ar(s,t.breakBefore),d()?f():!u.checkOverflowAndSaveEdgeAndBreakPosition(l,null,!0,s)&&u.layoutConstraint.allowLayout(t)||((t=(u.stopAtOverflow&&l||t).modify()).overflow=!0),void n.breakLoop()}if(1!=t.viewNode.nodeType)break;var r=t.viewNode.style;if(t.after){var o;t.floatSide&&(s=null!=(o=s)?o:u.breakAtTheEdgeBeforeFloat,u.breakAtTheEdgeBeforeFloat=null);var p=t.sourceNode;if("svg"===p.localName||"math"===p.localName||"true"===p.getAttribute("data-math-typeset")){D=!1,l=t.copy(),h.push(l),s=ar(null,t.breakAfter),u.checkOverflowAndSaveEdgeAndBreakPosition(l,null,!u.stopAtOverflow,s);break}if(t.inline)break;if(i&&i.afterNonInlineElementNode(t,u.stopAtOverflow))break;if(D){if(d())return f(),void n.breakLoop();c=[],e=!1,a=!1,s=null}D=!1,l=t.copy(),h.push(l),s=ar(s,t.breakAfter),!r||u.zeroIndent(r.paddingBottom)&&u.zeroIndent(r.borderBottomWidth)||(h=[l])}else{var g;if(c.push(t.copy()),s=ar(s,t.breakBefore),!(t.pageType==(null==(g=t.parent)?void 0:g.pageType)&&Yu(s)||u.layoutConstraint.allowLayout(t))&&(u.checkOverflowAndSaveEdgeAndBreakPosition(l,null,!u.stopAtOverflow,s),(t=t.modify()).overflow=!0,u.stopAtOverflow))return void n.breakLoop();if(gt[t.viewNode.localName])return d()?f():u.checkOverflowAndSaveEdgeAndBreakPosition(l,null,!0,s)&&((t=(u.stopAtOverflow&&l||t).modify()).overflow=!0),void n.breakLoop();!r||u.zeroIndent(r.paddingTop)&&u.zeroIndent(r.borderTopWidth)||(a=!1,h=[]),D=!0}}while(0);var E=u.nextInTree(t,a);if(E.isPending())return void E.then((function(e){t=e,n.continueLoop()}));t=E.get()}u.checkOverflowAndSaveEdgeAndBreakPosition(l,h,!u.stopAtOverflow,s)?l&&u.stopAtOverflow&&((t=l.modify()).overflow=!0):Yu(s)&&(u.pageBreakType=s),n.breakLoop()})).then((function(){l&&(u.lastAfterPosition=l.toNodePosition()),o.finish(t)})),o.result()},i.skipTailEdges=function(t){var e=this,n=t.copy(),i=Oi("skipEdges"),u=null,r=!1;return i.loopWithFrame((function(i){for(;t;){do{if(!t.viewNode)break;if(t.inline&&1!=t.viewNode.nodeType){if(Fr(t.viewNode,t.whitespace))break;if(!t.after)return Yu(u)&&(e.pageBreakType=u),void i.breakLoop()}if(!t.after&&(e.isFloatNodeContext(t)||t.flexContainer))return Yu(u=ar(u,t.breakBefore))&&(e.pageBreakType=u),void i.breakLoop();if(1!=t.viewNode.nodeType)break;var o=t.viewNode.style;if(t.after){if(r){if(Yu(u))return e.pageBreakType=u,void i.breakLoop();u=null}r=!1,u=ar(u,t.breakAfter)}else{if(u=ar(u,t.breakBefore),gt[t.viewNode.localName])return Yu(u)&&(e.pageBreakType=u),void i.breakLoop();if(o&&(!e.zeroIndent(o.paddingTop)||!e.zeroIndent(o.borderTopWidth)))return void i.breakLoop()}r=!0}while(0);var a=e.layoutContext.nextInTree(t);if(a.isPending())return void a.then((function(e){t=e,i.continueLoop()}));t=a.get()}n=null,i.breakLoop()})).then((function(){i.finish(n)})),i.result()},i.layoutFloatOrFootnote=function(t){return Qa(t.floatReference)||"footnote"===t.floatSide?this.layoutPageFloat(t):this.layoutFloat(t)},i.layoutNext=function(t,e,n){var i=this,u=Oi("layoutNext");return this.skipEdges(t,e,n||null).then((function(n){if(!(t=n)||i.pageBreakType||i.stopByOverflow(t))u.finish(t);else{var r=t.formattingContext;(new Ns).find(r).layout(t,i,e).thenFinish(u)}})),u.result()},i.clearOverflownViewNodes=function(t,e){if(t)for(var n=t.parent;t;t=n,n=n?n.parent:null){var i=(n||t).formattingContext;(new Ns).find(i).clearOverflownViewNodes(this,n,t,e),e=!1}},i.initGeom=function(){var t=this.element.ownerDocument.createElement("div");t.style.position="absolute",t.style.top=this.paddingTop+"px",t.style.right=this.paddingRight+"px",t.style.bottom=this.paddingBottom+"px",t.style.left=this.paddingLeft+"px",this.element.appendChild(t);var e=this.clientLayout.getElementClientRect(t);this.element.removeChild(t);var n=this.originX+this.left+this.getInsetLeft(),i=this.originY+this.top+this.getInsetTop();this.box=new cn(n,i,n+this.width,i+this.height),this.startEdge=e?this.vertical?this.rtl?e.bottom:e.top:this.rtl?e.right:e.left:0,this.endEdge=e?this.vertical?this.rtl?e.top:e.bottom:this.rtl?e.left:e.right:0,this.beforeEdge=e?this.vertical?e.right:e.top:0,this.afterEdge=e?this.vertical?e.left:e.bottom:0,this.leftFloatEdge=this.beforeEdge,this.rightFloatEdge=this.beforeEdge,this.bottommostFloatTop=this.beforeEdge,this.footnoteEdge=this.afterEdge,this.bands=function(t,e,n,i,u,r){r&&(t=yn(t),e=e.map((function(t){return wn(t)})),n=n.map((function(t){return wn(t)})));var o,a,s,l=e.length,c=n?n.length:0,h=[],D=[];for(o=0;o<l;o++)e[o].addSegments(D,o);for(o=0;o<c;o++)n[o].addSegments(D,o+l);var d=D.length;D.sort(pn);for(var f=0;D[f].shapeId>=l;)f++;var p=D[f].low.y;p>t.y1&&h.push(new fn(t.y1,p,t.x2,t.x2));for(var g,E,C=0,v=[];C<d&&(s=D[C]).low.y<p;)s.high.y>p&&v.push(s),C++;for(;C<d||v.length>0;){var F=t.y2,m=Math.min((g=Math.ceil(p+8),(E=u)?Math.ceil(g/E)*E:g),t.y2);for(a=0;a<v.length&&F>m;a++)(s=v[a]).low.x==s.high.x?s.high.y<F&&(F=Math.max(bn(s.high.y,u),m)):s.low.x!=s.high.x&&(F=m);for(F>t.y2&&(F=t.y2);C<d&&(s=D[C]).low.y<F;)if(s.high.y<p)C++;else{if(!(s.low.y<m)){var A=bn(s.low.y,u);A<F&&(F=A);break}s.low.y==s.high.y&&s.low.y==p||(v.push(s),F=m),C++}var b=[];for(a=0;a<v.length;a++)mn(b,v[a],p,F);b.sort((function(t,e){return t.x-e.x||t.lowOrHigh-e.lowOrHigh}));var y=An(b,l,c);if(0==y.length)h.push(new fn(p,F,t.x2,t.x2));else{var B=0,w=t.x1;for(a=0;a<y.length;a+=2){var S=Math.max(t.x1,y[a]),N=Math.min(t.x2,y[a+1])-S;N>B&&(B=N,w=S)}h.push(0==B?new fn(p,F,t.x2,t.x2):new fn(p,F,Math.max(w,t.x1),Math.min(w+B,t.x2)))}if(F==t.y2)break;for(p=F,a=v.length-1;a>=0;a--)v[a].high.y<=F&&v.splice(a,1)}return Sn(t,h),h}(this.box,[this.getInnerShape()],this.getExclusions(),0,this.snapHeight,this.vertical),this.createFloats()},i.init=function(){this.chunkPositions=[],tt(this.element,"width",this.width+"px"),tt(this.element,"height",this.height+"px"),this.initGeom(),this.computedBlockSize=0,this.overflown=!1,this.pageBreakType=null,this.lastAfterPosition=null},i.saveEdgeBreakPosition=function(t,e,n){var i=t.copy(),u=(new Ns).find(t.formattingContext),r=this.calculateClonedPaddingBorder(i),o=u.createEdgeBreakPosition(i,e,n,this.computedBlockSize+r);this.breakPositions.push(o)},i.saveBoxBreakPosition=function(t){var e=t[0].breakPenalty;if(e){for(var n=t[0];n.parent&&n.inline;)n=n.parent;e=n.breakPenalty}var i=new cl(t,e);this.breakPositions.push(i)},i.updateMaxReachedAfterEdge=function(t){if(!isNaN(t)){var e=this.getBoxDir()*(t-this.beforeEdge);this.computedBlockSize=Math.max(e,this.computedBlockSize)}},i.layout=function(t,e,n){var i=this;if(this.chunkPositions.push(t),t.primary.after&&(this.lastAfterPosition=t.primary),this.stopAtOverflow&&this.overflown)return Ri(t);if(this.isFullWithPageFloats())return Ri(t.primary.after&&1===t.primary.steps.length?null:t);var u=Oi("layout");return this.openAllViews(t.primary).then((function(t){var r=null;t.viewNode?r=t.copy():i.layoutContext.addEventListener("nextInTree",(function t(e){e.nodeContext.viewNode&&(r=e.nodeContext,i.layoutContext.removeEventListener("nextInTree",t))}));var o=new pl(e,n);o.layout(t,i).then((function(t){i.doFinishBreak(t,o.context.overflownNodeContext,r,o.initialComputedBlockSize).then((function(t){(i.pseudoParent?Ri(null):i.doFinishBreakOfFragmentLayoutConstraints(t)).then((function(){if(i.pageFloatLayoutContext.isInvalidated())u.finish(null);else if(t){i.overflown=!0;var e=new Or(t.toNodePosition());u.finish(e)}else u.finish(null)}))}))}))})),u.result()},i.isFullWithPageFloats=function(){return this.pageFloatLayoutContext.isColumnFullWithPageFloats(this)},i.getMaxBlockSizeOfPageFloats=function(){return this.pageFloatLayoutContext.getMaxBlockSizeOfPageFloats()},i.doFinishBreakOfFragmentLayoutConstraints=function(t){var e=this,n=Oi("doFinishBreakOfFragmentLayoutConstraints"),i=[].concat(this.fragmentLayoutConstraints);i.sort((function(t,e){return t.getPriorityOfFinishBreak()-e.getPriorityOfFinishBreak()}));var u=0;return n.loop((function(){return u<i.length?i[u++].finishBreak(t,e).thenReturn(!0):Ri(!1)})).then((function(){n.finish(!0)})),n.result()},i.doLayout=function(t,e,n){var i=this,u=Oi("doLayout"),r=null;return this.breakPositions=[],this.nodeContextOverflowingDueToRepetitiveElements=null,u.loopWithFrame((function(u){for(var o=function(){var o=!0;if(i.layoutNext(t,e,n||null).then((function(a){if(e=!1,n=null,i.nodeContextOverflowingDueToRepetitiveElements&&i.stopAtOverflow?(i.pageBreakType=null,(t=i.nodeContextOverflowingDueToRepetitiveElements).overflow=!0):t=a,i.pageFloatLayoutContext.isInvalidated())u.breakLoop();else if(i.pageBreakType)u.breakLoop();else if(t&&i.stopByOverflow(t)){r=t;var s=i.findAcceptableBreakPosition();t=s.nodeContext,s.breakPosition&&s.breakPosition.breakPositionChosen(i),u.breakLoop()}else o?o=!1:u.continueLoop()})),o)return o=!1,{v:void 0}};t;){var a=o();if("object"==typeof a)return a.v}i.computedBlockSize+=i.getOffsetByRepetitiveElements(),u.breakLoop()})).then((function(){u.finish({nodeContext:t,overflownNodeContext:r})})),u.result()},i.redoLayout=function(){for(var t=this,e=this.chunkPositions,n=this.element.lastChild;n!=this.last;){var i=n.previousSibling;this.element===n.parentNode&&this.layoutContext.isPseudoelement(n)||this.element.removeChild(n),n=i}this.killFloats(),this.init();var u=Oi("redoLayout"),r=0,o=null,a=!0;return u.loopWithFrame((function(n){if(r<e.length){var i=e[r++];t.layout(i,a).then((function(t){a=!1,t?(o=t,n.breakLoop()):n.continueLoop()}))}else n.breakLoop()})).then((function(){u.finish(o)})),u.result()},i.saveDistanceToBlockEndFloats=function(){var t=this.pageFloatLayoutContext.getBlockStartEdgeOfBlockEndFloats();t>0&&isFinite(t)&&(this.blockDistanceToBlockEndFloats=this.getBoxDir()*(t-this.beforeEdge-this.computedBlockSize))},i.collectElementsOffset=function(){for(var t=this,e=[],n=this;n;n=n.pseudoParent)n.fragmentLayoutConstraints.forEach((function(n){if(nr.isInstanceOfRepetitiveElementsOwnerLayoutConstraint(n)){var i=n.getRepetitiveElements();e.push(i)}if(er.isInstanceOfAfterIfContinuesLayoutConstraint(n)){var u=n.getRepetitiveElements();e.push(u)}ir.isInstanceOfTableRowLayoutConstraint(n)&&n.getElementsOffsetsForTableCell(t).forEach((function(t){e.push(t)}))}));return e},n}(Mr),Dl=function(){function t(t,e,n){this.startNodeContexts=[],this.column=void 0,this.column=Object.create(t),this.column.element=e,this.column.layoutContext=t.layoutContext.clone(),this.column.stopAtOverflow=!1,this.column.flowRootFormattingContext=n.formattingContext,this.column.pseudoParent=t;var i=this.column.calculateClonedPaddingBorder(n);this.column.footnoteEdge=this.column.footnoteEdge-i;var u=this;this.column.openAllViews=function(t){return hl.prototype.openAllViews.call(this,t).thenAsync((function(t){return u.startNodeContexts.push(t.copy()),Ri(t)}))}}var e=t.prototype;return e.layout=function(t,e){return this.column.layout(t,e)},e.findAcceptableBreakPosition=function(t){var e=this.column.findAcceptableBreakPosition();if(t){var n=this.startNodeContexts[0].copy(),i=new Ss(n,null,n.overflow,0);if(i.findAcceptableBreak(this.column,0),!e.nodeContext)return{breakPosition:i,nodeContext:n}}return e},e.finishBreak=function(t,e,n){return this.column.finishBreak(t,e,n)},e.doFinishBreakOfFragmentLayoutConstraints=function(t){this.column.doFinishBreakOfFragmentLayoutConstraints(t)},e.isStartNodeContext=function(t){var e=this.startNodeContexts[0];return e.viewNode===t.viewNode&&e.after===t.after&&e.offsetInNode===t.offsetInNode},e.isLastAfterNodeContext=function(t){return wr(t.toNodePosition(),this.column.lastAfterPosition)},e.getColumnElement=function(){return this.column.element},e.getColumn=function(){return this.column},t}(),dl=function(){function t(){}var e=t.prototype;return e.breakTextNode=function(t,e,n,i,u,r){if(e.after)e.offsetInNode=t.length;else{var o=n-e.boxOffset,a=t.data;(o=173==a.charCodeAt(o)?this.breakAfterSoftHyphen(t,a,o,e):this.breakAfterOtherCharacter(t,a,o,e))>0&&(e=this.updateNodeContext(e,o,t))}return e},e.breakAfterSoftHyphen=function(t,e,n,i){return t.replaceData(n,e.length-n,i.breakWord?"":fl(i)),n+1},e.breakAfterOtherCharacter=function(t,e,n,i){var u=e.charAt(n);n++;var r=e.charAt(n);return t.replaceData(n,e.length-n,!i.breakWord&&st(u)&&st(r)?fl(i):""),n},e.updateNodeContext=function(t,e,n){return(t=t.modify()).offsetInNode+=e,t.breakBefore=null,t},t}();function fl(t){return t.hyphenateCharacter||t.parent&&t.parent.hyphenateCharacter||"-"}dl.instance=void 0,dl.instance=new dl;var pl=function(t){function e(e,n){var i;return(i=t.call(this)||this).leadingEdge=void 0,i.breakAfter=void 0,i.initialPageBreakType=null,i.initialComputedBlockSize=0,i.initialOverflown=!1,i.context={overflownNodeContext:null},i.leadingEdge=e,i.breakAfter=n||null,i}N(e,t);var n=e.prototype;return n.resolveLayoutMode=function(t){return new gl(this.leadingEdge,this.breakAfter,this.context)},n.prepareLayout=function(t,e){e.fragmentLayoutConstraints=[],e.pseudoParent||(_s=[])},n.clearNodes=function(e){t.prototype.clearNodes.call(this,e);for(var n=e;n;){var i=n.viewNode;i&&Fs(i.parentNode,i),n=n.parent}},n.saveState=function(e,n){t.prototype.saveState.call(this,e,n),this.initialPageBreakType=n.pageBreakType,this.initialComputedBlockSize=n.computedBlockSize,this.initialOverflown=n.overflown},n.restoreState=function(e,n){t.prototype.restoreState.call(this,e,n),n.pageBreakType=this.initialPageBreakType,n.computedBlockSize=this.initialComputedBlockSize,n.overflown=this.initialOverflown},e}(ks),gl=function(){function t(t,e,n){this.leadingEdge=void 0,this.breakAfter=void 0,this.context=void 0,this.leadingEdge=t,this.breakAfter=e,this.context=n}var e=t.prototype;return e.doLayout=function(t,e){var n=this,i=Oi("DefaultLayoutMode.doLayout");return function(t,e){var n=Oi("processAfterIfContinuesOfAncestors"),i=t;return n.loop((function(){if(null!==i){var t=al(i,e);return i=i.parent,t.thenReturn(!0)}return Ri(!1)})).then((function(){n.finish(!0)})),n.result()}(t,e).then((function(){e.doLayout(t,n.leadingEdge,n.breakAfter).then((function(t){n.context.overflownNodeContext=t.overflownNodeContext,i.finish(t.nodeContext)}))})),i.result()},e.accept=function(t,e){var n=this;return!(!e.pageFloatLayoutContext.isInvalidated()&&!e.pageBreakType)||e.fragmentLayoutConstraints.length<=0||e.fragmentLayoutConstraints.every((function(i){return i.allowLayout(t,n.context.overflownNodeContext,e)}))},e.postLayout=function(t,e,n,i){if(!i){var u=n.fragmentLayoutConstraints.some((function(e){return e.nextCandidate(t)}));i=!u}return n.fragmentLayoutConstraints.forEach((function(u){u.postLayout(i,t,e,n)})),i},t}(),El=function(t){function e(e,n,i,u,r,o,a){var s;return(s=t.call(this,n,i,u,r,o)||this).floatSide=void 0,s.parentContainer=void 0,s.rootViewNodes=[],s.floatMargins=[],s.adjustContentRelativeSize=!0,s.floatSide=e,s.parentContainer=a,s}N(e,t);var n=e.prototype;return n.openAllViews=function(e){var n=this;return t.prototype.openAllViews.call(this,e).thenAsync((function(t){return t&&n.fixFloatSizeAndPosition(t),Ri(t)}))},n.convertPercentageSizesToPx=function(t){var e=this.parentContainer.getPaddingRect(),n=e.x2-e.x1,i=e.y2-e.y1;function u(e,n){e.forEach((function(e){var i=et(t,e);if(i&&"%"===i.charAt(i.length-1)){var u=parseFloat(i);tt(t,e,n*u/100+"px")}}))}u(["width","max-width","min-width"],n),u(["height","max-height","min-height"],i),u(["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left"],this.vertical?i:n),["margin-top","margin-right","margin-bottom","margin-left"].forEach((function(e){"auto"===et(t,e)&&tt(t,e,"0")}))},n.fixFloatSizeAndPosition=function(t){for(;t.parent;)t=t.parent;var e=t.viewNode;if(this.rootViewNodes.push(e),this.adjustContentRelativeSize&&this.convertPercentageSizesToPx(e),this.floatMargins.push(this.getComputedMargin(e)),this.adjustContentRelativeSize){var n=this.floatSide;if(this.parentContainer.vertical){if("block-end"===n||"left"===n){var i=et(e,"height");""!==i&&"auto"!==i&&tt(e,"margin-top","auto")}}else if("block-end"===n||"bottom"===n){var u=et(e,"width");""!==u&&"auto"!==u&&tt(e,"margin-left","auto")}}},n.getContentInlineSize=function(){var t=this;return Math.max.apply(null,this.rootViewNodes.map((function(e,n){var i=t.clientLayout.getElementClientRect(e),u=t.floatMargins[n];return t.vertical?u.top+i.height+u.bottom:u.left+i.width+u.right})))},e}(hl),Cl=function(){function t(t,e){this.parent=void 0,this.rootSourceNode=void 0,this.formattingContextType="RepetitiveElementsOwner",this.isRoot=!1,this.repetitiveElements=null,this.parent=t,this.rootSourceNode=e}var e=t.prototype;return e.getName=function(){return"Repetitive elements owner formatting context (RepetitiveElementsOwnerFormattingContext)"},e.isFirstTime=function(t,e){return e},e.getParent=function(){return this.parent},e.getRepetitiveElements=function(){return this.repetitiveElements},e.getRootViewNode=function(t){var e=this.getRootNodeContext(t);return e?e.viewNode:null},e.getRootNodeContext=function(t){do{if(!t.belongsTo(this)&&t.sourceNode===this.rootSourceNode)return t}while(t=t.parent);return null},e.initializeRepetitiveElements=function(t){var e=this;this.repetitiveElements||_s.some((function(t){return t.root===e.rootSourceNode&&(e.repetitiveElements=t.elements,!0)}))||(this.repetitiveElements=new vl(t,this.rootSourceNode),_s.push({root:this.rootSourceNode,elements:this.repetitiveElements}))},e.saveState=function(){},e.restoreState=function(t){},t}(),vl=function(){function t(t,e){this.vertical=void 0,this.ownerSourceNode=void 0,this.headerSourceNode=null,this.footerSourceNode=null,this.headerViewNode=null,this.footerViewNode=null,this.headerNodePosition=null,this.footerNodePosition=null,this.headerHeight=0,this.footerHeight=0,this.isSkipHeader=!1,this.isSkipFooter=!1,this.enableSkippingFooter=!0,this.enableSkippingHeader=!0,this.doneInitialLayout=!1,this.firstContentSourceNode=null,this.lastContentSourceNode=null,this.affectedNodeCache=[],this.afterLastContentNodeCache=[],this.allowInsert=!1,this.allowInsertRepeatitiveElements=void 0,this.vertical=t,this.ownerSourceNode=e}var e=t.prototype;return e.setHeaderNodeContext=function(t){this.headerNodePosition||(this.headerNodePosition=Sr(t,0),this.headerSourceNode=t.sourceNode,this.headerViewNode=t.viewNode)},e.setFooterNodeContext=function(t){this.footerNodePosition||(this.footerNodePosition=Sr(t,0),this.footerSourceNode=t.sourceNode,this.footerViewNode=t.viewNode)},e.updateHeight=function(t){this.headerViewNode&&(this.headerHeight=Cs(this.headerViewNode,t,this.vertical),this.headerViewNode=null),this.footerViewNode&&(this.footerHeight=Cs(this.footerViewNode,t,this.vertical),this.footerViewNode=null)},e.prepareLayoutFragment=function(){this.isSkipHeader=this.isSkipFooter=!1,this.enableSkippingFooter=!0,this.enableSkippingHeader=!0},e.appendHeaderToFragment=function(t,e,n){return!this.headerNodePosition||this.isSkipHeader?Ri(!0):this.appendElementToFragment(this.headerNodePosition,t,e,n)},e.appendFooterToFragment=function(t,e,n){return!this.footerNodePosition||this.isSkipFooter?Ri(!0):this.appendElementToFragment(this.footerNodePosition,t,e,n)},e.appendElementToFragment=function(t,e,n,i){var u=this,r=e.viewNode,o=e.viewNode.ownerDocument.createElement("div");r.appendChild(o);var a=new Dl(i,o,e),s=a.getColumn().pageBreakType;return a.getColumn().pageBreakType=null,this.allowInsertRepeatitiveElements=!0,a.layout(new Or(t),!0).thenAsync((function(){return u.allowInsertRepeatitiveElements=!1,r.removeChild(o),u.moveChildren(o,r,n),a.getColumn().pageBreakType=s,Ri(!0)}))},e.moveChildren=function(t,e,n){if(e)for(;t.firstChild;){var i=t.firstChild;t.removeChild(i),i.setAttribute(Er,"1"),n?e.insertBefore(i,n):e.appendChild(i)}},e.calculateOffset=function(t){var e=0;return t&&!this.affectTo(t)||((!this.isSkipFooter||t&&this.isAfterLastContent(t))&&(e+=this.footerHeight),this.isSkipHeader||(e+=this.headerHeight)),e},e.calculateMinimumOffset=function(t){var e=0;return t&&!this.affectTo(t)||(t&&this.isAfterLastContent(t)&&(e+=this.footerHeight),this.enableSkippingHeader||(e+=this.headerHeight)),e},e.isAfterLastContent=function(t){var e=this;return this.findResultFromCache(t,this.afterLastContentNodeCache,(function(n){return e.isAfterNodeContextOf(e.lastContentSourceNode,t,!1)}))},e.affectTo=function(t){var e=this;return this.findResultFromCache(t,this.affectedNodeCache,(function(n){return e.isAfterNodeContextOf(e.ownerSourceNode,t,!0)}))},e.findResultFromCache=function(t,e,n){var i=e.filter((function(e){return e.nodeContext.sourceNode===t.sourceNode&&e.nodeContext.after===t.after}));if(i.length>0)return i[0].result;var u=n(t);return e.push({nodeContext:t,result:u}),u},e.isAfterNodeContextOf=function(t,e,n){for(var i=[],u=t;u;u=u.parentNode){if(e.sourceNode===u)return e.after;i.push(u)}for(var r=e.sourceNode;r;r=r.parentNode){var o=i.indexOf(r);if(o>=0)return!!n&&0===o;for(var a=r;a;a=a.previousElementSibling)if(i.includes(a))return!0}return e.after},e.isFirstContentNode=function(t){return t&&this.firstContentSourceNode===t.sourceNode},e.isEnableToUpdateState=function(){return!!(!this.isSkipFooter&&this.enableSkippingFooter&&this.footerNodePosition||!this.isSkipHeader&&this.enableSkippingHeader&&this.headerNodePosition)},e.updateState=function(){!this.isSkipFooter&&this.enableSkippingFooter&&this.footerNodePosition?this.isSkipFooter=!0:!this.isSkipHeader&&this.enableSkippingHeader&&this.headerNodePosition&&(this.isSkipHeader=!0)},e.preventSkippingHeader=function(){this.isSkipHeader=!1,this.enableSkippingHeader=!1},e.preventSkippingFooter=function(){this.isSkipFooter=!1,this.enableSkippingFooter=!1},e.isHeaderRegistered=function(){return!!this.headerNodePosition},e.isFooterRegistered=function(){return!!this.footerNodePosition},e.isHeaderSourceNode=function(t){return this.headerSourceNode===t},e.isFooterSourceNode=function(t){return this.footerSourceNode===t},t}(),Fl=function(){function t(t){this.formattingContext=void 0,this.formattingContext=t}var e=t.prototype;return e.accept=function(t,e){return!!t},e.postLayout=function(t,e,n,i){var u=this.formattingContext.getRepetitiveElements();return u&&(u.doneInitialLayout||(u.updateHeight(n),u.doneInitialLayout=!0)),i},t}(),ml=function(){function t(t){this.formattingContext=void 0,this.formattingContext=t}var e=t.prototype;return e.accept=function(t,e){return!0},e.postLayout=function(t,e,n,i){return i},t}(),Al=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).processor=void 0,i.processor=n,i}N(e,t);var n=e.prototype;return n.doLayout=function(t,e){return this.processor.doInitialLayout(t,e)},n.accept=function(t,e){return!1},e}(Fl),bl=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).processor=void 0,i.processor=n,i}return N(e,t),e.prototype.doLayout=function(t,e){return t.belongsTo(this.formattingContext)||t.after||e.fragmentLayoutConstraints.unshift(new yl(t)),this.processor.doLayout(t,e)},e}(ml),yl=function(){function t(t){this.flagmentLayoutConstraintType="RepetitiveElementsOwner",this.nodeContext=void 0,this.nodeContext=t.formattingContext.getRootNodeContext(t)}var e=t.prototype;return e.allowLayout=function(t,e,n){var i=this.getRepetitiveElements();return!(i&&!vs(this.nodeContext.viewNode)&&i.isEnableToUpdateState()&&(e&&!t||t&&t.overflow))},e.nextCandidate=function(t){var e=this.getRepetitiveElements();return!!e&&!!e.isEnableToUpdateState()&&(e.updateState(),!0)},e.postLayout=function(t,e,n,i){var u=this.getRepetitiveElements();u&&t&&i.stopAtOverflow&&(null==e||u.isAfterLastContent(e))&&u.preventSkippingFooter()},e.finishBreak=function(t,e){var n=this.nodeContext.formattingContext,i=this.getRepetitiveElements();if(!i)return Ri(!0);var u=this.nodeContext;return function(t,e,n){var i=t.getRepetitiveElements();if(i){var u=t.getRootNodeContext(e);if(u.viewNode)return i.appendHeaderToFragment(u,u.viewNode.firstChild,n)}return Ri(!0)}(n,u,e).thenAsync((function(){return function(t,e,n){var i=t.getRepetitiveElements();if(i&&!i.isSkipFooter){var u=t.getRootNodeContext(e);if(u.viewNode)return i.appendFooterToFragment(u,null,n)}return Ri(!0)}(n,u,e).thenAsync((function(){return i.prepareLayoutFragment(),Ri(!0)}))}))},e.getRepetitiveElements=function(){return this.nodeContext.formattingContext.getRepetitiveElements()},e.equalsTo=function(e){return e instanceof t&&this.nodeContext.formattingContext===e.nodeContext.formattingContext},e.getPriorityOfFinishBreak=function(){return 10},t}(),Bl=function(t){function e(e,n){var i;return(i=t.call(this)||this).formattingContext=void 0,i.processor=void 0,i.formattingContext=e,i.processor=n,i}return N(e,t),e.prototype.resolveLayoutMode=function(t){var e=this.formattingContext.getRepetitiveElements();return t.belongsTo(this.formattingContext)||e.doneInitialLayout?(t.belongsTo(this.formattingContext)||t.after||e&&e.preventSkippingHeader(),new bl(this.formattingContext,this.processor)):new Al(this.formattingContext,this.processor)},e}(ks),wl=function(t){function e(e,n){var i;return(i=t.call(this)||this).formattingContext=void 0,i.column=void 0,i.formattingContext=e,i.column=n,i}N(e,t);var n=e.prototype;return n.startNonInlineElementNode=function(t){var e=this.formattingContext,n=t.nodeContext,i=e.getRepetitiveElements();if(n.parent&&e.rootSourceNode===n.parent.sourceNode){switch(n.repeatOnBreak){case"header":if(!i.isHeaderRegistered())return i.setHeaderNodeContext(n),Ri(!0);n.repeatOnBreak="none";break;case"footer":if(!i.isFooterRegistered())return i.setFooterNodeContext(n),Ri(!0);n.repeatOnBreak="none"}i.firstContentSourceNode||(i.firstContentSourceNode=n.sourceNode)}return Ls.prototype.startNonInlineElementNode.call(this,t)},n.afterNonInlineElementNode=function(t){var e=this.formattingContext,n=t.nodeContext;return n.sourceNode===e.rootSourceNode&&(e.getRepetitiveElements().lastContentSourceNode=t.lastAfterNodeContext&&t.lastAfterNodeContext.sourceNode,t.break=!0),"header"===n.repeatOnBreak||"footer"===n.repeatOnBreak?Ri(!0):Ls.prototype.afterNonInlineElementNode.call(this,t)},e}(Ls);function Sl(t,e){t&&function(t,e){for(var n=t;n;n=n.parent){var i=n.formattingContext;i&&i instanceof Cl&&!n.belongsTo(i)&&e(i,n)}}(t.after?t.parent:t,(function(t,n){ir.isInstanceOfTableFormattingContext(t)||e.fragmentLayoutConstraints.push(new yl(n))}))}var Nl=new(function(t){function e(){return t.apply(this,arguments)||this}N(e,t);var n=e.prototype;return n.layout=function(t,e,n){if(e.isFloatNodeContext(t))return e.layoutFloatOrFootnote(t);var i=t.formattingContext;return i.getRootViewNode(t)?(n&&Sl(t.parent,e),t.belongsTo(i)?xs.prototype.layout.call(this,t,e,n):new Bl(i,this).layout(t,e)):e.buildDeepElementView(t)},n.startNonInlineElementNode=function(t){var e=function(t){var e=t.formattingContext;return e&&e instanceof Cl?e:null}(t),n=e.getRepetitiveElements();return!!n&&(n.allowInsertRepeatitiveElements||!n.isHeaderSourceNode(t.sourceNode)&&!n.isFooterSourceNode(t.sourceNode)||t.viewNode.parentNode.removeChild(t.viewNode),!1)},n.doInitialLayout=function(t,e){var n=Oi("BlockLayoutProcessor.doInitialLayout");return this.layoutEntireBlock(t,e).thenFinish(n),n.result()},n.layoutEntireBlock=function(t,e){var n=new wl(t.formattingContext,e);return new Rs(n,e.layoutContext).iterate(t)},n.doLayout=function(t,e){var n=t.formattingContext,i=Oi("doLayout");return sl(e.layoutContext.nextInTree(t,!1),e).then((function(t){var u=t;i.loopWithFrame((function(t){for(var i=function(){var i=!0;if(e.layoutNext(u,!1).then((function(r){u=r,e.pageFloatLayoutContext.isInvalidated()||e.pageBreakType||u&&e.stopByOverflow(u)||u&&u.after&&u.sourceNode==n.rootSourceNode?t.breakLoop():i?i=!1:t.continueLoop()})),i)return i=!1,{v:void 0}};u;){var r=i();if("object"==typeof r)return r.v}t.breakLoop()})).then((function(){i.finish(u)}))})),i.result()},n.finishBreak=function(t,e,n,i){return xs.prototype.finishBreak.call(this,t,e,n,i)},n.clearOverflownViewNodes=function(t,e,n,i){xs.prototype.clearOverflownViewNodes(t,e,n,i)},e}(xs));d(t.HOOKS.RESOLVE_LAYOUT_PROCESSOR,(function(t){return t instanceof Cl&&!ir.isInstanceOfTableFormattingContext(t)?Nl:null}));var xl=function(){function t(t,e){this.rowIndex=void 0,this.sourceNode=void 0,this.cells=[],this.rowIndex=t,this.sourceNode=e}var e=t.prototype;return e.addCell=function(t){this.cells.push(t)},e.getMinimumHeight=function(){return Math.min.apply(null,this.cells.map((function(t){return t.height})))},t}(),Tl=function(){function t(t,e,n){this.rowIndex=void 0,this.columnIndex=void 0,this.viewElement=void 0,this.colSpan=void 0,this.rowSpan=void 0,this.height=0,this.anchorSlot=null,this.rowIndex=t,this.columnIndex=e,this.viewElement=n,this.colSpan=n.colSpan||1,this.rowSpan=n.rowSpan||1}var e=t.prototype;return e.setHeight=function(t){this.height=t},e.setAnchorSlot=function(t){this.anchorSlot=t},t}(),Il=function(t,e,n){this.rowIndex=void 0,this.columnIndex=void 0,this.cell=void 0,this.rowIndex=t,this.columnIndex=e,this.cell=n},Pl=function(){function t(t,e,n){this.column=void 0,this.cellNodeContext=void 0,this.pseudoColumn=void 0,this.empty=!1,this.column=t,this.cellNodeContext=n,this.pseudoColumn=new Dl(t,e,n)}return t.prototype.findAcceptableBreakPosition=function(){var t=this.cellNodeContext.viewNode,e=t.style,n=e.verticalAlign,i=e.alignContent;"top"!==n&&"baseline"!==n&&tt(t,"vertical-align","top"),i&&"normal"!==i&&tt(t,"align-content","normal");var u=this.pseudoColumn.findAcceptableBreakPosition(!0);return tt(t,"vertical-align",n),i&&"normal"!==i&&tt(t,"align-content",i),u},t}(),kl=function(t,e){this.viewNode=void 0,this.side=void 0,this.viewNode=t,this.side=e},Ol=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e,n,i,u)||this).formattingContext=void 0,r.acceptableCellBreakPositions=null,r.rowIndex=null,r.formattingContext=e.formattingContext,r}N(e,t);var n=e.prototype;return n.findAcceptableBreak=function(e,n){var i=t.prototype.findAcceptableBreak.call(this,e,n);return n<this.getMinBreakPenalty()?null:this.getAcceptableCellBreakPositions().every((function(t){return!!t.nodeContext}))?i:null},n.getMinBreakPenalty=function(){var e=t.prototype.getMinBreakPenalty.call(this);return this.getAcceptableCellBreakPositions().forEach((function(t){e+=t.breakPosition.getMinBreakPenalty()})),e},n.getAcceptableCellBreakPositions=function(){if(!this.acceptableCellBreakPositions){var t=this.getCellFragments();this.acceptableCellBreakPositions=t.map((function(t){return t.findAcceptableBreakPosition()}))}return this.acceptableCellBreakPositions},n.getRowIndex=function(){return null!=this.rowIndex?this.rowIndex:this.rowIndex=this.formattingContext.findRowIndexBySourceNode(this.position.sourceNode)},n.getCellFragments=function(){return this.formattingContext.getRowSpanningCellsOverflowingTheRow(this.getRowIndex()).map(this.formattingContext.getCellFragmentOfCell,this.formattingContext)},e}(Ss),Rl=function(t){function e(e,n,i){var u;return(u=t.call(this)||this).rowIndex=void 0,u.beforeNodeContext=void 0,u.formattingContext=void 0,u.acceptableCellBreakPositions=null,u.rowIndex=e,u.beforeNodeContext=n,u.formattingContext=i,u}N(e,t);var n=e.prototype;return n.findAcceptableBreak=function(t,e){if(e<this.getMinBreakPenalty())return null;var n=this.getCellFragments(),i=this.getAcceptableCellBreakPositions(),u=i.every((function(t){return!!t.nodeContext}))&&i.some((function(t,e){var i=n[e].pseudoColumn,u=t.nodeContext;return!i.isStartNodeContext(u)&&!i.isLastAfterNodeContext(u)}));return this.beforeNodeContext.overflow=i.some((function(t){return t.nodeContext&&t.nodeContext.overflow})),u?this.beforeNodeContext:null},n.getMinBreakPenalty=function(){var t=this.formattingContext,e=t.getRowByIndex(this.rowIndex),n=0;return t.isFreelyFragmentableRow(e)||(n+=10),this.getAcceptableCellBreakPositions().forEach((function(t){n+=t.breakPosition.getMinBreakPenalty()})),n},n.getAcceptableCellBreakPositions=function(){if(!this.acceptableCellBreakPositions){var t=this.getCellFragments();this.acceptableCellBreakPositions=t.map((function(t){return t.findAcceptableBreakPosition()}))}return this.acceptableCellBreakPositions},n.getCellFragments=function(){return this.formattingContext.getCellsFallingOnRow(this.rowIndex).map(this.formattingContext.getCellFragmentOfCell,this.formattingContext)},e}(Bs),Ll=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).tableSourceNode=void 0,i.formattingContextType="Table",i.vertical=!1,i.columnCount=-1,i.tableWidth=0,i.captions=[],i.colGroups=null,i.colWidths=null,i.inlineBorderSpacing=0,i.rows=[],i.slots=[],i.cellFragments=[],i.lastRowViewNode=null,i.cellBreakPositions=[],i.repetitiveElements=null,i.tableSourceNode=n,i}N(e,t);var n=e.prototype;return n.getName=function(){return"Table formatting context (Table.TableFormattingContext)"},n.isFirstTime=function(t,e){if(!e)return e;switch(t.display){case"table-row":return 0===this.cellBreakPositions.length;case"table-cell":return!this.cellBreakPositions.some((function(e){return e.cellNodePosition.steps[0].node===t.sourceNode}));default:return e}},n.getParent=function(){return this.parent},n.finishFragment=function(){this.cellFragments=[]},n.addRow=function(t,e){this.rows[t]=e},n.getRowSlots=function(t){var e=this.slots[t];return e||(e=this.slots[t]=[]),e},n.addCell=function(t,e){var n=this.rows[t];n||(this.addRow(t,new xl(t,null)),n=this.rows[t]),n.addCell(e);for(var i=t+e.rowSpan,u=this.getRowSlots(t),r=0;u[r];)r++;for(;t<i;t++){u=this.getRowSlots(t);for(var o=r;o<r+e.colSpan;o++){var a=u[o]=new Il(t,o,e);e.anchorSlot||e.setAnchorSlot(a)}}},n.getRowByIndex=function(t){return this.rows[t]},n.findRowIndexBySourceNode=function(t){return this.rows.findIndex((function(e){return t===e.sourceNode}))},n.addCellFragment=function(t,e,n){var i=this.cellFragments[t];i||(i=this.cellFragments[t]=[]),i[e]=n},n.getCellsFallingOnRow=function(t){return this.getRowSlots(t).reduce((function(t,e){return e.cell!==t[t.length-1]?t.concat(e.cell):t}),[])},n.getRowSpanningCellsOverflowingTheRow=function(t){return this.getCellsFallingOnRow(t).filter((function(e){return e.rowIndex+e.rowSpan-1>t}))},n.getCellFragmentOfCell=function(t){return this.cellFragments[t.rowIndex]&&this.cellFragments[t.rowIndex][t.columnIndex]},n.isFreelyFragmentableRow=function(t){return t.getMinimumHeight()>this.tableWidth/2},n.getColumnCount=function(){return this.columnCount<0&&(this.columnCount=Math.max.apply(null,this.rows.map((function(t){return t.cells.reduce((function(t,e){return t+e.colSpan}),0)})))),this.columnCount},n.updateCellSizes=function(t){var e=this;this.rows.forEach((function(n){n.cells.forEach((function(n){var i=t.getElementClientRect(n.viewElement);n.viewElement=null,n.setHeight(e.vertical?i.width:i.height)}))}))},n.findCellFromColumn=function(t){if(!t)return null;var e=null,n=0,i=0;t:for(n=0;n<this.cellFragments.length;n++)if(this.cellFragments[n])for(i=0;i<this.cellFragments[n].length;i++)if(this.cellFragments[n][i]&&t===this.cellFragments[n][i].pseudoColumn.getColumn()){e=this.rows[n].cells[i];break t}if(!e)return null;for(;n<this.slots.length;n++)for(;i<this.slots[n].length;i++){var u=this.slots[n][i];if(u.cell===e)return{rowIndex:u.rowIndex,columnIndex:u.columnIndex}}return null},n.collectElementsOffsetOfUpperCells=function(t){var e=this,n=[];return this.slots.reduce((function(i,u,r){if(r>=t.rowIndex)return i;var o=u[t.columnIndex]&&e.getCellFragmentOfCell(u[t.columnIndex].cell);return!o||n.includes(o)||(e.collectElementsOffsetFromColumn(o.pseudoColumn.getColumn(),i),n.push(o)),i}),[])},n.collectElementsOffsetOfHighestColumn=function(){var t=this,e=[];return this.rows.forEach((function(n){n.cells.forEach((function(n,i){e[i]||(e[i]={collected:[],elements:[]});var u=e[i],r=t.getCellFragmentOfCell(n);r&&!u.collected.includes(r)&&(t.collectElementsOffsetFromColumn(r.pseudoColumn.getColumn(),u.elements),u.collected.push(r))}))})),[new _l(e.map((function(t){return t.elements})))]},n.collectElementsOffsetFromColumn=function(t,e){t.fragmentLayoutConstraints.forEach((function(t){if(nr.isInstanceOfRepetitiveElementsOwnerLayoutConstraint(t)){var n=t.getRepetitiveElements();e.push(n)}ir.isInstanceOfTableRowLayoutConstraint(t)&&t.getElementsOffsetsForTableCell(null).forEach((function(t){e.push(t)}))}))},n.saveState=function(){return[].concat(this.cellBreakPositions)},n.restoreState=function(t){this.cellBreakPositions=t},e}(Cl),_l=function(){function t(t){this.repeatitiveElementsInColumns=void 0,this.repeatitiveElementsInColumns=t}var e=t.prototype;return e.calculateOffset=function(t){return this.calculateMaxOffsetOfColumn(t,(function(t){return t.current}))},e.calculateMinimumOffset=function(t){return this.calculateMaxOffsetOfColumn(t,(function(t){return t.minimum}))},e.calculateMaxOffsetOfColumn=function(t,e){var n=0;return this.repeatitiveElementsInColumns.forEach((function(i){var u=ws(t,i);n=Math.max(n,e(u))})),n},t}();function Ml(t){return function(t){return"table-row-group"===t||"table-header-group"===t||"table-footer-group"===t}(t)||function(t){return"table"===t||"inline-table"===t}(t)}function Ul(t,e,n){var i=t.nodeContext,u=i.display,r=i.parent?i.parent.display:null,o=!1;if("inline-table"===r&&!(i.formattingContext instanceof Ll))for(var a=i.parent;a;a=a.parent)if(a.formattingContext instanceof Ll){o=a.formattingContext===e;break}return o||"table-row"===u&&!Ml(r)||"table-cell"===u&&"table-row"!==r&&!Ml(r)||i.formattingContext instanceof Ll&&i.formattingContext!==e?n.buildDeepElementView(i).thenAsync((function(e){return t.nodeContext=e,Ri(!0)})):null}var Vl=function(t){function e(e,n){var i;return(i=t.call(this)||this).formattingContext=void 0,i.column=void 0,i.rowIndex=-1,i.columnIndex=0,i.inRow=!1,i.checkPoints=[],i.inHeaderOrFooter=!1,i.formattingContext=e,i.column=n,i}N(e,t);var n=e.prototype;return n.startNonInlineElementNode=function(e){var n=this.formattingContext,i=Ul(e,n,this.column);if(i)return i;this.postLayoutBlockContents(e);var u=e.nodeContext,r=u.display,o=n.getRepetitiveElements();switch(r){case"table":n.inlineBorderSpacing=u.inlineBorderSpacing;break;case"table-caption":var a=new kl(u.viewNode,u.captionSide);n.captions.push(a);break;case"table-header-group":return o.isHeaderRegistered()||(this.inHeaderOrFooter=!0,o.setHeaderNodeContext(u)),Ri(!0);case"table-footer-group":return o.isFooterRegistered()||(this.inHeaderOrFooter=!0,o.setFooterNodeContext(u)),Ri(!0);case"table-row":this.inHeaderOrFooter||(this.inRow=!0,this.rowIndex++,this.columnIndex=0,n.addRow(this.rowIndex,new xl(this.rowIndex,u.sourceNode)),o.firstContentSourceNode||(o.firstContentSourceNode=u.sourceNode))}return t.prototype.startNonInlineElementNode.call(this,e)},n.afterNonInlineElementNode=function(e){var n=this.formattingContext,i=e.nodeContext,u=i.display,r=this.column.clientLayout;if(this.postLayoutBlockContents(e),i.sourceNode===n.tableSourceNode){var o=r.getElementComputedStyle(n.getRootViewNode(i));n.tableWidth=parseFloat(o[n.vertical?"height":"width"]),n.getRepetitiveElements().lastContentSourceNode=e.lastAfterNodeContext&&e.lastAfterNodeContext.sourceNode,e.break=!0}else switch(u){case"table-header-group":case"table-footer-group":if(this.inHeaderOrFooter)return this.inHeaderOrFooter=!1,Ri(!0);break;case"table-row":this.inHeaderOrFooter||(n.lastRowViewNode=i.viewNode,this.inRow=!1);break;case"table-cell":this.inHeaderOrFooter||(this.inRow||(this.rowIndex++,this.columnIndex=0,this.inRow=!0),n.addCell(this.rowIndex,new Tl(this.rowIndex,this.columnIndex,i.viewNode)),this.columnIndex++)}return t.prototype.afterNonInlineElementNode.call(this,e)},n.startNonElementNode=function(t){this.registerCheckPoint(t)},n.afterNonElementNode=function(t){this.registerCheckPoint(t)},n.startInlineElementNode=function(t){this.registerCheckPoint(t)},n.afterInlineElementNode=function(t){this.registerCheckPoint(t)},n.registerCheckPoint=function(t){var e=t.nodeContext;e&&e.viewNode&&!bs(e)&&this.checkPoints.push(e.clone())},n.postLayoutBlockContents=function(t){this.checkPoints.length>0&&this.column.postLayoutBlock(t.nodeContext,this.checkPoints),this.checkPoints=[]},e}(Ls),zl=function(t){function e(e,n){var i;return(i=t.call(this,!0)||this).formattingContext=void 0,i.column=void 0,i.inRow=!1,i.currentRowIndex=-1,i.currentColumnIndex=0,i.originalStopAtOverflow=void 0,i.inHeader=void 0,i.inFooter=void 0,i.formattingContext=e,i.column=n,i.originalStopAtOverflow=n.stopAtOverflow,n.stopAtOverflow=!1,i}N(e,t);var n=e.prototype;return n.resetColumn=function(){this.column.stopAtOverflow=this.originalStopAtOverflow},n.getColSpanningCellWidth=function(t){for(var e=this.formattingContext.colWidths,n=0,i=0;i<t.colSpan;i++)n+=e[t.anchorSlot.columnIndex+i];return n+this.formattingContext.inlineBorderSpacing*(t.colSpan-1)},n.layoutCell=function(t,e,n){var i=t.rowIndex,u=t.columnIndex,r=e.viewNode;t.colSpan>1&&(tt(r,"box-sizing","border-box"),tt(r,this.formattingContext.vertical?"height":"width",this.getColSpanningCellWidth(t)+"px"));var o=r.ownerDocument.createElement("div");r.appendChild(o);var a=new Pl(this.column,o,e);return this.formattingContext.addCellFragment(i,u,a),1===n.primary.steps.length&&n.primary.after&&(a.empty=!0),a.pseudoColumn.layout(n,!0).thenReturn(!0)},n.hasBrokenCellAtSlot=function(t){var e=this.formattingContext.cellBreakPositions[0];return!!e&&e.cell.anchorSlot.columnIndex===t},n.extractRowSpanningCellBreakPositions=function(){var t=this.formattingContext.cellBreakPositions;if(0===t.length)return[];var e=[],n=0;do{var i=t[n],u=i.cell.rowIndex;if(u<this.currentRowIndex){var r=e[u];r||(r=e[u]=[]),r.push(i),t.splice(n,1)}else n++}while(n<t.length);return e},n.layoutRowSpanningCellsFromPreviousFragment=function(t){var e=this,n=this.formattingContext,i=this.extractRowSpanningCellBreakPositions(),u=i.reduce((function(t){return t+1}),0);if(0===u)return Ri(!0);var r=this.column.layoutContext,o=t.nodeContext;o.viewNode.parentNode.removeChild(o.viewNode);var a=Oi("layoutRowSpanningCellsFromPreviousFragment"),s=Ri(!0),l=0,c=[];return i.forEach((function(t){s=s.thenAsync((function(){var i=Nr(t[0].cellNodePosition.steps[1],o.parent);return r.setCurrent(i,!1).thenAsync((function(){var o=Ri(!0),a=0;function s(t){for(;a<t;){if(!c.includes(a)){var e=i.viewNode.ownerDocument.createElement("td");tt(e,"padding","0"),i.viewNode.appendChild(e)}a++}}return t.forEach((function(t){o=o.thenAsync((function(){var n=t.cell;s(n.anchorSlot.columnIndex);var o=t.cellNodePosition,h=Nr(o.steps[0],i);return h.offsetInNode=o.offsetInNode,h.after=o.after,h.fragmentIndex=o.steps[0].fragmentIndex+1,r.setCurrent(h,!1).thenAsync((function(){for(var i=t.breakChunkPosition,r=0;r<n.colSpan;r++)c.push(a+r);return a+=n.colSpan,e.layoutCell(n,h,i).thenAsync((function(){return h.viewNode.rowSpan=n.rowIndex+n.rowSpan-e.currentRowIndex+u-l,Ri(!0)}))}))}))})),o.thenAsync((function(){return s(n.getColumnCount()),l++,Ri(!0)}))}))}))})),s.then((function(){r.setCurrent(o,!0,t.atUnforcedBreak).then((function(){a.finish(!0)}))})),a.result()},n.startTableRow=function(t){var e=this;if(this.inHeader||this.inFooter)return Ri(!0);var n=t.nodeContext,i=this.formattingContext;return this.currentRowIndex<0?this.currentRowIndex=i.findRowIndexBySourceNode(n.sourceNode):this.currentRowIndex++,this.currentColumnIndex=0,this.inRow=!0,this.layoutRowSpanningCellsFromPreviousFragment(t).thenAsync((function(){return e.registerCellFragmentIndex(),e.column.checkOverflowAndSaveEdgeAndBreakPosition(t.lastAfterNodeContext,null,!0,t.breakAtTheEdge)&&0===i.getRowSpanningCellsOverflowingTheRow(e.currentRowIndex-1).length&&(e.resetColumn(),n.overflow=!0,t.break=!0),Ri(!0)}))},n.registerCellFragmentIndex=function(){var t=this;this.formattingContext.getRowByIndex(this.currentRowIndex).cells.forEach((function(e){var n=t.formattingContext.cellBreakPositions[e.columnIndex];if(n&&n.cell.anchorSlot.columnIndex==e.anchorSlot.columnIndex){var i=n.cellNodePosition.steps[0],u=t.column.layoutContext.xmldoc.getElementOffset(i.node);il(u,i.fragmentIndex+1,1)}}))},n.startTableCell=function(t){var e=this;if(this.inHeader||this.inFooter)return Ri(!0);var n=t.nodeContext;this.inRow||(this.currentRowIndex<0?this.currentRowIndex=0:this.currentRowIndex++,this.currentColumnIndex=0,this.inRow=!0);var i=this.formattingContext.getRowByIndex(this.currentRowIndex).cells[this.currentColumnIndex];if(!i)return t.break=!0,Ri(!0);var u=n.copy().modify();u.after=!0,t.nodeContext=u;var r,o=Oi("startTableCell");if(this.hasBrokenCellAtSlot(i.anchorSlot.columnIndex)){var a=this.formattingContext.cellBreakPositions.shift();n.fragmentIndex=a.cellNodePosition.steps[0].fragmentIndex+1,r=Ri(a.breakChunkPosition)}else r=this.column.nextInTree(n,t.atUnforcedBreak).thenAsync((function(t){t.viewNode&&n.viewNode.removeChild(t.viewNode);var e=Sr(t,0);return Ri(new Or(e))}));return r.then((function(u){e.layoutCell(i,n,u).then((function(){e.afterNonInlineElementNode(t),e.currentColumnIndex++,o.finish(!0)}))})),o.result()},n.startNonInlineBox=function(t){var e=Ul(t,this.formattingContext,this.column);if(e)return e;var n=t.nodeContext,i=this.formattingContext.getRepetitiveElements(),u=n.display;return"table-header-group"===u&&i&&i.isHeaderSourceNode(n.sourceNode)?(this.inHeader=!0,Ri(!0)):"table-footer-group"===u&&i&&i.isFooterSourceNode(n.sourceNode)?(this.inFooter=!0,Ri(!0)):"table-row"===u?this.startTableRow(t):"table-cell"===u?this.startTableCell(t):Ri(!0)},n.endNonInlineBox=function(t){var e=t.nodeContext;if("table-row"===e.display&&(this.inRow=!1,!this.inHeader&&!this.inFooter)){var n=e.copy().modify();n.after=!1;var i=new Rl(this.currentRowIndex,n,this.formattingContext);this.column.breakPositions.push(i)}return Ri(!0)},n.afterNonInlineElementNode=function(n){var i=n.nodeContext,u=this.formattingContext.getRepetitiveElements(),r=i.display;if("table-header-group"===r?u&&!u.allowInsertRepeatitiveElements&&u.isHeaderSourceNode(i.sourceNode)?(this.inHeader=!1,i.viewNode.parentNode.removeChild(i.viewNode)):tt(i.viewNode,"display","table-row-group"):"table-footer-group"===r&&(u&&!u.allowInsertRepeatitiveElements&&u.isFooterSourceNode(i.sourceNode)?(this.inFooter=!1,i.viewNode.parentNode.removeChild(i.viewNode)):tt(i.viewNode,"display","table-row-group")),r&&e.ignoreList[r])i.viewNode.parentNode.removeChild(i.viewNode);else{if(i.sourceNode!==this.formattingContext.tableSourceNode)return t.prototype.afterNonInlineElementNode.call(this,n);i.overflow=this.column.checkOverflowAndSaveEdge(i,null),this.resetColumn(),n.break=!0}return Ri(!0)},e}(Ls);zl.ignoreList={"table-caption":!0,"table-column-group":!0,"table-column":!0};var Hl=[],Gl=function(){function t(){}var e=t.prototype;return e.layoutEntireTable=function(t,e){var n=new Vl(t.formattingContext,e);return new Rs(n,e.layoutContext).iterate(t)},e.getColumnWidths=function(t,e,n,i){for(var u=t.ownerDocument,r=u.createElement("tr"),o=[],a=0;a<e;a++){var s=u.createElement("td");r.appendChild(s),o.push(s)}t.parentNode.insertBefore(r,t.nextSibling);var l=o.map((function(t){var e=i.getElementClientRect(t);return Math.ceil(n?e.height:e.width)}));return t.parentNode.removeChild(r),l},e.getColGroupElements=function(t){for(var e=[],n=t.firstElementChild;n;)"colgroup"===n.localName&&e.push(n),n=n.nextElementSibling;return e},e.normalizeAndGetColElements=function(t){var e=[];return t.forEach((function(t){var n=t.span;t.removeAttribute("span");for(var i=t.firstElementChild;i;){if("col"===i.localName){var u=i.span;for(i.removeAttribute("span"),n-=u;u-- >1;){var r=i.cloneNode(!0);t.insertBefore(r,i),e.push(r)}e.push(i)}i=i.nextElementSibling}for(;n-- >0;)i=t.ownerDocument.createElement("col"),t.appendChild(i),e.push(i)})),e},e.addMissingColElements=function(t,e,n,i){if(t.length<n){var u=i.ownerDocument.createElement("colgroup");e.push(u);for(var r=t.length;r<n;r++){var o=i.ownerDocument.createElement("col");u.appendChild(o),t.push(o)}}},e.normalizeColGroups=function(t,e,n){var i=t.vertical,u=t.lastRowViewNode;if(u){t.lastRowViewNode=null;var r=u.ownerDocument.createDocumentFragment(),o=t.getColumnCount();if(o>0){var a=t.colWidths=this.getColumnWidths(u,o,i,n.clientLayout),s=this.getColGroupElements(e),l=this.normalizeAndGetColElements(s);this.addMissingColElements(l,s,o,e),l.forEach((function(t,e){tt(t,i?"height":"width",a[e]+"px")})),s.forEach((function(t){r.appendChild(t.cloneNode(!0))})),t.colGroups=r}else t.colGroups=r}},e.doInitialLayout=function(t,e){var n=this,i=t.formattingContext;i.vertical=t.vertical,i.initializeRepetitiveElements(t.vertical);var u,r,o,a=(u=t.sourceNode,r=Hl.findIndex((function(t){return t.root===u})),(o=Hl[r])?o.tableLayoutOption:null);!function(t){var e=Hl.findIndex((function(e){return e.root===t}));e>=0&&Hl.splice(e,1)}(t.sourceNode);var s=Oi("TableLayoutProcessor.doInitialLayout"),l=t.copy();return this.layoutEntireTable(t,e).then((function(u){var r=u.viewNode,o=e.clientLayout.getElementClientRect(r),c=e.vertical?o.left:o.bottom;if(c+=(e.vertical?-1:1)*ws(t,e.collectElementsOffset()).current,!(e.isOverflown(c)||a&&a.calculateBreakPositionsInside))return e.breakPositions.push(new Xl(l)),void s.finish(u);n.normalizeColGroups(i,r,e),i.updateCellSizes(e.clientLayout),s.finish(null)})),s.result()},e.addCaptions=function(t,e,n){var i=t.captions;i.forEach((function(t,u){t&&(e.insertBefore(t.viewNode,n),"top"===t.side&&(i[u]=null))}))},e.addColGroups=function(t,e,n){t.colGroups&&0===this.getColGroupElements(e).length&&e.insertBefore(t.colGroups.cloneNode(!0),n)},e.removeColGroups=function(t,e){if(t.colGroups&&e){var n=this.getColGroupElements(e);n&&n.forEach((function(t){e.removeChild(t)}))}},e.doLayout=function(t,e){var n=t.formattingContext,i=n.getRootViewNode(t),u=i.firstChild;this.addCaptions(n,i,u),this.addColGroups(n,i,u);var r=new zl(n,e),o=new Rs(r,e.layoutContext),a=Oi("TableFormattingContext.doLayout");return o.iterate(t).thenFinish(a),a.result()},e.layout=function(t,e,n){var i=t.formattingContext;return i.getRootViewNode(t)?(n&&Sl(t.parent,e),new jl(i,this).layout(t,e)):e.buildDeepElementView(t)},e.createEdgeBreakPosition=function(t,e,n,i){return new Ol(t,e,n,i)},e.startNonInlineElementNode=function(t){return!1},e.afterNonInlineElementNode=function(t,e){return!1},e.finishBreak=function(t,e,n,i){var u=e.formattingContext;if("table-row"===e.display){var r,o=u.findRowIndexBySourceNode(e.sourceNode);if(u.cellBreakPositions=[],(r=e.after?u.getRowSpanningCellsOverflowingTheRow(o):u.getCellsFallingOnRow(o)).length){var a=Oi("TableLayoutProcessor.finishBreak"),s=0;return a.loopWithFrame((function(t){if(s!==r.length){var e=r[s++],n=u.getCellFragmentOfCell(e),i=n.findAcceptableBreakPosition().nodeContext,a=n.cellNodeContext,l=a.toNodePosition(),c=new Or(i.toNodePosition());u.cellBreakPositions.push({cellNodePosition:l,breakChunkPosition:c,cell:e});var h=a.viewNode;n.column.layoutContext.processFragmentedBlockEdge(n.cellNodeContext),o<e.rowIndex+e.rowSpan-1&&(h.rowSpan=o-e.rowIndex+1),n.empty?t.continueLoop():n.pseudoColumn.finishBreak(i,!1,!0).then((function(){!function(t,e,n){var i=e.getRepetitiveElements();if(i){var u=e.vertical,r=t.column,o=t.pseudoColumn.getColumnElement(),a=t.cellNodeContext.viewNode,s=r.clientLayout.getElementClientRect(a),l=r.getComputedPaddingBorder(a);u?tt(o,"max-width",s.right-r.footnoteEdge-i.calculateOffset(n)-l.right+"px"):tt(o,"max-height",r.footnoteEdge-i.calculateOffset(n)-s.top-l.top+"px"),tt(o,"overflow","hidden")}}(n,u,i),t.continueLoop()}))}else t.breakLoop()})).then((function(){t.clearOverflownViewNodes(e,!1),t.layoutContext.processFragmentedBlockEdge(e),u.finishFragment(),a.finish(!0)})),a.result()}}return u.finishFragment(),Is.finishBreak(t,e,n,i)},e.clearOverflownViewNodes=function(t,e,n,i){xs.prototype.clearOverflownViewNodes(t,e,n,i)},t}(),jl=function(t){function e(e,n){var i;return(i=t.call(this)||this).tableFormattingContext=void 0,i.processor=void 0,i.tableFormattingContext=e,i.processor=n,i}N(e,t);var n=e.prototype;return n.resolveLayoutMode=function(t){var e=this.tableFormattingContext.getRepetitiveElements();return e&&e.doneInitialLayout?(t.sourceNode!==this.tableFormattingContext.tableSourceNode||t.after||e&&e.preventSkippingHeader(),new Kl(this.tableFormattingContext,this.processor)):new Wl(this.tableFormattingContext,this.processor)},n.clearNodes=function(e){t.prototype.clearNodes.call(this,e);var n=this.tableFormattingContext.getRootViewNode(e);this.processor.removeColGroups(this.tableFormattingContext,n)},n.restoreState=function(e,n){t.prototype.restoreState.call(this,e,n),this.tableFormattingContext.finishFragment()},e}(ks),Wl=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).processor=void 0,i.processor=n,i}return N(e,t),e.prototype.doLayout=function(t,e){return this.processor.doInitialLayout(t,e)},e}(Fl),Xl=function(t){function e(e){return t.call(this,e,null,e.overflow,0)||this}N(e,t);var n=e.prototype;return n.getMinBreakPenalty=function(){if(!this.isEdgeUpdated)throw new Error("EdgeBreakPosition.prototype.updateEdge not called");return(this.overflows?3:0)+(this.position.parent?this.position.parent.breakPenalty:0)},n.breakPositionChosen=function(t){t.fragmentLayoutConstraints.push(new $l(this.position.sourceNode))},e}(Ss),$l=function(){function t(t){this.tableRootNode=void 0,this.flagmentLayoutConstraintType="EntireTable",this.tableRootNode=t}var e=t.prototype;return e.allowLayout=function(t,e,n){return!1},e.nextCandidate=function(t){return!0},e.postLayout=function(t,e,n,i){Hl.push({root:e.sourceNode,tableLayoutOption:{calculateBreakPositionsInside:!0}})},e.finishBreak=function(t,e){return Ri(!0)},e.equalsTo=function(e){return e instanceof t&&e.tableRootNode===this.tableRootNode},e.getPriorityOfFinishBreak=function(){return 0},t}(),Kl=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).processor=void 0,i.processor=n,i}return N(e,t),e.prototype.doLayout=function(t,e){var n=this.formattingContext.getRepetitiveElements();if(n&&!n.isAfterLastContent(t)){var i=new ql(t);e.fragmentLayoutConstraints.some((function(t){return i.equalsTo(t)}))||e.fragmentLayoutConstraints.unshift(i)}return this.processor.doLayout(t,e)},e}(ml),ql=function(t){function e(e){var n;return(n=t.call(this,e)||this).flagmentLayoutConstraintType="TableRow",n.cellFragmentLayoutConstraints=[],n}N(e,t);var n=e.prototype;return n.allowLayout=function(t,e,n){var i=this.getRepetitiveElements();return!(i&&!n.pseudoParent&&!vs(this.nodeContext.viewNode)&&i.isEnableToUpdateState()&&(e&&!t||t&&t.overflow))},n.nextCandidate=function(e){return!!this.collectCellFragmentLayoutConstraints(e,this.nodeContext.formattingContext).some((function(t){return t.constraints.some((function(t){return t.nextCandidate(e)}))}))||t.prototype.nextCandidate.call(this,e)},n.postLayout=function(e,n,i,u){var r=this.nodeContext.formattingContext;if(this.cellFragmentLayoutConstraints=this.collectCellFragmentLayoutConstraints(n,r),this.cellFragmentLayoutConstraints.forEach((function(t){t.constraints.forEach((function(n){n.postLayout(e,t.breakPosition,i,u)}))})),!e){var o=r.getRootViewNode(this.nodeContext);(new Gl).removeColGroups(r,o),this.removeDummyRowNodes(i)}t.prototype.postLayout.call(this,e,n,i,u)},n.finishBreak=function(e,n){var i=this,u=Oi("finishBreak"),r=this.cellFragmentLayoutConstraints.reduce((function(t,e){return t.concat(e.constraints.map((function(t){return{constraint:t,breakPosition:e.breakPosition}})))}),[]),o=0;return u.loop((function(){if(o<r.length){var t=r[o++];return t.constraint.finishBreak(t.breakPosition,n).thenReturn(!0)}return Ri(!1)})).then((function(){u.finish(!0)})),u.result().thenAsync((function(){return t.prototype.finishBreak.call(i,e,n)}))},n.removeDummyRowNodes=function(t){if(t&&"table-row"===t.display&&t.viewNode)for(;t.viewNode.previousElementSibling;){var e=t.viewNode.previousElementSibling;e.parentNode&&e.parentNode.removeChild(e)}},n.collectCellFragmentLayoutConstraints=function(t,e){return this.getCellFragemnts(t,e).map((function(t){return{constraints:t.fragment.pseudoColumn.getColumn().fragmentLayoutConstraints,breakPosition:t.breakPosition}}))},n.getCellFragemnts=function(t,e){var n=Number.MAX_VALUE;t&&"table-row"===t.display&&(n=e.findRowIndexBySourceNode(t.sourceNode)+1),n=Math.min(e.cellFragments.length,n);for(var i=[],u=0;u<n;u++)e.cellFragments[u]&&e.cellFragments[u].forEach((function(t){t&&i.push({fragment:t,breakPosition:t.findAcceptableBreakPosition().nodeContext})}));return i},n.getElementsOffsetsForTableCell=function(t){var e=this.nodeContext.formattingContext,n=e.findCellFromColumn(t);return n?e.collectElementsOffsetOfUpperCells(n):e.collectElementsOffsetOfHighestColumn()},n.equalsTo=function(t){return t instanceof e&&this.nodeContext.formattingContext===t.nodeContext.formattingContext},e}(yl),Yl=new Gl;function Zl(t){return t.reduce((function(t,e){return t+e}),0)/t.length}d(t.HOOKS.RESOLVE_FORMATTING_CONTEXT,(function(t,e,n,i,u,r){if(!e)return null;if(n===Je.table){var o=t.parent;return new Ll(o?o.formattingContext:null,t.sourceNode)}return null})),d(t.HOOKS.RESOLVE_LAYOUT_PROCESSOR,(function(t){return t instanceof Ll?Yl:null}));var Ql=function(t,e){this.layoutResult=void 0,this.penalty=void 0,this.layoutResult=t,this.penalty=e};function Jl(t){return t.vertical?t.width:t.height}function tc(t,e){t.vertical?t.width=e:t.height=e}var ec=function(){function t(t,e,n){this.layoutContainer=void 0,this.columnGenerator=void 0,this.regionPageFloatLayoutContext=void 0,this.originalContainerBlockSize=void 0,this.layoutContainer=t,this.columnGenerator=e,this.regionPageFloatLayoutContext=n,this.originalContainerBlockSize=Jl(t)}var e=t.prototype;return e.balanceColumns=function(t){var e=this,n=Oi("ColumnBalancer#balanceColumns");this.preBalance(t),this.savePageFloatLayoutContexts(t),this.layoutContainer.clear();var i=[this.createTrialResult(t)];return n.loopWithFrame((function(t){e.hasNextCandidate(i)?(e.updateCondition(i),e.columnGenerator().then((function(n){e.savePageFloatLayoutContexts(n),e.layoutContainer.clear(),n?(i.push(e.createTrialResult(n)),t.continueLoop()):t.breakLoop()}))):t.breakLoop()})).then((function(){var t=i.reduce((function(t,e){return e.penalty<t.penalty?e:t}),i[0]);e.restoreContents(t.layoutResult),e.postBalance(),n.finish(t.layoutResult)})),n.result()},e.createTrialResult=function(t){var e=this.calculatePenalty(t);return new Ql(t,e)},e.preBalance=function(t){},e.postBalance=function(){tc(this.layoutContainer,this.originalContainerBlockSize)},e.savePageFloatLayoutContexts=function(t){var e=this.regionPageFloatLayoutContext.detachChildren();t&&(t.columnPageFloatLayoutContexts=e)},e.restoreContents=function(t){var e=this.layoutContainer.element;t.columns.forEach((function(t){e.appendChild(t.element)})),this.regionPageFloatLayoutContext.attachChildren(t.columnPageFloatLayoutContexts)},t}();function nc(t){var e=t[t.length-1];if(0===e.penalty)return!1;var n=t[t.length-2];if(n&&e.penalty>=n.penalty)return!1;var i=e.layoutResult.columns;return Math.max.apply(null,i.map((function(t){return t.computedBlockSize})))>Math.max.apply(null,i.map((function(t){return t.getMaxBlockSizeOfPageFloats()})))+1}function ic(t,e){var n=Math.max.apply(null,t[t.length-1].layoutResult.columns.map((function(t){return isNaN(t.blockDistanceToBlockEndFloats)?t.computedBlockSize:t.computedBlockSize-t.blockDistanceToBlockEndFloats+1})))-1;n<Jl(e)?tc(e,n):tc(e,Jl(e)-1)}var uc=function(t){function e(e,n,i,u){var r;return(r=t.call(this,i,e,n)||this).columnCount=void 0,r.originalPosition=null,r.foundUpperBound=!1,r.columnCount=u,r}N(e,t);var n=e.prototype;return n.preBalance=function(t){var e=t.columns.reduce((function(t,e){return t+e.computedBlockSize}),0);tc(this.layoutContainer,e/this.columnCount),this.originalPosition=t.position},n.checkPosition=function(t){return this.originalPosition?this.originalPosition.isSamePosition(t):null===t},n.calculatePenalty=function(t){if(!this.checkPosition(t.position))return 1/0;var e=t.columns;return rc(e)?1/0:Math.max.apply(null,e.map((function(t){return t.computedBlockSize})))},n.hasNextCandidate=function(t){if(1===t.length)return!0;if(this.foundUpperBound)return nc(t);var e=t[t.length-1];return this.checkPosition(e.layoutResult.position)&&!rc(e.layoutResult.columns)?(this.foundUpperBound=!0,!0):Jl(this.layoutContainer)<this.originalContainerBlockSize},n.updateCondition=function(t){if(this.foundUpperBound)ic(t,this.layoutContainer);else{var e=Math.min(this.originalContainerBlockSize,Jl(this.layoutContainer)+.1*this.originalContainerBlockSize);tc(this.layoutContainer,e)}},e}(ec);function rc(t){if(t.length<=1)return!1;var e=t[t.length-1].computedBlockSize;return t.slice(0,t.length-1).every((function(t){return e>t.computedBlockSize}))}var oc,ac=function(t){function e(e,n,i){return t.call(this,i,e,n)||this}N(e,t);var n=e.prototype;return n.calculatePenalty=function(t){if(t.columns.every((function(t){return 0===t.computedBlockSize})))return 1/0;var e,n,i=t.columns.filter((function(t){return!t.pageBreakType})).map((function(t){return t.computedBlockSize}));return n=Zl(e=i),Zl(e.map((function(t){var e=t-n;return e*e})))},n.hasNextCandidate=function(t){return nc(t)},n.updateCondition=function(t){ic(t,this.layoutContainer)},e}(ec),sc=function(t,e,n){this.endStuckFixed=void 0,this.endFixed=void 0,this.endSlipped=void 0,this.endStuckFixed=t,this.endFixed=e,this.endSlipped=n},lc=function(){function t(){this.map=[]}var e=t.prototype;return e.getMaxFixed=function(){return 0==this.map.length?0:this.map[this.map.length-1].endFixed},e.getMaxSlipped=function(){return 0==this.map.length?0:this.map[this.map.length-1].endSlipped},e.addStuckRange=function(t){if(0==this.map.length)this.map.push(new sc(t,t,t));else{var e=this.map[this.map.length-1],n=e.endSlipped+t-e.endFixed;e.endFixed==e.endStuckFixed?(e.endFixed=t,e.endStuckFixed=t,e.endSlipped=n):this.map.push(new sc(t,t,n))}},e.addSlippedRange=function(t){0==this.map.length?this.map.push(new sc(t,0,0)):this.map[this.map.length-1].endFixed=t},e.slippedByFixed=function(t){var e=this,n=ht(this.map.length,(function(n){return t<=e.map[n].endFixed})),i=this.map[n];return i.endSlipped-Math.max(0,i.endStuckFixed-t)},e.fixedBySlipped=function(t){var e=this,n=ht(this.map.length,(function(n){return t<=e.map[n].endSlipped})),i=this.map[n];return i.endStuckFixed-(i.endSlipped-t)},t}(),cc=function(){function t(e,n,i,u,r,o,a,s){if(this.context=void 0,this.style=void 0,this.offset=void 0,this.isRoot=void 0,this.flowChunk=void 0,this.atBlockStart=void 0,this.atFlowStart=void 0,this.isParentBoxDisplayed=void 0,this.flowName=void 0,this.isBlockValue=null,this.hasBoxValue=null,this.styleValues={},this.beforeBox=null,this.afterBox=null,this.breakBefore=null,this.context=e,this.style=n,this.offset=i,this.isRoot=u,this.flowChunk=r,this.atBlockStart=o,this.atFlowStart=a,this.isParentBoxDisplayed=s,this.flowName=r.flowName,this.hasBox()){var l=n._pseudos;if(l&&l.before){var c=new t(e,l.before,i,!1,r,this.isBlock(),a,!0);Vr(c.styleValue("content"))&&(this.beforeBox=c,this.breakBefore=c.breakBefore)}}this.breakBefore=ar(this.getBreakValue("before"),this.breakBefore),this.atFlowStart&&Yu(this.breakBefore)&&(r.breakBefore=ar(r.breakBefore,this.breakBefore))}var e=t.prototype;return e.buildAfterPseudoElementBox=function(e,n,i){if(this.hasBox()){var u=this.style._pseudos;if(u&&u.after){var r=new t(this.context,u.after,e,!1,this.flowChunk,n,i,!0);Vr(r.styleValue("content"))&&(this.afterBox=r)}}},e.styleValue=function(t,e){if(!(t in this.styleValues)){var n=this.style[t];this.styleValues[t]=n?n.evaluate(this.context,t):e||null}return this.styleValues[t]},e.displayValue=function(){return this.styleValue("display",Je.inline)},e.isBlock=function(){if(null===this.isBlockValue){var t=this.displayValue(),e=this.styleValue("position"),n=this.styleValue("float");this.isBlockValue=fs(t,e,n,this.isRoot)}return this.isBlockValue},e.hasBox=function(){return null===this.hasBoxValue&&(this.hasBoxValue=this.isParentBoxDisplayed&&this.displayValue()!==Je.none),this.hasBoxValue},e.getBreakValue=function(t){var e=null;if(this.isBlock()){var n=this.styleValue("break-"+t);n&&(e=n.toString())}return e},t}(),hc=function(){function t(t){this.context=void 0,this.stack=[],this.atBlockStart=!0,this.atFlowStart=!0,this.atStartStack=[],this.context=t}var e=t.prototype;return e.empty=function(){return 0===this.stack.length},e.lastBox=function(){return this.stack[this.stack.length-1]},e.lastFlowName=function(){var t=this.lastBox();return t?t.flowChunk.flowName:null},e.isCurrentBoxDisplayed=function(){return this.stack.every((function(t){return t.displayValue()!==Je.none}))},e.push=function(t,e,n,i){var u=this.lastBox();i&&u&&i.flowName!==u.flowName&&this.atStartStack.push({atBlockStart:this.atBlockStart,atFlowStart:this.atFlowStart});var r=i||u.flowChunk,o=this.atFlowStart||!!i,a=this.isCurrentBoxDisplayed(),s=new cc(this.context,t,e,n,r,o||this.atBlockStart,o,a);return this.stack.push(s),this.atBlockStart=s.hasBox()?!s.beforeBox&&s.isBlock():this.atBlockStart,this.atFlowStart=s.hasBox()?!s.beforeBox&&o:this.atFlowStart,s},e.encounteredTextNode=function(t){var e=this.lastBox();if((t.nodeType===Node.TEXT_NODE||t.nodeType===Node.CDATA_SECTION_NODE)&&(this.atBlockStart||this.atFlowStart)&&e.hasBox()){var n=vr(e.styleValue("white-space",Je.normal).toString());n&&!Fr(t,n)&&(this.atBlockStart=!1,this.atFlowStart=!1)}},e.pop=function(t){var e=this.stack.pop();if(e.buildAfterPseudoElementBox(t,this.atBlockStart,this.atFlowStart),this.atFlowStart&&e.afterBox){var n=e.afterBox.getBreakValue("before");e.flowChunk.breakBefore=ar(e.flowChunk.breakBefore,n)}var i=this.lastBox();if(i)if(i.flowName===e.flowName)e.hasBox()&&(this.atBlockStart=this.atFlowStart=!1);else{var u=this.atStartStack.pop();this.atBlockStart=u.atBlockStart,this.atFlowStart=u.atFlowStart}return e},e.nearestBlockStartOffset=function(t){if(!t.atBlockStart)return t.offset;var e=this.stack.length-1,n=this.stack[e];for(n===t&&(e--,n=this.stack[e]);e>=0;){if(n.flowName!==t.flowName)return t.offset;if(!n.atBlockStart)return n.offset;if(n.isRoot)return n.offset;t=n,n=this.stack[--e]}throw new Error("No block start offset found!")},t}(),Dc=function(){function t(t,e,n,i,u,r,o,a){this.xmldoc=void 0,this.scope=void 0,this.context=void 0,this.primaryFlows=void 0,this.validatorSet=void 0,this.counterListener=void 0,this.root=void 0,this.cascadeHolder=void 0,this.last=void 0,this.rootStyle={},this.styleMap={},this.flows={},this.flowChunks=[],this.flowListener=null,this.flowToReach=null,this.idToReach=null,this.cascade=void 0,this.offsetMap=void 0,this.primary=!0,this.primaryStack=[],this.rootBackgroundAssigned=!1,this.rootLayoutAssigned=!1,this.lastOffset=void 0,this.breakBeforeValues={},this.boxStack=void 0,this.bodyReached=!0,this.xmldoc=t,this.scope=n,this.context=i,this.primaryFlows=u,this.validatorSet=r,this.counterListener=o,this.root=t.root,this.cascadeHolder=e,this.last=this.root,this.cascade=e.createInstance(i,o,a,t.lang),this.offsetMap=new lc;var s=t.getElementOffset(this.root);this.lastOffset=s,this.boxStack=new hc(i),this.offsetMap.addStuckRange(s);var l=this.getAttrStyle(this.root);this.cascade.pushElement(this,this.root,l,s),this.postprocessTopStyle(l,!1),this.root.namespaceURI===G.XHTML&&(this.bodyReached=!1),this.primaryStack.push(!0),this.styleMap={},this.styleMap["e"+s]=l,this.lastOffset++,this.replayFlowElementsFromOffset(-1)}var e=t.prototype;return e.hasProp=function(t,e,n){var i=t[n];return i&&i.evaluate(this.context)!==e[n]},e.transferPropsToRoot=function(t,e){for(var n in e){var i=t[n];if(i)this.rootStyle[n]=i,delete t[n];else{var u=e[n];u&&(this.rootStyle[n]=new Qr(u,su))}}},e.postprocessTopStyle=function(t,e){if(e)for(var n=0,i=["writing-mode","direction"];n<i.length;n++){var u=i[n];!t[u]||e&&this.rootStyle[u]||(this.rootStyle[u]=t[u])}else for(var r in t)ro(r)&&(this.rootStyle[r]=t[r]);if(!this.rootBackgroundAssigned){var o=this.hasProp(t,this.validatorSet.backgroundProps,"background-color")?t["background-color"].evaluate(this.context):null,a=this.hasProp(t,this.validatorSet.backgroundProps,"background-image")?t["background-image"].evaluate(this.context):null;(o&&!an(o)||a&&!an(a))&&(this.transferPropsToRoot(t,this.validatorSet.backgroundProps),this.rootBackgroundAssigned=!0)}if(!this.rootLayoutAssigned)for(var s=0;s<dc.length;s++)if(this.hasProp(t,this.validatorSet.layoutProps,dc[s])){this.transferPropsToRoot(t,this.validatorSet.layoutProps),this.rootLayoutAssigned=!0;break}if(!e){var l,c=t["font-size"],h=!0;if(c&&!an(c.value)){var D=c.evaluate(this.context);if(D instanceof Ue){var d=D.num;switch(D.unit){case"em":case"rem":d*=this.context.initialFontSize;break;case"ex":d*=this.context.initialFontSize*Mt.ex/Mt.em;break;case"%":d*=this.context.initialFontSize/100;break;case"lh":case"rlh":d*=this.context.initialFontSize*Mt.lh/Mt.em;break;default:var f=Mt[D.unit];f&&(d*=f),h=!1}this.context.rootFontSize=d,this.context.isRelativeRootFontSize=h}}var p=null!=(l=this.context.rootFontSize)?l:this.context.initialFontSize,g=t["line-height"];if(g&&!an(g.value)){var E=g.evaluate(this.context);if(E instanceof Ve)this.context.rootLineHeight=E.num*p;else if(E instanceof Ue){var C=E.num;switch(E.unit){case"em":case"rem":C*=p;break;case"ex":C*=p*Mt.ex/Mt.em;break;case"%":C*=p/100;break;case"lh":case"rlh":C*=this.context.initialFontSize*Mt.lh/Mt.em;break;default:var v=Mt[E.unit];v&&(C*=v)}this.context.rootLineHeight=C}}else this.context.rootLineHeight=this.context.fontSize()*Mt.lh/Mt.em}},e.getTopContainerStyle=function(){for(var t=0;!this.bodyReached&&this.styleUntil(t+=5e3,0)!=Number.POSITIVE_INFINITY;);return this.rootStyle},e.getAttrStyle=function(t){if(t.style instanceof CSSStyleDeclaration){var e=t.getAttribute("style");if(e)return function(t,e,n,i){var u=new xa(t,e),r=new Ti(i,u);try{!function(t,e,n){new ku(Eu,t,e,n).runParser(Number.POSITIVE_INFINITY,!1,!0,!1,!1)}(r,u,n)}catch(t){h.warn(t,"Style attribute parse error:")}return u.elementStyle}(this.scope,this.validatorSet,this.xmldoc.url,e)}return{}},e.getReachedOffset=function(){return this.lastOffset},e.replayFlowElementsFromOffset=function(t){if(!(t>=this.lastOffset)){var e=this.context,n=this.xmldoc.getElementOffset(this.root);if(t<n){var i=this.getStyle(this.root,!1),u=oo(i,"flow-into"),r=u?u.evaluate(e,"flow-into").toString():"body",o=this.encounteredFlowElement(r,i,this.root,n);this.boxStack.empty()&&this.boxStack.push(i,n,!0,o)}var a=this.xmldoc.getNodeByOffset(t),s=this.xmldoc.getNodeOffset(a,0,!1);if(!(s>=this.lastOffset))for(;;){if(1!=a.nodeType)s+=a.textContent.length;else{var l=a,c=this.getStyle(l,!1),h=c["flow-into"];if(h){var D=h.evaluate(e,"flow-into").toString();this.encounteredFlowElement(D,c,l,s)}s++}if(s>=this.lastOffset)break;var d=a.firstChild;if(null==d)for(;!(d=a.nextSibling);)if((a=a.parentNode)===this.root)return;a=d}}},e.resetFlowChunkStream=function(t){this.flowListener=t;for(var e=0;e<this.flowChunks.length;e++)this.flowListener.encounteredFlowChunk(this.flowChunks[e],this.flows[this.flowChunks[e].flowName])},e.styleUntilFlowIsReached=function(t){this.flowToReach=t;for(var e=0;null!=this.flowToReach&&this.styleUntil(e+=5e3,0)!=Number.POSITIVE_INFINITY;);},e.styleUntilIdIsReached=function(t){if(t){this.idToReach=t;for(var e=0;this.idToReach&&this.styleUntil(e+=5e3,0)!==Number.POSITIVE_INFINITY;);this.idToReach=null}},e.encounteredFlowElement=function(t,e,n,i){var u=0,r=Number.POSITIVE_INFINITY,o=!1,a=!1,s=!1,l=e["flow-options"];if(l){var c=function(t){if(t){var e=new In;try{return t.visit(e),e.propSet}catch(t){h.warn(t,"toSet:")}}return{}}(l.evaluate(this.context,"flow-options"));o=!!c.exclusive,a=!!c.static,s=!!c.last}var D=e["flow-linger"];D&&(r=kn(D.evaluate(this.context,"flow-linger"),Number.POSITIVE_INFINITY));var d=e["flow-priority"];d&&(u=kn(d.evaluate(this.context,"flow-priority"),0));var f=this.breakBeforeValues[i]||null,p=this.flows[t];if(!p){var g=this.boxStack.lastFlowName();p=this.flows[t]=new mr(t,g)}var E=new Ar(t,n,i,u,r,o,a,s,f);return this.flowChunks.push(E),this.flowToReach==t&&(this.flowToReach=null),this.flowListener&&this.flowListener.encounteredFlowChunk(E,p),E},e.registerForcedBreakOffset=function(t,e,n){if(Yu(t)){var i=this.flows[n].forcedBreakOffsets;(0===i.length||i[i.length-1]<e)&&i.push(e)}this.breakBeforeValues[e]=ar(this.breakBeforeValues[e],t)},e.styleUntil=function(t,e){var n=-1;if(t<=this.lastOffset&&(n=this.offsetMap.slippedByFixed(t)+e)<this.offsetMap.getMaxSlipped())return this.offsetMap.fixedBySlipped(n);if(null==this.last)return Number.POSITIVE_INFINITY;for(var i=this.context;;){var u=this.last.firstChild;if(null==u)for(;;){if(1==this.last.nodeType){this.cascade.popElement(this.last),this.primary=this.primaryStack.pop();var r=this.boxStack.pop(this.lastOffset),o=null;if(r.afterBox){var a=r.afterBox.getBreakValue("before");this.registerForcedBreakOffset(a,r.afterBox.atBlockStart?this.boxStack.nearestBlockStartOffset(r):r.afterBox.offset,r.flowName),o=r.afterBox.getBreakValue("after")}o=ar(o,r.getBreakValue("after")),this.registerForcedBreakOffset(o,this.lastOffset,r.flowName)}if(u=this.last.nextSibling)break;if(this.last=this.last.parentNode,this.last===this.root)return this.last=null,t<this.lastOffset&&(n<0&&(n=this.offsetMap.slippedByFixed(t)+e),n<=this.offsetMap.getMaxSlipped())?this.offsetMap.fixedBySlipped(n):Number.POSITIVE_INFINITY}if(this.last=u,1!=this.last.nodeType)this.lastOffset+=this.last.textContent.length,this.boxStack.encounteredTextNode(this.last),this.primary?this.offsetMap.addStuckRange(this.lastOffset):this.offsetMap.addSlippedRange(this.lastOffset);else{var s=this.last,l=this.getAttrStyle(s);this.primaryStack.push(this.primary),this.cascade.pushElement(this,s,l,this.lastOffset);var c=s.getAttribute("id")||s.getAttributeNS(G.XML,"id");c&&c===this.idToReach&&(this.idToReach=null),this.bodyReached||"body"!=s.localName||s.parentNode!=this.root||(this.postprocessTopStyle(l,!0),this.bodyReached=!0);var h=void 0,D=l["flow-into"];if(D){var d=D.evaluate(i,"flow-into").toString(),f=this.encounteredFlowElement(d,l,s,this.lastOffset);this.primary=!!this.primaryFlows[d],h=this.boxStack.push(l,this.lastOffset,s===this.root,f)}else h=this.boxStack.push(l,this.lastOffset,s===this.root),s===this.xmldoc.body&&(h.breakBefore=ar(h.flowChunk.breakBefore,h.breakBefore));var p=this.boxStack.nearestBlockStartOffset(h);if(0===p){var g=l.page,E=g&&!an(g.value)&&g.value.toString();E&&"auto"!==E.toLowerCase()&&(this.cascade.firstPageType=E)}if(this.registerForcedBreakOffset(h.breakBefore,p,h.flowName),h.beforeBox){var C=h.beforeBox.getBreakValue("after");this.registerForcedBreakOffset(C,h.beforeBox.atBlockStart?p:h.offset,h.flowName)}if(this.primary&&h.displayValue()===Je.none&&(this.primary=!1),this.styleMap["e"+this.lastOffset]=l,this.lastOffset++,this.primary?this.offsetMap.addStuckRange(this.lastOffset):this.offsetMap.addSlippedRange(this.lastOffset),this.bodyReached&&0===p)continue;if(t<this.lastOffset&&(n<0&&(n=this.offsetMap.slippedByFixed(t)+e),n<=this.offsetMap.getMaxSlipped()))return this.offsetMap.fixedBySlipped(n)}}},e.getStyle=function(t,e){var n=this.xmldoc.getElementOffset(t),i="e"+n;return e&&(n=this.xmldoc.getNodeOffset(t,0,!0)),this.lastOffset<=n&&this.styleUntil(n,0),this.styleMap[i]},e.processContent=function(t,e,n){},t}(),dc=["column-count","column-width","column-fill"],fc=function(){function t(t){this.validator=void 0,this.success=null,this.failure=null,this.code=0,this.validator=t}var e=t.prototype;return e.isSpecial=function(){return 0!=this.code},e.markAsStartGroup=function(){this.code=-1},e.isStartGroup=function(){return-1==this.code},e.markAsEndGroup=function(){this.code=-2},e.isEndGroup=function(){return-2==this.code},e.markAsStartAlternate=function(t){this.code=2*t+1},e.isStartAlternate=function(){return this.code>0&&this.code%2!=0},e.markAsEndAlternate=function(t){this.code=2*t+2},e.isEndAlternate=function(){return this.code>0&&this.code%2==0},e.getAlternate=function(){return Math.floor((this.code-1)/2)},t}(),pc=function(t,e){this.where=void 0,this.success=void 0,this.what=-1,this.where=t,this.success=e};!function(t){t[t.FOLLOW=1]="FOLLOW",t[t.OPTIONAL=2]="OPTIONAL",t[t.REPEATED=3]="REPEATED",t[t.ALTERNATE=4]="ALTERNATE"}(oc||(oc={}));var gc=function(){function t(){this.nodes=[],this.connections=[],this.match=[],this.nomatch=[],this.error=[],this.emptyHead=!0}var e=t.prototype;return e.connect=function(t,e){for(var n=0;n<t.length;n++)this.connections[t[n]].what=e;t.splice(0,t.length)},e.clone=function(){for(var e,n,i,u=new t,r=0;r<this.nodes.length;r++){var o=this.nodes[r],a=new fc(o.validator);a.code=o.code,u.nodes.push(a)}for(var s=0;s<this.connections.length;s++){var l=this.connections[s],c=new pc(l.where,l.success);c.what=l.what,u.connections.push(c)}return(e=u.match).push.apply(e,this.match),(n=u.nomatch).push.apply(n,this.nomatch),(i=u.error).push.apply(i,this.error),u},e.addSpecialToArr=function(t,e,n){var i=this.nodes.length,u=new fc(Ac);n>=0?e?u.markAsStartAlternate(n):u.markAsEndAlternate(n):e?u.markAsStartGroup():u.markAsEndGroup(),this.nodes.push(u),this.connect(t,i);var r=new pc(i,!0),o=new pc(i,!1);t.push(this.connections.length),this.connections.push(o),t.push(this.connections.length),this.connections.push(r)},e.endSpecialGroup=function(){for(var t=[this.match,this.nomatch,this.error],e=0;e<t.length;e++)this.addSpecialToArr(t[e],!1,-1)},e.startSpecialGroup=function(){if(this.nodes.length)throw new Error("invalid call");this.addSpecialToArr(this.match,!0,-1)},e.endClause=function(t){this.addSpecialToArr(this.match,!1,t)},e.startClause=function(t){if(this.nodes.length)throw new Error("invalid call");var e=new fc(Ac);e.markAsStartAlternate(t),this.nodes.push(e);var n=new pc(0,!0),i=new pc(0,!1);this.nomatch.push(this.connections.length),this.connections.push(i),this.match.push(this.connections.length),this.connections.push(n)},e.addPrimitive=function(t){var e=this.nodes.length;this.nodes.push(new fc(t));var n=new pc(e,!0),i=new pc(e,!1);this.connect(this.match,e),this.emptyHead?(this.nomatch.push(this.connections.length),this.emptyHead=!1):this.error.push(this.connections.length),this.connections.push(i),this.match.push(this.connections.length),this.connections.push(n)},e.isSimple=function(){return 1==this.nodes.length&&!this.nodes[0].isSpecial()},e.isPrimitive=function(){return this.isSimple()&&this.nodes[0].validator instanceof Fc},e.addGroup=function(t,e){if(0!=t.nodes.length){var n=this.nodes.length;if(e==oc.ALTERNATE&&1==n&&t.isPrimitive()&&this.isPrimitive())this.nodes[0].validator=this.nodes[0].validator.combine(t.nodes[0].validator);else{for(var i=0;i<t.nodes.length;i++)this.nodes.push(t.nodes[i]);e==oc.ALTERNATE?(this.emptyHead=!0,this.connect(this.nomatch,n)):this.connect(this.match,n);for(var u=this.connections.length,r=0;r<t.connections.length;r++){var o=t.connections[r];o.where+=n,o.what>=0&&(o.what+=n),this.connections.push(o)}for(var a=0;a<t.match.length;a++)this.match.push(t.match[a]+u);if(e==oc.REPEATED&&this.connect(this.match,n),e==oc.OPTIONAL||e==oc.REPEATED)for(var s=0;s<t.nomatch.length;s++)this.match.push(t.nomatch[s]+u);else if(this.emptyHead){for(var l=0;l<t.nomatch.length;l++)this.nomatch.push(t.nomatch[l]+u);this.emptyHead=t.emptyHead}else for(var c=0;c<t.nomatch.length;c++)this.error.push(t.nomatch[c]+u);for(var h=0;h<t.error.length;h++)this.error.push(t.error[h]+u);t.nodes=null,t.connections=null}}},e.finish=function(t,e){var n=this.nodes.length;this.nodes.push(t),this.nodes.push(e),this.connect(this.match,n),this.connect(this.nomatch,n+1),this.connect(this.error,n+1);for(var i,u=R(this.connections);!(i=u()).done;){var r=i.value;r.success?this.nodes[r.where].success=this.nodes[r.what]:this.nodes[r.where].failure=this.nodes[r.what]}for(var o=0;o<n;o++)if(null==this.nodes[o].failure||null==this.nodes[o].success)throw new Error("Invalid validator state");return this.nodes[0]},t}(),Ec=256,Cc=512,vc=function(t){function e(){return t.call(this)||this}return N(e,t),e.prototype.validateForShorthand=function(t,e){var n=t[e].visit(this);return n?[n]:null},e}(Ne),Fc=function(t){function e(e,n,i){var u;return(u=t.call(this)||this).allowed=void 0,u.idents=void 0,u.units=void 0,u.allowed=e,u.idents=n,u.units=i,u}N(e,t);var n=e.prototype;return n.visitEmpty=function(t){return 1&this.allowed?t:null},n.visitSlash=function(t){return 2048&this.allowed?t:null},n.visitStr=function(t){return 2&this.allowed?t:null},n.visitIdent=function(t){return this.idents[t.name.toLowerCase()]||(4&this.allowed||64&this.allowed&&CSS.supports("color",t.name)?t:null)},n.visitNumeric=function(t){return 0!=t.num||this.allowed&Cc?t.num<0&&!(this.allowed&Ec)?null:this.units[t.unit]?t:null:"%"==t.unit&&1024&this.allowed?t:null},n.visitNum=function(t){return 0==t.num?this.allowed&Cc?t:null:t.num<=0&&!(this.allowed&Ec)?null:16&this.allowed?t:null},n.visitInt=function(t){return 0==t.num?this.allowed&Cc?t:null:t.num<=0&&!(this.allowed&Ec)?null:48&this.allowed?t:this.idents[""+t.num]||null},n.visitHexColor=function(t){return 64&this.allowed&&/^([0-9A-F]{3,4}|([0-9A-F]{2}){3,4})$/i.test(t.hex)?t:null},n.visitURL=function(t){return 128&this.allowed?t:null},n.visitURange=function(t){return 4096&this.allowed?t:null},n.visitSpaceList=function(t){return null},n.visitCommaList=function(t){return null},n.visitFunc=function(t){return 64&this.allowed&&CSS.supports("color",t.toString())||8192&this.allowed&&CSS.supports("background-image",t.toString())||"calc"===t.name&&1848&this.allowed?t:null},n.visitExpr=function(t){return 2046&this.allowed?t:null},n.combine=function(t){var n={},i={};for(var u in this.idents)n[u]=this.idents[u];for(var r in t.idents)n[r]=t.idents[r];for(var o in this.units)i[o]=this.units[o];for(var a in t.units)i[a]=t.units[a];return new e(this.allowed|t.allowed,n,i)},e}(vc),mc={},Ac=new Fc(0,mc,mc),bc=function(t){function e(e){var n;return(n=t.call(this)||this).successTerminal=void 0,n.failureTerminal=void 0,n.first=void 0,n.successTerminal=new fc(null),n.failureTerminal=new fc(null),n.first=e.finish(n.successTerminal,n.failureTerminal),n}N(e,t);var n=e.prototype;return n.validateList=function(t,e,n){for(var i=e?[]:t,u=this.first,r=n,o=null,a=null;u!==this.successTerminal&&u!==this.failureTerminal;)if(r>=t.length)u=u.failure;else{var s=t[r],l=s;if(u.isSpecial()){var c=!0;u.isStartGroup()?(o?o.push(a):o=[a],a=[]):u.isEndGroup()?a=o.length>0?o.pop():null:u.isEndAlternate()?a[u.getAlternate()]="taken":c=null==a[u.getAlternate()],u=c?u.success:u.failure}else{if(0==r&&!e&&u.validator instanceof yc&&this instanceof yc){if(l=new Xe(t).visit(u.validator)){r=t.length,u=u.success;continue}}else if(0==r&&!e&&u.validator instanceof Bc&&this instanceof yc){if(l=new $e(t).visit(u.validator)){r=t.length,u=u.success;continue}}else l=s.visit(u.validator);if(!l){u=u.failure;continue}if(l!==s&&t===i){i=[];for(var h=0;h<r;h++)i[h]=t[h]}t!==i&&(i[r-n]=l),r++,u=u.success}}return u===this.successTerminal&&(e?i.length>0:r==t.length)?i:null},n.validateSingle=function(t){for(var e=null,n=this.first;n!==this.successTerminal&&n!==this.failureTerminal;)t?n.isSpecial()?n=n.success:(e=t.visit(n.validator))?(t=null,n=n.success):n=n.failure:n=n.failure;return n===this.successTerminal?e:null},n.visitEmpty=function(t){return this.validateSingle(t)},n.visitSlash=function(t){return this.validateSingle(t)},n.visitStr=function(t){return this.validateSingle(t)},n.visitIdent=function(t){return this.validateSingle(t)},n.visitNumeric=function(t){return this.validateSingle(t)},n.visitNum=function(t){return this.validateSingle(t)},n.visitInt=function(t){return this.validateSingle(t)},n.visitHexColor=function(t){return this.validateSingle(t)},n.visitURL=function(t){return this.validateSingle(t)},n.visitURange=function(t){return this.validateSingle(t)},n.visitSpaceList=function(t){return null},n.visitCommaList=function(t){return null},n.visitFunc=function(t){return this.validateSingle(t)},n.visitExpr=function(t){return null},e}(vc),yc=function(t){function e(e){return t.call(this,e)||this}N(e,t);var n=e.prototype;return n.visitSpaceList=function(t){var e=this.validateList(t.values,!1,0);return e===t.values?t:e?new Xe(e):null},n.visitCommaList=function(t){for(var e=this.first,n=!1;e;){if(e.validator instanceof Bc){n=!0;break}e=e.failure}if(n){var i=this.validateList(t.values,!1,0);return i===t.values?t:i?new $e(i):null}return null},n.validateForShorthand=function(t,e){return this.validateList(t,!0,e)},e}(bc),Bc=function(t){function e(e){return t.call(this,e)||this}N(e,t);var n=e.prototype;return n.visitSpaceList=function(t){return this.validateSingle(t)},n.visitCommaList=function(t){var e=this.validateList(t.values,!1,0);return e===t.values?t:e?new $e(e):null},n.validateForShorthand=function(t,e){for(var n,i=this.first;i!==this.failureTerminal;){if(n=i.validator.validateForShorthand(t,e))return n;i=i.failure}return null},e}(bc),wc=function(t){function e(e,n){var i;return(i=t.call(this,n)||this).name=void 0,i.name=e,i}N(e,t);var n=e.prototype;return n.validateSingle=function(t){return null},n.visitFunc=function(t){if(t.name.toLowerCase()!=this.name)return null;var e=this.validateList(t.values,!1,0);return e===t.values?t:e?new Ke(t.name,e):null},e}(bc),Sc=function(){function t(){}var e=t.prototype;return e.tryParse=function(t,e,n){return e},e.success=function(t,e){},t}(),Nc=function(t){function e(e,n){var i;return(i=t.call(this)||this).name=void 0,i.validator=void 0,i.name=n,i.validator=e.validators[i.name],i}N(e,t);var n=e.prototype;return n.tryParse=function(t,e,n){if(n.values[this.name])return e;var i=this.validator.validateForShorthand(t,e);if(i){var u=i.length,r=u>1?new Xe(i):i[0];return this.success(r,n),e+u}return e},n.success=function(t,e){e.values[this.name]=t},e}(Sc),xc=function(t){function e(e,n){var i;return(i=t.call(this,e,n[0])||this).names=void 0,i.names=n,i}return N(e,t),e.prototype.success=function(t,e){for(var n=0;n<this.names.length;n++)e.values[this.names[n]]=t},e}(Nc),Tc=function(t){function e(e,n){var i;return(i=t.call(this)||this).nodes=void 0,i.slash=void 0,i.nodes=e,i.slash=n,i}return N(e,t),e.prototype.tryParse=function(t,e,n){var i=e;if(this.slash){if(t[e]!=Oe)return i;if(++e==t.length)return i}var u=this.nodes[0].tryParse(t,e,n);if(u==e)return i;e=u;for(var r=1;r<this.nodes.length&&e<t.length&&(u=this.nodes[r].tryParse(t,e,n))!=e;r++)e=u;return e},e}(Sc),Ic=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return(e=t.call.apply(t,[this].concat(i))||this).syntax=null,e.propList=null,e.error=!1,e.values={},e.validatorSet=null,e}N(e,t);var n=e.prototype;return n.setOwner=function(t){this.validatorSet=t},n.syntaxNodeForProperty=function(t){return new Nc(this.validatorSet,t)},n.clone=function(){var t=new this.constructor;return t.syntax=this.syntax,t.propList=this.propList,t.validatorSet=this.validatorSet,t},n.init=function(t,e){this.syntax=t,this.propList=e},n.finish=function(t,e){if(!this.error){for(var n,i=R(this.propList);!(n=i()).done;){var u,r,o=n.value;e.simpleProperty(o,null!=(u=null!=(r=this.values[o])?r:this.validatorSet.defaultValues[o])?u:Je.initial,t)}return!0}return!1},n.propagateDefaultingValue=function(t,e,n){for(var i,u=R(this.propList);!(i=u()).done;)n.simpleProperty(i.value,t,e)},n.validateList=function(t){return this.error=!0,0},n.validateSingle=function(t){return this.validateList([t]),null},n.visitEmpty=function(t){return this.validateSingle(t)},n.visitStr=function(t){return this.validateSingle(t)},n.visitIdent=function(t){return this.validateSingle(t)},n.visitNumeric=function(t){return this.validateSingle(t)},n.visitNum=function(t){return this.validateSingle(t)},n.visitInt=function(t){return this.validateSingle(t)},n.visitHexColor=function(t){return this.validateSingle(t)},n.visitURL=function(t){return this.validateSingle(t)},n.visitSpaceList=function(t){return this.validateList(t.values),null},n.visitCommaList=function(t){return this.error=!0,null},n.visitFunc=function(t){return this.validateSingle(t)},n.visitExpr=function(t){return this.validateSingle(t)},e}(Ne),Pc=function(t){function e(){return t.call(this)||this}return N(e,t),e.prototype.validateList=function(t){for(var e=0,n=0;e<t.length;){var i=this.syntax[n].tryParse(t,e,this);if(i>e)e=i,n=0;else if(++n==this.syntax.length){this.error=!0;break}}return e},e}(Ic),kc=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.validateList=function(t){if(t.length>this.syntax.length||0==t.length)return this.error=!0,0;for(var e=0;e<this.syntax.length;e++){for(var n=e;n>=t.length;)n=1==n?0:n-2;if(this.syntax[e].tryParse(t,n,this)!=n+1)return this.error=!0,0}return t.length},n.createSyntaxNode=function(){return new xc(this.validatorSet,this.propList)},e}(Ic),Oc=function(t){function e(){return t.call(this)||this}return N(e,t),e.prototype.validateList=function(t){for(var e=t.length,n=0;n<t.length;n++)if(t[n]===Oe){e=n;break}if(e>this.syntax.length||0==t.length)return this.error=!0,0;for(var i=0;i<this.syntax.length;i++){for(var u=i;u>=e;)u=1==u?0:u-2;var r=void 0;if(e+1<t.length)for(r=e+i+1;r>=t.length;)r-=r==e+2?1:2;else r=u;if(2!=this.syntax[i].tryParse([t[u],t[r]],0,this))return this.error=!0,0}return t.length},e}(Ic),Rc=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.mergeIn=function(t,e){for(var n,i=R(this.propList);!(n=i()).done;){var u,r,o=n.value,a=null!=(u=null!=(r=e[o])?r:this.validatorSet.defaultValues[o])?u:Je.initial,s=t[o];s||(t[o]=s=[]),s.push(a)}},n.visitCommaList=function(t){for(var e={},n=0;n<t.values.length;n++)if(this.values={},t.values[n]instanceof $e?this.error=!0:(t.values[n].visit(this),this.mergeIn(e,this.values),this.values["background-color"]&&n!=t.values.length-1&&(this.error=!0)),this.error)return null;for(var i in this.values={},e)this.values[i]="background-color"==i?e[i].pop():new $e(e[i]);return null},e}(Pc),Lc=function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.init=function(e,n){t.prototype.init.call(this,e,n),this.propList.push("font-family","line-height","font-size","font-stretch","font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian")},n.validateList=function(e){var n=t.prototype.validateList.call(this,e),i=this.values["font-variant_css2"];i&&(delete this.values["font-variant_css2"],this.values["font-variant-caps"]=i);var u=this.values["font-stretch_css3"];if(u&&(delete this.values["font-stretch_css3"],this.values["font-stretch"]=u),n+2>e.length)return this.error=!0,n;this.error=!1;var r=this.validatorSet.validators;if(!e[n].visit(r["font-size"]))return this.error=!0,n;if(this.values["font-size"]=e[n++],e[n]===Oe){if(2+ ++n>e.length)return this.error=!0,n;if(!e[n].visit(r["line-height"]))return this.error=!0,n;this.values["line-height"]=e[n++]}var o=n==e.length-1?e[n]:new Xe(e.slice(n,e.length));return o.visit(r["font-family"])?(this.values["font-family"]=o,e.length):(this.error=!0,n)},n.visitCommaList=function(t){if(t.values[0].visit(this),this.error)return null;for(var e=[this.values["font-family"]],n=1;n<t.values.length;n++)e.push(t.values[n]);var i=new $e(e);return i.visit(this.validatorSet.validators["font-family"])?this.values["font-family"]=i:this.error=!0,null},n.visitIdent=function(t){var e=this.validatorSet.systemFonts[t.name];if(e)for(var n in e)this.values[n]=e[n];else this.error=!0;return null},e}(Pc),_c=["unicode-bidi","direction","margin-block-start","margin-block-end","margin-inline-start","margin-inline-end","padding-block-start","padding-block-end","padding-inline-start","padding-inline-end","border-block-start-color","border-block-end-color","border-inline-start-color","border-inline-end-color","border-block-start-style","border-block-end-style","border-inline-start-style","border-inline-end-style","border-block-start-width","border-block-end-width","border-inline-start-width","border-inline-end-width","block-start","block-end","inline-start","inline-end","block-size","inline-size","max-block-size","max-inline-size","min-block-size","min-inline-size","behavior","bleed","conflicting-partitions","crop-offset","enabled","flow-consume","flow-from","flow-into","flow-linger","flow-options","flow-priority","font-display","font-size-adjust","font-stretch_css3","font-variant_css2","glyph-orientation-vertical","marks","min-page-height","min-page-width","repeat-on-break","required","required-partitions","ruby-align","shape-inside","snap-height","snap-width","template","text-decoration-skip","text-justify","text-zoom","unicode-range","utilization","wrap-flow"],Mc={SIMPLE:Pc,INSETS:kc,INSETS_SLASH:Oc,COMMA:Rc,FONT:Lc,TEXT_SPACING:function(t){function e(){return t.apply(this,arguments)||this}return N(e,t),e.prototype.validateList=function(e){if(1===e.length&&e[0]instanceof _e)switch(e[0].name.toLowerCase()){case"normal":e=[this.validatorSet.defaultValues["text-autospace"],this.validatorSet.defaultValues["text-spacing-trim"]];break;case"auto":e=[Je.auto,Je.auto];break;case"none":e=[Me("no-autospace"),Me("space-all")]}return t.prototype.validateList.call(this,e)},e}(Pc),ALL:function(t){function e(){return t.call(this)||this}N(e,t);var n=e.prototype;return n.init=function(e,n){for(var i in t.prototype.init.call(this,e,n),this.validatorSet.validators)_c.includes(i)||this.propList.push(i)},n.validateList=function(t){return this.error=!0,0},e}(Pc)},Uc=function(){function t(){this.validators={},this.prefixes={},this.defaultValues={},this.namedValidators={},this.systemFonts={},this.shorthands={},this.layoutProps={},this.backgroundProps={}}var e=t.prototype;return e.addReplacement=function(t,e){var n;if(e.type==Vn.NUMERIC)n=new Ue(e.num,e.text);else if(e.type==Vn.HASH)n=new He(e.text);else{if(e.type!=Vn.IDENT)throw new Error("unexpected replacement");n=Me(e.text)}if(t.isPrimitive()){var i=t.nodes[0].validator.idents;for(var u in i)i[u]=n;return t}throw new Error("unexpected replacement")},e.newGroup=function(t,e){var n,i=new gc;if("||"==t){for(var u=0;u<e.length;u++){var r=new gc;r.startClause(u),r.addGroup(e[u],oc.FOLLOW),r.endClause(u),i.addGroup(r,0==u?oc.FOLLOW:oc.ALTERNATE)}var o=new gc;return o.startSpecialGroup(),o.addGroup(i,oc.REPEATED),o.endSpecialGroup(),o}switch(t){case" ":n=oc.FOLLOW;break;case"|":case"||":n=oc.ALTERNATE;break;default:throw new Error("unexpected op")}for(var a=0;a<e.length;a++)i.addGroup(e[a],0==a?oc.FOLLOW:n);return i},e.addCounts=function(t,e,n){for(var i=new gc,u=0;u<e;u++)i.addGroup(t.clone(),oc.FOLLOW);if(n==Number.POSITIVE_INFINITY)i.addGroup(t,oc.REPEATED);else for(var r=e;r<n;r++)i.addGroup(t.clone(),oc.OPTIONAL);return i},e.primitive=function(t){var e=new gc;return e.addPrimitive(t),e},e.newFunc=function(t,e){var n;switch(t){case"COMMA":n=new Bc(e);break;case"SPACE":n=new yc(e);break;default:n=new wc(t.toLowerCase(),e)}return this.primitive(n)},e.initBuiltInValidators=function(){this.namedValidators.COLOR=this.primitive(new Fc(64,mc,mc)),this.namedValidators.IMAGE_FUNCTION=this.primitive(new Fc(8192,mc,mc)),this.namedValidators.POS_INT=this.primitive(new Fc(32,mc,mc)),this.namedValidators.POS_NUM=this.primitive(new Fc(16,mc,mc)),this.namedValidators.POS_PERCENTAGE=this.primitive(new Fc(8,mc,{"%":Pe})),this.namedValidators.NEGATIVE=this.primitive(new Fc(Ec,mc,mc)),this.namedValidators.ZERO=this.primitive(new Fc(Cc,mc,mc)),this.namedValidators.ZERO_PERCENTAGE=this.primitive(new Fc(1024,mc,mc)),this.namedValidators.POS_LENGTH=this.primitive(new Fc(8,mc,{em:Pe,ex:Pe,ch:Pe,rem:Pe,lh:Pe,rlh:Pe,vw:Pe,vh:Pe,vi:Pe,vb:Pe,vmin:Pe,vmax:Pe,pvw:Pe,pvh:Pe,pvi:Pe,pvb:Pe,pvmin:Pe,pvmax:Pe,cm:Pe,mm:Pe,in:Pe,px:Pe,pt:Pe,pc:Pe,q:Pe})),this.namedValidators.POS_ANGLE=this.primitive(new Fc(8,mc,{deg:Pe,grad:Pe,rad:Pe,turn:Pe})),this.namedValidators.POS_TIME=this.primitive(new Fc(8,mc,{s:Pe,ms:Pe})),this.namedValidators.FREQUENCY=this.primitive(new Fc(8,mc,{Hz:Pe,kHz:Pe})),this.namedValidators.RESOLUTION=this.primitive(new Fc(8,mc,{dpi:Pe,dpcm:Pe,dppx:Pe})),this.namedValidators.URI=this.primitive(new Fc(128,mc,mc)),this.namedValidators.URANGE=this.primitive(new Fc(4096,mc,mc)),this.namedValidators.IDENT=this.primitive(new Fc(4,mc,mc)),this.namedValidators.STRING=this.primitive(new Fc(2,mc,mc)),this.namedValidators.SLASH=this.primitive(new Fc(2048,mc,mc));var t={"font-family":Me("sans-serif")};this.systemFonts.caption=t,this.systemFonts.icon=t,this.systemFonts.menu=t,this.systemFonts["message-box"]=t,this.systemFonts["small-caption"]=t,this.systemFonts["status-bar"]=t},e.isBuiltIn=function(t){return!!t.match(/^[A-Z_0-9]+$/)},e.readNameAndPrefixes=function(t,e){var n=t.token();if(n.type==Vn.EOF)return null;var i={"":!0};if(n.type==Vn.O_BRK){do{if(t.consume(),(n=t.token()).type!=Vn.IDENT)throw new Error("Prefix name expected");i[n.text]=!0,t.consume(),n=t.token()}while(n.type==Vn.COMMA);if(n.type!=Vn.C_BRK)throw new Error("']' expected");t.consume(),n=t.token()}if(n.type!=Vn.IDENT)throw new Error("Property name expected");if(2==e?"SHORTHANDS"==n.text:"DEFAULTS"==n.text)return t.consume(),null;var u=n.text;if(t.consume(),2!=e){if(t.token().type!=Vn.EQ)throw new Error("'=' expected");this.isBuiltIn(u)||(this.prefixes[u]=i)}else if(t.token().type!=Vn.COLON)throw new Error("':' expected");return u},e.parseValidators=function(t){for(var e=this,n=function(){var n=e.readNameAndPrefixes(t,1);if(!n)return{v:void 0};for(var i,u=[],r=[],o="",a=!0,s=function(){if(0==u.length)throw new Error("No values");return 1==u.length?u[0]:e.newGroup(o,u)},l=function(t){if(a)throw new Error("'"+t+"': unexpected");if(o&&o!=t)throw new Error("mixed operators: '"+t+"' and '"+o+"'");o=t,a=!0},c=null;!c;){t.consume();var h=t.token();switch(h.type){case Vn.IDENT:if(a||l(" "),e.isBuiltIn(h.text)){var D=e.namedValidators[h.text];if(!D)throw new Error("'"+h.text+"' unexpected");u.push(D.clone())}else{var d={};d[h.text.toLowerCase()]=Me(h.text),u.push(e.primitive(new Fc(0,d,mc)))}a=!1;break;case Vn.INT:var f={};f[""+h.num]=new ze(h.num),u.push(e.primitive(new Fc(0,f,mc))),a=!1;break;case Vn.BAR:l("|");break;case Vn.BAR_BAR:l("||");break;case Vn.O_BRK:a||l(" "),r.push({vals:u,op:o,b:"["}),o="",u=[],a=!0;break;case Vn.FUNC:a||l(" "),r.push({vals:u,op:o,b:"(",fn:h.text}),o="",u=[],a=!0;break;case Vn.C_BRK:i=s();var p=r.pop();if("["!=p.b)throw new Error("']' unexpected");(u=p.vals).push(i),o=p.op,a=!1;break;case Vn.C_PAR:i=s();var g=r.pop();if("("!=g.b)throw new Error("')' unexpected");(u=g.vals).push(e.newFunc(g.fn,i)),o=g.op,a=!1;break;case Vn.COLON:if(a)throw new Error("':' unexpected");t.consume(),u.push(e.addReplacement(u.pop(),t.token()));break;case Vn.QMARK:if(a)throw new Error("'?' unexpected");u.push(e.addCounts(u.pop(),0,1));break;case Vn.STAR:if(a)throw new Error("'*' unexpected");u.push(e.addCounts(u.pop(),0,Number.POSITIVE_INFINITY));break;case Vn.PLUS:if(a)throw new Error("'+' unexpected");u.push(e.addCounts(u.pop(),1,Number.POSITIVE_INFINITY));break;case Vn.O_BRC:if(t.consume(),(h=t.token()).type!=Vn.INT)throw new Error("<int> expected");var E=h.num,C=E;if(t.consume(),(h=t.token()).type==Vn.COMMA){if(t.consume(),(h=t.token()).type!=Vn.INT)throw new Error("<int> expected");C=h.num,t.consume(),h=t.token()}if(h.type!=Vn.C_BRC)throw new Error("'}' expected");u.push(e.addCounts(u.pop(),E,C));break;case Vn.SEMICOL:if(c=s(),r.length>0)throw new Error("unclosed '"+r.pop().b+"'");break;default:throw new Error("unexpected token")}}t.consume(),e.isBuiltIn(n)?e.namedValidators[n]=c:e.validators[n]=c.isSimple()?c.nodes[0].validator:new yc(c)};;){var i=n();if("object"==typeof i)return i.v}},e.parseDefaults=function(t){for(;;){var e=this.readNameAndPrefixes(t,2);if(!e)return;for(var n=[];;){t.consume();var i=t.token();if(i.type==Vn.SEMICOL){t.consume();break}switch(i.type){case Vn.IDENT:n.push(Me(i.text));break;case Vn.NUM:n.push(new Ve(i.num));break;case Vn.INT:n.push(new ze(i.num));break;case Vn.NUMERIC:n.push(new Ue(i.num,i.text));break;default:throw new Error("unexpected token")}}this.defaultValues[e]=n.length>1?new Xe(n):n[0]}},e.parseShorthands=function(t){for(;;){var e=this.readNameAndPrefixes(t,3);if(!e)return;var n=t.nthToken(1),i=void 0;n.type==Vn.IDENT&&Mc[n.text]?(i=new Mc[n.text],t.consume()):i=new Pc,i.setOwner(this);for(var u=!1,r=[],o=!1,a=[],s=[];!u;)switch(t.consume(),(n=t.token()).type){case Vn.IDENT:if(this.validators[n.text])r.push(i.syntaxNodeForProperty(n.text)),n.text.includes("_")||s.push(n.text);else{if(!(this.shorthands[n.text]instanceof kc))throw new Error("'"+n.text+"' is neither a simple property nor an inset shorthand");var l=this.shorthands[n.text];r.push(l.createSyntaxNode()),s.push.apply(s,l.propList)}break;case Vn.SLASH:if(r.length>0||o)throw new Error("unexpected slash");o=!0;break;case Vn.O_BRK:a.push({slash:o,syntax:r}),r=[],o=!1;break;case Vn.C_BRK:var c=new Tc(r,o),h=a.pop();o=h.slash,(r=h.syntax).push(c);break;case Vn.SEMICOL:u=!0,t.consume();break;default:throw new Error("unexpected token")}i.init(r,s),this.shorthands[e]=i}},e.parse=function(t){var e=new Ti(t,null);this.parseValidators(e),this.parseDefaults(e),this.parseShorthands(e),this.backgroundProps=this.makePropSet(["background"]),this.layoutProps=this.makePropSet(["margin","border","padding","columns","column-gap","column-rule","column-fill"])},e.makePropSet=function(t){for(var e,n={},i=R(t);!(e=i()).done;)for(var u,r=e.value,o=this.shorthands[r],a=R(o?o.propList:[r]);!(u=a()).done;){var s,l=u.value;n[l]=null!=(s=this.defaultValues[l])?s:Je.initial}return n},e.validatePropertyAndHandleShorthand=function(t,e,n,i){if(ln(t)||"font-face"===i.ruleType||(u=e,r=new zc,u.visit(r),r.varFound))i.simpleProperty(t,e,n);else{var u,r,o="",a=t,s=(t=t.toLowerCase()).match(/^-([a-z]+)-([-a-z0-9]+)$/);s&&(o=s[1],t=s[2]);var l=this.prefixes[t];if(l&&l[o]){var c=this.validators[t];if(c){var h=an(e)||e.isExpr()?e:e.visit(c);h?i.simpleProperty(t,h,n):!o&&CSS.supports(t,e.toString())?i.simpleProperty(t,e,n):i.invalidPropertyValue(a,e)}else{var D=this.shorthands[t].clone();an(e)?D.propagateDefaultingValue(e,n,i):(e.visit(D),D.finish(n,i)||i.invalidPropertyValue(a,e))}}else CSS.supports(t,e.toString())?i.simpleProperty(a,e,n):i.unknownProperty(a,e)}},t}();function Vc(){var t=new Uc;return t.initBuiltInValidators(),t.parse(Yi),t}var zc=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return(e=t.call.apply(t,[this].concat(i))||this).varFound=!1,e}return N(e,t),e.prototype.visitFunc=function(t){return"var"===t.name?this.varFound=!0:this.varFound||this.visitValues(t.values),null},e}(Ne),Hc={"font-style":Je.auto,"font-stretch":Je.auto,"font-weight":Je.auto,"unicode-range":rn};function Gc(t,e){var n={};for(var i in t)n[i]=oo(t,i).evaluate(e,i);return function(t){for(var e in Hc)t[e]||(t[e]=Hc[e])}(n),n}(new Date).valueOf();var jc=function(){function t(t){this.properties=void 0,this.fontTraitKey=void 0,this.src=void 0,this.blobURLs=[],this.blobs=[],this.family=void 0,this.properties=t,this.fontTraitKey=function(t){var e=new it;for(var n in Hc)e.append(" "),e.append(t[n].toString());return e.toString()}(this.properties),this.src=this.properties.src?this.properties.src.toString():null;var e=this.properties["font-family"];this.family=e?e.stringValue():null}var e=t.prototype;return e.traitsEqual=function(t){return this.fontTraitKey==t.fontTraitKey},e.makeAtRule=function(t,e){var n=new it;for(var i in n.append("@font-face {\n  font-family: "),n.append(this.family),n.append(";\n  "),Hc)n.append(i),n.append(": "),this.properties[i].appendTo(n,!0),n.append(";\n  ");if(e){n.append('src: url("');var u=URL.createObjectURL(e);n.append(u),this.blobURLs.push(u),this.blobs.push(e),n.append('")')}else n.append("src: "),n.append(t);return n.append(";\n}\n"),n.toString()},t}(),Wc=function(){function t(t){this.deobfuscator=void 0,this.familyMap={},this.deobfuscator=t}var e=t.prototype;return e.registerFamily=function(t,e){var n=t.family,i=this.familyMap[n],u=e.family;if(i){if(i!=u)throw new Error("E_FONT_FAMILY_INCONSISTENT "+t.family)}else this.familyMap[n]=u},e.filterFontFamily=function(t){if(t instanceof $e){for(var e,n=[],i=R(t.values);!(e=i()).done;){var u=e.value,r=this.familyMap[u.stringValue()];r&&n.push(Me(r)),n.push(u)}return new $e(n)}var o=this.familyMap[t.stringValue()];return o?new $e([Me(o),t]):t},t}(),Xc=function(){function t(t,e,n){this.head=void 0,this.body=void 0,this.srcURLMap={},this.familyPrefix=void 0,this.familyCounter=0,this.head=t,this.body=e,this.familyPrefix=n||"Fnt_"}var e=t.prototype;return e.getViewFontFamily=function(t,e){var n=t.family,i=e.familyMap[n];return i||(i=this.familyPrefix+ ++this.familyCounter,e.familyMap[n]=i,i)},e.initFont=function(t,e,n){var i=Oi("initFont"),u=t.src,r={};for(var o in Hc)r[o]=t.properties[o];var a=this.getViewFontFamily(t,n);r["font-family"]=Me(a);var s=new jc(r),l=this.head.ownerDocument.createElement("style");return l.textContent=s.makeAtRule(u,e),this.head.appendChild(l),h.debug("Load font:",u),i.finish(s),i.result()},e.loadFont=function(t,e){var n=this,i=t.src,u=t.family+";"+i,r=this.srcURLMap[u];return r?r.piggyback((function(n){var u=n;u.traitsEqual(t)?(e.registerFamily(t,u),h.debug("Found already-loaded font:",i)):h.warn("E_FONT_FACE_INCOMPATIBLE",t.src)})):(r=new Xi((function(){var u=Oi("loadFont"),r=i.replace(/^url\("([^"]+)"\).*$/,"$1"),o=e.deobfuscator?e.deobfuscator(r):null;return o?nu(r,_i.BLOB).then((function(i){i.responseBlob?o(i.responseBlob).then((function(i){n.initFont(t,i,e).thenFinish(u)})):u.finish(null)})):n.initFont(t,null,e).thenFinish(u),u.result()}),"loadFont "+i),this.srcURLMap[u]=r,r.start()),r},e.findOrLoadFonts=function(t,e){for(var n,i=this,u=[],r=R(t);!(n=r()).done;){var o=n.value;o.src&&o.family?u.push(this.loadFont(o,e)):h.warn("E_FONT_FACE_INVALID")}return $i(u).thenAsync((function(){return i.waitFontLoading()}))},e.waitFontLoading=function(){var t=this.head.ownerDocument.fonts,e=0;if(t.forEach((function(t){"unloaded"===t.status&&(e++,t.load())})),0===e)return Ri(!0);var n=Oi("waitFontLoading");return n.loop((function(){return n.sleep(20).thenAsync((function(){return Ri("loading"===t.status)}))})).thenFinish(n),n.result()},t}(),$c=1,Kc=function(){function t(t,e,n,i,u){this.name=void 0,this.pseudoName=void 0,this.classes=void 0,this.parent=void 0,this.specified={},this.children=[],this.pageMaster=null,this.index=0,this.key=void 0,this._scope=void 0,this.name=e,this.pseudoName=n,this.classes=i,this.parent=u,this._scope=t,this.key="p"+$c++,u&&(this.index=u.children.length,u.children.push(this))}var e=t.prototype;return e.createInstance=function(t){throw new Error("E_UNEXPECTED_CALL")},e.clone=function(t){throw new Error("E_UNEXPECTED_CALL")},e.copySpecified=function(t){var e=this.specified,n=t.specified;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])},e.cloneChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].clone({parent:t})},S(t,[{key:"scope",get:function(){return this._scope}}]),t}(),qc=function(t){function e(e){var n;return(n=t.call(this,e,null,null,[],null)||this).specified.width=new Qr(en,0),n.specified.height=new Qr(nn,0),n}return N(e,t),e}(Kc),Yc=function(t){function e(e,n){var i;(i=t.call(this,e,(function(t,e){var n=t.match(/^([^.]+)\.([^.]+)$/);if(n){var i=u.pageMaster.keyMap[n[1]];if(i){var r=this.lookupInstance(i);if(r)return e?r.resolveFunc(n[2]):r.resolveName(n[2])}}return null}))||this).pageMaster=void 0,i.pageMaster=n;var u=k(i);return i}return N(e,t),e}(Lt),Zc=function(t){function e(e,n,i,u,r,o,a){var s;return(s=t.call(this,e,n,i,u,r)||this).condition=void 0,s.specificity=void 0,s.keyMap={},s.condition=o,s.specificity=a,e instanceof Yc||(s._scope=new Yc(e,k(s))),s.pageMaster=k(s),s.specified.width=new Qr(en,0),s.specified.height=new Qr(nn,0),s.specified["wrap-flow"]=new Qr(Je.auto,0),s.specified.position=new Qr(Je.relative,0),s.specified.overflow=new Qr(Je.visible,0),s}N(e,t);var n=e.prototype;return n.createInstance=function(t){return new dh(t,this)},n.clone=function(t){var n=new e(this.scope,this.name,t.pseudoName||this.pseudoName,this.classes,this.parent,this.condition,this.specificity);return this.copySpecified(n),this.cloneChildren(n),n},n.resetScope=function(){this.scope.pageMaster=this},e}(Kc),Qc=function(t){function e(e,n,i,u,r){var o;return(o=t.call(this,e,n,i,u,r)||this).pageMaster=r.pageMaster,n&&(o.pageMaster.keyMap[n]=o.key),o.specified["wrap-flow"]=new Qr(Je.auto,0),o}N(e,t);var n=e.prototype;return n.createInstance=function(t){return new fh(t,this)},n.clone=function(t){var n=new e(t.parent.scope,this.name,this.pseudoName,this.classes,t.parent);return this.copySpecified(n),this.cloneChildren(n),n},e}(Kc),Jc=function(t){function e(e,n,i,u,r){var o;return(o=t.call(this,e,n,i,u,r)||this).pageMaster=r.pageMaster,n&&(o.pageMaster.keyMap[n]=o.key),o}N(e,t);var n=e.prototype;return n.createInstance=function(t){return new ph(t,this)},n.clone=function(t){var n=new e(t.parent.scope,this.name,this.pseudoName,this.classes,t.parent);return this.copySpecified(n),this.cloneChildren(n),n},e}(Kc);function th(t,e,n){return!e||e===Je.auto||an(e)?null:e.toExpr(t,n)}function eh(t,e,n){return!e||e===Je.auto||an(e)?t.zero:e.toExpr(t,n)}function nh(t,e,n){return!e||an(e)?t.zero:e===Je.auto?null:e.toExpr(t,n)}function ih(t,e,n,i){return!e||n===Je.none||an(e)?t.zero:e.toExpr(t,i)}function uh(t,e,n){return!e||an(e)?n:e===Je._true?t._true:e===Je._false?t._false:e.toExpr(t,t.zero)}var rh=function(){function t(t,e){this.parentInstance=void 0,this.pageBox=void 0,this.cascaded={},this.style={},this.autoWidth=null,this.autoHeight=null,this.children=[],this.isAutoWidth=!1,this.isAutoHeight=!1,this.isTopDependentOnAutoHeight=!1,this.isRightDependentOnAutoWidth=!1,this.calculatedWidth=0,this.calculatedHeight=0,this.pageMasterInstance=null,this.namedValues={},this.namedFuncs={},this.vertical=!1,this.rtl=!1,this.suppressEmptyBoxGeneration=!1,this.parentInstance=t,this.pageBox=e,t&&t.children.push(this)}var e=t.prototype;return e.reset=function(){this.calculatedWidth=0,this.calculatedHeight=0},e.addNamedValues=function(t,e){var n=this.resolveName(t),i=this.resolveName(e);if(!n||!i)throw new Error("E_INTERNAL");return ye(this.pageBox.scope,n,i)},e.resolveName=function(t){var e=this.namedValues[t];if(e)return e;var n=this.style[t];switch(n&&(e=n.toExpr(this.pageBox.scope,this.pageBox.scope.zero)),t){case"margin-left-edge":e=this.resolveName("left");break;case"margin-top-edge":e=this.resolveName("top");break;case"margin-right-edge":e=this.addNamedValues("border-right-edge","margin-right");break;case"margin-bottom-edge":e=this.addNamedValues("border-bottom-edge","margin-bottom");break;case"border-left-edge":e=this.addNamedValues("margin-left-edge","margin-left");break;case"border-top-edge":e=this.addNamedValues("margin-top-edge","margin-top");break;case"border-right-edge":e=this.addNamedValues("padding-right-edge","border-right-width");break;case"border-bottom-edge":e=this.addNamedValues("padding-bottom-edge","border-bottom-width");break;case"padding-left-edge":e=this.addNamedValues("border-left-edge","border-left-width");break;case"padding-top-edge":e=this.addNamedValues("border-top-edge","border-top-width");break;case"padding-right-edge":e=this.addNamedValues("right-edge","padding-right");break;case"padding-bottom-edge":e=this.addNamedValues("bottom-edge","padding-bottom");break;case"left-edge":e=this.addNamedValues("padding-left-edge","padding-left");break;case"top-edge":e=this.addNamedValues("padding-top-edge","padding-top");break;case"right-edge":e=this.addNamedValues("left-edge","width");break;case"bottom-edge":e=this.addNamedValues("top-edge","height")}if(!e){var i;if("extent"==t)i=this.vertical?"width":"height";else if("measure"==t)i=this.vertical?"height":"width";else{var u=this.vertical?Kr:qr;for(var r in i=t,u)i=i.replace(r,u[r])}i!=t&&(e=this.resolveName(i))}return e&&(this.namedValues[t]=e),e},e.resolveFunc=function(t){var e=this.namedFuncs[t];if(e)return e;if("columns"===t){var n=this.pageBox.scope,i=new Ae(n,0),u=this.resolveName("column-count"),r=this.resolveName("column-width"),o=this.resolveName("column-gap");e=Be(n,we(n,new Ee(n,"min",[i,u]),ye(n,r,o)),o)}return e&&(this.namedFuncs[t]=e),e},e.initEnabled=function(){var t=this.pageBox.scope,e=this.style,n=uh(t,e.enabled,t._true),i=th(t,e.page,t.zero);if(i){var u=new fe(t,"page-number");n=be(t,n,new oe(t,i,u))}var r=th(t,e["min-page-width"],t.zero);r&&(n=be(t,n,new re(t,new fe(t,"page-width"),r)));var o=th(t,e["min-page-height"],t.zero);o&&(n=be(t,n,new re(t,new fe(t,"page-height"),o))),n=this.boxSpecificEnabled(n),e.enabled=new qe(n)},e.boxSpecificEnabled=function(t){return t},e.initHorizontal=function(){var t=this.pageBox.scope,e=this.style,n=this.parentInstance?this.parentInstance.style.width.toExpr(t,null):null,i=th(t,e.left,n),u=th(t,e["margin-left"],n),r=ih(t,e["border-left-width"],e["border-left-style"],n),o=eh(t,e["padding-left"],n),a=th(t,e.width,n),s=th(t,e["max-width"],n),l=eh(t,e["padding-right"],n),c=ih(t,e["border-right-width"],e["border-right-style"],n),h=th(t,e["margin-right"],n),D=th(t,e.right,n),d=ye(t,r,o),f=ye(t,r,l);if(i&&D&&a){var p=Be(t,n,ye(t,a,ye(t,ye(t,i,d),f)));u?h?D=Be(t,p,h):h=Be(t,p,ye(t,D,u)):(p=Be(t,p,D),h?u=Be(t,p,h):h=u=we(t,p,new ve(t,.5)))}else{u||(u=t.zero),h||(h=t.zero),i||D||a||(i=t.zero),i||a?i||D?a||D||(a=this.autoWidth,this.isAutoWidth=!0):i=t.zero:(a=this.autoWidth,this.isAutoWidth=!0);var g=Be(t,n,ye(t,ye(t,u,d),ye(t,h,f)));this.isAutoWidth&&(s||(s=Be(t,g,i||D)),this.vertical||!th(t,e["column-width"],null)&&!th(t,e["column-count"],null)||(a=s,this.isAutoWidth=!1)),i?a?D||(D=Be(t,g,ye(t,i,a))):a=Be(t,g,ye(t,i,D)):i=Be(t,g,ye(t,D,a))}var E=eh(t,e["snap-width"]||(this.parentInstance?this.parentInstance.style["snap-width"]:null),n);e.left=new qe(i),e["margin-left"]=new qe(u),e["border-left-width"]=new qe(r),e["padding-left"]=new qe(o),e.width=new qe(a),e["max-width"]=new qe(s||a),e["padding-right"]=new qe(l),e["border-right-width"]=new qe(c),e["margin-right"]=new qe(h),e.right=new qe(D),e["snap-width"]=new qe(E)},e.initVertical=function(){var t=this.pageBox.scope,e=this.style,n=this.parentInstance?this.parentInstance.style.width.toExpr(t,null):null,i=this.parentInstance?this.parentInstance.style.height.toExpr(t,null):null,u=th(t,e.top,i),r=th(t,e["margin-top"],n),o=ih(t,e["border-top-width"],e["border-top-style"],n),a=eh(t,e["padding-top"],n),s=th(t,e.height,i),l=th(t,e["max-height"],i),c=eh(t,e["padding-bottom"],n),h=ih(t,e["border-bottom-width"],e["border-bottom-style"],n),D=th(t,e["margin-bottom"],n),d=th(t,e.bottom,i),f=ye(t,o,a),p=ye(t,h,c);if(u&&d&&s){var g=Be(t,i,ye(t,s,ye(t,ye(t,u,f),p)));r?D?d=Be(t,g,r):D=Be(t,g,ye(t,d,r)):(g=Be(t,g,d),D?r=Be(t,g,D):D=r=we(t,g,new ve(t,.5)))}else{r||(r=t.zero),D||(D=t.zero),u||d||s||(u=t.zero),u||s?u||d?s||d||(s=this.autoHeight,this.isAutoHeight=!0):u=t.zero:(s=this.autoHeight,this.isAutoHeight=!0);var E=Be(t,i,ye(t,ye(t,r,f),ye(t,D,p)));this.isAutoHeight&&(l||(l=Be(t,E,u||d)),this.vertical&&(th(t,e["column-width"],null)||th(t,e["column-count"],null))&&(s=l,this.isAutoHeight=!1)),u?s?d||(d=Be(t,E,ye(t,u,s))):s=Be(t,E,ye(t,d,u)):u=Be(t,E,ye(t,d,s))}var C=eh(t,e["snap-height"]||(this.parentInstance?this.parentInstance.style["snap-height"]:null),n);e.top=new qe(u),e["margin-top"]=new qe(r),e["border-top-width"]=new qe(o),e["padding-top"]=new qe(a),e.height=new qe(s),e["max-height"]=new qe(l||s),e["padding-bottom"]=new qe(c),e["border-bottom-width"]=new qe(h),e["margin-bottom"]=new qe(D),e.bottom=new qe(d),e["snap-height"]=new qe(C)},e.initColumns=function(){var t=this.pageBox.scope,e=this.style,n=th(t,e[this.vertical?"height":"width"],null),i=th(t,e["column-width"],n),u=th(t,e["column-count"],null),r=function(t,e,n){return!e||e===Je.normal||an(e)?null:e.toExpr(t,null)}(t,e["column-gap"]);r||(r=new de(t,1,"em")),i&&!u&&(u=new Ee(t,"floor",[Se(t,ye(t,n,r),ye(t,i,r))]),u=new Ee(t,"max",[t.one,u])),u||(u=t.one),i=Be(t,Se(t,ye(t,n,r),u),r),e["column-width"]=new qe(i),e["column-count"]=new qe(u),e["column-gap"]=new qe(r)},e.depends=function(t,e,n){return this.style[t].toExpr(this.pageBox.scope,null).depend(e,n)},e.init=function(t){var e=this;t.registerInstance(this.pageBox.key,this);var n=this.pageBox.scope,i=this.style,u=this.parentInstance?this.parentInstance.getActiveRegions(t):null,r=Oa(this.cascaded,t,u,!1);this.vertical=Pa(r,t,!!this.parentInstance&&this.parentInstance.vertical),this.rtl=ka(r,t,!!this.parentInstance&&this.parentInstance.rtl),_a(r,i,this.vertical,this.rtl,(function(t,e){return e.value})),this.autoWidth=new ge(n,(function(){return e.calculatedWidth}),"autoWidth"),this.autoHeight=new ge(n,(function(){return e.calculatedHeight}),"autoHeight"),this.initHorizontal(),this.initVertical(),this.initColumns(),this.initEnabled()},e.getProp=function(t,e){var n,i,u=this.style[e];return!u&&ro(e)&&(u="font-size"===e&&t.isRelativeRootFontSize&&t.rootFontSize?new Ue(t.rootFontSize,"px"):null==(i=(null==(n=t.styler)?void 0:n.rootStyle)[e])?void 0:i.value),u&&(u=Va(t,u,e)),u},e.getPropAsNumber=function(t,e){var n=this.style[e];if(n){var i,u,r=/\b(height|top|bottom)\b/.test(e)?null!=(i=t.pageAreaHeight)?i:t.pageHeight():null!=(u=t.pageAreaWidth)?u:t.pageWidth();n=Va(t,n,e,r)}return Ze(n,t)},e.getSpecial=function(t,e){var n=ho(this.cascaded,e);if(n){for(var i=[],u=0;u<n.length;u++){var r=n[u].evaluate(t,"");r&&r!==Pe&&i.push(r)}if(i.length)return i}return null},e.getActiveRegions=function(t){var e=this.getSpecial(t,"region-id");if(e){for(var n=[],i=0;i<e.length;i++)n[i]=e[i].toString();return n}return null},e.propagateProperty=function(t,e,n,i){this.propagatePropertyToElement(t,e.element,n,i)},e.propagatePropertyToElement=function(t,e,n,i){var u=this.getProp(t,n);u&&(u.isNumeric()&&Ut(u.unit)&&(u=Qe(u,t)),"font-family"===n&&(u=i.filterFontFamily(u)),(n.startsWith("background")||"z-index"===n)&&e.parentElement.hasAttribute("data-vivliostyle-bleed-box")&&(e=e.parentElement),tt(e,n,u.toString()))},e.propagateDelayedProperty=function(t,e,n,i){var u=this.getProp(t,n);u&&i.push(new dr(e.element,n,u))},e.assignLeftPosition=function(t,e){var n=this.getPropAsNumber(t,"left"),i=this.getPropAsNumber(t,"margin-left"),u=this.getPropAsNumber(t,"padding-left"),r=this.getPropAsNumber(t,"border-left-width"),o=this.getPropAsNumber(t,"width");e.setHorizontalPosition(n,o),tt(e.element,"margin-left",i+"px"),tt(e.element,"padding-left",u+"px"),tt(e.element,"border-left-width",r+"px"),e.marginLeft=i,e.borderLeft=r,e.paddingLeft=u},e.assignRightPosition=function(t,e){var n=this.getPropAsNumber(t,"right"),i=this.getPropAsNumber(t,"snap-height"),u=this.getPropAsNumber(t,"margin-right"),r=this.getPropAsNumber(t,"padding-right"),o=this.getPropAsNumber(t,"border-right-width");if(tt(e.element,"margin-right",u+"px"),tt(e.element,"padding-right",r+"px"),tt(e.element,"border-right-width",o+"px"),e.marginRight=u,e.borderRight=o,this.vertical&&i>0){var a=n+e.getInsetRight(),s=a-Math.floor(a/i)*i;s>0&&(e.snapOffsetX=i-s,r+=e.snapOffsetX)}e.paddingRight=r,e.snapWidth=i},e.assignTopPosition=function(t,e){var n=this.getPropAsNumber(t,"snap-height"),i=this.getPropAsNumber(t,"top"),u=this.getPropAsNumber(t,"margin-top"),r=this.getPropAsNumber(t,"padding-top"),o=this.getPropAsNumber(t,"border-top-width");if(e.top=i,e.marginTop=u,e.borderTop=o,e.snapHeight=n,!this.vertical&&n>0){var a=i+e.getInsetTop(),s=a-Math.floor(a/n)*n;s>0&&(e.snapOffsetY=n-s,r+=e.snapOffsetY)}e.paddingTop=r,tt(e.element,"top",i+"px"),tt(e.element,"margin-top",u+"px"),tt(e.element,"padding-top",r+"px"),tt(e.element,"border-top-width",o+"px")},e.assignBottomPosition=function(t,e){var n=this.getPropAsNumber(t,"margin-bottom"),i=this.getPropAsNumber(t,"padding-bottom"),u=this.getPropAsNumber(t,"border-bottom-width"),r=this.getPropAsNumber(t,"height")-e.snapOffsetY;tt(e.element,"height",r+"px"),tt(e.element,"margin-bottom",n+"px"),tt(e.element,"padding-bottom",i+"px"),tt(e.element,"border-bottom-width",u+"px"),e.height=r-e.snapOffsetY,e.marginBottom=n,e.borderBottom=u,e.paddingBottom=i},e.assignBeforePosition=function(t,e){this.vertical?this.assignRightPosition(t,e):this.assignTopPosition(t,e)},e.assignAfterPosition=function(t,e){this.vertical?this.assignLeftPosition(t,e):this.assignBottomPosition(t,e)},e.assignStartEndPosition=function(t,e){this.vertical?(this.assignTopPosition(t,e),this.assignBottomPosition(t,e)):(this.assignRightPosition(t,e),this.assignLeftPosition(t,e))},e.sizeWithMaxHeight=function(t,e){tt(e.element,"border-top-width","0px");var n=this.getPropAsNumber(t,"max-height");this.isTopDependentOnAutoHeight?e.setVerticalPosition(0,n):(this.assignTopPosition(t,e),e.height=n-=e.snapOffsetY,tt(e.element,"height",n+"px"))},e.sizeWithMaxWidth=function(t,e){tt(e.element,"border-left-width","0px");var n=this.getPropAsNumber(t,"max-width");if(this.isRightDependentOnAutoWidth)e.setHorizontalPosition(0,n);else{this.assignRightPosition(t,e),e.width=n-=e.snapOffsetX;var i=this.getPropAsNumber(t,"right");tt(e.element,"right",i+"px"),tt(e.element,"width",n+"px")}},e.prepareContainer=function(t,e,n,i,u){this.parentInstance&&this.vertical==this.parentInstance.vertical||tt(e.element,"writing-mode",this.vertical?"vertical-rl":"horizontal-tb"),(this.vertical?this.isAutoWidth:this.isAutoHeight)?this.vertical?this.sizeWithMaxWidth(t,e):this.sizeWithMaxHeight(t,e):(this.assignBeforePosition(t,e),this.assignAfterPosition(t,e)),(this.vertical?this.isAutoHeight:this.isAutoWidth)?this.vertical?this.sizeWithMaxHeight(t,e):this.sizeWithMaxWidth(t,e):this.assignStartEndPosition(t,e);for(var r=0;r<oh.length;r++)this.propagateProperty(t,e,oh[r],i)},e.transferContentProps=function(t,e,n,i){for(var u=0;u<sh.length;u++)this.propagateProperty(t,e,sh[u],i)},e.transferSingleUriContentProps=function(t,e,n){for(var i,u,r,o,a,s,l=this,c=0;c<lh.length;c++){var h=lh[c];"width"===h&&(!(s=null==(o=null!=(a=l.cascaded.width)?a:l.cascaded[l.vertical?"block-size":"inline-size"])?void 0:o.value)||s===Je.auto||an(s))||"height"===h&&(!(r=null==(i=null!=(u=l.cascaded.height)?u:l.cascaded[l.vertical?"inline-size":"block-size"])?void 0:i.value)||r===Je.auto||an(r))||this.propagatePropertyToElement(t,e,h,n)}},e.finishContainer=function(t,e,n,i,u,r,o){this.vertical?this.calculatedWidth=e.computedBlockSize+e.snapOffsetX:this.calculatedHeight=e.computedBlockSize+e.snapOffsetY;var a=(this.vertical||!i)&&this.isAutoHeight,s=(!this.vertical||!i)&&this.isAutoWidth,l=null;if((s||a)&&(s&&tt(e.element,"width","auto"),a&&tt(e.element,"height","auto"),l=r.getElementClientRect(i?i.element:e.element),s&&(this.calculatedWidth=Math.ceil(l.right-l.left-e.paddingLeft-e.borderLeft-e.paddingRight-e.borderRight),this.vertical&&(this.calculatedWidth+=e.snapOffsetX)),a&&(this.calculatedHeight=l.bottom-l.top-e.paddingTop-e.borderTop-e.paddingBottom-e.borderBottom,this.vertical||(this.calculatedHeight+=e.snapOffsetY))),(this.vertical?this.isAutoHeight:this.isAutoWidth)&&this.assignStartEndPosition(t,e),(this.vertical?this.isAutoWidth:this.isAutoHeight)&&((this.vertical?this.isRightDependentOnAutoWidth:this.isTopDependentOnAutoHeight)&&this.assignBeforePosition(t,e),this.assignAfterPosition(t,e)),u>1){var c=this.getPropAsNumber(t,"column-rule-width"),h=this.getProp(t,"column-rule-style"),D=this.getProp(t,"column-rule-color");if(c>0&&h&&h!=Je.none&&D!=Je.transparent)for(var d=this.getPropAsNumber(t,"column-gap"),f=this.vertical?e.height:e.width,p=this.vertical?"border-top":"border-left",g=1;g<u;g++){var E=this.vertical?(f+d)*g/u-d/2+e.paddingTop-c/2:(f+d)*g/u-d/2+e.paddingLeft-c/2,C=this.vertical?e.width+e.paddingLeft+e.paddingRight:e.height+e.paddingTop+e.paddingBottom,v=e.element.ownerDocument.createElement("div");tt(v,"position","absolute"),tt(v,this.vertical?"left":"top","0px"),tt(v,this.vertical?"top":"left",E+"px"),tt(v,this.vertical?"height":"width","0px"),tt(v,this.vertical?"width":"height",C+"px"),tt(v,p,c+"px "+h.toString()+(D?" "+D.toString():"")),e.element.insertBefore(v,e.element.firstChild)}}for(var F=0;F<ah.length;F++)this.propagateProperty(t,e,ah[F],o);for(var m=0;m<ch.length;m++)this.propagateDelayedProperty(t,e,ch[m],n.delayedItems)},e.applyCascadeAndInit=function(t,e){var n=this.cascaded,i=this.pageBox.specified;for(var u in i)uo(u)&&ao(n,u,oo(i,u));if(this.pageBox.pseudoName==hh)for(var r in e)(r.match(/^background-/)||"writing-mode"==r)&&(n[r]=e[r]);if("layout-host"==this.pageBox.pseudoName)for(var o in e)o.match(/^background-/)||"writing-mode"==o||(n[o]=e[o]);t.pushRule(this.pageBox.classes,null,n);var a=n.content;a&&(n.content=a.filterValue(new aa(t,null,t.counterResolver))),this.init(t.context);for(var s,l=R(this.pageBox.children);!(s=l()).done;)s.value.createInstance(this).applyCascadeAndInit(t,e);t.popRule()},e.resolveAutoSizing=function(t){this.isAutoWidth&&(this.isRightDependentOnAutoWidth=this.depends("right",this.autoWidth,t)||this.depends("margin-right",this.autoWidth,t)||this.depends("border-right-width",this.autoWidth,t)||this.depends("padding-right",this.autoWidth,t)),this.isAutoHeight&&(this.isTopDependentOnAutoHeight=this.depends("top",this.autoHeight,t)||this.depends("margin-top",this.autoHeight,t)||this.depends("border-top-width",this.autoHeight,t)||this.depends("padding-top",this.autoHeight,t));for(var e,n=R(this.children);!(e=n()).done;)e.value.resolveAutoSizing(t)},t}(),oh=["border-left-style","border-right-style","border-top-style","border-bottom-style","border-left-color","border-right-color","border-top-color","border-bottom-color","outline-style","outline-color","outline-width","overflow","visibility"],ah=["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat","background-attachment","background-color","background-image","background-repeat","background-position","background-clip","background-origin","background-size","opacity","z-index","background-blend-mode","isolation","mix-blend-mode","filter"],sh=["color","font-family","font-size","font-style","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-transform","white-space","word-spacing","font-feature-settings","font-kerning","font-size-adjust","font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian","font-stretch","text-combine-upright","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-fill-color","text-orientation","text-shadow","text-stroke-color","text-stroke-width","text-underline-position"],lh=["width","height","image-resolution","object-fit","object-position"],ch=["transform","transform-origin"],hh="background-host",Dh=function(t){function e(e){return t.call(this,null,e)||this}return N(e,t),e.prototype.applyCascadeAndInit=function(e,n){t.prototype.applyCascadeAndInit.call(this,e,n),this.children.sort((function(t,e){return e.pageBox.specificity-t.pageBox.specificity||t.pageBox.index-e.pageBox.index}))},e}(rh),dh=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).pageMasterInstance=k(i),i}N(e,t);var n=e.prototype;return n.boxSpecificEnabled=function(t){var e=this.pageBox.pageMaster;return e.condition&&(t=be(e.scope,t,e.condition)),t},n.adjustPageLayout=function(t,e,n){},e}(rh),fh=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).pageMasterInstance=e.pageMasterInstance,i}return N(e,t),e}(rh),ph=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).pageMasterInstance=e.pageMasterInstance,i}N(e,t);var n=e.prototype;return n.processPartitionList=function(t,e,n){var i=null;if(e instanceof _e&&(i=[e]),e instanceof $e&&(i=e.values),i)for(var u=this.pageBox.scope,r=0;r<i.length;r++)if(i[r]instanceof _e){var o=Ot(i[r].name,"enabled"),a=new fe(u,o);n&&(a=new Kt(u,a)),t=be(u,t,a)}return t},n.boxSpecificEnabled=function(t){var e=this.pageBox.scope,n=this.style,i=uh(e,n.required,e._false)!==e._false;if(i||this.isAutoHeight){var u=function(t,e,n){return!e||an(e)?new ve(t,"body"):e.toExpr(t,t.zero)}(e,n["flow-from"]);t=be(e,t,new Ee(e,"has-content",[u]))}if(t=this.processPartitionList(t,n["required-partitions"],!1),t=this.processPartitionList(t,n["conflicting-partitions"],!0),i){var r=this.pageMasterInstance.style.enabled,o=r?r.toExpr(e,null):e._true;o=be(e,o,t),this.pageMasterInstance.style.enabled=new qe(o)}return t},n.prepareContainer=function(e,n,i,u,r){i.pageAreaElement||tt(n.element,"overflow","hidden"),t.prototype.prepareContainer.call(this,e,n,i,u,r)},e}(rh),gh=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e,n,!1)||this).target=void 0,r.validatorSet=void 0,r.target=i,r.validatorSet=u,r}N(e,t);var n=e.prototype;return n.property=function(t,e,n){this.validatorSet.validatePropertyAndHandleShorthand(t,e,n,this)},n.unknownProperty=function(t,e){this.report("E_INVALID_PROPERTY "+t+": "+e.toString())},n.invalidPropertyValue=function(t,e){this.report("E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},n.simpleProperty=function(t,e,n){this.target.specified[t]=new Qr(e,n?lu:cu)},e}(pu),Eh=function(t){function e(e,n,i,u){return t.call(this,e,n,i,u)||this}return N(e,t),e}(gh),Ch=function(t){function e(e,n,i,u){var r;return r=t.call(this,e,n,i,u)||this,i.specified.width=new Qr(tn,0),i.specified.height=new Qr(tn,0),r}N(e,t);var n=e.prototype;return n.startPartitionRule=function(t,e,n){var i=new Jc(this.scope,t,e,n,this.target),u=new Eh(this.scope,this.owner,i,this.validatorSet);this.owner.pushHandler(u)},n.startPartitionGroupRule=function(t,n,i){var u=new Qc(this.scope,t,n,i,this.target),r=new e(this.scope,this.owner,u,this.validatorSet);this.owner.pushHandler(r)},e}(gh),vh=function(t){function e(e,n,i,u){return t.call(this,e,n,i,u)||this}N(e,t);var n=e.prototype;return n.startPartitionRule=function(t,e,n){var i=new Jc(this.scope,t,e,n,this.target),u=new Eh(this.scope,this.owner,i,this.validatorSet);this.owner.pushHandler(u)},n.startPartitionGroupRule=function(t,e,n){var i=new Qc(this.scope,t,e,n,this.target),u=new Ch(this.scope,this.owner,i,this.validatorSet);this.owner.pushHandler(u)},e}(gh);function Fh(e){var n,i,u=null==(n=e["writing-mode"])?void 0:n.value,r=null==(i=e.direction)?void 0:i.value;return u===Je.vertical_lr||u!==Je.vertical_rl&&r!==Je.rtl?t.PageProgression.LTR:t.PageProgression.RTL}var mh={a10:{width:new Ue(26,"mm"),height:new Ue(37,"mm")},a9:{width:new Ue(37,"mm"),height:new Ue(52,"mm")},a8:{width:new Ue(52,"mm"),height:new Ue(74,"mm")},a7:{width:new Ue(74,"mm"),height:new Ue(105,"mm")},a6:{width:new Ue(105,"mm"),height:new Ue(148,"mm")},a5:{width:new Ue(148,"mm"),height:new Ue(210,"mm")},a4:{width:new Ue(210,"mm"),height:new Ue(297,"mm")},a3:{width:new Ue(297,"mm"),height:new Ue(420,"mm")},a2:{width:new Ue(420,"mm"),height:new Ue(594,"mm")},a1:{width:new Ue(594,"mm"),height:new Ue(841,"mm")},a0:{width:new Ue(841,"mm"),height:new Ue(1189,"mm")},b10:{width:new Ue(31,"mm"),height:new Ue(44,"mm")},b9:{width:new Ue(44,"mm"),height:new Ue(62,"mm")},b8:{width:new Ue(62,"mm"),height:new Ue(88,"mm")},b7:{width:new Ue(88,"mm"),height:new Ue(125,"mm")},b6:{width:new Ue(125,"mm"),height:new Ue(176,"mm")},b5:{width:new Ue(176,"mm"),height:new Ue(250,"mm")},b4:{width:new Ue(250,"mm"),height:new Ue(353,"mm")},b3:{width:new Ue(353,"mm"),height:new Ue(500,"mm")},b2:{width:new Ue(500,"mm"),height:new Ue(707,"mm")},b1:{width:new Ue(707,"mm"),height:new Ue(1e3,"mm")},b0:{width:new Ue(1e3,"mm"),height:new Ue(1414,"mm")},c10:{width:new Ue(28,"mm"),height:new Ue(40,"mm")},c9:{width:new Ue(40,"mm"),height:new Ue(57,"mm")},c8:{width:new Ue(57,"mm"),height:new Ue(81,"mm")},c7:{width:new Ue(81,"mm"),height:new Ue(114,"mm")},c6:{width:new Ue(114,"mm"),height:new Ue(162,"mm")},c5:{width:new Ue(162,"mm"),height:new Ue(229,"mm")},c4:{width:new Ue(229,"mm"),height:new Ue(324,"mm")},c3:{width:new Ue(324,"mm"),height:new Ue(458,"mm")},c2:{width:new Ue(458,"mm"),height:new Ue(648,"mm")},c1:{width:new Ue(648,"mm"),height:new Ue(917,"mm")},c0:{width:new Ue(917,"mm"),height:new Ue(1297,"mm")},"jis-b10":{width:new Ue(32,"mm"),height:new Ue(45,"mm")},"jis-b9":{width:new Ue(45,"mm"),height:new Ue(64,"mm")},"jis-b8":{width:new Ue(64,"mm"),height:new Ue(91,"mm")},"jis-b7":{width:new Ue(91,"mm"),height:new Ue(128,"mm")},"jis-b6":{width:new Ue(128,"mm"),height:new Ue(182,"mm")},"jis-b5":{width:new Ue(182,"mm"),height:new Ue(257,"mm")},"jis-b4":{width:new Ue(257,"mm"),height:new Ue(364,"mm")},"jis-b3":{width:new Ue(364,"mm"),height:new Ue(515,"mm")},"jis-b2":{width:new Ue(515,"mm"),height:new Ue(728,"mm")},"jis-b1":{width:new Ue(728,"mm"),height:new Ue(1030,"mm")},"jis-b0":{width:new Ue(1030,"mm"),height:new Ue(1456,"mm")},letter:{width:new Ue(8.5,"in"),height:new Ue(11,"in")},legal:{width:new Ue(8.5,"in"),height:new Ue(14,"in")},ledger:{width:new Ue(11,"in"),height:new Ue(17,"in")}},Ah=new Ue(.24,"pt");new Ue(3,"mm");var bh,yh,Bh=new Ue(10,"mm"),wh=new Ue(13,"mm");function Sh(t){var e={width:en,height:nn,bleed:un,bleedOffset:un,cropOffset:un},n=t.size;if(n&&n.value!==Je.auto){var i,u,r=n.value;if(r.isSpaceList()?(i=r.values[0],u=r.values[1]):(i=r,u=null),i.isNumeric())e.width=i,e.height=u||i;else{var o=i.name&&mh[i.name.toLowerCase()];o&&(u&&u===Je.landscape?(e.width=o.height,e.height=o.width):(e.width=o.width,e.height=o.height))}}var a=t.marks,s=t.bleed,l=a&&!an(a.value)?a.value:Je.none,c=s&&!an(s.value)?s.value:Je.auto;c===Je.auto?l!==Je.none&&(l.isSpaceList()?l.values.some((function(t){return t===Je.crop})):l===Je.crop)&&(e.bleed=new Ue(6,"pt")):c.isNumeric()&&(e.bleed=c);var h=t["crop-offset"],D=h&&!an(h.value)?h.value:Je.auto;return D===Je.auto?l!==Je.none&&(e.bleedOffset=wh):D.isNumeric()&&(e.cropOffset=D),e}function Nh(t,e){var n={},i=Math.max(0,t.bleed.num)*e.queryUnitSize(t.bleed.unit,!1),u=!t.cropOffset.num&&t.bleedOffset.num?t.bleedOffset.num*e.queryUnitSize(t.bleedOffset.unit,!1):Math.max(0,t.cropOffset.num*e.queryUnitSize(t.cropOffset.unit,!1)-i),r=i+u,o=t.width;n.pageWidth=o===en?e.pref.defaultPaperSize?e.pref.defaultPaperSize.width*e.queryUnitSize("px",!1):(e.pref.spreadView?Math.floor(e.viewportWidth/2)-e.pref.pageBorder:e.viewportWidth)-2*r:o.num*e.queryUnitSize(o.unit,!1);var a=t.height;return n.pageHeight=a===nn?e.pref.defaultPaperSize?e.pref.defaultPaperSize.height*e.queryUnitSize("px",!1):e.viewportHeight-2*r:a.num*e.queryUnitSize(a.unit,!1),n.bleed=i,n.bleedOffset=u,n.cropOffset=r,n}function xh(t,e,n){var i=t.createElementNS(G.SVG,"svg");return i.setAttribute("width",e),i.setAttribute("height",n),i.style.position="absolute",i}function Th(t,e,n){var i=t.createElementNS(G.SVG,n=n||"polyline");return i.setAttribute("stroke","#010101"),i.setAttribute("stroke-width",e),i.setAttribute("fill","none"),i}!function(t){t.TOP_LEFT="top left",t.TOP_RIGHT="top right",t.BOTTOM_LEFT="bottom left",t.BOTTOM_RIGHT="bottom right"}(bh||(bh={})),function(t){t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right"}(yh||(yh={}));var Ih,Ph,kh=(Ih={width:!0,height:!0,"block-size":!0,"inline-size":!0,margin:!0,padding:!0,border:!0,outline:!0,"outline-width":!0,"outline-style":!0,"outline-color":!0},["left","right","top","bottom","before","after","start","end","block-start","block-end","inline-start","inline-end"].forEach((function(t){Ih["margin-"+t]=!0,Ih["padding-"+t]=!0,Ih["border-"+t+"-width"]=!0,Ih["border-"+t+"-style"]=!0,Ih["border-"+t+"-color"]=!0})),Ih);!function(t){t.START="start",t.CENTER="center",t.END="end"}(Ph||(Ph={}));var Oh,Rh={"top-left-corner":{order:1,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:null},"top-left":{order:2,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:Ph.START},"top-center":{order:3,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:Ph.CENTER},"top-right":{order:4,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:Ph.END},"top-right-corner":{order:5,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:null},"right-top":{order:6,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:Ph.START},"right-middle":{order:7,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:Ph.CENTER},"right-bottom":{order:8,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:Ph.END},"bottom-right-corner":{order:9,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:null},"bottom-right":{order:10,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:Ph.END},"bottom-center":{order:11,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:Ph.CENTER},"bottom-left":{order:12,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:Ph.START},"bottom-left-corner":{order:13,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:null},"left-bottom":{order:14,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:Ph.END},"left-middle":{order:15,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:Ph.CENTER},"left-top":{order:16,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:Ph.START}},Lh=(Oh=Rh,Object.keys(Oh).sort((function(t,e){return Oh[t].order-Oh[e].order}))),_h="vivliostyle-page-rule-master",Mh="_marginBoxes",Uh=function(t){function e(e,n,i){var u;(u=t.call(this,e,null,_h,[],n,null,0)||this).bodyPartitionKey=void 0,u.pageMarginBoxes={};var r=Sh(i),o=new Vh(u.scope,k(u),i,r);return u.bodyPartitionKey=o.key,u.createPageMarginBoxes(i),u.applySpecified(i,r),u}N(e,t);var n=e.prototype;return n.createPageMarginBoxes=function(t){var e=this,n=t[Mh];n&&Lh.forEach((function(i){n[i]&&(e.pageMarginBoxes[i]=new zh(e.scope,e,i,t))}))},n.applySpecified=function(t,e){for(var n in this.specified.position=new Qr(Je.relative,0),this.specified.width=new Qr(e.width,0),this.specified.height=new Qr(e.height,0),t)kh[n]||"background-clip"===n||(this.specified[n]=t[n])},n.createInstance=function(t){return new Hh(t,this)},e}(Zc),Vh=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e,null,null,[],n)||this).pageSize=void 0,r.pageSize=u,r.specified["z-index"]=new Qr(new ze(0),0),r.applySpecified(i),r}N(e,t);var n=e.prototype;return n.applySpecified=function(t){for(var e in this.specified["flow-from"]=new Qr(Me("body"),0),this.specified.position=new Qr(Je.absolute,0),this.specified.overflow=new Qr(Je.visible,0),kh)kh.hasOwnProperty(e)&&(this.specified[e]=t[e])},n.createInstance=function(t){return new Xh(t,this)},e}(Jc),zh=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e,null,null,[],n)||this).marginBoxName=void 0,r.marginBoxName=i,r.applySpecified(u),r}N(e,t);var n=e.prototype;return n.applySpecified=function(t){var e=t[Mh][this.marginBoxName];for(var n in t){var i=e[n];(zr[n]||i&&i.value===Je.inherit)&&(this.specified[n]=t[n])}for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var r=e[u];r&&r.value!==Pe&&r.value!==Je.inherit&&r.value!==Je.unset&&r.value!==Je.revert&&(this.specified[u]=r)}},n.createInstance=function(t){return new $h(t,this)},e}(Jc),Hh=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).pageAreaDimension=null,i.pageMarginBoxInstances={},i}N(e,t);var n=e.prototype;return n.applyCascadeAndInit=function(e,n){var i=this.cascaded;for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u))switch(u){case"writing-mode":case"direction":i[u]=n[u]}t.prototype.applyCascadeAndInit.call(this,e,n)},n.initHorizontal=function(){var t=this.style;t.left=un,t["margin-left"]=un,t["border-left-width"]=un,t["padding-left"]=un,t["padding-right"]=un,t["border-right-width"]=un,t["margin-right"]=un,t.right=un},n.initVertical=function(){var t=this.style;t.top=un,t["margin-top"]=un,t["border-top-width"]=un,t["padding-top"]=un,t["padding-bottom"]=un,t["border-bottom-width"]=un,t["margin-bottom"]=un,t.bottom=un},n.setPageAreaDimension=function(t){this.pageAreaDimension=t;var e=this.style;e.width=new qe(t.borderBoxWidth),e.height=new qe(t.borderBoxHeight),e["padding-left"]=new qe(t.marginLeft),e["padding-right"]=new qe(t.marginRight),e["padding-top"]=new qe(t.marginTop),e["padding-bottom"]=new qe(t.marginBottom)},n.adjustPageLayout=function(t,e,n){var i=e.marginBoxes,u={start:this.pageAreaDimension.marginLeft,end:this.pageAreaDimension.marginRight,extent:this.pageAreaDimension.borderBoxWidth},r={start:this.pageAreaDimension.marginTop,end:this.pageAreaDimension.marginBottom,extent:this.pageAreaDimension.borderBoxHeight};this.sizeMarginBoxesAlongVariableDimension(i.top,!0,u,t,n),this.sizeMarginBoxesAlongVariableDimension(i.bottom,!0,u,t,n),this.sizeMarginBoxesAlongVariableDimension(i.left,!1,r,t,n),this.sizeMarginBoxesAlongVariableDimension(i.right,!1,r,t,n)},n.sizeMarginBoxesAlongVariableDimension=function(t,e,n,i,u){var r=Ph.START,o=Ph.CENTER,a=Ph.END,s=this.pageBox.scope,l={},c={},h={};for(var D in t){var d=Rh[D];if(d){var f=t[D],p=this.pageMarginBoxInstances[D],g=new Gh(f,p.style,e,s,u);l[d.positionAlongVariableDimension]=f,c[d.positionAlongVariableDimension]=p,h[d.positionAlongVariableDimension]=g}}var E={start:n.start.evaluate(i),end:n.end.evaluate(i),extent:n.extent.evaluate(i)},C=this.getSizesOfMarginBoxesAlongVariableDimension(h,E.extent),v=!1,F={};Object.keys(l).forEach((function(t){var r=t,o=th(s,c[r].style[e?"max-width":"max-height"],n.extent);if(o){var a=o.evaluate(i);if(C[r]>a){var D=h[r]=new Wh(l[r],c[r].style,e,s,u,a);F[r]=D.getOuterSize(),v=!0}}})),v&&(C=this.getSizesOfMarginBoxesAlongVariableDimension(h,E.extent),v=!1,[r,o,a].forEach((function(t){C[t]=F[t]||C[t]})));var m={};Object.keys(l).forEach((function(t){var r=t,o=th(s,c[r].style[e?"min-width":"min-height"],n.extent);if(o){var a=o.evaluate(i);if(C[r]<a){var D=h[r]=new Wh(l[r],c[r].style,e,s,u,a);m[r]=D.getOuterSize(),v=!0}}})),v&&(C=this.getSizesOfMarginBoxesAlongVariableDimension(h,E.extent),[r,o,a].forEach((function(t){C[t]=m[t]||C[t]})));var A=E.start+E.extent,b=E.start+(E.start+E.extent);[r,o,a].forEach((function(t){var n=C[t];if(n){var i=l[t],u=0;switch(t){case r:u=e?i.left:i.top;break;case o:u=(b-n)/2;break;case a:u=A-n}e?i.setHorizontalPosition(u,n-i.getInsetLeft()-i.getInsetRight()):i.setVerticalPosition(u,n-i.getInsetTop()-i.getInsetBottom())}}))},n.getSizesOfMarginBoxesAlongVariableDimension=function(t,e){var n=t[Ph.START],i=t[Ph.CENTER],u=t[Ph.END],r={};if(i){var o=[n,u].filter((function(t){return t})),a=o.length?new jh(o):null,s=this.distributeAutoMarginBoxSizes(i,a,e);s.xSize&&(r[Ph.CENTER]=s.xSize);var l=(e-(s.xSize||i.getOuterSize()))/2;n&&n.hasAutoSize()&&(r[Ph.START]=l),u&&u.hasAutoSize()&&(r[Ph.END]=l)}else{var c=this.distributeAutoMarginBoxSizes(n,u,e);c.xSize&&(r[Ph.START]=c.xSize),c.ySize&&(r[Ph.END]=c.ySize)}return r},n.distributeAutoMarginBoxSizes=function(t,e,n){var i={xSize:null,ySize:null};if(t&&e)if(t.hasAutoSize()&&e.hasAutoSize()){var u=t.getOuterMaxContentSize(),r=e.getOuterMaxContentSize();if(u>0&&r>0){var o=u+r;if(o<n)i.xSize=n*u/o;else{var a=t.getOuterMinContentSize(),s=a+e.getOuterMinContentSize();s<n?i.xSize=a+(n-s)*(u-a)/(o-s):s>0&&(i.xSize=n*a/s)}i.xSize>0&&(i.ySize=n-i.xSize)}else u>0?i.xSize=n:r>0&&(i.ySize=n)}else t.hasAutoSize()?i.xSize=Math.max(n-e.getOuterSize(),0):e.hasAutoSize()&&(i.ySize=Math.max(n-t.getOuterSize(),0));else t?t.hasAutoSize()&&(i.xSize=n):e&&e.hasAutoSize()&&(i.ySize=n);return i},n.prepareContainer=function(e,n,i,u,r){t.prototype.prepareContainer.call(this,e,n,i,u,r),n.element.setAttribute("data-vivliostyle-page-box",!0)},e}(dh),Gh=function(){function t(t,e,n,i,u){this.container=void 0,this.isHorizontal=void 0,this.clientLayout=void 0,this.hasAutoSize_=void 0,this.size=null,this.container=t,this.isHorizontal=n,this.clientLayout=u;var r=e[n?"width":"height"];this.hasAutoSize_=!r||r===Je.auto||an(r)}var e=t.prototype;return e.hasAutoSize=function(){return this.hasAutoSize_},e.getSize=function(){return this.size||(this.size=Ya(this.clientLayout,this.container.element,this.isHorizontal?[Ka.MAX_CONTENT_WIDTH,Ka.MIN_CONTENT_WIDTH]:[Ka.MAX_CONTENT_HEIGHT,Ka.MIN_CONTENT_HEIGHT])),this.size},e.getOuterMaxContentSize=function(){var t=this.getSize();return this.isHorizontal?this.container.getInsetLeft()+t[Ka.MAX_CONTENT_WIDTH]+this.container.getInsetRight():this.container.getInsetTop()+t[Ka.MAX_CONTENT_HEIGHT]+this.container.getInsetBottom()},e.getOuterMinContentSize=function(){var t=this.getSize();return this.isHorizontal?this.container.getInsetLeft()+t[Ka.MIN_CONTENT_WIDTH]+this.container.getInsetRight():this.container.getInsetTop()+t[Ka.MIN_CONTENT_HEIGHT]+this.container.getInsetBottom()},e.getOuterSize=function(){return this.isHorizontal?this.container.getInsetLeft()+this.container.width+this.container.getInsetRight():this.container.getInsetTop()+this.container.height+this.container.getInsetBottom()},t}(),jh=function(){function t(t){this.params=void 0,this.params=t}var e=t.prototype;return e.hasAutoSize=function(){return this.params.some((function(t){return t.hasAutoSize()}))},e.getOuterMaxContentSize=function(){var t=this.params.map((function(t){return t.getOuterMaxContentSize()}));return Math.max.apply(null,t)*t.length},e.getOuterMinContentSize=function(){var t=this.params.map((function(t){return t.getOuterMinContentSize()}));return Math.max.apply(null,t)*t.length},e.getOuterSize=function(){var t=this.params.map((function(t){return t.getOuterSize()}));return Math.max.apply(null,t)*t.length},t}(),Wh=function(t){function e(e,n,i,u,r,o){var a;return(a=t.call(this,e,n,i,u,r)||this).fixedSize=void 0,a.fixedSize=o,a}N(e,t);var n=e.prototype;return n.hasAutoSize=function(){return!1},n.getOuterMaxContentSize=function(){return this.getOuterSize()},n.getOuterMinContentSize=function(){return this.getOuterSize()},n.getOuterSize=function(){return this.isHorizontal?this.container.getInsetLeft()+this.fixedSize+this.container.getInsetRight():this.container.getInsetTop()+this.fixedSize+this.container.getInsetBottom()},e}(Gh),Xh=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).borderBoxWidth=null,i.borderBoxHeight=null,i.marginTop=null,i.marginRight=null,i.marginBottom=null,i.marginLeft=null,i}N(e,t);var n=e.prototype;return n.applyCascadeAndInit=function(e,n){var i=this.cascaded;for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(u.match(/^column.*$/)||u.match(/^background-/))&&(i[u]=n[u]);t.prototype.applyCascadeAndInit.call(this,e,n),this.parentInstance.setPageAreaDimension({borderBoxWidth:this.borderBoxWidth,borderBoxHeight:this.borderBoxHeight,marginTop:this.marginTop,marginRight:this.marginRight,marginBottom:this.marginBottom,marginLeft:this.marginLeft})},n.initHorizontal=function(){var t=this.resolvePageBoxDimensions({start:"left",end:"right",extent:"width"});this.borderBoxWidth=t.borderBoxExtent,this.marginLeft=t.marginStart,this.marginRight=t.marginEnd},n.initVertical=function(){var t=this.resolvePageBoxDimensions({start:"top",end:"bottom",extent:"height"});this.borderBoxHeight=t.borderBoxExtent,this.marginTop=t.marginStart,this.marginBottom=t.marginEnd},n.resolvePageBoxDimensions=function(t){var e=this.style,n=this.pageBox.pageSize,i=this.pageBox.scope,u=t.start,r=t.end,o=t.extent,a=n[o].toExpr(i,null),s=th(i,e[o],a),l=th(i,e["margin-"+u],a),c=th(i,e["margin-"+r],a),h=eh(i,e["padding-"+u],a),D=eh(i,e["padding-"+r],a),d=ih(i,e["border-"+u+"-width"],e["border-"+u+"-style"],a),f=ih(i,e["border-"+r+"-width"],e["border-"+r+"-style"],a),p=Be(i,a,ye(i,ye(i,d,h),ye(i,f,D)));return s?(p=Be(i,p,s),l||c?l?c=Be(i,p,l):l=Be(i,p,c):c=l=we(i,p,new ve(i,.5))):(l||(l=i.zero),c||(c=i.zero),s=Be(i,p,ye(i,l,c))),n.width!==en||n.height!==nn||this.hasBorderOrOutline()||l instanceof de&&l.num<0||c instanceof de&&c.num<0?(e[u]=new qe(l),e[r]=new qe(c),e["margin-"+u]=un,e["margin-"+r]=un,e["border-"+u+"-width"]=new qe(d),e["border-"+r+"-width"]=new qe(f)):(e[u]=un,e[r]=un,e["margin-"+u]=un,e["margin-"+r]=un,e["border-"+u+"-width"]=new qe(l),e["border-"+r+"-width"]=new qe(c),e["border-"+u+"-style"]=Je.solid,e["border-"+r+"-style"]=Je.solid,e["border-"+u+"-color"]=Je.transparent,e["border-"+r+"-color"]=Je.transparent,e["background-clip"]=Je.padding_box),e["padding-"+u]=new qe(h),e["padding-"+r]=new qe(D),e[o]=new qe(s),e["max-"+o]=new qe(s),{borderBoxExtent:Be(i,a,ye(i,l,c)),marginStart:l,marginEnd:c}},n.hasBorderOrOutline=function(){var t=this,e=function(e){var n,i=null==(n=oo(t.cascaded,e))?void 0:n.value;return!!i&&i!==Je.none};return e("border-top-style")||e("border-bottom-style")||e("border-left-style")||e("border-right-style")||e("border-block-start-style")||e("border-block-end-style")||e("border-inline-start-style")||e("border-inline-end-style")||e("outline-style")},n.prepareContainer=function(e,n,i,u,r){i.pageAreaElement=n.element,t.prototype.prepareContainer.call(this,e,n,i,u,r),e.pageAreaWidth=parseFloat(i.pageAreaElement.style.width),e.pageAreaHeight=parseFloat(i.pageAreaElement.style.height)},e}(ph),$h=function(t){function e(e,n){var i;(i=t.call(this,e,n)||this).boxInfo=void 0,i.suppressEmptyBoxGeneration=!0;var u=n.marginBoxName;return i.boxInfo=Rh[u],e.pageMarginBoxInstances[u]=k(i),i}N(e,t);var n=e.prototype;return n.prepareContainer=function(e,n,i,u,r){this.applyVerticalAlign(e,n.element),t.prototype.prepareContainer.call(this,e,n,i,u,r)},n.applyVerticalAlign=function(t,e){tt(e,"display","flex"),tt(e,"flex-flow",this.vertical?this.rtl?"row-reverse":"row":"column");var n=this.getProp(t,"vertical-align"),i=null;n===Me("middle")?i="center":n===Me("top")?i="flex-start":n===Me("bottom")&&(i="flex-end"),i&&tt(e,"justify-content",i);var u=this.getProp(t,"content");if(this.vertical||u instanceof Ge||u instanceof qe&&u.expr instanceof ge&&u.expr.str.startsWith("running-element-")){var r="center";(this.boxInfo.isInTopRow||this.boxInfo.isInBottomRow)&&(this.boxInfo.isInLeftColumn||this.boxInfo.positionAlongVariableDimension===Ph.END?r=this.vertical||this.rtl?"start":"end":(this.boxInfo.isInRightColumn||this.boxInfo.positionAlongVariableDimension===Ph.START)&&(r=this.vertical||this.rtl?"end":"start")),tt(e,"align-items",r)}},n.positionAlongVariableDimension=function(t,e){var n=this.style,i=this.pageBox.scope,u=t.start,r=t.end,o="left"===u,a=o?e.borderBoxWidth:e.borderBoxHeight,s=th(i,n[t.extent],a),l=o?e.marginLeft:e.marginTop;if(this.boxInfo.positionAlongVariableDimension===Ph.START)n[u]=new qe(l);else if(s){var c=eh(i,n["margin-"+u],a),h=eh(i,n["margin-"+r],a),D=eh(i,n["padding-"+u],a),d=eh(i,n["padding-"+r],a),f=ih(i,n["border-"+u+"-width"],n["border-"+u+"-style"],a),p=ih(i,n["border-"+r+"-width"],n["border-"+r+"-style"],a),g=ye(i,s,ye(i,ye(i,D,d),ye(i,ye(i,f,p),ye(i,c,h))));switch(this.boxInfo.positionAlongVariableDimension){case Ph.CENTER:n[u]=new qe(ye(i,l,Se(i,Be(i,a,g),new ve(i,2))));break;case Ph.END:n[u]=new qe(Be(i,ye(i,l,a),g))}}},n.positionAndSizeAlongFixedDimension=function(t,e){var n=this.style,i=this.pageBox.scope,u=t.inside,r=t.outside,o=t.extent,a=e["margin"+r.charAt(0).toUpperCase()+r.substring(1)],s=nh(i,n["margin-"+u],a),l=nh(i,n["margin-"+r],a),c=eh(i,n["padding-"+u],a),h=eh(i,n["padding-"+r],a),D=ih(i,n["border-"+u+"-width"],n["border-"+u+"-style"],a),d=ih(i,n["border-"+r+"-width"],n["border-"+r+"-style"],a),f=th(i,n[o],a),p=null;function g(t){if(p)return p;p={extent:f?f.evaluate(t):null,marginInside:s?s.evaluate(t):null,marginOutside:l?l.evaluate(t):null};var e=a.evaluate(t),n=0;return[D,c,h,d].forEach((function(e){e&&(n+=e.evaluate(t))})),(null===p.marginInside||null===p.marginOutside)&&n+p.extent+p.marginInside+p.marginOutside>e&&(null===p.marginInside&&(p.marginInside=0),null===p.marginOutside&&(p.marginOutside=0)),null!==p.extent&&null!==p.marginInside&&null!==p.marginOutside&&(p.marginOutside=null),null===p.extent&&null!==p.marginInside&&null!==p.marginOutside?p.extent=e-n-p.marginInside-p.marginOutside:null!==p.extent&&null===p.marginInside&&null!==p.marginOutside?p.marginInside=e-n-p.extent-p.marginOutside:null!==p.extent&&null!==p.marginInside&&null===p.marginOutside?p.marginOutside=e-n-p.extent-p.marginInside:null===p.extent?(p.marginInside=p.marginOutside=0,p.extent=e-n):p.marginInside=p.marginOutside=(e-n-p.extent)/2,p}n[o]=new qe(new ge(i,(function(){var t=g(this).extent;return null===t?0:t}),o)),n["margin-"+u]=new qe(new ge(i,(function(){var t=g(this).marginInside;return null===t?0:t}),"margin-"+u)),n["margin-"+r]=new qe(new ge(i,(function(){var t=g(this).marginOutside;return null===t?0:t}),"margin-"+r)),"left"===u?n.left=new qe(ye(i,e.marginLeft,e.borderBoxWidth)):"top"===u&&(n.top=new qe(ye(i,e.marginTop,e.borderBoxHeight)))},n.initHorizontal=function(){var t=this.parentInstance.pageAreaDimension;this.boxInfo.isInLeftColumn?this.positionAndSizeAlongFixedDimension({inside:"right",outside:"left",extent:"width"},t):this.boxInfo.isInRightColumn?this.positionAndSizeAlongFixedDimension({inside:"left",outside:"right",extent:"width"},t):this.positionAlongVariableDimension({start:"left",end:"right",extent:"width"},t)},n.initVertical=function(){var t=this.parentInstance.pageAreaDimension;this.boxInfo.isInTopRow?this.positionAndSizeAlongFixedDimension({inside:"bottom",outside:"top",extent:"height"},t):this.boxInfo.isInBottomRow?this.positionAndSizeAlongFixedDimension({inside:"top",outside:"bottom",extent:"height"},t):this.positionAlongVariableDimension({start:"top",end:"bottom",extent:"height"},t)},n.finishContainer=function(e,n,i,u,r,o,a){t.prototype.finishContainer.call(this,e,n,i,u,r,o,a);var s=i.marginBoxes,l=this.pageBox.marginBoxName,c=this.boxInfo;c.isInLeftColumn||c.isInRightColumn?c.isInTopRow||c.isInBottomRow||(c.isInLeftColumn?s.left[l]=n:c.isInRightColumn&&(s.right[l]=n)):c.isInTopRow?s.top[l]=n:c.isInBottomRow&&(s.bottom[l]=n)},e}(ph),Kh=function(){function e(t,e,n,i,u){this.cascadeInstance=void 0,this.pageScope=void 0,this.rootPageBoxInstance=void 0,this.context=void 0,this.docElementStyle=void 0,this.pageMasterCache={},this.cascadeInstance=t,this.pageScope=e,this.rootPageBoxInstance=n,this.context=i,this.docElementStyle=u,this.definePageProgression()}var n=e.prototype;return n.definePageProgression=function(){var e=this.pageScope,n=this.context,i=n.isVersoFirstPage,u=new fe(e,"page-number"),r=new oe(e,new De(e,u,new ve(e,2)),i?e.one:e.zero);e.defineName("recto-page",new Kt(e,r)),e.defineName("verso-page",r),(n.pageProgression||Fh(this.docElementStyle))===t.PageProgression.LTR?(e.defineName("left-page",r),e.defineName("right-page",new Kt(e,r))):(e.defineName("left-page",new Kt(e,r)),e.defineName("right-page",r))},n.getCascadedPageStyle=function(t){var e={};return this.cascadeInstance.pushRule([],t,e),this.cascadeInstance.popRule(),e},n.getPageRulePageMaster=function(t,e){var n=t.pageBox;if(0===Object.keys(e).length)return n.resetScope(),t;var i=this.makeCacheKey(e,n),u=this.pageMasterCache[i];return u||(u=n.pseudoName===hh?this.generatePageRuleMaster(e):this.generateCascadedPageMaster(e,n),this.pageMasterCache[i]=u),u.pageBox.resetScope(),u},n.makeCacheKey=function(t,e){var n=this.makeCascadeValueObjectKey(t);return e.key+"^"+n},n.makeCascadeValueObjectKey=function(t){var e=[];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,u=t[n];i=u instanceof Qr?""+u.value:this.makeCascadeValueObjectKey(u),e.push(n+i+(u.priority||""))}return e.sort().join("^")},n.generatePageRuleMaster=function(t){var e=new Uh(this.pageScope,this.rootPageBoxInstance.pageBox,t).createInstance(this.rootPageBoxInstance);return e.applyCascadeAndInit(this.cascadeInstance,this.docElementStyle),e.resolveAutoSizing(this.context),e},n.generateCascadedPageMaster=function(t,e){var n=e.clone({pseudoName:_h}),i=n.specified,u=t.size;if(u&&!an(u.value)){var r=Sh(t),o=u.priority;eo(i,"width",new Qr(r.width,o),this.context),eo(i,"height",new Qr(r.height,o),this.context)}["counter-reset","counter-increment"].forEach((function(e){i[e]&&(t[e]=i[e])}));var a=n.createInstance(this.rootPageBoxInstance);return a.applyCascadeAndInit(this.cascadeInstance,this.docElementStyle),a.resolveAutoSizing(this.context),a},e}(),qh=function(t){function e(e){var n;return(n=t.call(this)||this).pageType=void 0,n.pageType=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){t.currentPageType===this.pageType&&this.chained.apply(t)},n.getPriority=function(){return 3},n.makePrimary=function(t){return this.chained&&t.insertInTable(t.pagetypes,this.pageType,this.chained),!0},e}(bo),Yh=function(t){function e(e){var n;return(n=t.call(this)||this).scope=void 0,n.scope=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){1===new fe(this.scope,"page-number").evaluate(t.context)&&this.chained.apply(t)},n.getPriority=function(){return 2},e}(bo),Zh=function(t){function e(e){var n;return(n=t.call(this)||this).scope=void 0,n.scope=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){new fe(this.scope,"blank-page").evaluate(t.context)&&this.chained.apply(t)},n.getPriority=function(){return 2},e}(bo),Qh=function(t){function e(e){var n;return(n=t.call(this)||this).scope=void 0,n.scope=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){new fe(this.scope,"left-page").evaluate(t.context)&&this.chained.apply(t)},n.getPriority=function(){return 1},e}(bo),Jh=function(t){function e(e){var n;return(n=t.call(this)||this).scope=void 0,n.scope=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){new fe(this.scope,"right-page").evaluate(t.context)&&this.chained.apply(t)},n.getPriority=function(){return 1},e}(bo),tD=function(t){function e(e){var n;return(n=t.call(this)||this).scope=void 0,n.scope=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){new fe(this.scope,"recto-page").evaluate(t.context)&&this.chained.apply(t)},n.getPriority=function(){return 1},e}(bo),eD=function(t){function e(e){var n;return(n=t.call(this)||this).scope=void 0,n.scope=e,n}N(e,t);var n=e.prototype;return n.apply=function(t){new fe(this.scope,"verso-page").evaluate(t.context)&&this.chained.apply(t)},n.getPriority=function(){return 1},e}(bo),nD=function(t){function e(e,n,i){var u;return(u=t.call(this,n,i)||this).scope=void 0,u.a=void 0,u.b=void 0,u.scope=e,u.a=n,u.b=i,u}N(e,t);var n=e.prototype;return n.apply=function(t){var e=t.context,n=e.layoutPositionAtPageStart.page;e.blankPageAtStart&&n--,n&&this.matchANPlusB(n)&&this.chained.apply(t)},n.getPriority=function(){return 2},e}(_o),iD=function(t){function e(e,n){return t.call(this,e,n,null,null,null)||this}return N(e,t),e.prototype.apply=function(t){!function(t,e,n,i,u){fo(t,e,n,i,null,null,null);var r=n[Mh];if(r){var o=lo(e,Mh);for(var a in r)if(r.hasOwnProperty(a)){var s=o[a];s||(o[a]=s={}),fo(t,s,r[a],i,null,null,null)}}}(t.context,t.currentStyle,this.style,this.specificity)},e}(Ao),uD=function(t){function e(e,n,i,u,r){var o;return(o=t.call(this,e,n,null==i?void 0:i.condition,i,null,u,!1)||this).pageProps=void 0,o.currentPageSelectors=[],o.currentNamedPageSelector="",o.currentPseudoPageClassSelectors=[],o.pageProps=r,o}N(e,t);var n=e.prototype;return n.startPageRule=function(){this.startSelectorRule()},n.tagSelector=function(t,e){this.currentNamedPageSelector=e,e&&(this.chain.push(new qh(e)),this.specificity+=65536)},n.pseudoclassSelector=function(t,e){if(t=t.toLowerCase(),e)if("nth"===t){var n=e[0],i=e[1];this.currentPseudoPageClassSelectors.push(":"+t+"("+n+"n"+(i<0?i:"+"+i)+")"),this.chain.push(new nD(this.scope,n,i)),this.specificity+=256}else this.reportAndSkip("E_INVALID_PAGE_SELECTOR :"+t+"("+e.join("")+")");else switch(this.currentPseudoPageClassSelectors.push(":"+t),t){case"first":this.chain.push(new Yh(this.scope)),this.specificity+=256;break;case"blank":this.chain.push(new Zh(this.scope)),this.specificity+=256;break;case"left":this.chain.push(new Qh(this.scope)),this.specificity+=1;break;case"right":this.chain.push(new Jh(this.scope)),this.specificity+=1;break;case"recto":this.chain.push(new tD(this.scope)),this.specificity+=1;break;case"verso":this.chain.push(new eD(this.scope)),this.specificity+=1;break;default:this.reportAndSkip("E_INVALID_PAGE_SELECTOR :"+t)}},n.finishSelector=function(){var t;t=this.currentNamedPageSelector||this.currentPseudoPageClassSelectors.length?[this.currentNamedPageSelector].concat(this.currentPseudoPageClassSelectors.sort()):null,this.currentPageSelectors.push({selectors:t,specificity:this.specificity}),this.currentNamedPageSelector="",this.currentPseudoPageClassSelectors=[]},n.nextSelector=function(){this.finishSelector(),t.prototype.nextSelector.call(this)},n.startRuleBody=function(){this.finishSelector(),t.prototype.startRuleBody.call(this)},n.simpleProperty=function(e,n,i){if("bleed"!==e&&"marks"!==e||this.currentPageSelectors.some((function(t){return null===t.selectors}))){t.prototype.simpleProperty.call(this,e,n,i);var u=oo(this.elementStyle,e),r=this.pageProps;if("bleed"===e||"marks"===e)r[""]||(r[""]={}),Object.keys(r).forEach((function(t){ao(r[t],e,u)}));else if("size"===e){var o=r[""];this.currentPageSelectors.forEach((function(t){var n=new Qr(u.value,u.priority+t.specificity),i=t.selectors?t.selectors.join(""):"",a=r[i];a?eo(a,e,n):(ao(a=r[i]={},e,n),o&&["bleed","marks"].forEach((function(t){o[t]&&ao(a,t,o[t])})))}))}}},n.insertNonPrimary=function(t){this.cascade.insertInTable(this.cascade.pagetypes,"*",t)},n.makeApplyRuleAction=function(t){return new iD(this.elementStyle,t)},n.startPageMarginBoxRule=function(t){var e=lo(this.elementStyle,Mh),n=e[t];n||(e[t]=n={});var i=new rD(this.scope,this.owner,this.validatorSet,n);this.owner.pushHandler(i)},e}(Fa),rD=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e,n,!1)||this).validatorSet=void 0,r.boxStyle=void 0,r.validatorSet=i,r.boxStyle=u,r}N(e,t);var n=e.prototype;return n.property=function(t,e,n){this.validatorSet.validatePropertyAndHandleShorthand(t,e,n,this)},n.invalidPropertyValue=function(t,e){this.report("E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},n.unknownProperty=function(t,e){this.report("E_INVALID_PROPERTY "+t+": "+e.toString())},n.simpleProperty=function(t,e,n){var i=n?this.getImportantSpecificity():this.getBaseSpecificity(),u=new Qr(e,i);ao(this.boxStyle,t,u)},e}(pu),oD=!0,aD=[];function sD(t,e){return t===e||(t.src||e.src?t.src===e.src:t.textContent===e.textContent)}function lD(t){var e=Array.from(t.querySelectorAll("body > :not(script):not(link):not(style) ~ script"));return Array.from(t.querySelectorAll("head > script, body > script")).filter((function(t){return!e.includes(t)}))}function cD(t,e,n){if(!oD)return Ri(!1);if((null==n||!n.inHead)&&(null==n||!n.atEnd)&&lD(t.ownerDocument).includes(t))return Ri(!1);var i=t.textContent,u=t.src,r="module"===t.type,o=(r||u)&&t.async,a=r&&!o||u&&t.defer,s=!(null!=n&&n.atEnd)&&((null==n?void 0:n.forceDefer)||a||o);if(hD(e)||(e.onload=null),s)return aD.some((function(e){return sD(e,t)}))||aD.push(t),Ri(!0);if(u.includes("/mathjax")){var l,c,D=e.document.head.querySelector("script[src*='MathJax.js']:not([data-vivliostyle-scripting])");if(D)if(u.includes("/mathjax@3"))e.document.head.removeChild(D),null!=(l=e.MathJax)&&null!=(c=l.version)&&c.startsWith("2.")&&delete e.MathJax;else if(u.includes("/MathJax.js"))return Ri(!0)}for(var d,f=R(e.document.head.getElementsByTagName("script"));!(d=f()).done;){var p=d.value;p.hasAttribute("data-vivliostyle-scripting")&&sD(p,t)&&e.document.head.removeChild(p)}var g=e.document.createElement("script");g.textContent=i,u&&(g.src=u),g.async=o,g.defer=a,g.setAttribute("data-vivliostyle-scripting","true");for(var E,C=R(t.attributes);!(E=C()).done;){var v=E.value;["src","async","defer"].includes(v.name)||g.setAttribute(v.name,v.value)}if(h.debug("script:",u),u){var F=ou(g);return e.document.head.appendChild(g),$i([F])}return e.document.head.appendChild(g),Ri(!0)}function hD(t){return!!oD&&(aD.length>0||!!t.document.head.querySelector("script[data-vivliostyle-scripting]"))}var DD=function(t,e,n){return t.replace(/[uU][rR][lL]\(\s*"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^"\r\n])+)"/gm,(function(t,i){return'url("'+n.transformURL(i,e)+'"'})).replace(/[uU][rR][lL]\(\s*'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^'\r\n])+)'/gm,(function(t,i){return"url('"+n.transformURL(i,e)+"'"})).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^"'\r\n\)\s])+)/gm,(function(t,i){return"url("+n.transformURL(i,e)}))},dD={},fD=function(e){function n(t,n,i,u,r,o,a,s,l,c,h,D,d){var f;return(f=e.call(this)||this).flowName=void 0,f.context=void 0,f.viewport=void 0,f.styler=void 0,f.regionIds=void 0,f.xmldoc=void 0,f.docFaces=void 0,f.footnoteStyle=void 0,f.stylerProducer=void 0,f.page=void 0,f.customRenderer=void 0,f.fallbackMap=void 0,f.documentURLTransformer=void 0,f.document=void 0,f.exprContentListener=void 0,f.nodeContext=null,f.viewRoot=null,f.isFootnote=!1,f.sourceNode=null,f.offsetInNode=0,f.viewNode=null,f.flowName=t,f.context=n,f.viewport=i,f.styler=u,f.regionIds=r,f.xmldoc=o,f.docFaces=a,f.footnoteStyle=s,f.stylerProducer=l,f.page=c,f.customRenderer=h,f.fallbackMap=D,f.documentURLTransformer=d,f.document=i.document,f.exprContentListener=u.counterListener.getExprContentListener(),f}N(n,e);var i=n.prototype;return i.clone=function(){return new n(this.flowName,this.context,this.viewport,this.styler,this.regionIds,this.xmldoc,this.docFaces,this.footnoteStyle,this.stylerProducer,this.page,this.customRenderer,this.fallbackMap,this.documentURLTransformer)},i.createPseudoelementShadow=function(t,e,n,i,u,r,o,a){var s=this.getPseudoMap(n,this.regionIds,this.isFootnote,this.nodeContext,r);if(!s)return a;for(var l,c=[],h=Zs.createElementNS(G.SHADOW,"root"),D=h,d=R(Qs);!(l=d()).done;){var f=l.value,p=void 0;if(f){if(!s[f])continue;if(!("footnote-marker"!=f||e&&this.isFootnote))continue;if(f.match(/^first-/)){var g=i.display;if(!g||g===Je.inline)continue;var E=t.firstElementChild;if(E&&Fr(E.previousSibling)){var C=u.getStyle(E,!1);if(C){var v=oo(C,"display");if(null!=v&&v.value&&v.value!==Je.inline)continue}}}if("before"===f||"after"===f){var F=s[f].content;if(!F||!Vr(F.value))continue}c.push(f),el(p=Zs.createElementNS(G.XHTML,"span"),f)}else p=Zs.createElementNS(G.SHADOW,"content");D.appendChild(p),f.match(/^first-/)&&(D=p)}if(!c.length)return a;var m=new nl(t,n,u,r,this.exprContentListener);return new Tr(t,h,null,o,a,xr.ROOTLESS,m)},i.getPseudoMap=function(t,e,n,i,u){var r=so(t,"_pseudos");if(!r)return null;var o={},a=function(){var t=o[s]={};La(t,r[s],u),Ia(t,u,r[s]),Ra(r[s],e,n,(function(e,n){La(t,n,u),Ta(n,(function(e){La(t,e,u)}))}))};for(var s in r)a();return o},i.createRefShadow=function(t,e,n,i,u){var r=this,o=Oi("createRefShadow");return this.xmldoc.store.load(t).then((function(a){var s=a;if(s){var l=s.getElement(t);if(l){var c=r.stylerProducer.getStylerForDoc(s);u=new Tr(n,l,s,i,u,e,c)}}o.finish(u)})),o.result()},i.createShadows=function(t,e,n,i,u,r,o){var a=this,s=Oi("createShadows"),l=i.template;return(l instanceof Ge?this.createRefShadow(l.url,xr.ROOTLESS,t,o,null):Ri(null)).then((function(l){var c=null;if(t.namespaceURI==G.SHADOW&&"include"==t.localName){var h=t.getAttribute("href"),D=null;h?D=o?o.xmldoc:a.xmldoc:o&&(h=o.owner.namespaceURI==G.XHTML?o.owner.getAttribute("href"):o.owner.getAttributeNS(G.XLINK,"href"),D=o.parentShadow?o.parentShadow.xmldoc:a.xmldoc),h&&(h=X(h,D.url),c=a.createRefShadow(h,xr.ROOTED,t,o,l))}null==c&&(c=Ri(l));var d=null;c.then((function(e){if(i.display===Je.table_cell){var n=X("user-agent.xml#table-cell",j);d=a.createRefShadow(n,xr.ROOTLESS,t,o,e)}else d=Ri(e)})),d.then((function(l){l=a.createPseudoelementShadow(t,e,n,i,u,r,o,l),s.finish(l)}))})),s.result()},i.setViewRoot=function(t,e){this.viewRoot=t,this.isFootnote=e},i.computeStyle=function(t,e,n,i){var u,r=this,o=this.context,a=Oa(n,o,this.regionIds,this.isFootnote),s=!(null!=(u=this.nodeContext)&&u.parent);s&&(!a["writing-mode"]&&this.styler.rootStyle["writing-mode"]&&(a["writing-mode"]=this.styler.rootStyle["writing-mode"]),!a.direction&&this.styler.rootStyle.direction&&(a.direction=this.styler.rootStyle.direction));var l=t;t=Pa(a,o,t);var c=!s&&t!==l;if(e=ka(a,o,e),_a(a,i,t,e,(function(e,n){var i;c&&(t?/^(min-|max-)?(height|inline-size)$/.test(e)&&(i=o.pageAreaHeight):/^(min-|max-)?(width|inline-size)$/.test(e)&&(i=o.pageAreaWidth));var u=n.evaluate(o,e,i,t);return"font-family"==e&&(u=r.docFaces.filterFontFamily(u)),u})),c){var h=i[t?"height":"width"];h&&h!==Je.auto||(i[t?"height":"width"]=Je.max_content)}if(Ds(i.position))return i.position=Je.fixed,i.visibility=Je.hidden,t;var D=ds(i.display||Je.inline,i.position,i.float,this.sourceNode===this.xmldoc.root);return["display","position","float"].forEach((function(t){D[t]&&(i[t]=D[t])})),t},i.inheritFromSourceParent=function(t){for(var e=this.nodeContext.sourceNode,n=[],i=null,u=this.nodeContext.shadowContext,r=-1;e&&1==e.nodeType;){var o=u&&u.root==e;if(!o||u.type==xr.ROOTLESS){var a=(u?u.styler:this.styler).getStyle(e,!1);n.push(a),i=i||nt(e)}o?(e=u.owner,u=u.parentShadow):(e=e.parentNode,r++)}for(var s=this.context.queryUnitSize("em",0===r),l={"font-size":new Qr(new Ue(s,"px"),0)},c=new go(l,this.context),h=n.length-1;h>=0;--h){var D=n[h],d=[];for(var f in D)ro(f)&&d.push(f);d.sort(sn);for(var p=void 0,g=void 0,E=0,C=d;E<C.length;E++){var v=C[E];c.setPropName(v);var F=oo(D,v),m=F;an(F.value)||("font-size"===v&&h===n.length-1&&this.context.isRelativeRootFontSize&&this.context.rootFontSize?m=new Qr(new Ue(this.context.rootFontSize,"px"),F.priority):"line-height"===v&&h===n.length-1&&this.context.rootLineHeight&&F.value instanceof Ue&&("lh"===F.value.unit||"rlh"===F.value.unit)?m=new Qr(new Ue(this.context.rootLineHeight,"px"),F.priority):0===h&&F.value instanceof Ue&&"lh"===F.value.unit?m=new Qr(new Ue(F.value.num*this.getLineHeightUnitSize(v,p,g),"px"),F.priority):ln(v)||(m=F.filterValue(c)),"font-size"===v?p=m.value:"line-height"===v&&(g=m.value),l[v]=m)}}for(var A in t)ro(A)||(l[A]=t[A]);return{lang:i,elementStyle:l}},i.resolveURL=function(t){return t=X(t,this.xmldoc.url),this.fallbackMap[t]||t},i.inheritLangAttribute=function(){this.nodeContext.lang=nt(this.nodeContext.sourceNode)||this.nodeContext.parent&&this.nodeContext.parent.lang||this.nodeContext.lang},i.transferPolyfilledInheritedProps=function(e){var n=p(t.HOOKS.POLYFILLED_INHERITED_PROPS).reduce((function(t,e){return t.concat(e())}),[].concat(Hr)).filter((function(t){return e[t]}));if(n.length){var i=this.nodeContext.inheritedProps;if(this.nodeContext.parent)for(var u in i=this.nodeContext.inheritedProps={},this.nodeContext.parent.inheritedProps)i[u]=this.nodeContext.parent.inheritedProps[u];n.forEach((function(t){var n=e[t];if(n){if(an(n))n===Je.initial&&(i[t]=void 0);else if(n instanceof ze)i[t]=n.num;else if(n instanceof _e)i[t]=n.name;else if(n instanceof Ue){var u=n;switch(u.unit){case"dpi":case"dpcm":case"dppx":i[t]=u.num*Mt[u.unit];break;default:i[t]=n}}else i[t]=n;["widows","orphans"].includes(t)||delete e[t]}}))}},i.resolveFormattingContext=function(e,n,i,u,r,o){for(var a=p(t.HOOKS.RESOLVE_FORMATTING_CONTEXT),s=0;s<a.length;s++){var l=a[s](e,n,i,u,r,o);if(l)return void(e.formattingContext=l)}},i.createElementView=function(t,e){var n,i,u=this,r=!0,o=Oi("createElementView"),a=this.sourceNode,s=this.nodeContext.shadowContext?this.nodeContext.shadowContext.styler:this.styler,l=s.getStyle(a,!1);if(!this.nodeContext.shadowContext){var c=this.xmldoc.getElementOffset(a);Hu.registerFragmentIndex(c,this.nodeContext.fragmentIndex,0)}var D={};if(!this.nodeContext.parent){var d=this.inheritFromSourceParent(l);l=d.elementStyle,this.nodeContext.lang=d.lang}var f=l.position,p=l.float,g=l["float-reference"],E=p&&!an(p.value)&&p.value!==Je.none&&g&&!an(g.value)?function(t){switch(t){case"inline":return Za.INLINE;case"column":return Za.COLUMN;case"region":return Za.REGION;case"page":return Za.PAGE;default:throw new Error("Unknown float-reference: "+t)}}(g.value.toString()):null;if(this.nodeContext.parent&&(Ds(null==f?void 0:f.value)||E&&Qa(E))){var C=this.inheritFromSourceParent(l);l=C.elementStyle,this.nodeContext.lang=C.lang}this.nodeContext.vertical=this.computeStyle(this.nodeContext.vertical,"rtl"===this.nodeContext.direction,l,D),E&&Qa(E)&&(D.display=Je.flow_root),s.processContent(a,D,null!=(n=this.nodeContext.viewNode)?n:null==(i=this.nodeContext.parent)?void 0:i.viewNode),this.transferPolyfilledInheritedProps(D),this.inheritLangAttribute(),D.direction&&(this.nodeContext.direction=D.direction.toString());var v=D["flow-into"];if(v&&v.toString()!=this.flowName)return o.finish(!1),o.result();if(oD&&"script"===a.localName&&a.namespaceURI===G.XHTML)return cD(a,this.viewport.window).thenFinish(o),o.result();var F=D.display;if(an(F))if(F===Je.initial||F===Je.unset)F=Je.inline;else if(F===Je.inherit){var m,A;F=(null==(m=this.nodeContext.parent)?void 0:m.display)&&Me(null==(A=this.nodeContext.parent)?void 0:A.display)}else F=null;if(F===Je.none)return o.finish(!1),o.result();var b=null==this.nodeContext.parent;return this.nodeContext.flexContainer=F===Je.flex,this.createShadows(a,b,l,D,s,this.context,this.nodeContext.shadowContext).then((function(e){u.nodeContext.nodeShadow=e;var n=D.position,i=D.float,c=D.clear,d=u.nodeContext.vertical?Je.vertical_rl:Je.horizontal_tb,f=u.nodeContext.parent?u.nodeContext.parent.vertical?Je.vertical_rl:Je.horizontal_tb:d,p=function(t){return"true"===t.getAttribute("data-vivliostyle-flow-root")}(a);u.nodeContext.establishesBFC=function(t,e,n,i,u,r,o){return u=u||r||Je.horizontal_tb,!!o||!!n&&n!==Je.none&&!an(n)||hs(e)||t===Je.inline_block||t===Je.table_cell||t===Je.table_caption||t==Je.flex||t==Je.grid||t==Je.flow_root||(t===Je.block||t===Je.list_item)&&!!i&&i!==Je.visible&&i!==Je.clip&&!an(i)||!!r&&u!==r}(F,n,i,D.overflow,d,f,p),u.nodeContext.containingBlockForAbsolute=function(t){return t===Je.relative||t===Je.absolute||t===Je.fixed}(n),!u.nodeContext.isInsideBFC()||i===Je.footnote||E&&Qa(E)||(i=null,c=null);var g=i===Je.left||i===Je.right||i===Je.top||i===Je.bottom||i===Je.inline_start||i===Je.inline_end||i===Je.block_start||i===Je.block_end||i===Je.snap_block||i===Je.footnote;i&&(delete D.float,i===Je.footnote&&(u.isFootnote?(g=!1,D.display=Je.block):D.display=Je.inline)),c&&(c===Je.inherit&&u.nodeContext.parent&&u.nodeContext.parent.clearSide&&(c=Me(u.nodeContext.parent.clearSide)),c!==Je.left&&c!==Je.right&&c!==Je.top&&c!==Je.bottom&&c!==Je.both&&c!==Je.all&&c!==Je.same||(delete D.clear,D.display&&D.display!=Je.inline&&(u.nodeContext.clearSide=c.toString())));var C=F===Je.list_item&&D["ua-list-item-count"],v=D["break-inside"];(g||v&&!an(v)&&v!==Je.auto)&&u.nodeContext.breakPenalty++,F&&F!==Je.inline&&ps(F)&&u.nodeContext.breakPenalty++,u.nodeContext.inline=!g&&!F||ps(F)||gs(F),u.nodeContext.display=F?F.toString():"inline",u.nodeContext.floatSide=g?i.toString():null,u.nodeContext.floatReference=E||Za.INLINE;var m=D["float-min-wrap-block"];u.nodeContext.floatMinWrapBlock=m&&!an(m)?m:null;var A=u.isInsideNonRootMultiColumn(),y=D["column-span"];if(u.nodeContext.columnSpan=A||!y||an(y)?null:y,!u.nodeContext.inline){var B=D["break-after"];!B||an(B)||A&&B===Je.column||(u.nodeContext.breakAfter=B.toString(),qu[u.nodeContext.breakAfter]&&delete D["break-after"]);var w=D["break-before"];!w||an(w)||A&&w===Je.column||(1===u.nodeContext.fragmentIndex&&(u.nodeContext.breakBefore=w.toString()),qu[u.nodeContext.breakBefore]&&delete D["break-before"]);var S=D.page,N=S&&!an(S)&&S.toString();N||u.nodeContext.parent||!u.nodeContext.shadowContext&&F!==Je.table_header_group&&F!==Je.table_footer_group||(N=u.styler.cascade.currentPageType),N&&"auto"!==N.toLowerCase()?u.nodeContext.pageType=N:N=u.nodeContext.pageType,u.styler.cascade.currentPageType===N||!N&&D.position===Je.fixed||(1!==u.nodeContext.fragmentIndex||Qu(u.nodeContext.breakBefore)||(u.nodeContext.breakBefore="page"),N!==u.styler.cascade.previousPageType&&(u.styler.cascade.previousPageType=u.styler.cascade.currentPageType),u.styler.cascade.currentPageType=N)}u.nodeContext.verticalAlign=D["vertical-align"]&&D["vertical-align"].toString()||"baseline",u.nodeContext.captionSide=D["caption-side"]&&D["caption-side"].toString()||"top";var x=D["border-collapse"];if(!x||x===Me("separate")){var T,I,P=D["border-spacing"];P&&(P instanceof Xe?(T=P.values[0],I=P.values[1]):T=I=P,T.isNumeric()&&(u.nodeContext.inlineBorderSpacing=Ze(T,u.context)),I.isNumeric()&&(u.nodeContext.blockBorderSpacing=Ze(I,u.context)))}var k=D["footnote-policy"];u.nodeContext.footnotePolicy=k&&!an(k)?k:null;var O=D["x-first-pseudo"];O&&(u.nodeContext.firstPseudo=new Pr(u.nodeContext.parent?u.nodeContext.parent.firstPseudo:null,O.num)),u.nodeContext.inline||u.processAfterIfcontinues(a,l,s,u.context);var R=D["white-space"];if(R){var L=vr(R.toString());null!==L&&(u.nodeContext.whitespace=L)}var _=D["hyphenate-character"];_&&_ instanceof Re&&(u.nodeContext.hyphenateCharacter=_.str);var M=D["overflow-wrap"];D["word-break"]!==Je.break_all&&D["line-break"]!==Je.anywhere&&M!==Je.break_word&&M!==Je.anywhere||(u.nodeContext.breakWord=!0),u.resolveFormattingContext(u.nodeContext,t,F,n,i,b),u.nodeContext.parent&&u.nodeContext.parent.formattingContext&&(t=u.nodeContext.parent.formattingContext.isFirstTime(u.nodeContext,t)),u.nodeContext.inline||(u.nodeContext.repeatOnBreak=u.processRepeatOnBreak(D),u.findAndProcessRepeatingElements(a,s));var U,V,z=!1,H=[],j=a.namespaceURI,W=a.localName;if(j==G.XHTML?("html"==W||"body"==W||"script"==W||"link"==W||"meta"==W?W="div":"vide_"==W?W="video":"audi_"==W?W="audio":"object"==W&&(z=!!u.customRenderer),a.getAttribute(Js)&&null!=(U=l.content)&&null!=(V=U.value)&&V.url&&(W="img")):j==G.epub?(W="span",j=G.XHTML):j==G.SHADOW?(j=G.XHTML,W=u.nodeContext.inline?"span":"div"):z=!!u.customRenderer,C)t?W="li":(W="div",D.display=F=Je.block);else if("body"==W||"li"==W)W="div";else if("q"==W)W="span";else if("a"==W){var X=D["hyperlink-processing"];X&&"normal"!=X.toString()&&(W="span")}D.behavior&&"none"!=D.behavior.toString()&&u.customRenderer&&(z=!0),a.dataset&&"true"===a.getAttribute("data-math-typeset")&&(z=!0),(z?u.customRenderer(a,u.nodeContext.parent?u.nodeContext.parent.viewNode:null,D):Ri(null)).then((function(e){if(e)z&&(r="true"==e.getAttribute("data-adapt-process-children"));else{if(D.display===Je.none)return void o.finish(!1);e=u.createElement(j,W)}var n;"a"==W&&e.addEventListener("click",u.page.hrefHandler,!1),"iframe"==e.localName&&e.namespaceURI==G.XHTML&&(n=e).addEventListener("load",(function(){n.contentWindow.navigator.epubReadingSystem={name:"adapt",version:"0.1",layoutStyle:"paginated",hasFeature:function(t,e){return"mouse-events"===t}}}),!1);for(var i,s=u.nodeContext.inheritedProps["image-resolution"],l=[],c=D.width,d=D.height,f=a.getAttribute("width"),p=a.getAttribute("height"),g=c===Je.auto||!c&&!f,E=d===Je.auto||!d&&!p,v=a.attributes,F=v.length,m=null,A=null,b=0;b<F;b++){var y=v[b],B=y.namespaceURI,w=y.localName,S=y.nodeValue;if(B){if("http://www.w3.org/2000/xmlns/"==B)continue;B==G.XLINK&&"href"==w&&(S=u.documentURLTransformer.transformURL(u.resolveURL(S),u.xmldoc.url))}else{if(!oD&&w.match(/^on/))continue;if("style"==w)continue;if(("id"==w||"name"==w)&&t){var N=u.documentURLTransformer.transformFragment(S,u.xmldoc.url);if(!oD||e.namespaceURI===G.SVG&&"svg"!==e.localName||e.ownerDocument.getElementById(S))e.setAttribute(w,N);else{e.setAttribute(w,S),e.setAttribute("data-vivliostyle-id",N);var x=e.ownerDocument.createElement("a");x.setAttribute(w,N),x.setAttribute(Er,"1"),x.style.position="absolute",e.appendChild(x)}u.page.registerElementWithId(e,N);continue}if("src"==w||"href"==w||"poster"==w)S=u.resolveURL(S),"href"===w&&(S=u.documentURLTransformer.transformURL(S,u.xmldoc.url));else if("srcset"==w)S=S.split(",").map((function(t){return u.resolveURL(t.trim())})).join(",");else if("data"===w&&z&&"object"===W&&e.hasAttribute("data"))continue;if("poster"===w&&"video"===W&&j===G.XHTML&&g&&E){var T=new Image,I=ou(T,S);H.push(I),l.push({image:T,element:e,fetcher:I})}}if(j==G.SVG&&/^[A-Z\-]+$/.test(w)&&(w=w.toLowerCase()),u.isSVGUrlAttribute(w)&&(S=DD(S,u.xmldoc.url,u.documentURLTransformer)),B){var P=dD[B];P&&(w=P+":"+w)}if("src"!=w||B||"img"!=W&&"input"!=W||j!=G.XHTML)if("alt"!=w||B||"img"!=W||j!=G.XHTML)if("href"==w&&"image"==W&&j==G.SVG&&B==G.XLINK)u.page.fetchers.push(ou(e,S));else if(B)e.setAttributeNS(B,w,S);else try{e.setAttribute(w,S)}catch(t){h.warn(t)}else A=S;else m=S}if(m){var k="input"===W?new Image:e,O=ou(k,m,A);k!==e&&(e.src=m),g||E||(i=u.nodeContext.vertical?c:d)instanceof Ue&&"%"===i.unit||function(){if(D.position===Je.fixed)return!0;for(var t=null==(e=u.nodeContext.parent)?void 0:e.viewNode;t&&t!==u.viewRoot;t=t.parentElement){var e,n;if("fixed"===(null==(n=t.style)?void 0:n.position))return!0}return!1}()?(g&&E&&s&&1!==s&&l.push({image:k,element:e,fetcher:O}),H.push(O)):u.page.fetchers.push(O)}delete D.content;var R=D["list-style-image"];if(R&&R instanceof Ge){var L=R.url;H.push(ou(new Image,L))}if(u.preprocessElementStyle(D),u.applyComputedStyles(e,D),u.nodeContext.inline)t||($u(e,"inline-start"),ju(e)&&$u(e,"clone"));else if(t){if(!hs(D.position)){var _=D["margin-break"],M=u.getBreakTypeAt(u.nodeContext);(_===Je.discard&&null!==M||_!==Je.keep&&"auto"===M&&!u.nodeContext.floatSide)&&Ku(e,"block-start")}}else $u(e,"block-start"),ju(e)&&($u(e,"clone"),Ku(e,"block-start"));C&&e.setAttribute("value",D["ua-list-item-count"].stringValue()),u.viewNode=e,H.length?$i(H).then((function(){s>0&&u.modifyElemDimensionWithImageResolution(l,s,D,u.nodeContext.vertical),o.finish(r)})):o.timeSlice().then((function(){o.finish(r)}))}))})),o.result()},i.isInsideNonRootMultiColumn=function(){for(var t=null==(e=this.nodeContext.parent)?void 0:e.viewNode;t;t=t.parentNode){var e,n=1===t.nodeType?t.style:null;if(!n)break;if(!isNaN(parseFloat(n.columnCount))||!isNaN(parseFloat(n.columnWidth)))return!0;if("absolute"===n.position)break}return!1},i.getBreakTypeAt=function(t){for(var e,n,i,u=t;u&&!u.after;u=u.parent){var r,o;if(Yu(u.breakBefore))return u.breakBefore;if(1===u.fragmentIndex&&!u.parent)return u.sourceNode===u.sourceNode.ownerDocument.documentElement?"page":null;if(null!=(r=u.parent)&&r.floatSide)return null;var a=null==(o=u.parent)?void 0:o.viewNode;if(a){var s=this.viewport.window.getComputedStyle(a),l=parseFloat(s.paddingBlockStart),c=parseFloat(s.borderBlockStartWidth);if(l||c)return null;for(var h=null==a?void 0:a.firstChild;h&&(Fr(h,u.parent.whitespace)||!u.floatSide&&As(h));)h=h.nextSibling;if(h&&h!==u.viewNode)return null}}var D=null==(e=this.context)||null==(n=e.currentLayoutPosition)||null==(i=n.flowPositions[this.flowName])?void 0:i.startBreakType;return Yu(D)?D:"auto"},i.processAfterIfcontinues=function(t,e,n,i){var u=this.getPseudoMap(e,this.regionIds,this.isFootnote,this.nodeContext,i);if(u&&u["after-if-continues"]&&u["after-if-continues"].content){var r=new nl(t,e,n,i,this.exprContentListener);this.nodeContext.afterIfContinues=new ul(t,r)}},i.isSVGUrlAttribute=function(t){return n.SVG_URL_ATTRIBUTES.includes(t.toLowerCase())},i.modifyElemDimensionWithImageResolution=function(t,e,n,i){var u=this;t.forEach((function(t){if("load"===t.fetcher.get().get()){var r=t.image,o=r.width/e,a=r.height/e,s=t.element;if(o>0&&a>0)if(n["box-sizing"]===Je.border_box&&(n["border-left-style"]!==Je.none&&(o+=Ze(n["border-left-width"],u.context)),n["border-right-style"]!==Je.none&&(o+=Ze(n["border-right-width"],u.context)),n["border-top-style"]!==Je.none&&(a+=Ze(n["border-top-width"],u.context)),n["border-bottom-style"]!==Je.none&&(a+=Ze(n["border-bottom-width"],u.context))),e>1){var l=n["max-width"]||Je.none,c=n["max-height"]||Je.none;if(l===Je.none&&c===Je.none)tt(s,"max-width",o+"px");else if(l!==Je.none&&c===Je.none)tt(s,"width",o+"px");else if(l===Je.none&&c!==Je.none)tt(s,"height",a+"px");else{l.isNumeric(),c.isNumeric();var h=c;"%"!==l.unit?tt(s,"max-width",Math.min(o,Ze(l,u.context))+"px"):"%"!==h.unit?tt(s,"max-height",Math.min(a,Ze(h,u.context))+"px"):i?tt(s,"height",a+"px"):tt(s,"width",o+"px")}}else if(e<1){var D=n["min-width"]||un,d=n["min-height"]||un;D.isNumeric(),D.isNumeric();var f=D,p=d;0===f.num&&0===p.num?tt(s,"min-width",o+"px"):0!==f.num&&0===p.num?tt(s,"width",o+"px"):0===f.num&&0!==p.num?tt(s,"height",a+"px"):"%"!==f.unit?tt(s,"min-width",Math.max(o,Ze(f,u.context))+"px"):"%"!==p.unit?tt(s,"min-height",Math.max(a,Ze(p,u.context))+"px"):i?tt(s,"height",a+"px"):tt(s,"width",o+"px")}}}))},i.preprocessElementStyle=function(e){var n=this;p(t.HOOKS.PREPROCESS_ELEMENT_STYLE).forEach((function(t){t(n.nodeContext,e)}))},i.findAndProcessRepeatingElements=function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)if(1===n.nodeType){var i={},u=e.getStyle(n,!1);if(this.computeStyle(this.nodeContext.vertical,"rtl"===this.nodeContext.direction,u,i),this.processRepeatOnBreak(i)){if(this.nodeContext.formattingContext instanceof Cl&&!this.nodeContext.belongsTo(this.nodeContext.formattingContext))return;var r=this.nodeContext.parent;return this.nodeContext.formattingContext=new Cl(r&&r.formattingContext,this.nodeContext.sourceNode),void this.nodeContext.formattingContext.initializeRepetitiveElements(this.nodeContext.vertical)}}},i.processRepeatOnBreak=function(t){var e=t["repeat-on-break"];return e!==Je.none&&((e===Je.auto||an(e))&&(e=t.display===Je.table_header_group?Je.header:t.display===Je.table_footer_group?Je.footer:Je.none),e&&e!==Je.none)?e.toString():null},i.createTextNodeView=function(){var t=this,e=Oi("createTextNodeView");return this.preprocessTextContent().then((function(){var n=t.offsetInNode||0,i=lr(t.nodeContext.preprocessedTextContent).substr(n);t.viewNode=document.createTextNode(i),e.finish(!0)})),e.result()},i.preprocessTextContent=function(){var e,n=this;if(null!=this.nodeContext.preprocessedTextContent)return Ri(!0);var i=e=this.sourceNode.textContent,u=Oi("preprocessTextContent"),o=p(t.HOOKS.PREPROCESS_TEXT_CONTENT),a=0;return u.loop((function(){return a>=o.length?Ri(!1):o[a++](n.nodeContext,i).thenAsync((function(t){return i=t,Ri(!0)}))})).then((function(){n.nodeContext.preprocessedTextContent=r.default(e,i,0),u.finish(!0)})),u.result()},i.createNodeView=function(t,e){var n,i=this,u=Oi("createNodeView"),r=!0;return 1==this.sourceNode.nodeType?n=this.createElementView(t,e):8==this.sourceNode.nodeType?(this.viewNode=null,n=Ri(!0)):n=this.createTextNodeView(),n.then((function(t){if(r=t,i.nodeContext.viewNode=i.viewNode,i.viewNode){var e,n=function(t,e){return 1===(null==t?void 0:t.nodeType)&&tl(t)===e},o=i.nodeContext.parent,a=o?n(i.viewNode,"after")&&n(o.viewNode,"first-letter")&&null!=(e=o.viewNode)&&e.hasChildNodes()?o.parent.viewNode:o.viewNode:i.viewRoot;a&&(!i.nodeContext.inline||3===i.viewNode.nodeType&&Fr(i.viewNode)||a.hasChildNodes()||!Wu(a).includes("block-start")||$u(a,"text-start"),a.appendChild(i.viewNode))}u.finish(r)})),u.result()},i.setCurrent=function(t,e,n){return this.nodeContext=t,t?(this.sourceNode=t.sourceNode,this.offsetInNode=t.offsetInNode):(this.sourceNode=null,this.offsetInNode=-1),this.viewNode=null,this.nodeContext?this.createNodeView(e,!!n):Ri(!0)},i.processShadowContent=function(t){if(null==t.shadowContext||"content"!=t.sourceNode.localName||t.sourceNode.namespaceURI!=G.SHADOW)return t;var e,n,i=t.boxOffset,u=t.shadowContext,r=t.parent,o=u.subShadow||u.parentShadow;u.subShadow?(e=u.root,(n=u.type)==xr.ROOTLESS&&(e=e.firstChild)):(e=u.owner.firstChild,n=xr.ROOTLESS);var a=t.sourceNode.nextSibling;if(a?(t.sourceNode=a,t.resetView()):t.shadowSibling?t=t.shadowSibling:e?t=null:(t=t.parent.modify()).after=!0,e){var s=new kr(e,r,i);return s.shadowContext=o,s.shadowType=n,s.shadowSibling=t,s}return t.boxOffset=i,t},i.nextPositionInTree=function(t){var e=t.boxOffset+1;if(t.after){if(!t.parent)return null;if(t.shadowType!=xr.ROOTED){var n=t.sourceNode.nextSibling;if(n)return(t=t.modify()).boxOffset=e,t.sourceNode=n,t.resetView(),this.processShadowContent(t)}return t.shadowSibling?((t=t.shadowSibling.modify()).boxOffset=e,t):((t=t.parent.modify()).boxOffset=e,t.after=!0,t)}if(t.nodeShadow){var i=t.nodeShadow.root;if(t.nodeShadow.type==xr.ROOTLESS&&(i=i.firstChild),i){var u=new kr(i,t,e);return u.shadowContext=t.nodeShadow,u.shadowType=t.nodeShadow.type,this.processShadowContent(u)}}var r=t.sourceNode.firstChild;return r?this.processShadowContent(new kr(r,t,e)):(1!=t.sourceNode.nodeType&&(e+=lr(t.preprocessedTextContent).length-1-t.offsetInNode),(t=t.modify()).boxOffset=e,t.after=!0,t)},i.isTransclusion=function(t,e,n){var i=oo(e,"hyperlink-processing");if(!i)return!1;var u=i.evaluate(this.context,"hyperlink-processing");return!!u&&u.toString()==n},i.nextInTree=function(t,e){var n=this,i=this.nextPositionInTree(t);if(!i||i.after)return Ri(i);var u=Oi("nextInTree");return this.setCurrent(i,!0,e).then((function(t){i.viewNode&&t||((i=i.modify()).after=!0,i.viewNode||(i.inline=!0)),n.dispatchEvent({type:"nextInTree",nodeContext:i}),u.finish(i)})),u.result()},i.addImageFetchers=function(t){if(t instanceof $e)for(var e=t.values,n=0;n<e.length;n++)this.addImageFetchers(e[n]);else if(t instanceof Ge){var i=t.url;this.page.fetchers.push(ou(new Image,i))}},i.applyComputedStyles=function(t,e){var n,i,u,r=e["background-image"];r&&this.addImageFetchers(r);var o,a,s=e.position===Je.relative,l=null===(null==(n=this.nodeContext)?void 0:n.parent)&&null===(null==(i=this.sourceNode)?void 0:i.parentElement)&&!(null==(u=this.viewRoot)||!u.parentElement),c=Object.keys(e);c.sort(sn);for(var h=0,D=c;h<D.length;h++){var d=D[h];if(!gD[d]){var f=e[d];f&&(f!==Pe||ln(d))&&((f=f.visit(new Mn(this.xmldoc.url,this.documentURLTransformer)))instanceof Ue&&Ut(f.unit)&&(f="lh"===f.unit?new Ue(f.num*this.getLineHeightUnitSize(d,o,a),"px"):Qe(f,this.context)),"font-size"===d?o=f:"line-height"===d&&(a=f),hr[d]||s&&Dr[d]?this.page.delayedItems.push(new dr(t,d,f)):l&&this.page.pageAreaElement&&ro(d)?tt(this.page.pageAreaElement.parentElement,d,f.toString()):tt(t,d,f.toString()))}}},i.getLineHeightUnitSize=function(t,e,n){var i,u,r=Mt.lh/Mt.em,o=1===(null==(i=this.nodeContext.parent)||null==(u=i.viewNode)?void 0:u.nodeType)?this.viewport.window.getComputedStyle(this.nodeContext.parent.viewNode):null,a=o?parseFloat(o.fontSize):this.context.fontSize(),s=o?"normal"===o.lineHeight?a*r:parseFloat(o.lineHeight):this.context.rootLineHeight;if("line-height"===t||"font-size"===t)return s;var l=null;if(n){if(n instanceof Ve||n instanceof Ue&&("em"===n.unit||"%"===n.unit))l=n instanceof Ue&&"%"===n.unit?n.num/100:n.num;else if(n instanceof Ue)return n.num*this.context.queryUnitSize(n.unit,!1)}else for(var c=null==(h=this.nodeContext.parent)?void 0:h.viewNode;;c=c.parentNode){var h,D,d;if(!c||1!==c.nodeType){l=r;break}var f=null==(D=c)||null==(d=D.style)?void 0:d.lineHeight;if(f){/^[0-9.]+$/.test(f)&&(l=parseFloat(f)),"normal"===f&&(l=r);break}}return null!==l?e instanceof Ue?l*Co(e,a,this.context).num:l*a:s},i.applyPseudoelementStyle=function(t,e,n){if(!t.after){var i=(t.shadowContext?t.shadowContext.styler:this.styler).getStyle(this.sourceNode,!1),u=so(i,"_pseudos");if(u&&(i=u[e])){var r={};t.vertical=this.computeStyle(t.vertical,"rtl"===t.direction,i,r);var o=r.content;Vr(o)&&(o.visit(new Ur(n,this.context,o,this.exprContentListener)),delete r.content),this.applyComputedStyles(n,r)}}},i.peelOff=function(t,e){var n=this,i=Oi("peelOff"),u=t.firstPseudo,r=t.offsetInNode,o=t.after;if(e>0)t.viewNode.textContent=t.viewNode.textContent.substr(0,e),r+=e;else if(!o&&t.viewNode&&0==r){var a=t.viewNode.parentNode;a&&a.removeChild(t.viewNode)}for(var s=t.boxOffset+e,l=[];t.firstPseudo===u;)l.push(t),t=t.parent;var c=l.pop(),h=c.shadowSibling;return i.loop((function(){for(;l.length>0;){c=l.pop(),t=new kr(c.sourceNode,t,s),0==l.length&&(t.offsetInNode=r,t.after=o),t.shadowType=c.shadowType,t.shadowContext=c.shadowContext,t.nodeShadow=c.nodeShadow,t.shadowSibling=c.shadowSibling?c.shadowSibling:h,h=null;var e=n.setCurrent(t,!1);if(e.isPending())return e}return Ri(!1)})).then((function(){i.finish(t)})),i.result()},i.createElement=function(t,e){return t==G.XHTML?this.document.createElement(e):this.document.createElementNS(t,e)},i.applyFootnoteStyle=function(t,e,n){var i={},u=so(this.footnoteStyle,"_pseudos");if(t=this.computeStyle(t,e,this.footnoteStyle,i),u&&u.before){var r={},o=this.createElement(G.XHTML,"span");el(o,"before"),n.appendChild(o),this.computeStyle(t,e,u.before,r),delete r.content,this.applyComputedStyles(o,r)}return delete i.content,this.applyComputedStyles(n,i),t},i.processFragmentedBlockEdge=function(t){var e,n=!t.inline&&t.after?t.parent:t,i=!1;if(t.inline&&t.after&&!t.shadowContext&&1===(null==(e=t.sourceNode.nextSibling)?void 0:e.nodeType)){var u,r=t.sourceNode.nextSibling,o=null==(u=oo(this.styler.getStyle(r,!1),"display"))?void 0:u.value.toString();i=o&&!ps(o)||"true"===r.getAttribute("data-math-typeset")&&/^\s*(\$\$|\\\[)/.test(r.textContent)}for(var a=0,s=n;s;s=s.parent){var l;if(1===(null==(l=s.viewNode)?void 0:l.nodeType)){var c=s.viewNode;if(c.style)if(s.inline){if($u(c,"inline-end"),ju(c)){var h=s.vertical?c.offsetWidth:c.offsetHeight;$u(c,"clone"),(s.vertical?c.offsetWidth:c.offsetHeight)>h&&this.fixClonedBoxDecorationOverflow(c)}}else{if($u(c,"block-end"),!a++&&s!==n)if("justify"!==this.viewport.window.getComputedStyle(c).textAlign||i)$u(c,"text-end");else{var D=this.createChildAnonymousBlockIfNeeded(c);D?D!==c?Xu(D,["block-start","text-start","block-end","text-end","justify"]):($u(c,"text-end"),$u(c,"justify")):$u(c,"text-end")}ju(c)&&($u(c,"clone"),Ku(c,"block-end"))}}}},i.fixClonedBoxDecorationOverflow=function(t){var e=this.viewport.window.getComputedStyle(t),n=-(parseFloat(e.paddingInlineEnd)+parseFloat(e.borderInlineEndWidth));isNaN(n)||(t.style.marginInlineEnd=n+"px")},i.createChildAnonymousBlockIfNeeded=function(t){for(var e=this,n=function t(n){var i=e.viewport.window.getComputedStyle(n),u=i.display,r=i.position,o=i.float;if("ruby"===n.localName)return!1;if("br"===n.localName)return!0;if(("inline"===u||"contents"===u)&&n.hasChildNodes()){var a=n.lastElementChild;if(a&&(!a.nextSibling||a.nextSibling===n.lastChild&&Fr(a.nextSibling))){var s=t(a);if(s||null===s)return s}for(var l=null==a?void 0:a.previousElementSibling;l;l=l.previousElementSibling){var c=t(l);if(c||null===c)return null}return!1}if("none"===u||"absolute"===r||"fixed"===r||o&&"none"!==o||n.hasAttribute(Er)){var h=n.previousElementSibling;return!(!h||!(h.nextSibling===n||h.nextSibling===n.previousSibling&&Fr(h.nextSibling)))&&t(h)}return!(!u||ps(u))},i=null,u=t.lastElementChild;u;u=u.previousElementSibling){var r=n(u);if(r){i=u;break}if(null===r)return null}if(!i)return t;if(i===t.lastElementChild&&(!i.nextSibling||i.nextSibling===t.lastChild&&Fr(i.nextSibling)))return null;var o=t.ownerDocument.createElement("span");o.className="viv-anonymous-block";for(var a=i.nextSibling,s=null;a;a=s)s=a.nextSibling,o.appendChild(a);return t.appendChild(o),o},i.convertLengthToPx=function(t,e,n){var i=t.num,u=t.unit;if(function(t){switch(null==t?void 0:t.toLowerCase()){case"em":case"ex":case"rem":case"lh":case"rlh":return!0;default:return!1}}(u)){for(var r=e;r&&1!==r.nodeType;)r=r.parentNode;return Eo(t,parseFloat(n.getElementComputedStyle(r)["font-size"]),this.context).num}var o=this.context.queryUnitSize(u,!1);return o?i*o:t},i.isSameNodePositionStep=function(t,e){if(t.shadowContext){if(!e.shadowContext)return!1;var n=1===e.node.nodeType?e.node:e.node.parentElement;return t.shadowContext.owner===e.shadowContext.owner&&tl(1===t.node.nodeType?t.node:t.node.parentElement)===tl(n)}return t.node===e.node},i.isSameNodePosition=function(t,e){var n=this;return t.offsetInNode===e.offsetInNode&&t.after==e.after&&t.steps.length===e.steps.length&&t.steps.every((function(t,i){return n.isSameNodePositionStep(t,e.steps[i])}))},i.isPseudoelement=function(t){return!!tl(t)},n}(pt);fD.SVG_URL_ATTRIBUTES=["color-profile","clip-path","cursor","filter","marker","marker-start","marker-end","marker-mid","fill","stroke","mask"];var pD,gD={"float-min-wrap-block":!0,"float-reference":!0,"flow-into":!0,"flow-linger":!0,"flow-options":!0,"flow-priority":!0,"footnote-policy":!0,"margin-break":!0,page:!0},ED=function(){function t(t){this.layoutBox=void 0,this.window=void 0,this.scaleRatio=1,this.layoutBox=t.layoutBox,this.window=t.window,t.pixelRatio>0&&CSS.supports("zoom","8")&&(this.scaleRatio=t.pixelRatio/t.window.devicePixelRatio)}var e=t.prototype;return e.scaleRect=function(t){return{left:t.left*this.scaleRatio,top:t.top*this.scaleRatio,right:t.right*this.scaleRatio,bottom:t.bottom*this.scaleRatio,width:t.width*this.scaleRatio,height:t.height*this.scaleRatio}},e.subtractOffsets=function(t,e){var n=e.left,i=e.top;return{left:t.left-n,top:t.top-i,right:t.right-n,bottom:t.bottom-i,width:t.width,height:t.height}},e.getRangeClientRects=function(t){var e=this,n=t.getClientRects(),i=this.layoutBox.getBoundingClientRect();return Array.from(n).map((function(t){return e.scaleRect(e.subtractOffsets(t,i))}))},e.getElementClientRect=function(t){var e=t.getBoundingClientRect();if(0===e.left&&0===e.top&&0===e.right&&0===e.bottom)return e;var n=this.layoutBox.getBoundingClientRect();return this.scaleRect(this.subtractOffsets(e,n))},e.getElementComputedStyle=function(t){return this.window.getComputedStyle(t,null)},e.adjustLengthValue=function(t){var e=64*(this.scaleRatio||1);return Math.floor(t*e)/e},t}(),CD=function(){function t(t,e,n,i,u,r){this.window=void 0,this.fontSize=void 0,this.pixelRatio=void 0,this.document=void 0,this.root=void 0,this.outerZoomBox=void 0,this.contentContainer=void 0,this.layoutBox=void 0,this.width=void 0,this.height=void 0,this.window=t,this.fontSize=e,this.pixelRatio=n,this.document=t.document,this.root=i||this.document.body,n>0&&CSS.supports("zoom","8")&&(tt(this.root,"--viv-outputPixelRatio",""+n),tt(this.root,"--viv-devicePixelRatio",""+t.devicePixelRatio));var o=this.root.firstElementChild;o||((o=this.document.createElement("div")).setAttribute("data-vivliostyle-outer-zoom-box","true"),this.root.appendChild(o));var a=o.firstElementChild;a||((a=this.document.createElement("div")).setAttribute("data-vivliostyle-spread-container","true"),o.appendChild(a));var s=o.nextElementSibling;s||((s=this.document.createElement("div")).setAttribute("data-vivliostyle-layout-box","true"),this.root.appendChild(s)),this.outerZoomBox=o,this.contentContainer=a,this.layoutBox=s,this.width=u||parseFloat(t.getComputedStyle(this.root).width)||this.root.offsetWidth||t.innerWidth,this.height=r||parseFloat(t.getComputedStyle(this.root).height)||this.root.offsetHeight||t.innerHeight;var l=!t.outerWidth&&!t.outerHeight||/Headless/.test(navigator.userAgent)||navigator.webdriver&&800===t.innerWidth&&600===t.innerHeight;(!this.width||!u&&l)&&(this.width=794),(!this.height||!r&&l)&&(this.height=1056)}var e=t.prototype;return e.resetZoom=function(){tt(this.outerZoomBox,"width",""),tt(this.outerZoomBox,"height",""),tt(this.contentContainer,"width",""),tt(this.contentContainer,"height",""),tt(this.contentContainer,"transform","")},e.zoom=function(t,e,n){tt(this.root,"--viv-outputScale",""+n),tt(this.outerZoomBox,"width",t*n+"px"),tt(this.outerZoomBox,"height",e*n+"px"),tt(this.contentContainer,"width",t+"px"),tt(this.contentContainer,"height",e+"px")},e.clear=function(){for(var t=this.root;t.lastChild;)t.removeChild(t.lastChild)},t}(),vD=function(){function t(t,e,n){this.store=void 0,this.url=void 0,this.document=void 0,this.lang=null,this.totalOffset=-1,this.root=void 0,this.body=void 0,this.head=void 0,this.last=void 0,this.lastOffset=1,this.idMap=void 0,this.store=t,this.url=e,this.document=n,this.root=n.documentElement;var i=null,u=null;if(this.root.namespaceURI==G.XHTML){for(var r=this.root.firstChild;r;r=r.nextSibling)if(1==r.nodeType){var o=r;if(o.namespaceURI==G.XHTML)switch(o.localName){case"head":u=o;break;case"body":i=o}}this.lang=this.root.getAttribute("lang")}this.body=i,this.head=u,this.last=this.root,this.last.setAttribute(_,"0")}var e=t.prototype;return e.doc=function(){return new bD([this.document])},e.getElementOffset=function(t){var e=t.getAttribute(_);if(e)return parseInt(e,10);for(var n=this.lastOffset,i=this.last;i!=t;){var u=i.firstChild;if(!u)for(;!(u=i.nextSibling);)if(null==(i=i.parentNode))throw new Error("Internal error");i=u,1==u.nodeType?(u.setAttribute(_,n.toString()),++n):n+=u.textContent.length}return this.lastOffset=n,this.last=t,n-1},e.getNodeOffset=function(t,e,n){var i=0,u=t,r=null;if(1==u.nodeType){if(!n)return this.getElementOffset(u)}else{if(i=e,!(r=u.previousSibling))return i+=1,this.getElementOffset(u=u.parentNode)+i;u=r}for(;;){for(;u.lastChild;)u=u.lastChild;if(1==u.nodeType)break;if(i+=u.textContent.length,!(r=u.previousSibling)){u=u.parentNode;break}u=r}return i+=1,this.getElementOffset(u)+i},e.getTotalOffset=function(){return this.totalOffset<0&&(this.totalOffset=this.getNodeOffset(this.root,0,!0)),this.totalOffset},e.getNodeByOffset=function(t){for(var e,n=this,i=this.root,u=function(){if((e=n.getElementOffset(i))>=t)return{v:i};var u=i.children;if(!u)return"break";var r=ht(u.length,(function(e){return n.getElementOffset(u[e])>t}));if(0==r)return"break";i=u[r-1]};;){var r=u();if("break"===r)break;if("object"==typeof r)return r.v}for(var o=e+1,a=i,s=a.firstChild||a.nextSibling,l=null;;){if(s){if(1==s.nodeType)break;if(l=a=s,(o+=s.textContent.length)>t&&!/^\s*$/.test(s.textContent))break}else if(!(a=a.parentNode))break;s=a.nextSibling}return s&&l&&/^\s*$/.test(l.textContent)&&(l=s),l||i},e.buildIdMap=function(t){var e=t.getAttribute("id");e&&!this.idMap[e]&&(this.idMap[e]=t);var n=t.getAttributeNS(G.XML,"id");n&&!this.idMap[n]&&(this.idMap[n]=t);for(var i=t.firstElementChild;i;i=i.nextElementSibling)this.buildIdMap(i)},e.getElement=function(t){var e=t.match(/([^#]*)#(.+)$/);if(!e||e[1]&&e[1]!=this.url)return null;var n=e[2],i=this.document.getElementById(n);return!i&&this.document.getElementsByName&&(i=this.document.getElementsByName(n)[0]),i||(this.idMap||(this.idMap={},this.buildIdMap(this.document.documentElement)),i=this.idMap[n]),i},t}();function FD(t,e,n){var i,u=n||new DOMParser;try{i=u.parseFromString(t,e)}catch(t){}if(!i)return null;var r=i.documentElement,o="parsererror";if(r.localName===o)return null;for(var a=r.firstElementChild;a;a=a.nextElementSibling)if(a.localName===o)return null;return i}function mD(t,e){var n=t.responseXML;if(!n){var i=new DOMParser,u=t.responseText;if(u){var r=function(t){var e=t.contentType;if(e){for(var n=Object.keys(pD),i=0;i<n.length;i++)if(pD[n[i]]===e)return e;if(e.match(/\+xml$/))return pD.APPLICATION_XML}var u=t.url.match(/\.([^./]+)$/);if(u)switch(u[1]){case"html":case"htm":return pD.TEXT_HTML;case"xhtml":case"xht":return pD.APPLICATION_XHTML_XML;case"svg":case"svgz":return pD.IMAGE_SVG_XML;case"opf":case"xml":return pD.APPLICATION_XML}return null}(t);if((n=FD(u,r||pD.APPLICATION_XML,i))&&!r){var o=n.documentElement;"html"!==o.localName.toLowerCase()||o.namespaceURI?"svg"===o.localName.toLowerCase()&&n.contentType!==pD.IMAGE_SVG_XML&&(n=FD(u,pD.IMAGE_SVG_XML,i)):n=FD(u,pD.TEXT_HTML,i)}n||(n=FD(u,pD.TEXT_HTML,i))}}return Ri(n?new vD(e,t.url,n):null)}!function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML_XML="application/xhtml+xml",t.IMAGE_SVG_XML="image/svg+xml"}(pD||(pD={}));var AD=new(function(){function t(t){this.fn=void 0,this.fn=t}var e=t.prototype;return e.check=function(t){return this.fn(t)},e.withAttribute=function(e,n){var i=this;return new t((function(t){return i.check(t)&&1==t.nodeType&&t.getAttribute(e)==n}))},e.withChild=function(e,n){var i=this;return new t((function(t){if(!i.check(t))return!1;var u=new bD([t]);return u=u.child(e),n&&(u=u.predicate(n)),u.size()>0}))},t}())((function(t){return!0})),bD=function(){function t(t){this.nodes=void 0,this.nodes=t}var e=t.prototype;return e.asArray=function(){return this.nodes},e.size=function(){return this.nodes.length},e.predicate=function(e){for(var n,i=[],u=R(this.nodes);!(n=u()).done;){var r=n.value;e.check(r)&&i.push(r)}return new t(i)},e.forEachNode=function(e){for(var n=[],i=function(t){n.push(t)},u=0;u<this.nodes.length;u++)e(this.nodes[u],i);return new t(n)},e.forEach=function(t){for(var e=[],n=0;n<this.nodes.length;n++)e.push(t(this.nodes[n]));return e},e.forEachNonNull=function(t){for(var e=[],n=0;n<this.nodes.length;n++){var i=t(this.nodes[n]);null!=i&&e.push(i)}return e},e.child=function(t){return this.forEachNode((function(e,n){for(var i=e.firstChild;i;i=i.nextSibling)1==i.nodeType&&i.localName==t&&n(i)}))},e.childElements=function(){return this.forEachNode((function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e(n)}))},e.attribute=function(t){return this.forEachNonNull((function(e){return 1==e.nodeType?e.getAttribute(t):null}))},e.textContent=function(){return this.forEach((function(t){return t.textContent}))},t}(),yD=new Xi((function(){var t=Oi("uaStylesheetBase"),e=Vc(),n=X("user-agent-base.css",j),i=new Fa(null,null,null,null,null,e,!0);return i.startStylesheet(au.USER_AGENT),va=i.cascade,Ru(Ji,i,n,null,null).thenFinish(t),t.result()}),"uaStylesheetBaseFetcher"),BD=function(){function t(t,e,n,i,u,r,o,a,s,l){this.store=void 0,this.rootScope=void 0,this.pageScope=void 0,this.cascade=void 0,this.rootBox=void 0,this.fontFaces=void 0,this.footnoteProps=void 0,this.flowProps=void 0,this.viewportProps=void 0,this.pageProps=void 0,this.fontDeobfuscator=void 0,this.validatorSet=void 0,this.store=t,this.rootScope=e,this.pageScope=n,this.cascade=i,this.rootBox=u,this.fontFaces=r,this.footnoteProps=o,this.flowProps=a,this.viewportProps=s,this.pageProps=l,this.fontDeobfuscator=t.fontDeobfuscator,this.validatorSet=t.validatorSet,this.pageScope.defineBuiltIn("has-content",(function(t){var e=this,n=e.currentLayoutPosition,i=n.firstFlowChunkOfFlow(t);return e.matchPageSide(n.startSideOfFlow(t))&&n.hasContent(t,e.lookupOffset)&&!!i&&!e.flowChunkIsAfterParentFlowForcedBreak(i)})),this.pageScope.defineName("page-number",new ge(this.pageScope,(function(){return this.pageNumberOffset+this.currentLayoutPosition.page}),"page-number")),this.pageScope.defineName("blank-page",new ge(this.pageScope,(function(){var t=this.currentLayoutPosition;return null==t?void 0:t.isBlankPage}),"blank-page"))}return t.prototype.sizeViewport=function(t,e,n,i){if(this.viewportProps.length){var u=new Vt(this.rootScope,t,e,n),r=function(t,e){for(var n={},i=0;i<e.length;i++)fo(t,n,e[i],0,null,null,null);return n}(u,this.viewportProps),o=r.width,a=r.height,s=r["text-zoom"],l=1;if(o&&a||s){var c=Mt.em;if((s?s.evaluate(u,"text-zoom"):null)===Je.scale&&(l=c/n,n=c,t*=l,e*=l),o&&a){var h=Ze(o.evaluate(u,"width"),u),D=Ze(a.evaluate(u,"height"),u);if(h>0&&D>0)return{width:i&&i.spreadView?2*(h+i.pageBorder):h,height:D,fontSize:n}}}}return{width:t,height:e,fontSize:n}},t}(),wD=function(e){function n(t,n,i,u,r,o,a,s,l,c,h,D,d){var f;for(var p in(f=e.call(this,t.rootScope,u.width,u.height,u.fontSize)||this).style=void 0,f.xmldoc=void 0,f.viewport=void 0,f.clientLayout=void 0,f.fontMapper=void 0,f.customRenderer=void 0,f.fallbackMap=void 0,f.pageNumberOffset=void 0,f.documentURLTransformer=void 0,f.counterStore=void 0,f.lang=void 0,f.primaryFlows={body:!0},f.rootPageBoxInstance=null,f.styler=null,f.stylerMap=null,f.currentLayoutPosition=null,f.layoutPositionAtPageStart=null,f.lookupOffset=0,f.faces=void 0,f.pageBoxInstances={},f.pageManager=null,f.rootPageFloatLayoutContext=void 0,f.pageBreaks={},f.pageProgression=null,f.isVersoFirstPage=!1,f.blankPageAtStart=!1,f.pageSheetSize={},f.pageSheetHeight=0,f.pageSheetWidth=0,f.style=t,f.xmldoc=n,f.viewport=u,f.clientLayout=r,f.fontMapper=o,f.customRenderer=a,f.fallbackMap=s,f.pageNumberOffset=l,f.documentURLTransformer=c,f.counterStore=h,f.lang=n.lang||i,f.faces=new Wc(f.style.fontDeobfuscator),f.rootPageFloatLayoutContext=new is(null,null,null,null,null,null,null),f.pageProgression=D||null,f.isVersoFirstPage=!!d,t.flowProps){var g=oo(t.flowProps[p],"flow-consume");g&&(g.evaluate(k(f),"flow-consume")==Je.all?f.primaryFlows[p]=!0:delete f.primaryFlows[p])}return f}N(n,e);var i=n.prototype;return i.init=function(){var t=this,e=Oi("StyleInstance.init"),n=this.counterStore.createCounterListener(this.xmldoc.url),i=this.counterStore.createCounterResolver(this.xmldoc.url,this.style.rootScope,this.style.pageScope);this.styler=new Dc(this.xmldoc,this.style.cascade,this.style.rootScope,this,this.primaryFlows,this.style.validatorSet,n,i),i.setStyler(this.styler),this.styler.resetFlowChunkStream(this),this.stylerMap={},this.stylerMap[this.xmldoc.url]=this.styler;var u=this.styler.getTopContainerStyle();this.pageProgression||(this.pageProgression=Fh(u)),this.matchStartPageSide(this.styler.breakBeforeValues[0])||(0===this.pageNumberOffset?this.isVersoFirstPage=!0:this.blankPageAtStart=!0),this.rootPageBoxInstance=new Dh(this.style.rootBox);var r=this.style.cascade.createInstance(this,n,i,this.lang);this.styler.cascade.currentPageType=this.styler.cascade.firstPageType,this.rootPageBoxInstance.applyCascadeAndInit(r,u),this.rootPageBoxInstance.resolveAutoSizing(this),this.pageManager=new Kh(r,this.style.pageScope,this.rootPageBoxInstance,this,u);for(var o,a=[],s=R(this.style.fontFaces);!(o=s()).done;){var l=o.value;if(!l.condition||l.condition.evaluate(this)){var c=Gc(l.properties,this),D=new jc(c);a.push(D)}}this.fontMapper.findOrLoadFonts(a,this.faces).then((function(){(function(t,e,n){if(!oD)return Ri(!1);var i=lD(t);if(0===i.length)return Ri(!1);var u=i.some((function(t){return!(t.async||t.defer||"module"===t.type)})),r=u?function(t,e,n){var i,u=null!=(i=e.document.querySelector("[data-vivliostyle-textcontent]"))?i:e.document.createElement("div");return u.style.position="fixed",u.style.fontSize="0",u.setAttribute("data-vivliostyle-textcontent","true"),u.setAttribute("aria-hidden","true"),u.style.fontFamily=function(t,e){for(var n={},i=function t(e){var i,u=null==(i=e["font-family"])?void 0:i.value;if(u)if(u.values)for(var r,o=R(u.values);!(r=o()).done;)n[r.value.stringValue()]=!0;else n[u.stringValue()]=!0;var a=e._marginBoxes;if(a)for(var s=0,l=Object.values(a);s<l.length;s++)t(l[s])},u=function t(e){if(e instanceof Ao)i(e.style);else if(e instanceof vo||Array.isArray(e))for(var n=0,u=Object.values(e);n<u.length;n++)t(u[n])},r=0,o=Object.values(e.cascade.code);r<o.length;r++)for(var a=o[r],s=0,l=Object.values(null!=a?a:{});s<l.length;s++)u(l[s]);for(var c,h=R(t.querySelectorAll("[style]"));!(c=h()).done;){var D,d=c.value;null!=(D=d.style)&&D.fontFamily&&(n[d.style.fontFamily]=!0)}return Object.keys(n).join(",")}(t,n),u.textContent=t.documentElement.textContent,e.document.body.appendChild(u),u}(t,e,n):null,o=e.document.fonts,a=e.$,s=!1,l=Oi("loadScripts");return l.loop((function(){if(0===i.length)return u?l.sleep(20).thenAsync((function(){var t,n;return"loading"===o.status||e.document.documentElement.classList.contains("wf-loading")||null!=(t=e.FontJSON)&&t.Font&&null!=(n=e.ret)&&n.readyState&&e.ret.readyState<4?Ri(!0):Ri(!1)})):Ri(!1);var t=i.shift();return cD(t,e,{inHead:!0,forceDefer:s}).thenAsync((function(){return s||e.$===a||(aD.push(t),s=!0),0===i.length&&u&&(h.debug("dispatchEvent: DOMContentLoaded (document)"),e.document.dispatchEvent(new Event("DOMContentLoaded"))),Ri(!0)}))})).then((function(){r&&r.remove(),l.finish(!0)})),l.result()})(t.xmldoc.document,t.viewport.window,t.styler).thenFinish(e)}));var d=this.style.pageProps;return d[""]||(d[""]={}),Object.keys(d).forEach((function(e){var n=d[e];t.styler.cascade.applyVarFilter([n],t.styler,null),t.styler.cascade.applyCalcFilter(n,t.styler.context);var i=Nh(Sh(n),t);t.pageSheetSize[e]={width:i.pageWidth+2*i.cropOffset,height:i.pageHeight+2*i.cropOffset}})),e.result()},i.matchStartPageSide=function(e){var n=this.pageNumberOffset%2==(this.isVersoFirstPage?1:0),i=this.pageProgression==t.PageProgression.LTR;switch(e){case"left":return n!==i;case"right":return n===i;case"recto":return n;case"verso":return!n;default:return!0}},i.getStylerForDoc=function(t){var e=this.stylerMap[t.url];if(!e){var n=this.style.store.getStyleForDoc(t),i=new Vt(n.rootScope,this.pageWidth(),this.pageHeight(),this.initialFontSize),u=this.counterStore.createCounterListener(t.url),r=this.counterStore.createCounterResolver(t.url,n.rootScope,n.pageScope);e=new Dc(t,n.cascade,n.rootScope,i,this.primaryFlows,n.validatorSet,u,r),this.stylerMap[t.url]=e}return e},i.registerInstance=function(t,e){this.pageBoxInstances[t]=e},i.lookupInstance=function(t){return this.pageBoxInstances[t]},i.encounteredFlowChunk=function(t,e){var n=this.currentLayoutPosition;if(n){n.flows[t.flowName]?e=n.flows[t.flowName]:n.flows[t.flowName]=e;var i=n.flowPositions[t.flowName];i||(i=new Lr,n.flowPositions[t.flowName]=i);var u=new Or({steps:[{node:t.element,shadowType:xr.NONE,shadowContext:null,nodeShadow:null,shadowSibling:null,formattingContext:null,fragmentIndex:0}],offsetInNode:0,after:!1,preprocessedTextContent:null}),r=new Rr(u,t);i.positions.push(r)}},i.evalSupportsTest=function(t,e,n){if(n)return"selector"===t&&this.evalSupportsSelector(e);if(!t)return!1;var i=!0,u=new(function(){function t(){}var e=t.prototype;return e.unknownProperty=function(t,e){i=!1},e.invalidPropertyValue=function(t,e){i=!1},e.simpleProperty=function(t,e,n){},t}()),r=_u(this.style.rootScope,new Ti(e,null),"");return!!r&&(this.xmldoc.store.validatorSet.validatePropertyAndHandleShorthand(t,r,!1,u),i)},i.evalSupportsSelector=function(t){var e=new ND(null),n=new Ti(t+"{}",e);return!!new ku(gu,n,e,"").runParser(Number.POSITIVE_INFINITY,!1,!1,!1,!1)&&!e.cascadeParserHandler.invalid},i.getConsumedOffset=function(t){for(var e=Number.POSITIVE_INFINITY,n=0;n<t.positions.length;n++){for(var i=t.positions[n].chunkPosition.primary,u=i.steps[0].node,r=i.offsetInNode,o=i.after,a=0;u.ownerDocument!=this.xmldoc.document;)a++,u=i.steps[a].node,o=!1,r=0;var s=this.xmldoc.getNodeOffset(u,r,o);s<e&&(e=s)}return e},i.getPosition=function(t,e){if(!t)return 0;var n=Number.POSITIVE_INFINITY;for(var i in this.primaryFlows){var u=t.flowPositions[i];if(e||u&&0!=u.positions.length||!this.currentLayoutPosition||(this.styler.styleUntilFlowIsReached(i),u=this.currentLayoutPosition.flowPositions[i],t!=this.currentLayoutPosition&&u&&(u=u.clone(),t.flowPositions[i]=u)),u){var r=this.getConsumedOffset(u);r<n&&(n=r)}}return n},i.dumpLocation=function(t){for(var e in h.debug("Location - page",this.currentLayoutPosition.page),h.debug("  current:",t),h.debug("  lookup:",this.lookupOffset),this.currentLayoutPosition.flowPositions)for(var n,i=R(this.currentLayoutPosition.flowPositions[e].positions);!(n=i()).done;)h.debug("  Chunk",e+":",n.value.flowChunk.startOffset)},i.matchPageSide=function(t){switch(t){case"left":case"right":case"recto":case"verso":return new fe(this.style.pageScope,t+"-page").evaluate(this);default:return!0}},i.updateStartSide=function(t){for(var e in t.flowPositions){var n=t.flowPositions[e];if(n&&n.positions.length>0){var i=n.positions[0].flowChunk;this.getConsumedOffset(n)===i.startOffset&&(n.startBreakType=sr(ar(n.startBreakType,n.positions[0].flowChunk.breakBefore)))}}},i.selectPageMaster=function(t){var e=this.currentLayoutPosition,n=this.getPosition(e);if(n==Number.POSITIVE_INFINITY)return null;for(var i,u=this.rootPageBoxInstance.children,r=0;r<u.length;r++)if((i=u[r]).pageBox.pseudoName!==_h){var o=1;i.pageBox.pseudoName!==hh||this.actualPageWidth&&this.actualPageHeight||(o=1/0);var a=i.getProp(this,"utilization");a&&a.isNum()&&(o=a.num);var s=this.queryUnitSize("em",!1),l=this.pageWidth()*this.pageHeight(),c=Math.ceil(o*l/(s*s));this.lookupOffset=this.styler.styleUntil(n,c),this.updateStartSide(e),this.layoutPositionAtPageStart=e.clone(),this.initLingering(),this.clearScope(this.style.pageScope);var h=i.getProp(this,"enabled");if(!h||h===Je._true){if(1===e.page&&this.blankPageAtStart){i.style={};var D=t.size;t={},D&&(t.size=D)}return this.pageManager.getPageRulePageMaster(i,t)}}throw new Error("No enabled page masters")},i.flowChunkIsAfterParentFlowForcedBreak=function(t){var e=this.layoutPositionAtPageStart.flows,n=e[t.flowName].parentFlowName;if(n){var i=t.startOffset,u=e[n].forcedBreakOffsets;if(!u.length||i<u[0])return!1;var r=ht(u.length,(function(t){return u[t]>i}))-1,o=u[r],a=this.layoutPositionAtPageStart.flowPositions[n],s=this.getConsumedOffset(a);return!(o<s)&&(s<o||!this.matchPageSide(a.startBreakType))}return!1},i.setFormattingContextToColumn=function(t,e){var n=this.currentLayoutPosition.flows[e];n.formattingContext||(n.formattingContext=new Ts(null)),t.flowRootFormattingContext=n.formattingContext},i.layoutDeferredPageFloats=function(t){var e=this,n=t.pageFloatLayoutContext,i=n.getDeferredPageFloatContinuations(),u=Oi("layoutDeferredPageFloats"),r=!1,o=0;return u.loopWithFrame((function(u){if(o!==i.length){var a=i[o++],s=a.float;if(function(t){if(t.floatReference!==Za.PAGE)return!1;var n=e.layoutPositionAtPageStart.flowPositions.body,i=n&&e.getConsumedOffset(n),u=e.xmldoc.getNodeOffset(t.nodePosition.steps[0].node,0,!1);return null!=u&&null!=i&&u>i}(s))u.breakLoop();else{var l=(new rs).findByFloat(s),c=l.findPageFloatFragment(s,n);if(!c||!c.hasFloat(s))return n.isForbidden(s)||n.hasPrecedingFloatsDeferredToNext(s)?(n.deferPageFloat(a),void u.breakLoop()):void t.layoutPageFloatInner(a,l,null,c).then((function(t){if(t){var e=n.parent.isInvalidated();e?u.breakLoop():(n.isInvalidated()&&!e&&(r=!0,n.validate()),u.continueLoop())}else u.breakLoop()}));u.continueLoop()}}else u.breakLoop()})).then((function(){r&&n.invalidate(),u.finish(!0)})),u.result()},i.getLastAfterPositionIfDeferredFloatsExists=function(t,e){var n;return t.pageFloatLayoutContext.getPageFloatContinuationsDeferredToNext().length>0&&t.lastAfterPosition?(e?(n=e.clone()).primary=t.lastAfterPosition:n=new Or(t.lastAfterPosition),n):null},i.layoutColumn=function(t,e){var n=this,i=this.currentLayoutPosition.flowPositions[e];if(!i||!this.matchPageSide(i.startBreakType))return Ri(!0);this.setFormattingContextToColumn(t,e),t.init(),this.primaryFlows[e]&&t.bands.length>0&&(t.forceNonfitting=!1);var u=Oi("layoutColumn");return this.layoutDeferredPageFloats(t).then((function(){if(t.pageFloatLayoutContext.isInvalidated())u.finish(!0);else{var r=[],o=[],a=!0;u.loopWithFrame((function(u){if(t.pageFloatLayoutContext.hasContinuingFloatFragmentsInFlow(e))u.breakLoop();else{for(var s=function(){for(var e=0;o.includes(e);)e++;var s=i.positions[e];if(s.flowChunk.startOffset>n.lookupOffset||n.flowChunkIsAfterParentFlowForcedBreak(s.flowChunk))return"break";for(var l=e+1;l<i.positions.length;l++)if(!o.includes(l)){var c=i.positions[l];if(c.flowChunk.startOffset>n.lookupOffset||n.flowChunkIsAfterParentFlowForcedBreak(c.flowChunk))break;c.flowChunk.isBetter(s.flowChunk)&&(s=c,e=l)}var h=s.flowChunk,D=!0;return t.layout(s.chunkPosition,a,i.breakAfter).then((function(l){if(t.pageFloatLayoutContext.isInvalidated())u.breakLoop();else{if(a=!1,s.flowChunk.repeated&&(null===l||h.exclusive)&&r.push(e),h.exclusive)return o.push(e),void u.breakLoop();var c=!!l||!!t.pageBreakType,d=n.getLastAfterPositionIfDeferredFloatsExists(t,l);t.pageBreakType&&d?(s.chunkPosition=d,i.breakAfter=t.pageBreakType,t.pageBreakType=null):(o.push(e),(l||d)&&(s.chunkPosition=l||d,r.push(e)),i.startBreakType=sr(t.pageBreakType)),c?u.breakLoop():(t.forceNonfitting=!1,D?D=!1:u.continueLoop())}})),D?(D=!1,{v:void 0}):void 0};i.positions.length-o.length>0;){var l=s();if("break"===l)break;if("object"==typeof l)return l.v}u.breakLoop()}})).then((function(){if(!t.pageFloatLayoutContext.isInvalidated()){i.positions=i.positions.filter((function(t,e){return r.includes(e)||!o.includes(e)})),"column"===i.breakAfter&&(i.breakAfter=null),t.saveDistanceToBlockEndFloats();var e=t.pageFloatLayoutContext.getMaxReachedAfterEdge();t.updateMaxReachedAfterEdge(e)}u.finish(!0)}))}})),u.result()},i.createLayoutConstraint=function(t){var e=this.counterStore.createLayoutConstraint(this.currentLayoutPosition.page-1);return new ll([e].concat(t.getLayoutConstraints()))},i.createAndLayoutColumn=function(t,e,n,i,u,r,o,a,s,l,c,h,D,d){var f,p=this,g=t.vertical?t.isAutoWidth&&t.isRightDependentOnAutoWidth:t.isAutoHeight&&t.isTopDependentOnAutoHeight,E=u.element,C=new is(a,Za.COLUMN,null,o,null,null,null),v=this.currentLayoutPosition.clone(),F=Oi("createAndLayoutColumn");return F.loopWithFrame((function(t){var F=p.createLayoutConstraint(C);if(s>1){var m=p.viewport.document.createElement("div");if(tt(m,"position","absolute"),E.appendChild(m),(f=new hl(m,D,p.clientLayout,F,C)).forceNonfitting=d,f.vertical=u.vertical,f.rtl=u.rtl,f.snapHeight=u.snapHeight,f.snapWidth=u.snapWidth,u.vertical){var A=(u.rtl?s-r-1:r)*(c+l)+u.paddingTop,b=parseFloat(E.style.width);f.setHorizontalPosition(u.paddingLeft+b-u.width,u.width),f.setVerticalPosition(A,c)}else{var y=(u.rtl?s-r-1:r)*(c+l)+u.paddingLeft;f.setVerticalPosition(u.paddingTop,u.height),f.setHorizontalPosition(y,c)}f.originX=e,f.originY=n}else(f=new hl(E,D,p.clientLayout,F,C)).copyFrom(u);f.exclusions=g?[]:i.concat(),f.innerShape=h,C.setContainer(f),f.width>=0?p.layoutColumn(f,o).then((function(){C.isInvalidated()||C.finish(),f.pageFloatLayoutContext.isInvalidated()&&!a.isInvalidated()?(f.pageFloatLayoutContext.validate(),p.currentLayoutPosition=v.clone(),f.element!==E&&E.removeChild(f.element),t.continueLoop()):t.breakLoop()})):(C.finish(),t.breakLoop())})).then((function(){F.finish(f)})),F.result()},i.setPagePageFloatLayoutContextContainer=function(t,e,n){(e instanceof Xh||e instanceof dh&&!(e instanceof Hh))&&t.setContainer(n)},i.getRegionPageFloatLayoutContext=function(t,e,n,i){var u=e.getProp(this,"writing-mode")||null,r=e.getProp(this,"direction")||null;return new is(t,Za.REGION,n,i,null,u,r)},i.layoutFlowColumnsWithBalancing=function(t,e,n,i,u,r,o,a,s){var l=this,c=this.currentLayoutPosition.clone(),h=this.getRegionPageFloatLayoutContext(r,e,o,a),D=!0,d=function(){return l.currentLayoutPosition=c.clone(),l.layoutFlowColumns(t,e,n,i,u,r,h,o,a,s,D).thenAsync((function(t){return Ri(t?{columns:t,position:l.currentLayoutPosition}:null)}))};return d().thenAsync((function(t){if(!t)return Ri(null);if(s<=1)return Ri(t.columns);var n=e.getProp(l,"column-fill")||Je.balance,i=function(t,e,n,i,u,r,o){if(e===Je.auto)return null;var a=r[r.length-1];return 0===o.positions.length||a&&a.pageBreakType?new uc(n,i,u,t):e===Je.balance_all?new ac(n,i,u):null}(s,n,d,h,o,t.columns,l.currentLayoutPosition.flowPositions[a]);return i?(D=!1,r.lock(),h.lock(),i.balanceColumns(t).thenAsync((function(t){return r.unlock(),r.validate(),h.unlock(),l.currentLayoutPosition=t.position,Ri(t.columns)}))):Ri(t.columns)}))},i.layoutFlowColumns=function(t,e,n,i,u,r,o,a,s,l,c){var h=this,D=Oi("layoutFlowColumns"),d=this.currentLayoutPosition.clone(),f=e.getPropAsNumber(this,"column-gap"),p=l>1?e.getPropAsNumber(this,"column-width"):a.width,g=e.getActiveRegions(this),E=Rn(e.getProp(this,"shape-inside"),0,0,a.width,a.height,this),C=new fD(s,this,this.viewport,this.styler,g,this.xmldoc,this.faces,this.style.footnoteProps,this,t,this.customRenderer,this.fallbackMap,this.documentURLTransformer),v=0,F=null,m=[];return D.loopWithFrame((function(t){h.createAndLayoutColumn(e,n,i,u,a,v++,s,o,l,f,p,E,C,c).then((function(e){return r.isInvalidated()?(m=null,void t.breakLoop()):(!(e.pageBreakType&&"column"!==e.pageBreakType)&&v!==l||o.isInvalidated()||o.finish(),o.isInvalidated()?(v=0,h.currentLayoutPosition=d.clone(),o.validate(),void(o.isLocked()?(m=null,t.breakLoop()):t.continueLoop())):(m[v-1]=F=e,F.pageBreakType&&"column"!=F.pageBreakType&&(v=l,"region"!=F.pageBreakType&&(h.pageBreaks[s]=!0)),void(v<l?t.continueLoop():t.breakLoop())))}))})).then((function(){D.finish(m)})),D.result()},i.layoutContainer=function(t,e,n,i,u,r,o){var a=this;e.reset();var s=e.getProp(this,"enabled");if(s&&s!==Je._true)return Ri(!0);var l=Oi("layoutContainer"),c=e.getProp(this,"wrap-flow")===Je.auto,D=e.getProp(this,"flow-from"),d=this.viewport.document.createElement("div"),f=e.getProp(this,"position");tt(d,"position",f?f.name:"absolute");var p=e instanceof Hh;e instanceof ph?n.appendChild(d):n.insertBefore(d,n.firstChild);var g,E=new Mr(d);E.vertical=e.vertical,E.rtl=e.rtl,E.exclusions=r,e.prepareContainer(this,E,t,this.faces,this.clientLayout),e instanceof Hh&&(E.width<=0||E.height<=0)&&h.warn("Negative or zero page area size"),E.originX=i,E.originY=u,i+=E.left+E.marginLeft+E.borderLeft,u+=E.top+E.marginTop+E.borderTop,this.setPagePageFloatLayoutContextContainer(o,e,E);var C,v,F,m,A=!1;if(D&&D.isIdent())if(this.pageBreaks[D.toString()])o.isInvalidated()||e.finishContainer(this,E,t,null,1,this.clientLayout,this.faces),g=Ri(!0);else{var b=Oi("layoutContainer.inner"),y=D.toString(),B=e.getPropAsNumber(this,"column-count");this.layoutFlowColumnsWithBalancing(t,e,i,u,r,o,E,y,B).then((function(n){if(!o.isInvalidated()){var i=n[0];i.element===d&&(E=i),E.computedBlockSize=Math.max.apply(null,n.map((function(t){return t.computedBlockSize}))),e.finishContainer(a,E,t,i,B,a.clientLayout,a.faces);var u=a.currentLayoutPosition.flowPositions[y];u&&"region"===u.breakAfter&&(u.breakAfter=null)}b.finish(!0)})),g=b.result()}else{var w=e.getProp(this,"content");if(w instanceof qe&&w.expr instanceof ge&&w.expr.str.startsWith("running-element-"))w.visit(new Ur(d,this,w,this.counterStore.getExprContentListener()));else if(w&&Vr(w)){var S="span";w.url&&(S="img");var N=this.viewport.document.createElement(S);w.visit(new Ur(N,this,w,this.counterStore.getExprContentListener())),d.appendChild(N),"img"==S&&e.transferSingleUriContentProps(this,N,this.faces),e.transferContentProps(this,E,t,this.faces),"span"==S&&(C=N,v=e.getProp(this,"text-autospace"),F=e.getProp(this,"text-spacing-trim"),m=e.getProp(this,"hanging-punctuation"),Ys.processGeneratedContent(C,v,F,m,this.lang,e.vertical))}else e.suppressEmptyBoxGeneration&&(n.removeChild(d),A=!0);A||e.finishContainer(this,E,t,null,1,this.clientLayout,this.faces),g=Ri(!0)}return g.then((function(){if(o.isInvalidated())l.finish(!0);else{if(!e.isAutoHeight||Math.floor(E.computedBlockSize)>0){if(!A&&!c){var s=e.getProp(a,"shape-outside"),h=E.getOuterShape(s,a);r.push(h)}}else if(0==e.children.length)return n.removeChild(d),void l.finish(!0);var D=p?0:e.children.length-1;l.loop((function(){for(;D>=0&&D<e.children.length;){var n=e.children[p?D++:D--],s=a.layoutContainer(t,n,d,i,u,r,o);if(s.isPending())return s.thenAsync((function(){return Ri(!o.isInvalidated())}));if(o.isInvalidated())break}return Ri(!1)})).then((function(){l.finish(!0)}))}})),l.result()},i.processLinger=function(){var t=this.currentLayoutPosition.page;for(var e in this.currentLayoutPosition.flowPositions)for(var n=this.currentLayoutPosition.flowPositions[e],i=n.positions.length-1;i>=0;i--){var u=n.positions[i];u.flowChunk.startPage>=0&&u.flowChunk.startPage+u.flowChunk.linger-1<=t&&n.positions.splice(i,1)}},i.initLingering=function(){var t=this.currentLayoutPosition.page;for(var e in this.currentLayoutPosition.flowPositions)for(var n=this.currentLayoutPosition.flowPositions[e],i=n.positions.length-1;i>=0;i--){var u=n.positions[i];u.flowChunk.startPage<0&&u.flowChunk.startOffset<this.lookupOffset&&(u.flowChunk.startPage=t)}},i.noMorePrimaryFlows=function(t){for(var e in this.primaryFlows){var n=t.flowPositions[e];if(n&&n.positions.length>0)return!1}return!0},i.layoutNextPage=function(e,n){var i=this,u=e.container===e.bleedBox;if(this.pageBreaks={},n?(this.currentLayoutPosition=n.clone(),this.styler.replayFlowElementsFromOffset(n.highestSeenOffset)):(this.currentLayoutPosition=new _r,this.styler.replayFlowElementsFromOffset(-1)),this.lang&&e.bleedBox.setAttribute("lang",this.lang),(n=this.currentLayoutPosition).page>1e4)throw new Error("Too many pages generated (over 10000 pages)");n.page++;var r,o=n.startSideOfFlow("body");n.isBlankPage=Qu(o)&&this.matchPageSide(o),e.isBlankPage=n.isBlankPage,null==e.pageType&&(e.pageType=null!=(r=e.isBlankPage?this.styler.cascade.previousPageType:this.styler.cascade.currentPageType)?r:"",this.styler.cascade.previousPageType=this.styler.cascade.currentPageType),this.clearScope(this.style.pageScope),this.layoutPositionAtPageStart=n.clone();var a=u?{}:this.pageManager.getCascadedPageStyle(e.pageType);this.styler.cascade.applyVarFilter([a],this.styler,null),this.styler.cascade.applyCalcFilter(a,this.styler.context);var s=this.selectPageMaster(a);if(!s)return Ri(null);var l=0;if(!u){e.setAutoPageWidth(s.pageBox.specified.width.value===en),e.setAutoPageHeight(s.pageBox.specified.height.value===nn),this.counterStore.setCurrentPage(e),this.counterStore.updatePageCounters(a,this);var c=Nh(Sh(a),this);this.setPageSizeAndBleed(c,e),function(t,e,n,i){var u=!1,r=!1,o=t.marks;if(o){var a=o.value;a instanceof Xe?a.values.forEach((function(t){t===Je.crop?u=!0:t===Je.cross&&(r=!0)})):a===Je.crop?u=!0:a===Je.cross&&(r=!0)}var s=e.bleed;if(u||r){var l=n.container,c=l.ownerDocument,h=Ze(Ah,i),D=Math.max(0,e.bleedOffset-Ze(Bh,i)),d=e.bleedOffset-D;u&&Object.keys(bh).forEach((function(t){var e=function(t,e,n,i,u,r){var o=i;o<=u+2*Mt.mm&&(o=u+i/2);var a=Math.max(i,o),s=u+a+n/2,l=xh(t,s,s),c=[[0,u+i],[i,u+i],[i,u+i-o]],h=c.map((function(t){return[t[1],t[0]]}));e!==bh.TOP_RIGHT&&e!==bh.BOTTOM_RIGHT||(c=c.map((function(t){return[u+a-t[0],t[1]]})),h=h.map((function(t){return[u+a-t[0],t[1]]}))),e!==bh.BOTTOM_LEFT&&e!==bh.BOTTOM_RIGHT||(c=c.map((function(t){return[t[0],u+a-t[1]]})),h=h.map((function(t){return[t[0],u+a-t[1]]})));var D=Th(t,n);D.setAttribute("points",c.map((function(t){return t.join(",")})).join(" ")),l.appendChild(D);var d=Th(t,n);return d.setAttribute("points",h.map((function(t){return t.join(",")})).join(" ")),l.appendChild(d),e.split(" ").forEach((function(t){l.style[t]=r+"px"})),l}(c,bh[t],h,d,s,D);l.appendChild(e)})),r&&Object.keys(yh).forEach((function(t){var e=function(t,e,n,i,u){var r,o,a=2*i;e===yh.TOP||e===yh.BOTTOM?(r=a,o=i):(r=i,o=a);var s=xh(t,r,o),l=Th(t,n);l.setAttribute("points","0,"+o/2+" "+r+","+o/2),s.appendChild(l);var c=Th(t,n);c.setAttribute("points",r/2+",0 "+r/2+","+o),s.appendChild(c);var h,D=Th(t,n,"circle");switch(D.setAttribute("cx",r/2),D.setAttribute("cy",o/2),D.setAttribute("r",i/4),s.appendChild(D),e){case yh.TOP:h=yh.BOTTOM;break;case yh.BOTTOM:h=yh.TOP;break;case yh.LEFT:h=yh.RIGHT;break;case yh.RIGHT:h=yh.LEFT}return Object.keys(yh).forEach((function(t){var n=yh[t];n===e?s.style[n]=u+"px":n!==h&&(s.style[n]="0",s.style["margin-"+n]="auto")})),s}(c,yh[t],h,d,D);l.appendChild(e)}))}}(a,c,e,this),l=c.bleedOffset+c.bleed}var h=!u&&s.getProp(this,"writing-mode")||Je.horizontal_tb;this.pageVertical=h!=Je.horizontal_tb;var D=s.getProp(this,"direction")||Je.ltr,d=new is(this.rootPageFloatLayoutContext,Za.PAGE,null,null,null,h,D),f=Oi("layoutNextPage");return f.loopWithFrame((function(t){i.layoutContainer(e,s,e.bleedBox,l,l,[],d).then((function(){d.isInvalidated()||d.finish(),d.isInvalidated()?(i.currentLayoutPosition=i.layoutPositionAtPageStart.clone(),d.validate(),t.continueLoop()):t.breakLoop()}))})).then((function(){if(s.adjustPageLayout(i,e,i.clientLayout),!u){var r=new fe(s.pageBox.scope,"left-page");e.side=r.evaluate(i)?t.PageSide.LEFT:t.PageSide.RIGHT,i.processLinger(),n=i.currentLayoutPosition,Object.keys(n.flowPositions).forEach((function(t){var e=n.flowPositions[t],u=e.breakAfter;!u||"page"!==u&&i.matchPageSide(u)||(e.breakAfter=null)}))}i.currentLayoutPosition=i.layoutPositionAtPageStart=null,n.highestSeenOffset=i.styler.getReachedOffset();var o=i.style.store.getTriggersForDoc(i.xmldoc);e.finish(o,i.clientLayout),i.noMorePrimaryFlows(n)&&(n=null),f.finish(n)})),f.result()},i.setPageSizeAndBleed=function(t,e){this.actualPageWidth=t.pageWidth,this.actualPageHeight=t.pageHeight,this.pageSheetWidth=t.pageWidth+2*t.cropOffset,this.pageSheetHeight=t.pageHeight+2*t.cropOffset,e.container.style.width=this.pageSheetWidth+"px",e.container.style.height=this.pageSheetHeight+"px",e.bleedBox.style.left=t.bleedOffset+"px",e.bleedBox.style.right=t.bleedOffset+"px",e.bleedBox.style.top=t.bleedOffset+"px",e.bleedBox.style.bottom=t.bleedOffset+"px",e.bleedBox.style.padding=t.bleed+"px"},n}(Vt),SD=function(t){function e(e,n,i,u){var r;return(r=t.call(this,e.rootScope,e,n,i,u,e.validatorSet,!i)||this).masterHandler=void 0,r.insideRegion=!1,r.masterHandler=e,r}N(e,t);var n=e.prototype;return n.startPageTemplateRule=function(){},n.startPageMasterRule=function(t,e,n){var i=new Zc(this.masterHandler.pageScope,t,e,n,this.masterHandler.rootBox,this.condition,this.owner.getBaseSpecificity());this.masterHandler.pushHandler(new vh(i.scope,this.masterHandler,i,this.validatorSet))},n.startWhenRule=function(t){var n=t.expr;null!=this.condition&&(n=be(this.scope,this.condition,n)),this.masterHandler.pushHandler(new e(this.masterHandler,n,this,this.regionId))},n.startDefineRule=function(){this.masterHandler.pushHandler(new Sa(this.scope,this.owner))},n.startFontFaceRule=function(){var t={};this.masterHandler.fontFaces.push({properties:t,condition:this.condition}),this.masterHandler.pushHandler(new Na(this.scope,this.owner,null,t,this.masterHandler.validatorSet,"font-face"))},n.startFlowRule=function(t){var e=this.masterHandler.flowProps[t];e||(this.masterHandler.flowProps[t]=e={}),this.masterHandler.pushHandler(new Na(this.scope,this.owner,null,e,this.masterHandler.validatorSet))},n.startViewportRule=function(){var t={};this.masterHandler.viewportProps.push(t),this.masterHandler.pushHandler(new Na(this.scope,this.owner,this.condition,t,this.masterHandler.validatorSet))},n.startFootnoteRule=function(t){var e=this.masterHandler.footnoteProps;if(t){var n=lo(e,"_pseudos");(e=n[t])||(n[t]=e={})}this.masterHandler.pushHandler(new Na(this.scope,this.owner,null,e,this.masterHandler.validatorSet))},n.startRegionRule=function(){this.insideRegion=!0,this.startSelectorRule()},n.startPageRule=function(){var t=new uD(this.masterHandler.pageScope,this.masterHandler,this,this.validatorSet,this.masterHandler.pageProps);this.masterHandler.pushHandler(t),t.startPageRule()},n.startRuleBody=function(){if(Fa.prototype.startRuleBody.call(this),this.insideRegion){this.insideRegion=!1;var t="R"+this.masterHandler.regionCount++;this.special("region-id",Me(t)),this.endRule();var n=new e(this.masterHandler,this.condition,this,t);this.masterHandler.pushHandler(n),n.startRuleBody()}},e}(Fa),ND=function(t){function e(e){var n;return(n=t.call(this)||this).validatorSet=void 0,n.rootScope=void 0,n.pageScope=void 0,n.rootBox=void 0,n.cascadeParserHandler=void 0,n.regionCount=0,n.fontFaces=[],n.footnoteProps={},n.flowProps={},n.viewportProps=[],n.pageProps={},n.validatorSet=e,n.rootScope=new Lt(null),n.pageScope=new Lt(n.rootScope),n.rootBox=new qc(n.rootScope),n.cascadeParserHandler=new SD(k(n),null,null,null),n.slave=n.cascadeParserHandler,n}return N(e,t),e}(du);function xD(t,e){return e.parseOPSResource(t)}var TD=function(e){function n(t){var n;return(n=e.call(this,xD,_i.DOCUMENT)||this).fontDeobfuscator=void 0,n.styleByKey={},n.styleFetcherByKey={},n.styleByDocURL={},n.triggersByDocURL={},n.validatorSet=null,n.styleSheets=[],n.triggerSingleDocumentPreprocessing=!1,n.fontDeobfuscator=t,n}N(n,e);var i=n.prototype;return i.init=function(t,e){var n=this;this.setStyleSheets(t,e);var i=Oi("OPSDocStore.init");return this.validatorSet=Vc(),yD.get().then((function(){n.triggerSingleDocumentPreprocessing=!0,i.finish(!0)})),i.result()},i.getStyleForDoc=function(t){return this.styleByDocURL[t.url]},i.getTriggersForDoc=function(t){return this.triggersByDocURL[t.url]},i.setStyleSheets=function(t,e){this.clearStyleSheets(),t&&t.forEach(this.addAuthorStyleSheet,this),e&&e.forEach(this.addUserStyleSheet,this)},i.clearStyleSheets=function(){this.styleSheets.splice(0)},i.addAuthorStyleSheet=function(t){var e=t.url;e&&(e=X($(e),z)),this.styleSheets.push({url:e,text:t.text,flavor:au.AUTHOR,classes:null,media:null})},i.addUserStyleSheet=function(t){var e=t.url;e&&(e=X($(e),z)),this.styleSheets.push({url:e,text:t.text,flavor:au.USER,classes:null,media:null})},i.parseOPSResource=function(e){var n=this,i=Oi("OPSDocStore.load"),u=e.url,r=u.endsWith("?viv-toc-box");return mD(e,this).then((function(e){if(e){if(n.triggerSingleDocumentPreprocessing)for(var o=p(t.HOOKS.PREPROCESS_SINGLE_DOCUMENT),a=0;a<o.length;a++)try{o[a](e.document)}catch(e){h.warn("Error during single document preprocessing:",e)}for(var s=[],l=e.document.getElementsByTagNameNS(G.epub,"trigger"),c=0;c<l.length;c++){var D=l[c],d=D.getAttributeNS(G.EV,"observer"),f=D.getAttributeNS(G.EV,"event"),g=D.getAttribute("action"),E=D.getAttribute("ref");d&&f&&g&&E&&s.push({observer:d,event:f,action:g,ref:E})}n.triggersByDocURL[u]=s;var C=[];if(C.push({url:X("user-agent-page.css",j),text:Qi,flavor:au.USER_AGENT,classes:null,media:null}),r)C.push({url:X("user-agent-toc.css",j),text:tu,flavor:au.USER_AGENT,classes:null,media:null});else{for(var v,F=R(e.document.querySelectorAll("style, link, meta"));!(v=F()).done;){var m=v.value,A=m.localName;if(m.namespaceURI==G.XHTML)if("style"==A){var b=m.getAttribute("class"),y=m.getAttribute("media"),B=m.getAttribute("title");C.push({url:u,text:m.textContent,flavor:au.AUTHOR,classes:B?b:null,media:y})}else if("link"==A){var w,S=m.getAttribute("href"),N=null==(w=m.getAttribute("rel"))?void 0:w.split(/\s+/),x=m.getAttribute("class"),T=m.getAttribute("media");if(S&&null!=N&&N.includes("stylesheet")&&(!N.includes("alternate")||x)){var I=X(S,u),P=m.getAttribute("title");C.push({url:I,text:null,classes:P?x:null,media:T,flavor:au.AUTHOR})}}else"meta"==A&&"viewport"==m.getAttribute("name")&&C.push({url:u,text:n.processViewportMeta(m),flavor:au.AUTHOR,classes:null,media:null})}for(var k=0;k<n.styleSheets.length;k++)C.push(n.styleSheets[k])}for(var O="",L=0;L<C.length;L++)O+=C[L].url,O+="^",C[L].text&&(O+=C[L].text),O+="^";var _=n.styleByKey[O];if(_)return n.styleByDocURL[u]=_,void i.finish(e);var M=n.styleFetcherByKey[O];M||(M=new Xi((function(){var t=Oi("fetchStylesheet"),e=0,i=new ND(n.validatorSet);return t.loop((function(){if(e<C.length){var t=C[e++];return i.startStylesheet(t.flavor),null!==t.text?Ru(t.text,i,t.url,t.classes,t.media).thenReturn(!0):Lu(t.url,i,t.classes,t.media)}return Ri(!1)})).then((function(){var e=i.cascadeParserHandler.finish();_=new BD(n,i.rootScope,i.pageScope,e,i.rootBox,i.fontFaces,i.footnoteProps,i.flowProps,i.viewportProps,i.pageProps),n.styleByKey[O]=_,delete n.styleFetcherByKey[O],t.finish(_)})),t.result()}),"FetchStylesheet "+u),n.styleFetcherByKey[O]=M,M.start()),M.get().then((function(t){n.styleByDocURL[u]=t,i.finish(e)}))}else i.finish(null)})),i.result()},i.processViewportMeta=function(t){return""},n}(uu),ID="▸";function PD(t){var e=Array.from(t.querySelectorAll("nav[*|type],nav[epub\\:type]"));if(e.length>0)return e;if((e=Array.from(t.querySelectorAll("[role=doc-toc]"))).length>0)return e;for(var n,i=function(){var t=n.value;if(e.find((function(e){return e.contains(t)})))return"continue";var i=t;/^h[1-6]$/.test(i.localName)&&(i=i.previousElementSibling?i.nextElementSibling:i.parentElement),i&&i.querySelector("li a[href]")&&e.push(i)},u=R(t.querySelectorAll("nav,.toc,#toc,#table-of-contents,#contents,[role=directory]"));!(n=u()).done;)i();return e}var kD=function(){function t(t,e,n,i,u,r,o,a,s,l){this.store=void 0,this.url=void 0,this.lang=void 0,this.clientLayout=void 0,this.fontMapper=void 0,this.rendererFactory=void 0,this.fallbackMap=void 0,this.documentURLTransformer=void 0,this.counterStore=void 0,this.pref=void 0,this.page=null,this.instance=null,this.store=t,this.url=e,this.lang=n,this.clientLayout=i,this.fontMapper=u,this.rendererFactory=o,this.fallbackMap=a,this.documentURLTransformer=s,this.counterStore=l,this.pref=Nt(r),this.pref.spreadView=!1}var e=t.prototype;return e.setAutoHeight=function(t,e){if(0!=e--)for(var n=t.firstChild;n;n=n.nextSibling)if(1==n.nodeType){var i=n;"auto"!=et(i,"height","auto")&&(tt(i,"height","auto"),this.setAutoHeight(i,e)),"absolute"==et(i,"position","static")&&(tt(i,"position","relative"),this.setAutoHeight(i,e))}},e.makeCustomRenderer=function(t){var e=this.rendererFactory.makeCustomRenderer(t);return function(t,n,i){var u=i.behavior;if(u)switch(u.toString()){case"toc-node-anchor":i.color=Je.inherit,i["text-decoration"]=Je.none;break;case"toc-node":i.display=Je.block,i.margin=un,i.padding=un,i["padding-inline-start"]=new Ue(1.25,"em");break;case"toc-node-first-child":i.display=Je.inline_block,i.margin=new Ue(.2,"em"),i["vertical-align"]=Je.top,i.color=Je.inherit,i["text-decoration"]=Je.none;break;case"toc-container":i.padding=un}if(!u||"toc-node"!=u.toString()&&"toc-container"!=u.toString())return e(t,n,i);var r=t.firstChild;r&&1!==r.nodeType&&Fr(r)&&t.replaceChild(t.ownerDocument.createComment(r.textContent),r);var o=n.getAttribute("data-adapt-class");if("toc-node"==o){var a=n.firstChild;a.textContent!=ID&&(a.textContent=ID,tt(a,"cursor","pointer"),a.addEventListener("click",OD,!1),a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),"0px"!==n.style.height&&(a.tabIndex=0))}var s=n.ownerDocument.createElement("div");if(s.setAttribute("data-adapt-process-children","true"),"toc-node"==u.toString()){var l=n.ownerDocument.createElement("div");if(l.textContent="▹",tt(l,"margin","0.2em 0 0 -1em"),tt(l,"margin-inline-start","-1em"),tt(l,"margin-inline-end","0"),tt(l,"display","inline-block"),tt(l,"width","1em"),tt(l,"text-align","center"),tt(l,"vertical-align","top"),tt(l,"cursor","default"),tt(l,"font-family","Menlo,sans-serif"),s.appendChild(l),tt(s,"overflow","hidden"),s.setAttribute("data-adapt-class","toc-node"),s.setAttribute("role","treeitem"),"toc-node"==o||"toc-container"==o){tt(s,"height","0px");var c=t.firstElementChild;c&&"a"===c.localName&&(c.tabIndex=-1)}else n.setAttribute("role","tree")}else"toc-node"==o&&(s.setAttribute("data-adapt-class","toc-container"),s.setAttribute("role","group"),s.setAttribute("aria-hidden","true"));return Ri(s)}},e.showTOC=function(t,e,n,i,u){var r=this;if(this.page)return Ri(this.page);var o=Oi("showTOC"),a=new gr(t,t);this.page=a;var s=V(this.url)+"?viv-toc-box";return this.store.load(s).then((function(i){for(var s,l=R(PD(i.document));!(s=l()).done;)s.value.setAttribute("data-vivliostyle-role","doc-toc");var c=r.store.getStyleForDoc(i),h=c.sizeViewport(n,1e5,u);e=new CD(e.window,h.fontSize,0,e.root,h.width,h.height);var D=r.makeCustomRenderer(i),d=new wD(c,i,r.lang,e,r.clientLayout,r.fontMapper,D,r.fallbackMap,0,r.documentURLTransformer,r.counterStore);r.instance=d,d.pref=r.pref,d.init().then((function(){d.layoutNextPage(a,null).then((function(){r.setAutoHeight(t,2),o.finish(a)}))}))})),o.result()},e.hideTOC=function(){this.page&&(this.page.container.style.visibility="hidden",this.page.container.setAttribute("aria-hidden","true"))},e.isTOCVisible=function(){return!!this.page&&"visible"===this.page.container.style.visibility},e.getTOC=function(){if(!this.page)return[];function t(t){if(!t)return[];var n=t.querySelectorAll(":scope > [role=treeitem] > a[href]");return Array.from(n).map(e)}function e(e){return{id:new URL(e.href).hash.match(/^#?(.*)$/)[1],title:e.innerText,children:t(e.parentElement.querySelector("[role=group]"))}}return t(this.page.container.querySelector("[role=tree]"))},t}();function OD(t){var e=t.target,n=e.textContent==ID;e.textContent=n?"▾":ID;var i=e.parentNode;e.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-expanded",n?"true":"false");for(var u=i.firstChild;u;){if(1===u.nodeType){var r=u,o=r.getAttribute("data-adapt-class");if("toc-container"===o){if(r.setAttribute("aria-hidden",n?"false":"true"),r.firstChild){u=r.firstChild;continue}}else if("toc-node"===o&&(r.style.height=n?"auto":"0px",r.children.length>=2&&(r.children[1].tabIndex=n?0:-1),r.children.length>=3&&(r.children[0].tabIndex=n?0:-1,!n))){var a=r.children[0];if("▾"==a.textContent){a.textContent=ID,a.setAttribute("aria-expanded","false"),r.setAttribute("aria-expanded","false"),u=r.children[2];continue}}}for(;!u.nextSibling&&u.parentNode!==i;)u=u.parentNode;u=u.nextSibling}t.stopPropagation()}var RD=function(t){function e(){var e;return(e=t.call(this,null)||this).plainXMLStore=void 0,e.jsonStore=void 0,e.opfByURL={},e.primaryOPFByEPubURL={},e.deobfuscators={},e.documents={},e.fontDeobfuscator=e.makeDeobfuscatorFactory(),e.plainXMLStore=new uu(mD,_i.DOCUMENT),e.jsonStore=new uu(ru,_i.TEXT),e}N(e,t);var n=e.prototype;return n.makeDeobfuscatorFactory=function(){var t=this;return function(e){return t.deobfuscators[e]}},n.loadAsPlainXML=function(t,e,n){return this.plainXMLStore.load(t,e,n)},n.startLoadingAsPlainXML=function(t){this.plainXMLStore.fetch(t)},n.loadAsJSON=function(t,e,n){return this.jsonStore.load(t,e,n)},n.loadPubDoc=function(t){var e=this,n=Oi("loadPubDoc");return nu(t,null,"HEAD").then((function(i){if(i.status>=400)e.loadEPUBDoc(t).then((function(e){e?n.finish(e):(h.error("Failed to fetch a source document from "+t+" ("+i.status+(i.statusText?" "+i.statusText:"")+")"),n.finish(null))}));else if(i.status||i.responseXML||i.responseText||i.responseBlob||i.contentType||/\/[^/.]+(?:[#?]|$)/.test(t)&&(t=t.replace(/([#?]|$)/,"/$1")),"application/oebps-package+xml"==i.contentType||/\.opf(?:[#?]|$)/.test(t)){var u=t.match(/^((?:.*\/)?)([^/]*)$/);e.loadOPF(u[1],u[2]).thenFinish(n)}else"application/ld+json"==i.contentType||"application/webpub+json"==i.contentType||"application/audiobook+json"==i.contentType||"application/json"==i.contentType||/\.json(?:ld)?(?:[#?]|$)/.test(t)?e.loadAsJSON(t,!0).then((function(i){if(!i)return e.reportLoadError(t),void n.finish(null);var u=new XD(e,t);u.initWithWebPubManifest(i,void 0,t).then((function(){n.finish(u)}))})):e.loadWebPub(t).then((function(i){i?n.finish(i):e.loadEPUBDoc(t).then((function(e){e?n.finish(e):(h.error("Failed to load "+t+"."),n.finish(null))}))}))})),n.result()},n.loadEPUBDoc=function(t){var e=this,n=Oi("loadEPUBDoc");return t.endsWith("/")||(t+="/"),this.startLoadingAsPlainXML(t+"META-INF/encryption.xml"),this.loadAsPlainXML(t+"META-INF/container.xml").then((function(i){if(i)for(var u,r=R(i.doc().child("container").child("rootfiles").child("rootfile").attribute("full-path"));!(u=r()).done;){var o=u.value;if(o)return void e.loadOPF(t,o).thenFinish(n)}n.finish(null)})),n.result()},n.loadOPF=function(t,e){var n=this,i=t+e,u=this.opfByURL[i];if(u)return Ri(u);var r=Oi("loadOPF");return this.loadAsPlainXML(i,!0,"Failed to fetch EPUB OPF "+i).then((function(e){e?n.loadAsPlainXML(t+"META-INF/encryption.xml").then((function(o){(u=new XD(n,t)).initWithXMLDoc(e,o).then((function(){n.opfByURL[i]=u,n.primaryOPFByEPubURL[t]=u,r.finish(u)}))})):n.reportLoadError(i)})),r.result()},n.loadWebPub=function(t){var e=this,n=Oi("loadWebPub");return this.load(t).then((function(i){if(i)if(i.document.querySelector("a[href='META-INF/'],a[href$='/META-INF/']"))n.finish(null);else{var u=i.document,r=new XD(e,t),o=u.querySelector("link[rel='publication'],link[rel='manifest'][type='application/webpub+json']");if(o){var a=o.getAttribute("href");if(/^#/.test(a)){var s=U(u.getElementById(a.substr(1)).textContent);r.initWithWebPubManifest(s,u).then((function(){n.finish(r)}))}else{var l=X(o.getAttribute("href"),t);e.loadAsJSON(l,!0,"Failed to fetch Publication Manifest "+l).then((function(t){r.initWithWebPubManifest(t,u,l).then((function(){n.finish(r)}))}))}}else r.initWithWebPubManifest({},u).then((function(){r.toc&&r.toc.src===i.url&&0===PD(u).length&&(r.toc=null),n.finish(r)}))}else e.reportLoadError(t)})),n.result()},n.addDocument=function(t,e){var n=Oi("EPUBDocStore.load"),i=V(t);return(this.documents[i]=this.parseOPSResource({status:200,statusText:"",url:i,contentType:e.contentType,responseText:null,responseXML:e,responseBlob:null})).thenFinish(n),n.result()},n.reportLoadError=function(t){var e,n=this,i=function(t){return t.replace(/([^:/?#]|^)[/?#].*/,"$1")};t.startsWith("data:")?h.error("Failed to load "+t+". Invalid data."):t.startsWith("http:")&&z.startsWith("https:")?h.error("Failed to load "+t+'. Mixed Content ("http:" content on "https:" context) is not allowed.'):(e=i(t))===i(z)||Object.keys(n.resources).find((function(t){return n.resources[t]&&i(t)===e}))||/\.(xhtml|xht|xml|opf)$/i.test(t)?h.error("Failed to load "+t+". The target resource is invalid."):h.error("Failed to load "+t+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")},n.load=function(e){var n=this,i=V(e),u=this.documents[i];if(u)return u.isPending()?u:Ri(u.get());var r=Oi("EPUBDocStore.load");return(u=t.prototype.load.call(this,i,!0,"Failed to fetch a source document from "+i)).then((function(t){t?r.finish(t):n.reportLoadError(i)})),r.result()},n.processViewportMeta=function(t){var e=t.getAttribute("content");if(!e)return"";for(var n,i={};null!=(n=e.match(/^,?\s*([-A-Za-z_.][-A-Za-z_0-9.]*)\s*=\s*([-+A-Za-z_0-9.]*)\s*/));)e=e.substr(n[0].length),i[n[1]]=n[2];var u=i.width-0,r=i.height-0;return u&&r?"@-epubx-viewport{width:"+u+"px;height:"+r+"px;}"+(Object.values(this.primaryOPFByEPubURL).find((function(t){return t.prePaginated}))?"@page{size:"+u+"px "+r+"px;margin:0;}":"@page{margin:0;}"):""},e}(TD),LD=function(){function t(){this.id=null,this.src="",this.mediaType=null,this.title=null,this.itemRefElement=null,this.spineIndex=-1,this.compressedSize=0,this.compressed=null,this.epage=0,this.epageCount=0,this.startPage=null,this.skipPagesBefore=null,this.itemProperties=void 0,this.itemProperties=M}var e=t.prototype;return e.initWithElement=function(t,e){this.id=t.getAttribute("id"),this.src=X(t.getAttribute("href"),e),this.mediaType=t.getAttribute("media-type");var n=t.getAttribute("properties");n&&(this.itemProperties=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}(n.split(/\s+/)))},e.initWithParam=function(t){this.spineIndex=t.index,this.id="item"+(t.index+1),this.src=t.url,this.startPage=t.startPage,this.skipPagesBefore=t.skipPagesBefore},t}();function _D(t){return t.id}var MD={dcterms:"http://purl.org/dc/terms/",marc:"http://id.loc.gov/vocabulary/",media:"http://www.idpf.org/epub/vocab/overlays/#",rendition:"http://www.idpf.org/vocab/rendition/#",onix:"http://www.editeur.org/ONIX/book/codelists/current.html#",xsd:"http://www.w3.org/2001/XMLSchema#",opf:"http://www.idpf.org/2007/opf"},UD="http://idpf.org/epub/vocab/package/meta/#",VD={language:MD.dcterms+"language",title:MD.dcterms+"title",creator:MD.dcterms+"creator",layout:MD.rendition+"layout",titleType:UD+"title-type",displaySeq:UD+"display-seq",alternateScript:UD+"alternate-script",role:UD+"role"};function zD(t,e){var n={};return function(i,u){var r,o,a,s,l,c=i.r||n,h=u.r||n;if(t==VD.title&&(a="main"==(null==(s=c[VD.titleType])?void 0:s[0].v))!=("main"==(null==(l=h[VD.titleType])?void 0:l[0].v)))return a?-1:1;var D=parseInt(null==(r=c[VD.displaySeq])?void 0:r[0].v,10);isNaN(D)&&(D=Number.MAX_VALUE);var d,f,p=parseInt(null==(o=h[VD.displaySeq])?void 0:o[0].v,10);return isNaN(p)&&(p=Number.MAX_VALUE),D!=p?D-p:t!=VD.language&&e&&(a=(null==(d=c[VD.language]||c[VD.alternateScript])?void 0:d[0].v)==e)!=((null==(f=h[VD.language]||h[VD.alternateScript])?void 0:f[0].v)==e)?a?-1:1:i.o-u.o}}function HD(){var t=window.MathJax;return t?t.Hub:null}var GD,jD={"application/xhtml+xml":!0,"image/jpeg":!0,"image/png":!0,"image/svg+xml":!0,"image/gif":!0,"audio/mp3":!0},WD="viv-id-",XD=function(){function t(t,e){this.store=void 0,this.pubURL=void 0,this.opfXML=null,this.encXML=null,this.items=null,this.spine=null,this.itemMap=null,this.itemMapByPath=null,this.uid=null,this.bindings={},this.lang=null,this.epageCount=0,this.prePaginated=!1,this.epageIsRenderedPage=!0,this.epageCountCallback=null,this.metadata={},this.toc=null,this.cover=null,this.fallbackMap={},this.pageProgression=null,this.documentURLTransformer=void 0,this.store=t,this.pubURL=e,this.documentURLTransformer=this.createDocumentURLTransformer(),HD()&&(Gr[G.MATHML]=!0)}var e=t.prototype;return e.createDocumentURLTransformer=function(){var t=this,e=function(){function e(){}var n=e.prototype;return n.transformFragment=function(t,e){return WD+lt(e+(t?"#"+t:""),":")},n.transformURL=function(e,n){var i=e.match(/^([^#]*)#?(.*)$/);if(i){var u=i[1]||n,r=decodeURIComponent(i[2]);if(u&&t.spine.some((function(t){return t.src===u})))return"#"+this.transformFragment(r,u)}return e},n.restoreURL=function(t){"#"===t.charAt(0)&&(t=t.substring(1)),0===t.indexOf(WD)&&(t=t.substring(7));var e=function(t,e){e="string"==typeof e?e:"\\u";var n=new RegExp(ct(e)+"[0-9a-fA-F]{4}","g");return t.replace(n,(function(t){return function(t,e){return 0===t.indexOf(e="string"==typeof e?e:"\\u")?String.fromCharCode(parseInt(t.substring(e.length),16)):t}(t,e)}))}(t,":").match(/^([^#]*)#?(.*)$/);return e?[e[1],e[2]]:[]},e}();return new e},e.getMetadata=function(){return this.metadata},e.getPathFromURL=function(t){if(t.startsWith("data:"))return t===this.pubURL?"":t;if(this.pubURL){var e=X("",this.pubURL);return t===e||t+"/"===e?"":("/"!=e.charAt(e.length-1)&&(e+="/"),t.substr(0,e.length)==e?decodeURIComponent(t.substr(e.length)):null)}return t},e.initWithXMLDoc=function(t,e){var n=this;this.opfXML=t,this.encXML=e;var i=t.doc().child("package"),u=i.attribute("unique-identifier")[0];if(u){var r=t.getElement(t.url+"#"+u);r&&(this.uid=r.textContent.replace(/[ \n\r\t]/g,""))}var o={};for(var s in this.items=i.child("manifest").child("item").asArray().map((function(e){var i=new LD,u=e;i.initWithElement(u,t.url);var r=u.getAttribute("fallback");return r&&!jD[i.mediaType]&&(o[i.src]=r),!n.toc&&i.itemProperties.nav&&(n.toc=i),!n.cover&&i.itemProperties["cover-image"]&&(n.cover=i),i})),this.itemMap=dt(this.items,_D),this.itemMapByPath=dt(this.items,(function(t){return n.getPathFromURL(t.src)})),o)for(var l=s;;){var c=this.itemMap[o[l]];if(!c)break;if(jD[c.mediaType]){this.fallbackMap[s]=c.src;break}l=c.src}this.spine=i.child("spine").child("itemref").asArray().map((function(t,e){var i=t,u=i.getAttribute("idref"),r=n.itemMap[u];return r&&(r.itemRefElement=i,r.spineIndex=e),r}));var h=i.child("spine").attribute("page-progression-direction")[0];h&&(this.pageProgression=a(h));for(var D=e?e.doc().child("encryption").child("EncryptedData").predicate(AD.withChild("EncryptionMethod",AD.withAttribute("Algorithm","http://www.idpf.org/2008/embedding"))).child("CipherData").child("CipherReference").attribute("URI"):[],d=i.child("bindings").child("mediaType").asArray(),f=0;f<d.length;f++){var p=d[f].getAttribute("handler"),g=d[f].getAttribute("media-type");g&&p&&this.itemMap[p]&&(this.bindings[g]=this.itemMap[p].src)}if(this.metadata=function(t,e){var n;if(e){for(var i in n={},MD)n[i]=MD[i];for(var u;null!=(u=e.match(/^\s*([A-Z_a-z\u007F-\uFFFF][-.A-Z_a-z0-9\u007F-\uFFFF]*):\s*(\S+)/));)e=e.substr(u[0].length),n[u[1]]=u[2]}else n=MD;var r=function(t){if(t){var e=t.match(/^\s*(([^:]*):)?(\S+)\s*$/);if(e){var i=e[2]?n[e[2]]:UD;if(i)return i+e[3]}}return null},o=1,a=t.childElements().forEachNonNull((function(t){if("meta"==t.localName){var e=r(t.getAttribute("property"));if(e)return{name:e,value:t.textContent,id:t.getAttribute("id"),order:o++,refines:t.getAttribute("refines"),lang:null,scheme:r(t.getAttribute("scheme")),role:null}}else if(t.namespaceURI==G.DC)return{name:MD.dcterms+t.localName,order:o++,lang:t.getAttribute("xml:lang"),value:t.textContent,id:t.getAttribute("id"),refines:null,scheme:null,role:t.getAttribute("role")||t.getAttribute("opf:role")};return null})),s=ft(a,(function(t){return t.refines})),l=function t(e){return function(e,n){var i={};for(var u in e)i[u]=e[u].map((function(e){var n={v:e.value,o:e.order};e.scheme&&(n.s=e.scheme);var i=s["#"+e.id]||[];if(i.length||e.lang||e.role){e.lang&&i.push({name:VD.language,value:e.lang,lang:null,id:null,refines:e.id,scheme:null,order:e.order,role:null}),e.role&&i.push({name:VD.role,value:e.role,lang:null,id:null,refines:e.id,scheme:null,order:e.order,role:null});var u=ft(i,(function(t){return t.name}));n.r=t(u)}return n}));return i}(e)}(ft(a,(function(t){return t.refines?null:t.name}))),c=null;return l[VD.language]&&(c=l[VD.language][0].v),function t(e){for(var n in e){var i=e[n];i.sort(zD(n,c));for(var u=0;u<i.length;u++){var r=i[u].r;r&&t(r)}}}(l),l}(i.child("metadata"),i.attribute("prefix")[0]),this.metadata[VD.language]&&(this.lang=this.metadata[VD.language][0].v),this.metadata[VD.layout]&&(this.prePaginated="pre-paginated"===this.metadata[VD.layout][0].v),D.length>0&&this.uid)for(var E=function(t){return function(e){var n=Oi("deobfuscator");return function(t,e){var n=Oi("makeDigest"),i=n.suspend();return window.crypto.subtle.digest("SHA-1",(new TextEncoder).encode(e)).then((function(t){i.schedule(new Uint8Array(t))})),n.result()}(0,t).then((function(t){var i=e.slice(0,1040),u=e.slice(1040,e.size);(function(t){var e=Oi("readBlob"),n=new FileReader,i=e.suspend(n);return n.addEventListener("load",(function(){i.schedule(n.result)}),!1),n.readAsArrayBuffer(t),e.result()})(i).then((function(e){for(var i=new DataView(e),r=0;r<i.byteLength;r++){var o=i.getUint8(r);i.setUint8(r,o^=t[r%20])}n.finish(iu([i,u]))}))})),n.result()}}(this.uid),C=0;C<D.length;C++)this.store.deobfuscators[this.pubURL+D[C]]=E;return this.prePaginated&&this.assignAutoPages(),Ri(!0)},e.assignAutoPages=function(){for(var t,e=0,n=R(this.spine);!(t=n()).done;){var i=t.value,u=this.prePaginated?1:Math.ceil(i.compressedSize/1024);i.epage=e,i.epageCount=u,e+=u}this.epageCount=e,this.epageCountCallback&&this.epageCountCallback(this.epageCount)},e.setEPageCountMode=function(t){this.epageIsRenderedPage=t||this.prePaginated},e.countEPages=function(t){var e=this;if(this.epageCountCallback=t,this.epageIsRenderedPage)return this.prePaginated&&0==this.epageCount&&this.assignAutoPages(),Ri(!0);var n=0,i=0,u=Oi("countEPages");return u.loopWithFrame((function(t){if(i!==e.spine.length){var u=e.spine[i++];u.epage=n,e.store.load(u.src).then((function(i){var r=1800,o=i.lang||e.lang;o&&o.match(/^(ja|ko|zh)/)&&(r/=3),u.epageCount=Math.ceil(i.getTotalOffset()/r),e.epageCount=n+=u.epageCount,e.epageCountCallback&&e.epageCountCallback(e.epageCount),t.continueLoop()}))}else t.breakLoop()})).thenFinish(u),u.result()},e.initWithChapters=function(t,e){var n=this;this.itemMap={},this.itemMapByPath={},this.items=[],this.spine=this.items;var i=this.opfXML=new vD(null,"",(new DOMParser).parseFromString("<spine></spine>","text/xml"));return t.forEach((function(t){var e=new LD;e.initWithParam(t);var u=i.document.createElement("itemref");u.setAttribute("idref",e.id),i.root.appendChild(u),e.itemRefElement=u,n.itemMap[e.id]=e;var r=n.getPathFromURL(t.url);null==r&&(r=t.url),n.itemMapByPath[r]=e,n.items.push(e)})),e?this.store.addDocument(t[0].url,e):Ri(null)},e.initWithWebPubManifest=function(t,e,n){var i,u,r,o,a=this;t.readingProgression&&(this.pageProgression=t.readingProgression),void 0===this.metadata&&(this.metadata={});var s=t.name||(null==(i=t.metadata)?void 0:i.title)||(null==e?void 0:e.title);s&&(this.metadata[VD.title]=(Array.isArray(s)?s:[s]).map((function(t){var e;return{v:null!=(e=t.value)?e:t}})));var l=t.author||t.creator||(null==(u=t.metadata)?void 0:u.author)||Array.from(null!=(r=null==e?void 0:e.querySelectorAll("meta[name='author'], meta[name='DC.Creator']"))?r:[]).map((function(t){return t.content}));l&&0!==l.length&&(this.metadata[VD.creator]=(Array.isArray(l)?l:[l]).map((function(t){var e;return{v:null!=(e=t.name)?e:t}})));var c=t.inLanguage||(null==(o=t.metadata)?void 0:o.language)||(null==e?void 0:e.documentElement.lang)||(null==e?void 0:e.documentElement.getAttribute("xml:lang"));c&&(this.metadata[VD.language]=(Array.isArray(c)?c:[c]).map((function(t){return{v:t}})));var h=this.getPathFromURL(this.pubURL);if(!t.readingOrder&&e&&null!==h){t.readingOrder=[encodeURI(h)];for(var D,d=R(function(t){for(var e,n=[],i=R(PD(t));!(e=i()).done;)for(var u,r=R(e.value.querySelectorAll("li a[href]"));!(u=r()).done;)n.push(u.value);return n}(e));!(D=d()).done;){var f=D.value.getAttribute("href");if(!/^(https?:)?\/\//.test(f)&&!/\.(jpe?g|png|gif|pdf|svg|mml)([#?]|$)/.test(f)){var p=V(X(f,this.pubURL)),g=this.getPathFromURL(p),E=null!==g?encodeURI(g):p;-1==t.readingOrder.indexOf(E)&&t.readingOrder.push(E)}}}var C=[],v=0,F=-1;[t.readingOrder,t.resources].forEach((function(e){e instanceof Array&&e.forEach((function(i){var u="string"==typeof i?i:i.url||i.href,r="string"==typeof i?"":i.encodingFormat||i.href&&i.type||"";if(e===t.readingOrder||"text/html"===r||"application/xhtml+xml"===r||!r&&"stylesheet"!==i.rel&&/(^|\/)([^/]+\.(x?html|htm|xht)|[^/.]*)([#?]|$)/.test(u)){var o=n?n.replace(/\/[^/]+$/,"/"):a.pubURL,s={url:X($(u),o),index:v++,startPage:null,skipPagesBefore:null};"contents"===i.rel&&-1===F&&(F=s.index),C.push(s)}}))}));var m=Oi("initWithWebPubManifest");return this.initWithChapters(C).then((function(){var e,i;-1!==F&&(a.toc=a.items[F]),a.toc||(a.toc=n?null==(i=a.items)?void 0:i[0]:a.itemMapByPath[h]);var u=null==(e=t.readingOrder)?void 0:e.length;u&&u<a.items.length&&a.items.splice(u),m.finish(!0)})),m.result()},e.getCFI=function(t,e){var n=this.spine[t],i=Oi("getCFI");return this.store.load(n.src).then((function(t){var u=t.getNodeByOffset(e),r=null;if(u){var o=t.getNodeOffset(u,0,!1),a=e-o,s=new St;s.prependPathFromNode(u,a,!1,null),n.itemRefElement&&s.prependPathFromNode(n.itemRefElement,0,!1,null),r=s.toString()}i.finish(r)})),i.result()},e.resolveFragment=function(t){var e=this;return Li("resolveFragment",(function(n){if(t){var i,u=new St;if(u.fromString(t),e.opfXML){var r=u.navigate(e.opfXML.document);if(1!=r.node.nodeType||r.after||!r.ref)return void n.finish(null);var o=r.node,a=o.getAttribute("idref");if("itemref"!=o.localName||!a||!e.itemMap[a])return void n.finish(null);i=e.itemMap[a],u=r.ref}else i=e.spine[0];e.store.load(i.src).then((function(t){var e=u.navigate(t.document),r=t.getNodeOffset(e.node,e.offset,e.after);n.finish({spineIndex:i.spineIndex,offsetInItem:r,pageIndex:-1})}))}else n.finish(null)}),(function(e,n){h.warn(n,"Cannot resolve fragment:",t),e.finish(null)}))},e.resolveEPage=function(t){var e=this;return Li("resolveEPage",(function(n){if(t<=0)n.finish({spineIndex:0,offsetInItem:0,pageIndex:-1});else if(e.epageIsRenderedPage){var i=e.spine.findIndex((function(e){return 0==e.epage&&0==e.epageCount||e.epage<=t&&e.epage+e.epageCount>t}));-1==i&&(i=e.spine.length-1);var u=e.spine[i];u&&0!=u.epageCount||(u=e.spine[--i]);var r=Math.floor(t-u.epage);n.finish({spineIndex:i,offsetInItem:-1,pageIndex:r})}else{var o=ht(e.spine.length,(function(n){var i=e.spine[n];return i.epage+i.epageCount>t}));o==e.spine.length&&o--;var a=e.spine[o];e.store.load(a.src).then((function(e){(t-=a.epage)>a.epageCount&&(t=a.epageCount);var i=0;if(t>0){var u=e.getTotalOffset();(i=Math.round(u*t/a.epageCount))==u&&i--}n.finish({spineIndex:o,offsetInItem:i,pageIndex:-1})}))}}),(function(e,n){h.warn(n,"Cannot resolve epage:",t),e.finish(null)}))},e.getEPageFromPosition=function(t){var e=this.spine[t.spineIndex];if(this.epageIsRenderedPage)return Ri(e.epage+t.pageIndex);if(t.offsetInItem<=0)return Ri(e.epage);var n=Oi("getEPage");return this.store.load(e.src).then((function(i){var u=i.getTotalOffset(),r=Math.min(u,t.offsetInItem);n.finish(e.epage+r*e.epageCount/u)})),n.result()},t}(),$D=function(t,e){return{page:t,position:{spineIndex:t.spineIndex,pageIndex:e,offsetInItem:t.offset}}},KD=function(){function e(t,e,n,i,u){this.opf=void 0,this.viewport=void 0,this.fontMapper=void 0,this.pageSheetSizeReporter=void 0,this.spineItems=[],this.spineItemLoadingContinuations=[],this.pref=void 0,this.clientLayout=void 0,this.counterStore=void 0,this.tocAutohide=!1,this.tocVisible=!1,this.tocView=void 0,this.opf=t,this.viewport=e,this.fontMapper=n,this.pageSheetSizeReporter=u,this.pref=Nt(i),this.clientLayout=new ED(e),this.counterStore=new jn(t.documentURLTransformer)}var n=e.prototype;return n.getPage=function(t){var e=this.spineItems[t.spineIndex];return e?e.pages[t.pageIndex]:null},n.getCurrentPageProgression=function(t){if(this.opf.pageProgression)return this.opf.pageProgression;var e=this.spineItems[t?t.spineIndex:0];return e?e.instance.pageProgression:null},n.finishPageContainer=function(t,e,n){e.container.style.display="none",e.container.style.visibility="visible",e.container.style.position="",e.container.style.top="",e.container.style.left="",e.container.setAttribute("data-vivliostyle-page-side",e.side);var i=t.pages[n];if(e.isFirstPage=0==t.item.spineIndex&&0==n,t.pages[n]=e,this.opf.epageIsRenderedPage){if(0==n&&t.item.spineIndex>0){var u=this.opf.spine[t.item.spineIndex-1];t.item.epage=u.epage+u.epageCount}t.item.epageCount=t.pages.length,this.opf.epageCount=this.opf.spine.reduce((function(t,e){return t+e.epageCount}),0),this.opf.epageCountCallback&&this.opf.epageCountCallback(this.opf.epageCount)}if(i)t.instance.viewport.contentContainer.replaceChild(e.container,i.container),i.dispatchEvent({type:"replaced",target:null,currentTarget:null,preventDefault:null,newPage:e});else{var r=null;if(n>0)r=t.pages[n-1].container.nextElementSibling;else for(var o=t.item.spineIndex+1;o<this.spineItems.length;o++){var a=this.spineItems[o];if(a&&a.pages[0]){r=a.pages[0].container;break}}t.instance.viewport.contentContainer.insertBefore(e.container,r)}this.pageSheetSizeReporter({width:t.instance.pageSheetWidth,height:t.instance.pageSheetHeight},t.instance.pageSheetSize,t.item.spineIndex,t.instance.pageNumberOffset+n)},n.renderSinglePage=function(t,e){var n=this,i=Oi("renderSinglePage"),u=t.pages[e?e.page:0],r=this.makePage(t,e);return u&&(r.pageType=u.pageType),t.instance.layoutNextPage(r,e).then((function(u){var o=(e=u)?e.page-1:t.layoutPositions.length-1;n.finishPageContainer(t,r,o),n.counterStore.finishPage(r.spineIndex,o);var a=null;if(e){var s=t.layoutPositions[e.page];t.layoutPositions[e.page]=e,s&&t.pages[e.page]&&(e.isSamePosition(s)||(a=n.renderSinglePage(t,e)))}a||(a=Ri(!0)),a.then((function(){var u=n.counterStore.getUnresolvedRefsToPage(r),a=0;i.loopWithFrame((function(t){if(++a>u.length)t.breakLoop();else{var e=u[a-1];e.refs=e.refs.filter((function(t){return!t.isResolved()})),0!==e.refs.length?n.getPageViewItem(e.spineIndex).then((function(i){if(i){var u=i.instance.styler.cascade,a=u.currentPageType,s=u.previousPageType,l=Object.entries(i.instance.scopes);n.counterStore.pushPageCounters(e.pageCounters),n.counterStore.pushReferencesToSolve(e.refs),n.renderSinglePage(i,i.layoutPositions[e.pageIndex]).then((function(e){i.instance.styler.cascade.currentPageType=a,i.instance.styler.cascade.previousPageType=s,i.instance.scopes=Object.fromEntries(l),n.counterStore.popPageCounters(),n.counterStore.popReferencesToSolve();var u=e.pageAndPosition.position;u.spineIndex===r.spineIndex&&u.pageIndex===o&&(r=e.pageAndPosition.page),t.continueLoop()}))}else t.continueLoop()})):t.continueLoop()}})).then((function(){r.container.parentElement||(r=t.pages[o]),r.isLastPage=!e&&t.item.spineIndex===n.opf.spine.length-1,r.isLastPage&&n.counterStore.finishLastPage(n.viewport),r.container.setAttribute("data-vivliostyle-page-index",o),r.container.setAttribute("data-vivliostyle-spine-index",r.spineIndex),i.finish({pageAndPosition:$D(r,o),nextLayoutPosition:e})}))}))})),i.result()},n.normalizeSeekPosition=function(t,e){var n=t.pageIndex,i=-1;if(n<0){i=t.offsetInItem;var u=ht(e.layoutPositions.length,(function(t){return e.instance.getPosition(e.layoutPositions[t],!0)>i}));n=u===e.layoutPositions.length?e.complete?e.layoutPositions.length-1:Number.POSITIVE_INFINITY:u-1}else n===Number.POSITIVE_INFINITY&&-1!==t.offsetInItem&&(i=t.offsetInItem);return{spineIndex:t.spineIndex,pageIndex:n,offsetInItem:i}},n.findPage=function(t,e){var n=this,i=Oi("findPage");return this.getPageViewItem(t.spineIndex).then((function(u){if(u){var r,o=null;i.loopWithFrame((function(a){var s=n.normalizeSeekPosition(t,u);(o=u.pages[r=s.pageIndex])?a.breakLoop():u.complete?(o=u.pages[r=u.layoutPositions.length-1],a.breakLoop()):e?n.renderPage(s).then((function(t){t&&(o=t.page,r=t.position.pageIndex),a.breakLoop()})):i.sleep(100).then((function(){a.continueLoop()}))})).then((function(){i.finish($D(o,r))}))}else i.finish(null)})),i.result()},n.renderPage=function(t){var e=this,n=Oi("renderPage");return this.getPageViewItem(t.spineIndex).then((function(i){if(i){var u=e.normalizeSeekPosition(t,i),r=u.pageIndex,o=u.offsetInItem,a=i.pages[r];a?n.finish($D(a,r)):n.loopWithFrame((function(t){if(r<i.layoutPositions.length)t.breakLoop();else{if(i.complete)return r=i.layoutPositions.length-1,void t.breakLoop();var n=i.layoutPositions[i.layoutPositions.length-1];e.renderSinglePage(i,n).then((function(e){var u=e.pageAndPosition.page;if(n=e.nextLayoutPosition){if(o>=0&&i.instance.getPosition(n)>o)return a=u,r=i.layoutPositions.length-2,void t.breakLoop();t.continueLoop()}else a=u,r=e.pageAndPosition.position.pageIndex,i.complete=!0,t.breakLoop()}))}})).then((function(){var t=i.layoutPositions[r];(a=a||i.pages[r])?n.finish($D(a,r)):e.renderSinglePage(i,t).then((function(t){t.nextLayoutPosition||(i.complete=!0),n.finish(t.pageAndPosition)}))}))}else n.finish(null)})),n.result()},n.renderAllPages=function(){var t=this,e=Oi("renderAllPages");return this.renderPagesUpto({spineIndex:this.opf.spine.length-1,pageIndex:Number.POSITIVE_INFINITY,offsetInItem:-1},!1).then((function(n){e.loopWithFrame((function(n){t.spineItems.some((function(t){return null==t?void 0:t.pages.some((function(t){return null==t?void 0:t.fetchers.some((function(t){return!t.arrived}))}))}))?e.sleep(100).then((function(){n.continueLoop()})):n.breakLoop()})).then((function(){e.finish(n)}))})),e.result()},n.renderPagesUpto=function(t,e){var n=this,i=Oi("renderPagesUpto");t||(t={spineIndex:0,pageIndex:0,offsetInItem:0});var u,r=t.spineIndex,o=t.pageIndex,a=0;return e&&(a=r),i.loopWithFrame((function(e){n.renderPage({spineIndex:a,pageIndex:a===r?o:Number.POSITIVE_INFINITY,offsetInItem:a===r?t.offsetInItem:-1}).then((function(t){u=t,++a>r?e.breakLoop():e.continueLoop()}))})).then((function(){i.finish(u)})),i.result()},n.firstPage=function(t,e){return this.findPage({spineIndex:0,pageIndex:0,offsetInItem:-1},e)},n.lastPage=function(t,e){return this.findPage({spineIndex:this.opf.spine.length-1,pageIndex:Number.POSITIVE_INFINITY,offsetInItem:-1},e)},n.nextPage=function(t,e){var n=this,i=t.spineIndex,u=t.pageIndex,r=Oi("nextPage");return this.getPageViewItem(i).then((function(t){if(t){if(t.complete&&u==t.layoutPositions.length-1){if(i>=n.opf.spine.length-1)return void r.finish(null);i++,u=0;var o=n.spineItems[i],a=o&&o.pages[0],s=t.pages[t.pages.length-1];a&&s&&a.side==s.side&&(o.pages.forEach((function(t){t.container&&t.container.remove()})),n.spineItems[i]=null,n.spineItemLoadingContinuations[i]=null)}else u++;n.findPage({spineIndex:i,pageIndex:u,offsetInItem:-1},e).thenFinish(r)}else r.finish(null)})),r.result()},n.previousPage=function(t,e){var n=t.spineIndex,i=t.pageIndex;if(0==i){if(0==n)return Ri(null);n--,i=Number.POSITIVE_INFINITY}else i--;return this.findPage({spineIndex:n,pageIndex:i,offsetInItem:-1},e)},n.isRectoPage=function(e,n){var i=e.side===t.PageSide.LEFT,u=this.getCurrentPageProgression(n)===t.PageProgression.LTR;return!i&&u||i&&!u},n.getSpread=function(e,n){var i=this,u=this.getPage(e);if(!u)return Ri({left:null,right:null});var r=Oi("getSpread"),o=u.side===t.PageSide.LEFT;return(this.isRectoPage(u,e)?this.previousPage(e,n):this.nextPage(e,n)).then((function(t){var n=i.getPage(e),u=t&&t.page;u&&u.side===n.side&&(u=null),r.finish(o?{left:n,right:u}:{left:u,right:n})})),r.result()},n.nextSpread=function(t,e){var n=this,i=this.getPage(t);if(!i)return Ri(null);var u=this.isRectoPage(i,t),r=this.nextPage(t,e);return u?r:r.thenAsync((function(t){if(t){if(t.page.side===i.side)return r;var u=n.nextPage(t.position,e);return u.thenAsync((function(t){return t?u:r}))}return Ri(null)}))},n.previousSpread=function(t,e){var n=this,i=this.getPage(t);if(!i)return Ri(null);var u=this.isRectoPage(i,t),r=this.previousPage(t,e),o=i.container.previousElementSibling;return u?r.thenAsync((function(t){return t?t.page.side===i.side||t.page.container!==o?r:n.previousPage(t.position,e):Ri(null)})):r},n.navigateToEPage=function(t,e,n){var i=this,u=Oi("navigateToEPage");return this.opf.resolveEPage(t).then((function(t){t?i.findPage(t,n).thenFinish(u):u.finish(null)})),u.result()},n.navigateToFragment=function(t,e,n){var i=this,u=Oi("navigateToCFI");return this.opf.resolveFragment(t).then((function(t){t?i.findPage(t,n).thenFinish(u):u.finish(null)})),u.result()},n.navigateTo=function(t,e,n){var i=this;h.debug("Navigate to",t);var u=this.opf.getPathFromURL(V(t));if(!u){if(this.opf.opfXML&&t.match(/^#epubcfi\(/))u=this.opf.getPathFromURL(this.opf.opfXML.url);else if("#"===t.charAt(0)){var r=this.opf.documentURLTransformer.restoreURL(t);this.opf.opfXML?null==(u=this.opf.getPathFromURL(r[0]))&&(u=r[0]):u=r[0],t=r[0]+(r[1]?"#"+r[1]:"")}if(null==u)return Ri(null)}var o=this.opf.itemMapByPath[u];if(!o){if(this.opf.opfXML&&u==this.opf.getPathFromURL(this.opf.opfXML.url)){var a=t.indexOf("#");if(a>=0)return this.navigateToFragment(t.substr(a+1),e,n)}return Ri(null)}var s=Oi("navigateTo");return this.getPageViewItem(o.spineIndex).then((function(e){if(e){var u=e.xmldoc.getElement(t);i.findPage({spineIndex:o.spineIndex,pageIndex:-1,offsetInItem:u?e.xmldoc.getElementOffset(u):0},n).thenFinish(s)}else s.finish(null)})),s.result()},n.makePage=function(e,n){var i=e.instance.viewport,u=i.document.createElement("div");u.setAttribute("data-vivliostyle-page-container","true"),u.setAttribute("role","region"),u.style.position="absolute",u.style.top="0",u.style.left="0",t.isDebug||(u.style.visibility="hidden"),i.layoutBox.appendChild(u);var r=i.document.createElement("div");r.setAttribute("data-vivliostyle-bleed-box","true"),u.appendChild(r);var o=new gr(u,r);if(o.spineIndex=e.item.spineIndex,o.position=n,o.offset=e.instance.getPosition(n),0===o.offset&&(!e.instance.blankPageAtStart||0!==e.pages.length)){var a=this.opf.documentURLTransformer.transformFragment("",e.item.src);r.setAttribute("id",a),o.registerElementWithId(r,a)}if(i!==this.viewport){var s=It(this.viewport.width,this.viewport.height,i.width,i.height),l=_u(null,new Ti(s,null),"");o.delayedItems.push(new dr(u,"transform",l))}return o},n.makeObjectView=function(t,e,n,i){var u=e.getAttribute("data"),r=null;if(u){u=X(u,t.url);var o=e.getAttribute("media-type");if(!o){var a=this.opf.getPathFromURL(u);if(a){var s=this.opf.itemMapByPath[a];s&&(o=s.mediaType)}}if(o){var l=this.opf.bindings[o];if(l){(r=this.viewport.document.createElement("iframe")).style.border="none";var c=at(u),h=at(o),D=new it;D.append(l),D.append("?src="),D.append(c),D.append("&type="),D.append(h);for(var d=e.firstChild;d;d=d.nextSibling)if(1==d.nodeType){var f=d;if("param"==f.localName&&f.namespaceURI==G.XHTML){var p=f.getAttribute("name"),g=f.getAttribute("value");p&&g&&(D.append("&"),D.append(encodeURIComponent(p)),D.append("="),D.append(encodeURIComponent(g)))}}r.setAttribute("src",D.toString());var E=e.getAttribute("width");E&&r.setAttribute("width",E);var C=e.getAttribute("height");C&&r.setAttribute("height",C)}}}return r||(r=this.viewport.document.createElement("object"),u&&r.setAttribute("data",u),r.setAttribute("data-adapt-process-children","true")),Ri(r)},n.makeMathJaxView=function(t,e,n,i){var u=HD();if(u){var r=n.ownerDocument,o=r.createElement("span");n.appendChild(o);var a=r.importNode(e,!0);this.resolveURLsInMathML(a,t),o.appendChild(a);var s=u.queue;s.Push(["Typeset",u,o]);var l=Oi("makeMathJaxView"),c=l.suspend();return s.Push((function(){c.schedule(o)})),l.result()}return Ri(null)},n.resolveURLsInMathML=function(t,e){if(null!=t){if(1===t.nodeType&&"mglyph"===t.tagName)for(var n=0,i=Array.from(t.attributes);n<i.length;n++){var u=i[n];if("src"===u.name){var r=X(u.nodeValue,e.url);u.namespaceURI?t.setAttributeNS(u.namespaceURI,u.name,r):t.setAttribute(u.name,r)}}t.firstChild&&this.resolveURLsInMathML(t.firstChild,e),t.nextSibling&&this.resolveURLsInMathML(t.nextSibling,e)}},n.makeCustomRenderer=function(t){var e=this;return function(n,i,u){return"object"==n.localName&&n.namespaceURI==G.XHTML?e.makeObjectView(t,n,i,u):n.namespaceURI==G.MATHML||n.dataset&&"true"==n.dataset.mathTypeset?e.makeMathJaxView(t,n,i,u):Ri(null)}},n.getPageViewItem=function(t){var e=this;if(-1===t||t>=this.opf.spine.length)return Ri(null);var n=this.spineItems[t];if(n)return Ri(n);var i=Oi("getPageViewItem"),u=this.spineItemLoadingContinuations[t];if(u){var r=i.suspend();return u.push(r),i.result()}u=this.spineItemLoadingContinuations[t]=[];var o=this.opf.spine[t],a=this.opf.store;return a.load(o.src).then((function(r){var s,l=o.itemRefElement.getAttribute("properties");l&&r.root.setAttribute("data-vivliostyle-epub-spine-properties",l),o.title=r.document.title;var c=a.getStyleForDoc(r),h=e.makeCustomRenderer(r),D=e.viewport,d=c.sizeViewport(D.width,D.height,D.fontSize,e.pref);d.width==D.width&&d.height==D.height&&d.fontSize==D.fontSize||(D=new CD(D.window,d.fontSize,D.pixelRatio,D.root,d.width,d.height));var f,p,g=null==(s=e.spineItems[0])?void 0:s.instance.isVersoFirstPage,E=e.spineItems[t-1];if(null!==o.startPage)p=f=o.startPage-1;else{if(!(t>0)||E&&E.complete){f=E?E.instance.pageNumberOffset+E.pages.length:0;var C=e.counterStore.currentPageCounters.page;p=C&&C.length?C[C.length-1]:f}else f=o.epage||t,e.opf.prePaginated||f%2!=(g?1:0)||f++,p=f;null!==o.skipPagesBefore&&(f+=o.skipPagesBefore,p+=o.skipPagesBefore)}e.counterStore.forceSetPageCounter(p);var v=new wD(c,r,e.opf.lang,D,e.clientLayout,e.fontMapper,h,e.opf.fallbackMap,f,e.opf.documentURLTransformer,e.counterStore,e.opf.pageProgression,g);v.pref=e.pref;var F=e.opf.metadata&&e.opf.metadata[VD.title];v.pubTitle=F&&F[0]&&F[0].v||"",v.docTitle=o.title||"",v.init().then((function(){!e.opf.pageProgression&&v.pageProgression&&(e.opf.pageProgression=v.pageProgression),e.spineItems[t]=n={item:o,xmldoc:r,instance:v,layoutPositions:[null],pages:[],complete:!1},i.finish(n),u.forEach((function(t){t.schedule(n)}))}))})),i.result()},n.removeRenderedPages=function(){for(var t,e=R(this.spineItems);!(t=e()).done;){var n=t.value;n&&n.pages.splice(0)}this.viewport.clear()},n.hasAutoSizedPages=function(){for(var t,e=R(this.spineItems);!(t=e()).done;){var n=t.value;if(n)for(var i,u=R(n.pages);!(i=u()).done;){var r=i.value;if(r.isAutoPageWidth&&r.isAutoPageHeight)return!0}}return!1},n.hasPages=function(){return this.spineItems.some((function(t){return t&&t.pages.length>0}))},n.showTOC=function(e){var n=this.opf,i=n.toc;if(this.tocAutohide=e,!i)return Ri(null);if(this.tocVisible=!0,this.tocView&&this.tocView.page)return this.tocView.page.container.style.visibility="visible",this.tocView.page.container.setAttribute("aria-hidden","false"),Ri(this.tocView.page);var u=Oi("showTOC");this.tocView||(this.tocView=new kD(n.store,i.src,n.lang,this.clientLayout,this.fontMapper,this.pref,this,n.fallbackMap,n.documentURLTransformer,this.counterStore));var r=this.viewport,o=Math.min(344,Math.round(.67*r.width)-16),a=r.height-6,s=r.document.createElement("div");return r.root.appendChild(s),t.isDebug||(s.style.visibility="hidden"),s.style.width=o+16+"px",s.style.maxHeight=a+"px",s.setAttribute("data-vivliostyle-toc-box","true"),s.setAttribute("role","navigation"),this.tocView.showTOC(s,r,o,a,this.viewport.fontSize).then((function(t){s.style.visibility="visible",s.setAttribute("aria-hidden","false"),u.finish(t)})),u.result()},n.hideTOC=function(){this.tocVisible=!1,this.tocView&&this.tocView.hideTOC()},n.isTOCVisible=function(){return this.tocVisible&&!!this.tocView&&this.tocView.isTOCVisible()},e}(),qD="data-vivliostyle-viewer-status";!function(t){t.SINGLE_PAGE="singlePage",t.SPREAD="spread",t.AUTO_SPREAD="autoSpread"}(GD||(GD={}));var YD,ZD=function(){function e(e,n,i,u){var r=this;this.window=void 0,this.viewportElement=void 0,this.instanceId=void 0,this.callbackFn=void 0,this.fontMapper=void 0,this.kick=void 0,this.sendCommand=void 0,this.resizeListener=void 0,this.hyperlinkListener=void 0,this.pageRuleStyleElement=void 0,this.pageSheetSizeAlreadySet=!1,this.renderTask=null,this.actions=void 0,this.readyState=void 0,this.packageURL=void 0,this.opf=void 0,this.touchActive=void 0,this.touchX=void 0,this.touchY=void 0,this.needResize=void 0,this.resized=void 0,this.needRefresh=void 0,this.viewportSize=void 0,this.currentPage=void 0,this.currentSpread=void 0,this.pagePosition=void 0,this.fontSize=void 0,this.zoom=void 0,this.fitToScreen=void 0,this.pageViewMode=void 0,this.waitForLoading=void 0,this.renderAllPages=void 0,this.pref=void 0,this.pageSizes=void 0,this.pixelRatio=void 0,this.pixelRatioLimit=void 0,this.viewport=void 0,this.opfView=void 0,this.window=e,this.viewportElement=n,this.instanceId=i,this.callbackFn=u;var o=n.ownerDocument,a=function(t,e){var n=o.getElementById(t);return n||((n=o.createElement("style")).id=t,e&&(n.textContent=e),o.head.appendChild(n)),n};a("vivliostyle-viewport-screen-css",Ki),a("vivliostyle-viewport-css",qi),a("vivliostyle-polyfill-css",eu),n.setAttribute("data-vivliostyle-viewer-viewport",!0),t.isDebug&&n.setAttribute("data-vivliostyle-debug",!0),n.setAttribute(qD,"loading"),this.fontMapper=new Xc(o.head,n),this.init(),this.kick=function(){},this.sendCommand=function(){},this.resizeListener=function(){r.needResize=!0,r.resized=!0,r.kick()},this.pageReplacedListener=this.pageReplacedListener.bind(this),this.hyperlinkListener=function(t){},this.pageRuleStyleElement=a("vivliostyle-page-rules"),this.actions={loadPublication:this.loadPublication,loadXML:this.loadXML,configure:this.configure,moveTo:this.moveTo,toc:this.showTOC},this.addLogListeners()}var n=e.prototype;return n.init=function(){this.readyState=t.ReadyState.LOADING,this.packageURL=[],this.opf=null,this.touchActive=!1,this.touchX=0,this.touchY=0,this.needResize=!1,this.resized=!1,this.needRefresh=!1,this.viewportSize=null,this.currentPage=null,this.currentSpread=null,this.pagePosition=null,this.fontSize=16,this.zoom=1,this.fitToScreen=!1,this.pageViewMode=GD.SINGLE_PAGE,this.waitForLoading=!1,this.renderAllPages=!0,this.pref={fontFamily:"serif",lineHeight:1.25,margin:8,hyphenate:!1,columnWidth:25,horizontal:!1,nightMode:!1,spreadView:!1,pageBorder:1,enabledMediaTypes:{vivliostyle:!0,print:!0},defaultPaperSize:void 0},this.pageSizes=[],this.pixelRatioLimit=/Chrome/.test(navigator.userAgent)?16:0,this.pixelRatio=Math.min(8,this.pixelRatioLimit)},n.addLogListeners=function(){var t=this,e=u;h.addListener(e.DEBUG,(function(e){t.callback({t:"debug",content:e})})),h.addListener(e.INFO,(function(e){t.callback({t:"info",content:e})})),h.addListener(e.WARN,(function(e){t.callback({t:"warn",content:e})})),h.addListener(e.ERROR,(function(e){t.callback({t:"error",content:e})}))},n.callback=function(t){t.i=this.instanceId,this.callbackFn(t)},n.setReadyState=function(t){this.readyState!==t&&(this.readyState=t,this.viewportElement.setAttribute(qD,t),this.callback({t:"readystatechange"}))},n.loadPublication=function(e){var n=this;b.registerStartTiming("beforeRender"),this.setReadyState(t.ReadyState.LOADING);var i=e.url,u=e.fragment,r=e.authorStyleSheet,o=e.userStyleSheet;this.viewport=null;var a=Oi("loadPublication");return this.configure(e).then((function(){var t=new RD;t.init(r,o).then((function(){var e=X($(i),n.window.location.href);n.packageURL=[e],t.loadPubDoc(e).then((function(t){t?(n.opf=t,n.render(u).then((function(){a.finish(!0)}))):a.finish(!1)}))}))})),a.result()},n.loadXML=function(e){var n=this;b.registerStartTiming("beforeRender"),this.setReadyState(t.ReadyState.LOADING);var i=e.url,u=e.document,r=e.fragment,o=e.authorStyleSheet,a=e.userStyleSheet;this.viewport=null;var s=Oi("loadXML");return this.configure(e).then((function(){var t=new RD;t.init(o,a).then((function(){var e=i.map((function(t,e){return{url:X($(t.url),n.window.location.href),index:e,startPage:t.startPage,skipPagesBefore:t.skipPagesBefore}}));n.packageURL=e.map((function(t){return t.url})),n.opf=new XD(t,""),n.opf.initWithChapters(e,u).then((function(){n.render(r).then((function(){s.finish(!0)}))}))}))})),s.result()},n.render=function(t){var e=this;return this.cancelRenderingTask(),(t?this.opf.resolveFragment(t).thenAsync((function(t){return e.pagePosition=t,Ri(!0)})):Ri(!0)).thenAsync((function(){return b.registerEndTiming("beforeRender"),e.resize()}))},n.resolveLength=function(t){var e,n=parseFloat(t);if("string"==typeof t&&(e=t.match(/[a-z]+$/))){var i=e[0];if("em"===i||"rem"===i)return n*this.fontSize;if("ex"===i)return n*Mt.ex*this.fontSize/Mt.em;var u=Mt[i];if(u)return n*u}return n},n.configure=function(t){if("boolean"==typeof t.autoresize&&(t.autoresize?(this.viewportSize=null,this.window.addEventListener("resize",this.resizeListener,!1),this.needResize=!0):this.window.removeEventListener("resize",this.resizeListener,!1)),"number"==typeof t.fontSize){var e=t.fontSize;e>=5&&e<=72&&this.fontSize!=e&&(this.fontSize=e,this.needResize=!0)}if("object"==typeof t.viewport&&t.viewport){var n=t.viewport,i={marginLeft:this.resolveLength(n["margin-left"])||0,marginRight:this.resolveLength(n["margin-right"])||0,marginTop:this.resolveLength(n["margin-top"])||0,marginBottom:this.resolveLength(n["margin-bottom"])||0,width:this.resolveLength(n.width)||0,height:this.resolveLength(n.height)||0};(i.width>=200||i.height>=200)&&(this.window.removeEventListener("resize",this.resizeListener,!1),this.viewportSize=i,this.needResize=!0)}if("boolean"==typeof t.hyphenate&&(this.pref.hyphenate=t.hyphenate,this.needResize=!0),"boolean"==typeof t.horizontal&&(this.pref.horizontal=t.horizontal,this.needResize=!0),"boolean"==typeof t.nightMode&&(this.pref.nightMode=t.nightMode,this.needResize=!0),"number"==typeof t.lineHeight&&(this.pref.lineHeight=t.lineHeight,this.needResize=!0),"number"==typeof t.columnWidth&&(this.pref.columnWidth=t.columnWidth,this.needResize=!0),"string"==typeof t.fontFamily&&(this.pref.fontFamily=t.fontFamily,this.needResize=!0),"boolean"==typeof t.load&&(this.waitForLoading=t.load),"boolean"==typeof t.renderAllPages&&(this.renderAllPages=t.renderAllPages),"string"==typeof t.userAgentRootURL&&(H(t.userAgentRootURL.replace(/resources\/?$/,"")),W(t.userAgentRootURL)),"string"==typeof t.rootURL&&(H(t.rootURL),W(z+"resources/")),"string"==typeof t.pageViewMode&&t.pageViewMode!==this.pageViewMode&&(this.pageViewMode=t.pageViewMode,this.needResize=!0),"number"==typeof t.pageBorder&&t.pageBorder!==this.pref.pageBorder&&(this.viewport=null,this.pref.pageBorder=t.pageBorder,this.needResize=!0),"number"==typeof t.zoom&&t.zoom!==this.zoom&&(this.zoom=t.zoom,this.needRefresh=!0),"boolean"==typeof t.fitToScreen&&t.fitToScreen!==this.fitToScreen&&(this.fitToScreen=t.fitToScreen,this.needRefresh=!0),"object"==typeof t.defaultPaperSize&&"number"==typeof t.defaultPaperSize.width&&"number"==typeof t.defaultPaperSize.height&&(this.viewport=null,this.pref.defaultPaperSize=t.defaultPaperSize,this.needResize=!0),"boolean"==typeof t.allowScripts&&t.allowScripts!==oD&&(oD=t.allowScripts,this.needResize=!0),"number"==typeof t.pixelRatio){var u=Math.min(t.pixelRatio,this.pixelRatioLimit);u!==this.pixelRatio&&(this.pixelRatio=u,this.needResize=!0)}return this.configurePlugins(t),Ri(!0)},n.configurePlugins=function(e){var n=this;p(t.HOOKS.CONFIGURATION).forEach((function(t){var i=t(e);n.needResize=i.needResize||n.needResize,n.needRefresh=i.needRefresh||n.needRefresh}))},n.pageReplacedListener=function(t){var e=this.currentPage,n=this.currentSpread,i=t.target;n?n.left!==i&&n.right!==i||this.showCurrent(t.newPage):e===t.target&&this.showCurrent(t.newPage)},n.forCurrentPages=function(t){var e=[];this.currentPage&&e.push(this.currentPage),this.currentSpread&&(e.push(this.currentSpread.left),e.push(this.currentSpread.right)),e.forEach((function(e){e&&t(e)}))},n.removePageListeners=function(){var t=this;this.forCurrentPages((function(e){e.removeEventListener("hyperlink",t.hyperlinkListener,!1),e.removeEventListener("replaced",t.pageReplacedListener,!1)}))},n.hidePages=function(){this.removePageListeners(),this.forCurrentPages((function(t){tt(t.container,"display","none")})),this.currentPage=null,this.currentSpread=null},n.showSinglePage=function(t){t.addEventListener("hyperlink",this.hyperlinkListener,!1),t.addEventListener("replaced",this.pageReplacedListener,!1),tt(t.container,"visibility","visible"),tt(t.container,"display","block")},n.showPage=function(t){this.hidePages(),this.currentPage=t,t.container.style.marginLeft="",t.container.style.marginRight="",this.showSinglePage(t)},n.showSpread=function(t){if(this.hidePages(),this.currentSpread=t,t.left&&t.right){var e=parseFloat(t.left.container.style.width),n=parseFloat(t.right.container.style.width);e&&n&&e!==n&&(e<n?t.left.container.style.marginLeft=n-e+"px":t.right.container.style.marginRight=e-n+"px")}t.left&&(this.showSinglePage(t.left),t.right?t.left.container.removeAttribute("data-vivliostyle-unpaired-page"):t.left.container.setAttribute("data-vivliostyle-unpaired-page",!0)),t.right&&(this.showSinglePage(t.right),t.left?t.right.container.removeAttribute("data-vivliostyle-unpaired-page"):t.right.container.setAttribute("data-vivliostyle-unpaired-page",!0))},n.reportPosition=function(){var t=this,e=Oi("reportPosition");return this.opf.getCFI(this.pagePosition.spineIndex,this.pagePosition.offsetInItem).then((function(n){var i=t.currentPage;(t.waitForLoading&&i.fetchers.length>0?$i(i.fetchers):Ri(!0)).then((function(){t.sendLocationNotification(i,n).thenFinish(e)}))})),e.result()},n.createViewport=function(){var t=this.viewportElement;if(this.viewportSize){var e=this.viewportSize;return t.style.marginLeft=e.marginLeft+"px",t.style.marginRight=e.marginRight+"px",t.style.marginTop=e.marginTop+"px",t.style.marginBottom=e.marginBottom+"px",new CD(this.window,this.fontSize,this.pixelRatio,t,e.width,e.height)}return new CD(this.window,this.fontSize,this.pixelRatio,t)},n.resolveSpreadView=function(t,e){switch(this.pageViewMode){case GD.SINGLE_PAGE:return!1;case GD.SPREAD:return!0;default:return(t.width-this.pref.pageBorder)/t.height>=(e?2*e.width/e.height:1.45)&&(!!e||t.width>800)}},n.updateSpreadView=function(t){this.pref.spreadView=t,this.viewportElement.setAttribute("data-vivliostyle-spread-view",t.toString())},n.sizeIsGood=function(){var t,e=this.createViewport(),n=(null==(t=this.opfView)?void 0:t.hasPages())&&!this.opfView.hasAutoSizedPages(),i=this.resolveSpreadView(e,this.resized&&n?this.pageSizes[0]:null);this.resized=!1;var u=this.pref.spreadView!==i;return this.updateSpreadView(i),!(this.pixelRatio&&this.opfView&&this.pixelRatio/this.window.devicePixelRatio!==this.opfView.clientLayout.scaleRatio||this.viewportSize||!this.viewport||this.viewport.fontSize!=this.fontSize||(u||e.width!=this.viewport.width||e.height!=this.viewport.height)&&(u||e.width!=this.viewport.width||e.height==this.viewport.height||!/Android|iPhone|iPad|iPod/.test(navigator.userAgent))&&(!n||(this.viewport.width=e.width,this.viewport.height=e.height,this.needRefresh=!0,0)))},n.setPageSize=function(t,e,n,i){this.pageSizes[i]=t,this.setPageSizePageRules(e,n,i),0!==i||this.pageViewMode!==GD.AUTO_SPREAD||this.opfView.hasAutoSizedPages()||this.updateSpreadView(this.resolveSpreadView(this.viewport,t))},n.setPageSizePageRules=function(t,e,n){var i,u;if(this.pageRuleStyleElement&&(!this.pageSheetSizeAlreadySet||this.pageSizes[n].width!==(null==(i=this.pageSizes[n-1])?void 0:i.width)||this.pageSizes[n].height!==(null==(u=this.pageSizes[n-1])?void 0:u.height))){var r=function(t){return Math.ceil(.75*t)},o=Math.max.apply(Math,this.pageSizes.map((function(t){return t.width}))),a=Math.max.apply(Math,this.pageSizes.map((function(t){return t.height}))),s=r(o),l=r(a);this.pageRuleStyleElement.textContent="@page {size: "+s+"pt "+l+"pt; margin: 0 "+-(s*((this.pixelRatio||1)-1)+2)+"pt "+-(l*((this.pixelRatio||1)-1)+2)+"pt 0;}",this.pageSheetSizeAlreadySet=!0}},n.removePageSizePageRules=function(){this.pageRuleStyleElement&&(this.pageRuleStyleElement.textContent="",this.pageSheetSizeAlreadySet=!1)},n.reset=function(){var t=!1,e=!1;this.opfView&&(t=this.opfView.tocVisible,e=this.opfView.tocAutohide,this.opfView.removeRenderedPages()),this.pageSizes=[],this.removePageSizePageRules(),this.viewport=this.createViewport(),this.viewport.resetZoom(),this.opfView=new KD(this.opf,this.viewport,this.fontMapper,this.pref,this.setPageSize.bind(this)),t&&this.sendCommand({a:"toc",v:"show",autohide:e})},n.showCurrent=function(e,n){var i=this;return this.needRefresh=!1,this.removePageListeners(),this.pref.spreadView?this.opfView.getSpread(this.pagePosition,n).thenAsync((function(n){return n.left||n.right?(i.showSpread(n),i.setSpreadZoom(n),i.currentPage=e.side===t.PageSide.LEFT?n.left:n.right,Ri(null)):Ri(null)})):(this.showPage(e),this.setPageZoom(e),this.currentPage=e,Ri(null))},n.setPageZoom=function(t){var e=this.getAdjustedZoomFactor(t.dimensions);this.viewport.zoom(t.dimensions.width,t.dimensions.height,e)},n.setSpreadZoom=function(t){var e=this.getSpreadDimensions(t);this.viewport.zoom(e.width,e.height,this.getAdjustedZoomFactor(e))},n.getAdjustedZoomFactor=function(t){return this.fitToScreen?this.calculateZoomFactorToFitInsideViewPort(t):this.zoom},n.getSpreadDimensions=function(t){var e=0,n=0;return t.left&&(e+=t.left.dimensions.width,n=t.left.dimensions.height),t.right&&(e+=t.right.dimensions.width,n=Math.max(n,t.right.dimensions.height)),t.left&&t.right&&(e+=2*this.pref.pageBorder,e+=Math.abs(t.left.dimensions.width-t.right.dimensions.width)),{width:e,height:n}},n.queryZoomFactor=function(t){if(!this.currentPage)throw new Error("no page exists.");var e;if(t===YD.FIT_INSIDE_VIEWPORT)return e=this.pref.spreadView?this.getSpreadDimensions(this.currentSpread):this.currentPage.dimensions,this.calculateZoomFactorToFitInsideViewPort(e);throw new Error("unknown zoom type: "+t)},n.calculateZoomFactorToFitInsideViewPort=function(t){return this.viewport?Math.min(this.viewport.width/t.width,this.viewport.height/t.height):this.zoom},n.cancelRenderingTask=function(){this.renderTask&&this.renderTask.interrupt(new QD),this.renderTask=null},n.resize=function(){var e=this;if(this.needResize=!1,this.needRefresh=!1,this.sizeIsGood())return Ri(!0);this.setReadyState(t.ReadyState.LOADING),this.cancelRenderingTask();var n=ki().getScheduler().run((function(){return Li("resize",(function(i){e.opf?(e.renderTask=n,b.registerStartTiming("render (resize)"),e.reset(),e.pagePosition&&(0==e.pagePosition.pageIndex&&0==e.pagePosition.offsetInItem||(e.pagePosition.pageIndex=-1)),e.opf.setEPageCountMode(e.renderAllPages),e.opfView.renderPagesUpto(e.pagePosition,!e.renderAllPages).then((function(u){u?(e.pagePosition=u.position,e.showCurrent(u.page,!0).then((function(){e.setReadyState(t.ReadyState.INTERACTIVE),e.opf.countEPages((function(t){var n={t:"nav",epageCount:t,first:e.currentPage.isFirstPage,last:e.currentPage.isLastPage,metadata:e.opf.metadata,docTitle:e.opf.spine[e.pagePosition.spineIndex].title};(e.currentPage.isFirstPage||0==e.pagePosition.pageIndex&&e.opf.spine[e.pagePosition.spineIndex].epage)&&(n.epage=e.opf.spine[e.pagePosition.spineIndex].epage),e.callback(n)})).then((function(){e.reportPosition().then((function(u){(e.renderAllPages?e.opfView.renderAllPages():Ri(null)).then((function(){e.renderTask===n&&(e.renderTask=null),b.registerEndTiming("render (resize)"),oD&&hD(e.window)?function(t){if(!oD)return Ri(!1);var e=Oi("loadScripts");return e.loop((function(){return 0===aD.length?Ri(!1):cD(aD.shift(),t,{atEnd:!0}).thenReturn(aD.length>0)})).then((function(){h.debug("dispatchEvent: DOMContentLoaded (window)"),t.dispatchEvent(new Event("DOMContentLoaded")),h.debug("dispatchEvent: load (window)"),t.dispatchEvent(new Event("load")),e.finish(!0)})),e.result()}(e.window).then((function(){e.renderAllPages&&e.setReadyState(t.ReadyState.COMPLETE),e.callback({t:"loaded"}),i.finish(u)})):(e.renderAllPages&&e.setReadyState(t.ReadyState.COMPLETE),e.callback({t:"loaded"}),i.finish(u))}))}))}))}))):i.finish(!1)}))):i.finish(!1)}),(function(t,e){if(!(e instanceof QD))throw e;b.registerEndTiming("render (resize)"),h.debug(e.message)}))}));return Ri(!0)},n.sendLocationNotification=function(t,e){var n=this,i=Oi("sendLocationNotification"),u={t:"nav",first:t.isFirstPage,last:t.isLastPage,metadata:this.opf.metadata,docTitle:this.opf.spine[t.spineIndex].title};return this.opf.getEPageFromPosition(this.pagePosition).then((function(t){u.epage=t,u.epageCount=n.opf.epageCount,e&&(u.cfi=e),n.callback(u),i.finish(!0)})),i.result()},n.getCurrentPageProgression=function(){return this.opfView?this.opfView.getCurrentPageProgression(this.pagePosition):null},n.moveTo=function(e){var n,i,u=this;if(this.readyState!==t.ReadyState.COMPLETE&&"next"!==e.where&&this.setReadyState(t.ReadyState.LOADING),"string"==typeof e.where){var r;switch(e.where){case"next":r=this.pref.spreadView?this.opfView.nextSpread:this.opfView.nextPage;break;case"previous":r=this.pref.spreadView?this.opfView.previousSpread:this.opfView.previousPage;break;case"last":r=this.opfView.lastPage;break;case"first":r=this.opfView.firstPage;break;default:return Ri(!0)}r&&(i=function(){return r.call(u.opfView,u.pagePosition,!u.renderAllPages)})}else if("number"==typeof e.epage){var o=e.epage;i=function(){return u.opfView.navigateToEPage(o,u.pagePosition,!u.renderAllPages)}}else if("string"==typeof e.url){var a=e.url;i=function(){return u.opfView.navigateTo(a,u.pagePosition,!u.renderAllPages)}}else{if("number"!=typeof(null==(n=e.position)?void 0:n.spineIndex))return Ri(!0);var s=e.position;i=function(){return u.opfView.findPage(s,!u.renderAllPages)}}if(!this.opfView)return Ri(!0);var l=Oi("moveTo");return i.call(this.opfView).then((function(e){var n;if(e){u.pagePosition=e.position;var i=Oi("moveTo.showCurrent");n=i.result(),u.showCurrent(e.page,!u.renderAllPages).then((function(){u.reportPosition().thenFinish(i)}))}else n=Ri(!0);n.then((function(e){u.readyState===t.ReadyState.LOADING&&u.setReadyState(t.ReadyState.INTERACTIVE),l.finish(e)}))})),l.result()},n.showTOC=function(t){var e=this,n=!!t.autohide,i=t.v,u=this.opfView.isTOCVisible(),r=n!=this.opfView.tocAutohide&&"hide"!=i;if(u){if("show"==i&&!r)return Ri(!0)}else if("hide"==i)return Ri(!0);if(u&&"show"!=i)return this.opfView.hideTOC(),Ri(!0);var o=Oi("showTOC");return this.opfView.showTOC(n).then((function(t){t&&(r&&(t.listeners={}),n&&t.addEventListener("hyperlink",(function(){e.opfView.hideTOC()}),!1),t.addEventListener("hyperlink",e.hyperlinkListener,!1)),o.finish(!0)})),o.result()},n.runCommand=function(t){var e=this,n=t.a||"";return Li("runCommand",(function(i){var u=e.actions[n];u?u.call(e,t).then((function(){e.callback({t:"done",a:n}),i.finish(!0)})):(h.error("No such action:",n),i.finish(!0))}),(function(t,e){h.error(e,"Error during action:",n),t.finish(!0)}))},n.initEmbed=function(t){var e,n=this,i=JD(t),u=null,r=this;e=function(){var t=Oi("commandLoop"),e=ki().getScheduler();return r.hyperlinkListener=function(t){var n=t,i="#"===n.href.charAt(0)||r.packageURL.some((function(t){return n.href.substr(0,t.length)==t}));if(i){t.preventDefault();var u={t:"hyperlink",href:n.href,internal:i};e.run((function(){return r.callback(u),Ri(!0)}))}},t.loopWithFrame((function(t){if(r.needResize)r.resize().then((function(){t.continueLoop()}));else if(r.needRefresh)r.currentPage&&r.showCurrent(r.currentPage,!n.renderAllPages).then((function(){t.continueLoop()}));else if(i){var e=i;i=null,r.runCommand(e).then((function(){t.continueLoop()}))}else{var o=Oi("waitForCommand");u=o.suspend(n),o.result().then((function(){t.continueLoop()}))}})).thenFinish(t),t.result()},(Ii?Ii.getScheduler():Pi||new Ui(new Mi)).run(e,void 0),r.kick=function(){var t=u;t&&(u=null,t.schedule(!0))},r.sendCommand=function(t){return!i&&(i=JD(t),r.kick(),!0)},this.window.adapt_command=r.sendCommand},e}();(YD||(YD={})).FIT_INSIDE_VIEWPORT="fit inside viewport";var QD=function(t){function e(){var n;return(n=t.call(this)||this).name="RenderingCanceledError",n.message="Page rendering has been canceled",n.stack=void 0,Object.setPrototypeOf(k(n),e.prototype),n.stack=(new Error).stack,n}return N(e,t),e}(P(Error));function JD(t){return"string"==typeof t?U(t):t}var td=t.PageProgression;function ed(t){var e={};return Object.keys(t).forEach((function(n){var i=t[n];switch(n){case"autoResize":e.autoresize=i;break;case"pageBorderWidth":e.pageBorder=i;break;default:e[n]=i}})),e}var nd,id=function(){function e(t,e){this.settings=void 0,this.initialized=!1,this.adaptViewer_=void 0,this.options=void 0,this.eventTarget=void 0,this.readyState=void 0,this.settings=t,o(t.debug),this.adaptViewer_=new ZD(t.window||window,t.viewportElement,"main",this.dispatcher.bind(this)),this.options={autoResize:!0,fontSize:16,pageBorderWidth:1,renderAllPages:!0,pageViewMode:GD.AUTO_SPREAD,zoom:1,fitToScreen:!1,defaultPaperSize:void 0,allowScripts:!0,pixelRatio:8},e&&this.setOptions(e),this.eventTarget=new pt,Object.defineProperty(this,"readyState",{get:function(){return this.adaptViewer_.readyState}})}var n=e.prototype;return n.setOptions=function(t){var e=Object.assign({a:"configure"},ed(t));this.adaptViewer_.sendCommand(e),Object.assign(this.options,t)},n.dispatcher=function(t){var e={type:t.t},n=t;Object.keys(n).forEach((function(t){"t"!==t&&(e[t]=n[t])})),this.eventTarget.dispatchEvent(e)},n.addListener=function(t,e){this.eventTarget.addEventListener(t,e,!1)},n.removeListener=function(t,e){this.eventTarget.removeEventListener(t,e,!1)},n.loadDocument=function(t,e,n){t&&(Array.isArray(t)?t[0]&&("string"==typeof t[0]||t[0].url):"string"==typeof t||t.url)?this.loadDocumentOrPublication(t,null,e,n):this.eventTarget.dispatchEvent({type:"error",content:{error:new Error("No URL specified")}})},n.loadPublication=function(t,e,n){t?this.loadDocumentOrPublication(null,t,e,n):this.eventTarget.dispatchEvent({type:"error",content:{error:new Error("No URL specified")}})},n.loadDocumentOrPublication=function(t,e,n,i){var u=n||{};function r(t){return t?t.map((function(t){return{url:t.url||null,text:t.text||null}})):void 0}var o=r(u.authorStyleSheet),a=r(u.userStyleSheet);i&&Object.assign(this.options,i);var s=Object.assign({a:t?"loadXML":"loadPublication",userAgentRootURL:this.settings.userAgentRootURL,url:ud(t)||e,document:u.documentObject,fragment:u.fragment,authorStyleSheet:o,userStyleSheet:a},ed(this.options));this.initialized?this.adaptViewer_.sendCommand(s):(this.initialized=!0,this.adaptViewer_.initEmbed(s))},n.getCurrentPageProgression=function(){return this.adaptViewer_.getCurrentPageProgression()},n.resolveNavigation=function(e){switch(e){case t.Navigation.LEFT:return this.getCurrentPageProgression()===td.LTR?t.Navigation.PREVIOUS:t.Navigation.NEXT;case t.Navigation.RIGHT:return this.getCurrentPageProgression()===td.LTR?t.Navigation.NEXT:t.Navigation.PREVIOUS;default:return e}},n.navigateToPage=function(e,n){e===t.Navigation.EPAGE?this.adaptViewer_.sendCommand({a:"moveTo",epage:n}):this.adaptViewer_.sendCommand({a:"moveTo",where:this.resolveNavigation(e)})},n.navigateToInternalUrl=function(t){this.adaptViewer_.sendCommand({a:"moveTo",url:t})},n.navigateToPosition=function(t){var e,n;this.adaptViewer_.sendCommand({a:"moveTo",position:{spineIndex:t.spineIndex,pageIndex:null!=(e=t.pageIndex)?e:-1,offsetInItem:null!=(n=t.offsetInItem)?n:-1}})},n.isTOCVisible=function(){return this.adaptViewer_.opfView&&this.adaptViewer_.opfView.opf&&this.adaptViewer_.opfView.opf.toc?!!this.adaptViewer_.opfView.isTOCVisible():null},n.showTOC=function(t,e){this.adaptViewer_.sendCommand({a:"toc",v:null==t?"toggle":t?"show":"hide",autohide:e})},n.queryZoomFactor=function(t){return this.adaptViewer_.queryZoomFactor(t)},n.getPageSizes=function(){return this.adaptViewer_.pageSizes},n.getTOC=function(){var t,e;return null==(t=this.adaptViewer_.opfView)||null==(e=t.tocView)?void 0:e.getTOC()},n.getMetadata=function(){return this.adaptViewer_.opf.getMetadata()},n.getCover=function(){return this.adaptViewer_.opf.cover},e}();function ud(t){function e(t){return"number"==typeof t?t:null}function n(t){return"string"==typeof t?{url:t,startPage:null,skipPagesBefore:null}:{url:t.url,startPage:e(t.startPage),skipPagesBefore:e(t.skipPagesBefore)}}return Array.isArray(t)?t.map(n):t?[n(t)]:null}t.Navigation=void 0,(nd=t.Navigation||(t.Navigation={})).PREVIOUS="previous",nd.NEXT="next",nd.LEFT="left",nd.RIGHT="right",nd.FIRST="first",nd.LAST="last",nd.EPAGE="epage";var rd=YD,od=GD;b.forceRegisterEndTiming("load_vivliostyle");var ad=function(){function t(t,e){var n=e.title,i=void 0===n?"":n,u=e.printCallback,r=void 0===u?function(t){return t.print()}:u,o=e.errorCallback,a=void 0===o?null:o,s=e.hideIframe,l=void 0===s||s,c=e.removeIframe,h=void 0===c||c;this.htmlDoc=void 0,this.title=void 0,this.printCallback=void 0,this.errorCallback=void 0,this.hideIframe=void 0,this.removeIframe=void 0,this.iframe=void 0,this.iframeWin=void 0,this.window=void 0,this.htmlDoc=t,this.title=i,this.printCallback=r,this.errorCallback=a,this.hideIframe=l,this.removeIframe=h}var e=t.prototype;return e.init=function(){this.iframe=document.createElement("iframe"),this.hideIframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this.iframe.style.borderWidth="0"),this.window=window,this.window.printInstance=this,this.iframe.srcdoc="\n      <!DOCTYPE html>\n      <html data-vivliostyle-paginated=\"true\">\n        <head>\n          <meta charset='utf-8'/>\n          <meta name='viewport' content='width=device-width, initial-scale=1.0'/>\n          <title>"+this.title+"</title>\n          <style>\n            html[data-vivliostyle-paginated] {\n              width: 100%;\n              height: 100%;\n            }\n            html[data-vivliostyle-paginated] body,\n            html[data-vivliostyle-paginated] [data-vivliostyle-viewer-viewport] {\n              width: 100% !important;\n              height: 100% !important;\n            }\n            html[data-vivliostyle-paginated],\n            html[data-vivliostyle-paginated] body {\n              margin: 0;\n              padding: 0;\n            }\n          </style>\n          <style id='vivliostyle-page-rules'></style>\n        </head>\n        <body onload='parent.printInstance.runInIframe(window)'>\n          <div id=\"vivliostyle-viewer-viewport\"></div>\n        </body>\n      </html>",document.body.appendChild(this.iframe)},e.runInIframe=function(t){var e=this;return this.iframeWin=t,this.preparePrint().then((function(){return e.browserPrint()})).then((function(){return e.cleanUp()}))},e.preparePrint=function(){var t=this;this.iframeWin.document.title=this.title;var e=new Blob([this.htmlDoc],{type:"text/html"}),n=URL.createObjectURL(e),i=new id({viewportElement:this.iframeWin.document.body.firstElementChild,window:this.iframeWin,debug:!0});return new Promise((function(e){i.addListener("readystatechange",(function(){"complete"===i.readyState&&e()})),t.errorCallback&&i.addListener("error",(function(e){var n,i,u=null!=(n=null==(i=e.content.error)?void 0:i.toString())?n:e.content.messages.join("\n");t.errorCallback(u)})),i.loadDocument({url:n})}))},e.browserPrint=function(){this.printCallback(this.iframeWin)},e.cleanUp=function(){delete this.window.printInstance,this.removeIframe&&this.iframe.parentElement.removeChild(this.iframe)},t}();t.CoreViewer=id,t.PageViewMode=od,t.Profiler=E,t.UserAgentBaseCss=Ji,t.UserAgentPageCss=Qi,t.UserAgentTocCss=tu,t.UserAgentXml=Zi,t.ValidationTxt=Yi,t.VivliostylePolyfillCss=eu,t.VivliostyleViewportCss=qi,t.VivliostyleViewportScreenCss=Ki,t.ZoomType=rd,t.getHooksForName=p,t.pageProgressionOf=a,t.plugin=g,t.printHTML=function(t,e){new ad(t,e).init()},t.profile=y,t.profiler=b,t.registerHook=d,t.removeHook=f,t.setDebug=o}(c);var w,S=t({__proto__:null,default:e(c)},[c]);!function(t){t.Default="",t.Auto="auto",t.Preset="preset",t.Custom="custom",t.Zero="0"}(w||(w={}));const N=[{name:"letter",description:"Letter"},{name:"legal",description:"Legal"},{name:"ledger",description:"Ledger"},{name:"a10",description:"A10"},{name:"a9",description:"A9"},{name:"a8",description:"A8"},{name:"a7",description:"A7"},{name:"a6",description:"A6"},{name:"a5",description:"A5"},{name:"a4",description:"A4"},{name:"a3",description:"A3"},{name:"a2",description:"A2"},{name:"a1",description:"A1"},{name:"a0",description:"A0"},{name:"b10",description:"B10 (ISO)"},{name:"b9",description:"B9 (ISO)"},{name:"b8",description:"B8 (ISO)"},{name:"b7",description:"B7 (ISO)"},{name:"b6",description:"B6 (ISO)"},{name:"b5",description:"B5 (ISO)"},{name:"b4",description:"B4 (ISO)"},{name:"b3",description:"B3 (ISO)"},{name:"b2",description:"B2 (ISO)"},{name:"b1",description:"B1 (ISO)"},{name:"b0",description:"B0 (ISO)"},{name:"jis-b10",description:"JIS-B10"},{name:"jis-b9",description:"JIS-B9"},{name:"jis-b8",description:"JIS-B8"},{name:"jis-b7",description:"JIS-B7"},{name:"jis-b6",description:"JIS-B6"},{name:"jis-b5",description:"JIS-B5"},{name:"jis-b4",description:"JIS-B4"},{name:"jis-b3",description:"JIS-B3"},{name:"jis-b2",description:"JIS-B2"},{name:"jis-b1",description:"JIS-B1"},{name:"jis-b0",description:"JIS-B0"},{name:"c10",description:"C10"},{name:"c9",description:"C9"},{name:"c8",description:"C8"},{name:"c7",description:"C7"},{name:"c6",description:"C6"},{name:"c5",description:"C5"},{name:"c4",description:"C4"},{name:"c3",description:"C3"},{name:"c2",description:"C2"},{name:"c1",description:"C1"},{name:"c0",description:"C0"}],x={customWidth:"210mm",customHeight:"297mm",customMargin:"10%",baseFontSize:"12pt",baseLineHeight:"1.2",baseFontFamily:"serif",viewerFontSize:16,cropMarks:"crop cross",bleed:"3mm",cropOffset:"9mm"};class T{constructor(t){this.PresetSize=T.PresetSize,this.pageSizeMode=r.observable(w.Default),this.presetSize=r.observable(N[9]),this.isLandscape=r.observable(!1),this.customWidth=r.observable(x.customWidth),this.customHeight=r.observable(x.customHeight),this.pageSizeImportant=r.observable(!1),this.pageMarginMode=r.observable(w.Default),this.customMargin=r.observable(x.customMargin),this.pageMarginImportant=r.observable(!1),this.firstPageMarginZero=r.observable(!1),this.firstPageMarginZeroImportant=r.observable(!1),this.forceHtmlBodyMarginZero=r.observable(!1),this.widowsOrphans=r.observable(""),this.widowsOrphansImportant=r.observable(!1),this.imageMaxSizeToFitPage=r.observable(!1),this.imageMaxSizeToFitPageImportant=r.observable(!1),this.imageKeepAspectRatio=r.observable(!1),this.imageKeepAspectRatioImportant=r.observable(!1),this.baseFontSize=r.observable(x.baseFontSize),this.baseFontSizeSpecified=r.observable(!1),this.baseFontSizeImportant=r.observable(!1),this.baseLineHeight=r.observable(x.baseLineHeight),this.baseLineHeightSpecified=r.observable(!1),this.baseLineHeightImportant=r.observable(!1),this.baseFontFamily=r.observable(x.baseFontFamily),this.baseFontFamilySpecified=r.observable(!1),this.baseFontFamilyImportant=r.observable(!1),this.cropMarks=r.observable(x.cropMarks),this.cropMarksSpecified=r.observable(!1),this.cropMarksImportant=r.observable(!1),this.bleed=r.observable(x.bleed),this.bleedSpecified=r.observable(!1),this.bleedImportant=r.observable(!1),this.cropOffset=r.observable(x.cropOffset),this.cropOffsetSpecified=r.observable(!1),this.cropOffsetImportant=r.observable(!1),this.customStyleAsUserStyle=r.observable(!1),this.allImportant=r.observable(!1),this.pageOtherStyle=r.observable(""),this.firstPageOtherStyle=r.observable(""),this.rootOtherStyle=r.observable(""),this.beforeOtherStyle=r.observable(""),this.afterOtherStyle=r.observable(""),this.viewerFontSize=null,this.setViewerFontSizeObservable=t=>{this.viewerFontSize=t;const e=document.getElementsByName("vivliostyle-settings_viewer-font-size")[0];e&&(e.value=this.fontSizePxToPercent(Number(t()),100,5).toString())},this.viewerFontSizePercent=r.pureComputed({read(){if(!this.viewerFontSize)return 100;return this.fontSizePxToPercent(Number(this.viewerFontSize()),100,5)},write(t){if(!this.viewerFontSize)return;const e=parseFloat(String(t));let n=e&&this.fontSizePercentToPx(e);if(!n||Number(n)<5||Number(n)>72){const t=document.getElementsByName("vivliostyle-settings_viewer-font-size")[0];t&&(t.value="100"),n=x.viewerFontSize}this.viewerFontSize(Number(n))},owner:this}),this.cssText=r.pureComputed({read:this.toCSSText,write:this.fromCSSText,owner:this}),this.allImportant.subscribe((t=>{this.pageSizeImportant(t),this.pageMarginImportant(t),this.firstPageMarginZeroImportant(t),this.widowsOrphansImportant(t),this.imageMaxSizeToFitPageImportant(t),this.imageKeepAspectRatioImportant(t),this.baseFontSizeImportant(t),this.baseLineHeightImportant(t),this.baseFontFamilyImportant(t),this.cropMarksImportant(t),this.bleedImportant(t),this.cropOffsetImportant(t)})),this.cropMarksSpecified.subscribe((t=>{t?this.bleedSpecified(!0):(this.bleedSpecified(!1),this.cropOffsetSpecified(!1))})),this.pageStyleRegExp=new RegExp("^((?:\\n|.)*?)\\/\\*<viewer>\\*\\/\\s*(?:@page\\s*\\{\\s*(?:size:\\s*([^\\s!;{}]+)(?:\\s+([^\\s!;{}]+))?\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:margin:\\s*([^\\s!;{}]+(?:\\s+[^\\s!;{}]+)?(?:\\s+[^\\s!;{}]+)?(?:\\s+[^\\s!;{}]+)?)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:marks:\\s*([^\\s!;{}]+(?:\\s+[^\\s!;{}]+)?)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:bleed:\\s*([^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:crop-offset:\\s*([^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?((?:[^{}]+|\\{[^{}]*\\})*)\\}\\s*)?(?:@page\\s*:first\\s*\\{\\s*(margin:\\s*0(?:\\w+|%)?\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?((?:[^{}]+|\\{[^{}]*\\})*)\\}\\s*)?((?:html|:root),\\s*body\\s*\\{\\s*margin:\\s*0(?:\\w+|%)?\\s*!important(?:;|(?=[\\s{}]))\\s*\\}\\s*)?(?:(?:html|:root)\\s*\\{\\s*(?:font-size:\\s*(calc\\([^()]+\\)|[^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:line-height:\\s*([^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:font-family:\\s*([^!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?([^{}]*)\\}\\s*)?(?:body\\s*\\{\\s*(?:[-\\w]+:\\s*inherit\\s*!important(?:;|(?=[\\s{}]))\\s*)+\\}\\s*)?(?:\\*\\s*\\{\\s*widows:\\s*(1|999)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*orphans:\\s*\\25\\s*\\26(?:;|(?=[\\s{}]))\\s*\\}\\s*)?(?:img,\\s*svg\\s*\\{\\s*(max-inline-size:\\s*100%\\s*(!important)?(?:;|(?=[\\s{}]))\\s*max-block-size:\\s*100vb\\s*\\28(?:;|(?=[\\s{}]))\\s*)?(object-fit:\\s*contain\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?\\}\\s*)?((?:\\n|.)*)$"),t&&this.copyFrom(t)}fontSizePxToPercent(t,e,n){let i=t/x.viewerFontSize*(e||100);return n&&(i=i.toPrecision(n).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),i}fontSizePercentToPx(t,e,n){let i=t/(e||100)*x.viewerFontSize;return n&&(i=i.toPrecision(n).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),i}fromCSSText(t){const e=this.pageStyleRegExp.exec(t);if(e){const[,t,n,i,u,r,o,a,s,l,c,h,D,d,f,p,g,E,C,v,F,m,A,b,y,B,S,x,T,I,P,k]=e;let O=k,R=A,L=C,_=g,M=d,U=y,V=n,z=i,H=0,G=0;if(this.beforeOtherStyle(t),"landscape"==V||"portrait"==V?(this.isLandscape("landscape"==V),V=z,z=null):"landscape"!=z&&"portrait"!=z||(this.isLandscape("landscape"==z),z=null),null!=V){if(null==z)if("auto"==V)this.pageSizeMode(w.Auto);else{const t=N.find((t=>t.name.toLowerCase()==V.toLowerCase()));t?(this.pageSizeMode(w.Preset),this.presetSize(t)):(this.pageSizeMode(w.Custom),this.customWidth(V),this.customHeight(V))}else this.pageSizeMode(w.Custom),this.customWidth(V),this.customHeight(z);this.pageSizeImportant(!!u),u?H++:G++}else this.pageSizeMode(w.Default);null!=r?(this.pageMarginMode("0"==r?w.Zero:w.Custom),"0"==r?this.pageMarginMode(w.Zero):(this.pageMarginMode(w.Custom),this.customMargin(r)),this.pageMarginImportant(!!o),o?H++:G++):this.pageMarginMode(w.Default),null!=a?(this.cropMarksSpecified(!0),this.cropMarks(a),this.cropMarksImportant(!!s),s?H++:G++):this.cropMarksSpecified(!1),null!=l?(this.bleedSpecified(!0),this.bleed(l),this.bleedImportant(!!c),c?H++:G++):this.bleedSpecified(!1),null!=h?(this.cropOffsetSpecified(!0),this.cropOffset(h),this.cropOffsetImportant(!!D),D?H++:G++):this.cropOffsetSpecified(!1),M=M||"",this.pageOtherStyle(M),f?(this.firstPageMarginZero(!0),this.firstPageMarginZeroImportant(!!p),p?H++:G++):this.firstPageMarginZero(!1),_=_||"",this.firstPageOtherStyle(_),E?this.forceHtmlBodyMarginZero(!0):this.forceHtmlBodyMarginZero(!1),null!=L?(L=L.replace(/^\s*calc\([.\d]+\s*\*\s*([.\d]+\w+)\)\s*$/,"$1"),this.baseFontSizeSpecified(!0),this.baseFontSize(L),this.baseFontSizeImportant(!!v),v?H++:G++):this.baseFontSizeSpecified(!1),null!=F?(this.baseLineHeightSpecified(!0),this.baseLineHeight(F),this.baseLineHeightImportant(!!m),m?H++:G++):this.baseLineHeightSpecified(!1),null!=R?(R=R.trim(),this.baseFontFamilySpecified(!0),this.baseFontFamily(R),this.baseFontFamilyImportant(!!b),b?H++:G++):this.baseFontFamilySpecified(!1),U=U||"",this.rootOtherStyle(U),null!=B?(this.widowsOrphans(B),this.widowsOrphansImportant(!!S),S?H++:G++):this.widowsOrphans(w.Default),x?(this.imageMaxSizeToFitPage(!0),this.imageMaxSizeToFitPageImportant(!!T),T?H++:G++):this.imageMaxSizeToFitPage(!1),I?(this.imageKeepAspectRatio(!0),this.imageKeepAspectRatioImportant(!!P),P?H++:G++):this.imageKeepAspectRatio(!1),O=O.replace(/\/\*<\/?viewer>\*\/\n?/g,"")||"",this.afterOtherStyle(O),this.allImportant(H>0&&0==G)}else{const e=t.replace(/\/\*<\/?viewer>\*\/\n?/g,"")||"";this.afterOtherStyle(e)}}toCSSText(){function t(t){return t?" !important":""}let e=this.beforeOtherStyle();if(e+="/*<viewer>*/\n",this.pageSizeMode()!=w.Default||this.pageMarginMode()!=w.Default||this.cropMarksSpecified()||this.bleedSpecified()||this.cropOffsetSpecified()||this.pageOtherStyle()){if(e+="@page { ",this.pageSizeMode()!=w.Default){switch(e+="size: ",this.pageSizeMode()){case w.Auto:e+="auto";break;case w.Preset:e+=this.presetSize().name,this.isLandscape()&&(e+=" landscape");break;case w.Custom:e+=`${this.customWidth()} ${this.customHeight()}`;break;default:throw new Error(`Unknown pageSizeMode ${this.pageSizeMode()}`)}e+=`${t(this.pageSizeImportant())}; `}if(this.pageMarginMode()!=w.Default){switch(e+="margin: ",this.pageMarginMode()){case w.Auto:e+="auto";break;case w.Zero:e+="0";break;case w.Custom:e+=`${this.customMargin()}`;break;default:throw new Error(`Unknown pageMarginMode ${this.pageMarginMode()}`)}e+=`${t(this.pageMarginImportant())}; `}this.cropMarksSpecified()&&(e+=`marks: ${this.cropMarks()}${t(this.cropMarksImportant())}; `),this.bleedSpecified()&&(e+=`bleed: ${this.bleed()}${t(this.bleedImportant())}; `),this.cropOffsetSpecified()&&(e+=`crop-offset: ${this.cropOffset()}${t(this.cropOffsetImportant())}; `),e+=this.pageOtherStyle(),e+="}\n"}if((this.firstPageMarginZero()||this.firstPageOtherStyle())&&(e+="@page :first { ",this.firstPageMarginZero()&&(e+=`margin: 0${t(this.firstPageMarginZeroImportant())}; `),e+=this.firstPageOtherStyle(),e+="}\n"),this.forceHtmlBodyMarginZero()&&(e+=":root, body { margin: 0 !important; }\n"),this.baseFontSizeSpecified()||this.baseLineHeightSpecified()||this.baseFontFamilySpecified()||this.rootOtherStyle()){e+=":root { ";const n=this.baseFontSize();if(this.baseFontSizeSpecified())if(this.viewerFontSize&&this.viewerFontSize()!=x.viewerFontSize&&!n.endsWith("%")){e+=`font-size: calc(${this.fontSizePxToPercent(Number(this.viewerFontSize()),1,5)} * ${n})${t(this.baseFontSizeImportant())}; `}else e+=`font-size: ${this.baseFontSize()}${t(this.baseFontSizeImportant())}; `;this.baseLineHeightSpecified()&&(e+=`line-height: ${this.baseLineHeight()}${t(this.baseLineHeightImportant())}; `),this.baseFontFamilySpecified()&&(e+=`font-family: ${this.baseFontFamily()}${t(this.baseFontFamilyImportant())}; `),e+=this.rootOtherStyle(),e+="}\n"}return(this.baseFontSizeSpecified()&&this.baseFontSizeImportant()||this.baseLineHeightSpecified()&&this.baseLineHeightImportant()||this.baseFontFamilySpecified()&&this.baseFontFamilyImportant())&&(e+="body { ",this.baseFontSizeSpecified()&&this.baseFontSizeImportant()&&(e+="font-size: inherit !important; "),this.baseLineHeightSpecified()&&this.baseLineHeightImportant()&&(e+="line-height: inherit !important; "),this.baseFontFamilySpecified()&&this.baseFontFamilyImportant()&&(e+="font-family: inherit !important; "),e+="}\n"),this.widowsOrphans()&&(e+="* { ",e+=`widows: ${this.widowsOrphans()}${t(this.widowsOrphansImportant())}; `,e+=`orphans: ${this.widowsOrphans()}${t(this.widowsOrphansImportant())}; `,e+="}\n"),(this.imageMaxSizeToFitPage()||this.imageKeepAspectRatio())&&(e+="img, svg { ",this.imageMaxSizeToFitPage()&&(e+=`max-inline-size: 100%${t(this.imageMaxSizeToFitPageImportant())}; `,e+=`max-block-size: 100vb${t(this.imageMaxSizeToFitPageImportant())}; `),this.imageKeepAspectRatio()&&(e+=`object-fit: contain${t(this.imageKeepAspectRatioImportant())}; `),e+="}\n"),e+="/*</viewer>*/\n",e+=this.afterOtherStyle(),e}copyFrom(t){this.pageSizeMode(t.pageSizeMode()),this.presetSize(t.presetSize()),this.isLandscape(t.isLandscape()),this.customWidth(t.customWidth()),this.customHeight(t.customHeight()),this.pageSizeImportant(t.pageSizeImportant()),this.pageMarginMode(t.pageMarginMode()),this.customMargin(t.customMargin()),this.pageMarginImportant(t.pageMarginImportant()),this.firstPageMarginZero(t.firstPageMarginZero()),this.firstPageMarginZeroImportant(t.firstPageMarginZeroImportant()),this.forceHtmlBodyMarginZero(t.forceHtmlBodyMarginZero()),this.widowsOrphans(t.widowsOrphans()),this.widowsOrphansImportant(t.widowsOrphansImportant()),this.imageMaxSizeToFitPage(t.imageMaxSizeToFitPage()),this.imageMaxSizeToFitPageImportant(t.imageMaxSizeToFitPageImportant()),this.imageKeepAspectRatio(t.imageKeepAspectRatio()),this.imageKeepAspectRatioImportant(t.imageKeepAspectRatioImportant()),this.baseFontSize(t.baseFontSize()),this.baseFontSizeSpecified(t.baseFontSizeSpecified()),this.baseFontSizeImportant(t.baseFontSizeImportant()),this.baseLineHeight(t.baseLineHeight()),this.baseLineHeightSpecified(t.baseLineHeightSpecified()),this.baseLineHeightImportant(t.baseLineHeightImportant()),this.baseFontFamily(t.baseFontFamily()),this.baseFontFamilySpecified(t.baseFontFamilySpecified()),this.baseFontFamilyImportant(t.baseFontFamilyImportant()),this.cropMarks(t.cropMarks()),this.cropMarksSpecified(t.cropMarksSpecified()),this.cropMarksImportant(t.cropMarksImportant()),this.bleed(t.bleed()),this.bleedSpecified(t.bleedSpecified()),this.bleedImportant(t.bleedImportant()),this.cropOffset(t.cropOffset()),this.cropOffsetSpecified(t.cropOffsetSpecified()),this.cropOffsetImportant(t.cropOffsetImportant()),this.allImportant(t.allImportant()),this.pageOtherStyle(t.pageOtherStyle()),this.firstPageOtherStyle(t.firstPageOtherStyle()),this.rootOtherStyle(t.rootOtherStyle()),this.beforeOtherStyle(t.beforeOtherStyle()),this.afterOtherStyle(t.afterOtherStyle()),this.viewerFontSize&&t.viewerFontSize&&this.viewerFontSize(t.viewerFontSize()),this.customStyleAsUserStyle(t.customStyleAsUserStyle())}equivalentTo(t){return this.pageSizeMode()===t.pageSizeMode()&&((this.pageSizeMode()!==w.Preset||this.presetSize()===t.presetSize())&&((this.pageSizeMode()!==w.Preset||this.isLandscape()===t.isLandscape())&&((this.pageSizeMode()!==w.Custom||this.customWidth()===t.customWidth())&&((this.pageSizeMode()!==w.Custom||this.customHeight()===t.customHeight())&&(this.pageSizeImportant()===t.pageSizeImportant()&&(this.pageMarginMode()===t.pageMarginMode()&&((this.pageMarginMode()!==w.Custom||this.customMargin()===t.customMargin())&&(this.pageMarginImportant()===t.pageMarginImportant()&&(this.firstPageMarginZero()===t.firstPageMarginZero()&&(this.firstPageMarginZeroImportant()===t.firstPageMarginZeroImportant()&&(this.forceHtmlBodyMarginZero()===t.forceHtmlBodyMarginZero()&&(this.widowsOrphans()===t.widowsOrphans()&&(this.widowsOrphansImportant()===t.widowsOrphansImportant()&&(this.imageMaxSizeToFitPage()===t.imageMaxSizeToFitPage()&&(this.imageMaxSizeToFitPageImportant()===t.imageMaxSizeToFitPageImportant()&&(this.imageKeepAspectRatio()===t.imageKeepAspectRatio()&&(this.imageKeepAspectRatioImportant()===t.imageKeepAspectRatioImportant()&&(this.baseFontSizeSpecified()===t.baseFontSizeSpecified()&&((!this.baseFontSizeSpecified()||this.baseFontSize()===t.baseFontSize())&&(this.baseFontSizeImportant()===t.baseFontSizeImportant()&&(this.baseLineHeightSpecified()===t.baseLineHeightSpecified()&&((!this.baseLineHeightSpecified()||this.baseLineHeight()===t.baseLineHeight())&&(this.baseLineHeightImportant()===t.baseLineHeightImportant()&&(this.baseFontFamilySpecified()===t.baseFontFamilySpecified()&&((!this.baseFontFamilySpecified()||this.baseFontFamily()===t.baseFontFamily())&&(this.baseFontFamilyImportant()===t.baseFontFamilyImportant()&&(this.cropMarksSpecified()===t.cropMarksSpecified()&&((!this.cropMarksSpecified()||this.cropMarks()===t.cropMarks())&&(this.cropMarksImportant()===t.cropMarksImportant()&&(this.bleedSpecified()===t.bleedSpecified()&&((!this.bleedSpecified()||this.bleed()===t.bleed())&&(this.bleedImportant()===t.bleedImportant()&&(this.cropOffsetSpecified()===t.cropOffsetSpecified()&&((!this.cropOffsetSpecified()||this.cropOffset()===t.cropOffset())&&(this.cropOffsetImportant()===t.cropOffsetImportant()&&(this.customStyleAsUserStyle()===t.customStyleAsUserStyle()&&(this.allImportant()===t.allImportant()&&(this.pageOtherStyle()===t.pageOtherStyle()&&(this.firstPageOtherStyle()===t.firstPageOtherStyle()&&(this.rootOtherStyle()===t.rootOtherStyle()&&(this.beforeOtherStyle()===t.beforeOtherStyle()&&(this.afterOtherStyle()===t.afterOtherStyle()&&!(!this.viewerFontSize!=!t.viewerFontSize||this.viewerFontSize&&this.viewerFontSize()!==t.viewerFontSize())))))))))))))))))))))))))))))))))))))))))))}}T.Mode=w,T.Constants=x,T.PresetSize=N;var I={escapeUnicodeChar:t=>`\\u${(65536|t.charCodeAt(0)).toString(16).substring(1)}`,escapeUnicodeString(t){return t.replace(/[^-a-zA-Z0-9_]/g,this.escapeUnicodeChar)},percentEncodeAmpersandAndUnencodedPercent:t=>t.replace(/%(?![0-9A-Fa-f]{2})/g,"%25").replace(/&/g,"%26"),percentEncodeAmpersandAndPercent:t=>t.replace(/%/g,"%25").replace(/&/g,"%26"),percentDecodeAmpersandAndPercent:t=>t.replace(/%26/g,"&").replace(/%25/g,"%"),percentEncodeForDataURI:t=>encodeURI(t).replace(/#/g,"%23").replace(/&/g,"%26")};function P(t){return new RegExp(`[#&]${I.escapeUnicodeString(t)}=([^&]*)`,"g")}const k=new class{constructor(){this.localStorageKey=null,this.history=window.history,this.location=window.location,this.storedUrl=this.location.href}getBaseURL(){let t=this.location.href;return t=t.replace(/#.*$/,""),t.replace(/\/[^/]*$/,"/")}hasParameter(t){const e=this.location.href;return P(t).test(e)}getParameter(t){const e=this.location.href,n=P(t),i=[];let u;for(;u=n.exec(e);)i.push(u[1]);return i}setParameter(t,e,n){var i;const u=this.location.href;let r=u;const o=P(t);let a=o.exec(u);if(a&&n)for(;n-- >=1;)a=o.exec(u);if(a){const t=a[1].length,n=a.index+a[0].length-t;r=u.substring(0,n)+e+u.substring(n+t)}else r=`${u+(u.match(/[#&]$/)?"":u.match(/#/)?"&":"#")+t}=${e}`,"src"===t&&(r=r.replace(/#(?!src)(.*?)&(src=[^&]*)/,"#$2&$1"));r!==u&&((null===(i=this.history)||void 0===i?void 0:i.replaceState)?this.history.replaceState(null,"",r):this.location.href=r,this.storedUrl=r,this.saveViewSettings())}removeParameter(t,e){var n;const i=this.location.href;let u=i;const r=P(t);let o=r.exec(i);if(o&&e&&(o=r.exec(i)),o){for(;o;o=r.exec(u)){const t=o.index+o[0].length;u="#"==o[0].charAt(0)?u.substring(0,o.index+1)+u.substring(t+1):u.substring(0,o.index)+u.substring(t),r.lastIndex-=o[0].length}u=u.replace(/^(.*?)[#&]$/,"$1")}u!==i&&((null===(n=this.history)||void 0===n?void 0:n.replaceState)?this.history.replaceState(null,"",u):this.location.href=u,this.storedUrl=u,this.saveViewSettings())}enableRestoreView(t){const e=this.generateLocalStorageKey();if(t)this.localStorageKey=e;else{this.localStorageKey=null;try{window.localStorage.removeItem(e)}catch(t){}}}isEnabledRestoreView(){return!!this.localStorageKey}saveViewSettings(){if(this.localStorageKey){this.hasParameter("f")||this.setParameter("f","epubcfi()");try{window.localStorage.setItem(this.localStorageKey,this.location.hash)}catch(t){}}}generateLocalStorageKey(){const t=this.getParameter("src").join();return t?"view@"+t:null}restoreViewSettings(){const t=this.generateLocalStorageKey();if(t)try{const e=window.localStorage.getItem(t);if(e)return this.location.hash=e,!0}catch(t){}return!1}};class O{constructor(t){var e;const n=function(){const t=k.getParameter("src"),e=k.getParameter("b"),n=k.getParameter("x"),i=k.getParameter("bookMode")[0],u=k.getParameter("f")[0],r=k.getParameter("style"),o=k.getParameter("userStyle");return{srcUrls:t.length?t:e.length?e:n.length?n:null,bookMode:"true"===i||"false"!==i&&(!!e.length||!n.length&&!(t.length>1)&&null),fragment:u||null,authorStyleSheet:r.length?r:[],userStyleSheet:o.length?o:[]}}();this.srcUrls=r.observable(n.srcUrls||null),this.bookMode=r.observable(null!==(e=n.bookMode)&&void 0!==e?e:t),this.fragment=r.observable(n.fragment||""),this.authorStyleSheet=r.observable(n.authorStyleSheet),this.userStyleSheet=r.observable(n.userStyleSheet),this.pageStyle=new T,this.dataCustomStyleIndex=-1,this.bookMode.subscribe((e=>{e===t?k.removeParameter("bookMode"):k.setParameter("bookMode",e.toString())})),this.fragment.subscribe((t=>{if(/^epubcfi\(\/([246]\/)?2!\)/.test(t)&&!k.isEnabledRestoreView())k.removeParameter("f");else{const e=t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent);k.setParameter("f",e)}}));const i=(t,e)=>{if(/^data:,.*?\/\*(?:<|%3C)viewer(?:>|%3E)\*\//.test(t)){this.dataCustomStyleIndex=e;const n=t.replace(/^data:,/,"").replace(/%(?![0-9A-Fa-f]{2})/g,"%25"),i=decodeURIComponent(n);return this.pageStyle.cssText(i),!0}return!1};n.authorStyleSheet.find(i)||n.userStyleSheet.find(i)&&this.pageStyle.customStyleAsUserStyle(!0),this.pageStyle.cssText.subscribe((t=>{this.updateCustomStyleSheetFromCSSText(t)}))}toObject(){function t(t){return t.map((t=>({url:t})))}return{fragment:this.fragment(),authorStyleSheet:t(this.authorStyleSheet()),userStyleSheet:t(this.userStyleSheet())}}updateCustomStyleSheetFromCSSText(t){null==t&&(t=this.pageStyle.toCSSText());const e=this.pageStyle.customStyleAsUserStyle(),n=e?"userStyle":"style",i=e?this.userStyleSheet:this.authorStyleSheet,u=i();if((!t||/^\s*(\/\*([^*]|\*(?!\/))*\*\/\s*)*$/.test(t))&&u.length<=(-1==this.dataCustomStyleIndex?0:1))return u.pop(),this.dataCustomStyleIndex=-1,i(u),void k.removeParameter(n);const r="data:,"+I.percentEncodeForDataURI(t.trim());-1==this.dataCustomStyleIndex?(u.push(r),this.dataCustomStyleIndex=u.length-1):u[this.dataCustomStyleIndex]=r,i(u),k.setParameter(n,r,this.dataCustomStyleIndex)}switchCustomStyleUserOrAuthorStyleSheets(){const t=this.pageStyle.customStyleAsUserStyle();if(-1!==this.dataCustomStyleIndex){const[e,n]=t?["style","userStyle"]:["userStyle","style"],[i,u]=t?[this.authorStyleSheet,this.userStyleSheet]:[this.userStyleSheet,this.authorStyleSheet],r=i(),o=u(),a=r[this.dataCustomStyleIndex];a&&(r.splice(this.dataCustomStyleIndex,1),o.push(a),this.dataCustomStyleIndex=o.length-1,i(r),u(o),k.removeParameter(e),k.removeParameter(n),r.forEach(((t,n)=>{k.setParameter(e,t,n)})),o.forEach(((t,e)=>{k.setParameter(n,t,e)})))}}}class R{toSpreadViewString(){switch(this){case L.SPREAD:return"true";case L.SINGLE_PAGE:return"false";case L.AUTO_SPREAD:return"auto";default:throw new Error("Invalid PageViewMode")}}toString(){switch(this){case L.SPREAD:return"spread";case L.SINGLE_PAGE:return"singlePage";case L.AUTO_SPREAD:return"autoSpread";default:throw new Error("Invalid PageViewMode")}}}const L={AUTO_SPREAD:new R,SINGLE_PAGE:new R,SPREAD:new R,defaultMode(){return this.AUTO_SPREAD},fromSpreadViewString(t){switch(t){case"true":return this.SPREAD;case"false":return this.SINGLE_PAGE;default:return this.AUTO_SPREAD}},of(t){switch(t){case c.PageViewMode.SPREAD:return this.SPREAD;case c.PageViewMode.SINGLE_PAGE:return this.SINGLE_PAGE;case c.PageViewMode.AUTO_SPREAD:return this.AUTO_SPREAD;default:throw new Error(`Invalid PageViewMode name: ${t}`)}}};class _{constructor(t){this.zoom=t}get fitToScreen(){return null}getCurrentZoomFactor(t){return 1}toggleFitToScreen(){return new _(1)}zoomIn(t){return new U(1.25*this.getCurrentZoomFactor(t))}zoomOut(t){return new U(.8*this.getCurrentZoomFactor(t))}zoomToActualSize(){return new U(1)}static createDefaultOptions(){return new M}static createFromZoomFactor(t){return new U(t)}}class M extends _{constructor(){super(1)}get fitToScreen(){return!0}toggleFitToScreen(){return new U(1)}getCurrentZoomFactor(t){return t.queryZoomFactor(c.ZoomType.FIT_INSIDE_VIEWPORT)}}class U extends _{get fitToScreen(){return!1}toggleFitToScreen(){return new M}getCurrentZoomFactor(){return this.zoom}}function V(){return{allowScripts:!0,renderAllPages:!0,fontSize:16,profile:!1,pageViewMode:L.defaultMode(),zoom:_.createDefaultOptions(),pixelRatio:8,enableMarker:!1}}function z(t){return t.toPrecision(10).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")}class H{constructor(t){var e,n,i;const u="boolean"==typeof t?t:void 0,o="object"==typeof t?t:void 0;if(this.allowScripts=r.observable(),this.renderAllPages=r.observable(),this.fontSize=r.observable(),this.profile=r.observable(),this.pageViewMode=r.observable(),this.zoom=r.observable(),this.pixelRatio=r.observable(),this.enableMarker=r.observable(),o)this.copyFrom(o);else{const t=V(),r=function(){const t=k.getParameter("allowScripts")[0],e=k.getParameter("renderAllPages")[0],n=k.getParameter("fontSize")[0],i=k.getParameter("enableMarker")[0],u=/^([\d.]+)(?:(%25|%)|\/([\d.]+))?$/.exec(n);let r=null;if(u){const[,t,e,n]=u;r=parseFloat(t),(e||n)&&(r=16*r/(e?100:parseFloat(n))),r<5&&(r=5),r>72&&(r=72)}const o=k.getParameter("zoom")[0],a=parseFloat(o),s=k.getParameter("pixelRatio")[0],l=s&&parseFloat(s);return{allowScripts:"true"===t||"false"!==t&&null,renderAllPages:"true"===e||"false"!==e&&!k.hasParameter("b")&&null,fontSize:r,profile:"true"===k.getParameter("profile")[0],pageViewMode:L.fromSpreadViewString(k.getParameter("spread")[0]),zoom:a>0?_.createFromZoomFactor(a):_.createDefaultOptions(),pixelRatio:l,enableMarker:"true"===i||"false"!==i&&null}}();this.allowScripts(null!==(e=r.allowScripts)&&void 0!==e?e:t.allowScripts),this.renderAllPages(null!==(n=r.renderAllPages)&&void 0!==n?n:u),this.fontSize(r.fontSize||t.fontSize),this.profile(r.profile||t.profile),this.pageViewMode(r.pageViewMode||t.pageViewMode),this.zoom(r.zoom||t.zoom),this.pixelRatio(null!==(i=r.pixelRatio)&&void 0!==i?i:t.pixelRatio),this.enableMarker(r.enableMarker||t.enableMarker),this.pageViewMode.subscribe((e=>{e===t.pageViewMode?k.removeParameter("spread"):k.setParameter("spread",e.toSpreadViewString())})),this.renderAllPages.subscribe((t=>{t===u?k.removeParameter("renderAllPages"):k.setParameter("renderAllPages",t.toString())})),this.fontSize.subscribe((e=>{"number"==typeof e&&(e=z(e)),Number(e)==t.fontSize?k.removeParameter("fontSize"):k.setParameter("fontSize",`${e}/${t.fontSize}`)})),this.zoom.subscribe((t=>{t.fitToScreen?k.removeParameter("zoom"):k.setParameter("zoom",z(t.getCurrentZoomFactor()))})),this.enableMarker.subscribe((t=>{t?k.setParameter("enableMarker","true"):k.removeParameter("enableMarker")}))}}copyFrom(t){this.allowScripts(t.allowScripts()),this.renderAllPages(t.renderAllPages()),this.fontSize(t.fontSize()),this.profile(t.profile()),this.pageViewMode(t.pageViewMode()),this.zoom(t.zoom()),this.pixelRatio(t.pixelRatio()),this.enableMarker(t.enableMarker())}toObject(){return{allowScripts:this.allowScripts(),renderAllPages:this.renderAllPages(),fontSize:Number(this.fontSize()),pageViewMode:this.pageViewMode().toString(),fitToScreen:this.zoom().fitToScreen,zoom:this.zoom().zoom,pixelRatio:this.pixelRatio()}}}H.getDefaultValues=V;var G,j=r.observableArray();!function(t){t.Debug="debug",t.Info="info",t.Warn="warn",t.Error="error"}(G||(G={}));class W{static getLogger(){return new W}constructor(){this.logLevel=G.Error}setLogLevel(t){this.logLevel=t}debug(t){this.logLevel===G.Debug&&j.push({type:"debug",content:t})}info(t){this.logLevel!==G.Debug&&this.logLevel!==G.Info||j.push({type:"info",content:t})}warn(t){this.logLevel!==G.Debug&&this.logLevel!==G.Info&&this.logLevel!==G.Warn||j.push({type:"warn",content:t})}error(t){var e;if(this.logLevel===G.Debug||this.logLevel===G.Info||this.logLevel===G.Warn||this.logLevel===G.Error){if(null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.toString().includes("history.replaceState()"))return;j.push({type:"error",content:t})}}}const X={readonlyObservable(t){const e=r.observable(t);return{getter:r.pureComputed((()=>e())),value:e}}};class ${constructor(t,e){this.viewerOptions=e,this.documentOptions=null,this.coreViewer=new c.CoreViewer(t,e.toObject());const n=this.privState={status:X.readonlyObservable(c.ReadyState.LOADING),pageProgression:X.readonlyObservable(c.PageProgression.LTR)};this.state={status:n.status.getter.extend({rateLimit:{timeout:100,method:"notifyWhenChangesStop"},notify:"always"}),navigatable:r.pureComputed((()=>n.status.value()&&n.status.value()!==c.ReadyState.LOADING)),fixedLayout:r.observable(),pageProgression:n.pageProgression.getter},this.epage=r.observable(),this.epageCount=r.observable(),this.firstPage=r.observable(),this.lastPage=r.observable(),this.tocVisible=r.observable(),this.tocPinned=r.observable(),this.inputUrl=r.observable(""),this.rerenderTrigger=r.observable(!1),this.setupViewerEventHandler(),this.setupViewerOptionSubscriptions(),window.coreViewer=this.coreViewer}setupViewerEventHandler(){const t=W.getLogger();this.coreViewer.addListener("debug",(e=>{t.debug(e.content)})),this.coreViewer.addListener("info",(e=>{t.info(e.content)})),this.coreViewer.addListener("warn",(e=>{t.warn(e.content)})),this.coreViewer.addListener("error",(e=>{t.error(e.content)})),this.coreViewer.addListener("readystatechange",(()=>{const t=this.coreViewer.readyState;t!==c.ReadyState.INTERACTIVE&&t!==c.ReadyState.COMPLETE||this.privState.pageProgression.value(this.coreViewer.getCurrentPageProgression()),this.privState.status.value(t)})),this.coreViewer.addListener("loaded",(()=>{this.viewerOptions.profile()&&c.profiler.printTimings(),this.rerenderTrigger(!this.rerenderTrigger())}));let e=0;this.coreViewer.addListener("nav",(t=>{var n,i,u,r;const{cfi:o,first:a,last:s,epage:l,epageCount:c,metadata:h,docTitle:D}=t;if(this.rerenderTrigger(!this.rerenderTrigger()),o&&(e&&window.clearTimeout(e),e=window.setTimeout((()=>{this.documentOptions.fragment(o),e=0}),300)),void 0!==l&&this.epage(l),void 0!==c&&this.epageCount(c),void 0!==a&&this.firstPage(a),void 0!==s&&this.lastPage(s),h||D){let t=document.title;const e=null===(i=null===(n=null==h?void 0:h["http://purl.org/dc/terms/title"])||void 0===n?void 0:n[0])||void 0===i?void 0:i.v;t=e?!D||D===e||this.firstPage()||/\.xhtml$/.test(D)?e:`${D} | ${e}`:D||"Vivliostyle Viewer",t!==document.title&&(document.title=t);const o=null===(r=null===(u=null==h?void 0:h["http://www.idpf.org/vocab/rendition/#layout"])||void 0===u?void 0:u[0])||void 0===r?void 0:r.v;o&&this.state.fixedLayout("pre-paginated"===o)}const d=this.tocVisible(),f=this.coreViewer.isTOCVisible();d&&!f||this.tocVisible(f)})),this.coreViewer.addListener("hyperlink",(t=>{t.internal?(window.history.pushState(null,null),this.navigateToInternalUrl(t.href),this.tocVisible()&&this.tocVisible(!1),document.getElementById("vivliostyle-viewer-viewport").focus()):window.location.href=t.href}))}setupViewerOptionSubscriptions(){r.computed((()=>{const t=this.viewerOptions.toObject();this.coreViewer.setOptions(t)})).extend({rateLimit:0})}loadDocument(t,e){this.privState.status.value(c.ReadyState.LOADING),e&&this.viewerOptions.copyFrom(e),this.documentOptions=t,t.srcUrls()?t.bookMode()?this.coreViewer.loadPublication(t.srcUrls()[0],t.toObject(),this.viewerOptions.toObject()):this.coreViewer.loadDocument(t.srcUrls(),t.toObject(),this.viewerOptions.toObject()):this.privState.status.value(void 0)}navigateToPrevious(){this.coreViewer.navigateToPage(c.Navigation.PREVIOUS)}navigateToNext(){this.coreViewer.navigateToPage(c.Navigation.NEXT)}navigateToLeft(){this.coreViewer.navigateToPage(c.Navigation.LEFT)}navigateToRight(){this.coreViewer.navigateToPage(c.Navigation.RIGHT)}navigateToFirst(){this.coreViewer.navigateToPage(c.Navigation.FIRST)}navigateToLast(){this.coreViewer.navigateToPage(c.Navigation.LAST)}navigateToEPage(t){this.coreViewer.navigateToPage(c.Navigation.EPAGE,t)}navigateToInternalUrl(t){this.coreViewer.navigateToInternalUrl(t)}navigateToPosition(t){this.coreViewer.navigateToPosition(t)}queryZoomFactor(t){return this.coreViewer.queryZoomFactor(t)}epageToPageNumber(t){if(!t&&0!=t)return;return Math.round(t+1)}epageFromPageNumber(t){if(!t&&0!=t)return;return t-1}showTOC(t,e){if(null==this.coreViewer.isTOCVisible())return;const n=null==t?!this.tocVisible():t;this.tocVisible(n),this.tocPinned(!!n&&!e),this.coreViewer.showTOC(n,e)}}const K={Unidentified:"Unidentified",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",Home:"Home",End:"End",PageDown:"PageDown",PageUp:"PageUp",Escape:"Escape",Enter:"Enter",Space:" "};var q={Keys:K,identifyKeyFromEvent:function(t){const e=t.key,n=t.keyIdentifier,i=t.location;return e===K.ArrowDown||"Down"===e||"Down"===n?t.metaKey?K.End:K.ArrowDown:e===K.ArrowLeft||"Left"===e||"Left"===n?K.ArrowLeft:e===K.ArrowRight||"Right"===e||"Right"===n?K.ArrowRight:e===K.ArrowUp||"Up"===e||"Up"===n?t.metaKey?K.Home:K.ArrowUp:e===K.Escape||"Esc"===e||"U+001B"===n?K.Escape:e===K.Enter||"Enter"===n?K.Enter:e===K.Space||"U+0020"===n?K.Space:"0"===e||"U+0030"===n?"0":"+"===e||"Add"===e||"U+002B"===n||"U+00BB"===n||"U+004B"===n&&i===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD?"+":"-"===e||"Subtract"===e||"U+002D"===n||"U+00BD"===n||"U+004D"===n&&i===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD?"-":e||n||K.Unidentified}};const Y=t=>{const e=document.getElementById("vivliostyle-viewer-viewport").style,n=parseFloat(e.getPropertyValue("--viv-outputPixelRatio")||"1")/parseFloat(e.getPropertyValue("--viv-devicePixelRatio")||"1");return new DOMRect(t.x*n,t.y*n,t.width*n,t.height*n)},Z=(t,e)=>{let n=t.x-e.x,i=t.y-e.y,u=t.width,r=t.height;const o=document.getElementById("vivliostyle-viewer-viewport").style,a=parseFloat(o.getPropertyValue("--viv-outputScale")||"1");return a&&!isNaN(a)&&(n/=a,i/=a,u/=a,r/=a),new DOMRect(n,i,u,r)},Q=s.i18n.t.bind(s.i18n),J=t=>{switch(t){case"red":return"rgba(255,0, 0,0.2)";case"green":return"rgba(0,255,0,0.2)";case"yellow":return"rgba(255,217,0,0.3)";default:return""}},tt=t=>{if(t.firstChild)return t.firstChild;for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}},et=t=>{let e;return e=1==t.nodeType?t:t.parentElement,!!e.closest("[data-adapt-eloff]")},nt=(t,e)=>{const n=[];for(let i=t.node;i;i=tt(i)){if(3==i.nodeType&&!i.parentElement.closest("rt,[data-adapt-spec]")&&et(i)){const u=i;if(u.data.trim().length>0){const r=i==t.node?t.offset:0,o=i==e.node?e.offset:u.data.length;o>r&&n.push({t:u,startOffset:r,endOffset:o})}}if(i==e.node)break}return n},it=t=>{const e=document.createRange();return e.setStart(t.t,t.startOffset),e.setEnd(t.t,t.endOffset),[...e.getClientRects()].map((t=>Y(t)))},ut=(t,e)=>!!e.querySelector(`[${dt.idAttr}="${t}"]`),rt=(t,e)=>{e.background&&(t.style.background=e.background)},ot=(t,e,n,i)=>{const u=t.node.parentElement.closest("[data-vivliostyle-page-container='true']"),r=e.node.parentElement.closest("[data-vivliostyle-page-container='true']");if(i&&ut(i.uniqueIdentifier,u)&&ut(i.uniqueIdentifier,r))return"";const o=nt(t,e),a=(null==i?void 0:i.uniqueIdentifier)||dt.notCreatedId,s=t=>{const e=t.clientX,n=t.clientY;bt.openEditMenu(e,n,a)};let l=0;const c=[];return o.forEach((t=>{c.push(t.t.data.slice(t.startOffset,t.endOffset));const e=t.t.parentElement.closest("[data-vivliostyle-page-container='true']"),i=Y(e.getBoundingClientRect()),u=at(e),r=st(e);for(const o of it(t)){const t=Z(o,i),c=`${r}-${u}-${l++}`;if(document.querySelector(`[${dt.idAttr}='${a}'][data-mn='${c}']`))return;const h=document.createElement("div");h.style.position="absolute",h.style.margin="0",h.style.padding="0",h.style.top=`${t.top}px`,h.style.left=`${t.left}px`,h.style.width=`${t.width}px`,h.style.height=`${t.height}px`,rt(h,n),h.setAttribute(dt.idAttr,a),h.setAttribute("data-mn",`${c}`),h.addEventListener("click",s),e.appendChild(h)}})),c.join("")},at=t=>{const e=parseInt(t.getAttribute("data-vivliostyle-page-index"));return isNaN(e)?-1:e},st=t=>{const e=parseInt(t.getAttribute("data-vivliostyle-spine-index"));return isNaN(e)?-1:e},lt=(t,e)=>{const n=t.parentElement.closest("[data-vivliostyle-page-container]"),i=st(n),u=t.parentElement.closest("[data-adapt-eloff]"),r=[];let o=t;for(;o&&o!==u;)r.unshift(o),o=o.parentElement;const a=parseInt(u.getAttribute("data-adapt-eloff"));let s=a+e;const l=ht(i,a);let c=0,h=-1,D=0;for(const t of l.values()){if(t==u)break;const e=[...t.childNodes].filter((t=>!(1==t.nodeType&&t.hasAttribute("data-adapt-spec"))));let n=e.length;if(n>0){s+=e.map((t=>t.textContent.length)).reduce(((t,e)=>t+e)),3==e[0].nodeType&&3==h&&(n-=1);const t=e[e.length-1];h=t.nodeType,3==h?D+=t.data.length:D=0}c+=n}const d=[...u.childNodes].filter((t=>!(1==t.nodeType&&t.hasAttribute("data-adapt-spec")))),f=d.indexOf(r[0]);f>0&&(s+=d.map(((t,e)=>e<f?t.textContent.length:0)).reduce(((t,e)=>t+e)));const p=[];if(0==f&&3==r[0].nodeType&&3==h)e+=D,r.length>1&&console.warn("should not reach here; nodePath[0] is text and nodePath is deeper"),p.push(c-1);else{c+=f+1,3==h&&3==d[0].nodeType&&c--,p.push(c-1);let t=0;for(;t<r.length-1;){const e=[...r[t].childNodes].indexOf(r[t+1]);p.push(e),t++}}return new Dt(i,a,p,e,s)},ct=t=>{const e=ht(t.spineIndex,t.eloff);let n,i=0,u=-1,r=0;for(const o of e.values()){const e=[...o.childNodes].filter((t=>!(1==t.nodeType&&t.hasAttribute("data-adapt-spec")))),a=e.length;if(a>0){3==e[0].nodeType&&3==u&&i--;const o=i+a;if(o>t.nodePath[0])if(i==t.nodePath[0]&&3==e[0].nodeType){const i=e[0];if(r<=t.offset&&t.offset<=r+i.data.length){n=i;break}}else{if(o!=t.nodePath[0]+1||3!=e[e.length-1].nodeType){let u=e[t.nodePath[0]-i];for(let e=1;e<t.nodePath.length;e++)u.childNodes&&u.childNodes.length>t.nodePath[e]&&(u=u.childNodes[t.nodePath[e]]);n=u,r=0;break}{const i=e[e.length-1];if(t.offset<=i.data.length){n=i,r=0;break}}}const s=e[e.length-1];u=s.nodeType,3==u?r+=s.data.length:r=0}i+=a}return n?{node:n,offset:t.offset-r}:null},ht=(t,e)=>{const n=`[data-vivliostyle-spine-index='${t}'] [data-adapt-eloff='${e}']`;return Array.from(document.querySelectorAll(n)).filter((t=>!t.querySelector(n)))};class Dt{constructor(t,e,n,i,u){this.spineIndex=t,this.eloff=e,this.nodePath=n,this.offset=i,this.offsetInItem=u}toString(){return`${this.spineIndex}-${this.eloff}-${this.nodePath.join("/")}-${this.offset}-${this.offsetInItem}`}static fromString(t){const[e,n,i,u,r]=t.split("-").map((t=>t.trim())),o=i.split("/").map((t=>parseInt(t)));return new Dt(parseInt(e),parseInt(n),o,parseInt(u),parseInt(r))}}class dt{constructor(t,e,n,i,u){this.start=t,this.end=e,this.color=n,this.memo=i,this.markedText=u,this.uniqueIdentifier=dt.notCreatedId}markInfoString(){return`${this.start},${this.end},${this.color}`}toMarkJson(){return{mark:this.markInfoString(),id:this.uniqueIdentifier,memo:this.memo,markedText:this.markedText}}isPersisted(){return this.uniqueIdentifier&&this.uniqueIdentifier!=dt.notCreatedId}static fromMarkInfoString(t){const[e,n,i]=t.split(","),u=Dt.fromString(e),r=Dt.fromString(n);return new dt(u,r,i,"","")}static fromMarkJson(t){const e=dt.fromMarkInfoString(t.mark);return e.uniqueIdentifier=t.id,e.memo=t.memo,e.markedText=t.markedText,e}}dt.idAttr="data-viv-marker-id",dt.notCreatedId="not-created";const ft=t=>{bt.openStartButton(t)};class pt{currentId(){return""}deletable(){return!1}cancellable(){return!1}applyEditing(){}colorChanged(){}deleteCurrentEditing(){}close(){}}class gt{constructor(){this.start=(t,e)=>{this.currentStart=t,this.currentEnd=e;const n=ct(this.currentStart),i=ct(this.currentEnd);if(n&&i){const t=J(bt.currentEditingColor());return this.currentText=ot(n,i,{background:t}),!0}return!1},this.deletable=()=>!1,this.cancellable=()=>!0,this.deleteCurrentEditing=async()=>{},this.currentId=()=>dt.notCreatedId,this.applyEditing=async()=>{if(this.currentStart&&this.currentEnd){const t=new dt(this.currentStart,this.currentEnd,bt.currentEditingColor(),bt.currentEditingMemo(),this.currentText);await At.persistMark(t)}bt.closeMenu()},this.colorChanged=async()=>{0==this.cancellable()&&this.applyEditing()},this.close=async()=>{document.querySelectorAll(`[${dt.idAttr}="${dt.notCreatedId}"]`).forEach((t=>{t.remove()}))}}}class Et{constructor(){this.deletable=()=>!0,this.cancellable=()=>!0,this.deleteCurrentEditing=async()=>{this.currentEditing&&await At.removeMark(this.currentEditing)},this.currentId=()=>{var t;return null===(t=this.currentEditing)||void 0===t?void 0:t.uniqueIdentifier},this.applyEditing=async()=>{this.currentEditing&&(bt.currentEditingColor()==this.currentEditing.color&&bt.currentEditingMemo()==this.currentEditing.memo||(this.currentEditing.color=bt.currentEditingColor(),this.currentEditing.memo=bt.currentEditingMemo(),At.updateMark(this.currentEditing))),bt.closeMenu()},this.colorChanged=async()=>{},this.close=async()=>{if(this.currentEditing){const t=J(this.currentEditing.color);t.length>0&&document.querySelectorAll(`[${dt.idAttr}="${this.currentEditing.uniqueIdentifier}"]`).forEach((e=>{e.style.background=t})),this.currentEditing=void 0}}}}class Ct{constructor(t){this.parent=t,this.editingColorChanged=async t=>{if(!At.enabled())return;const e=this.markAction().currentId(),n=J(t);n.length>0&&document.querySelectorAll(`[${dt.idAttr}="${e}"]`).forEach((t=>{t.style.background=n})),await this.markAction().colorChanged()},this.openMenu=(t,e)=>{if(this.menuOpened())return;const n=document.getElementById("vivliostyle-text-selection-edit-menu");n&&(n.style.top=`${e}px`,n.style.left=`${t}px`);const i=this.menuOpened.subscribe((e=>{if(e){const e=document.getElementById("vivliostyle-text-selection-edit-menu"),n=document.querySelector("[data-vivliostyle-outer-zoom-box]");if(e&&n){const i=e.getBoundingClientRect(),u=n.getBoundingClientRect();let r=t-i.width;r+i.width>u.right&&(r=u.right-i.width-10),r<u.left&&(r=u.left),e.style.left=`${r}px`,i.bottom>u.bottom&&(e.style.top=u.bottom-i.height-10+"px")}}i.dispose()}));this.startButtonOpened(!1),this.menuOpened(!0)},this.closeStartButton=()=>{At.enabled()&&this.startButtonOpened(!1)},this.openEditMenu=async(t,e,n)=>{if(!At.enabled())return;const i=await this.parent.getMark(n);this.currentEditingColor(i.color),this.currentEditingMemo(i.memo),this.editAction.currentEditing=i,this.markAction(this.editAction),this.openMenu(t,e)},this.closeMenu=async()=>{At.enabled()&&(await this.markAction().close(),this.markAction(this.emptyAction),this.menuOpened(!1))},this.applyEditing=async()=>{At.enabled()&&await this.markAction().applyEditing()},this.deleteCurrentEditing=async()=>{At.enabled()&&(confirm(Q("CONFIRM_DELETE"))&&await this.markAction().deleteCurrentEditing(),await this.closeMenu())},this.openSelectionMenu=(t,e,n,i,u)=>{At.enabled()&&(this.currentEditingColor("yellow"),this.currentEditingMemo(""),this.newMarkAction.start(n,i)&&(u.empty(),this.markAction(this.newMarkAction),this.openMenu(t,e)))},this.openStartButton=async t=>{if(At.enabled()&&"Range"==t.type){const e=t.getRangeAt(0);if(!e.commonAncestorContainer.parentElement.closest("[data-vivliostyle-outer-zoom-box]"))return;const n=document.getElementById("vivliostyle-text-selection-start-button"),i={node:e.startContainer,offset:e.startOffset},u={node:e.endContainer,offset:e.endOffset},r=nt(i,u);if(0==r.length)return;const o=r.reduce(((t,e)=>t.concat(it(e))),[]);if(0==o.length)return;const a=lt(r[0].t,r[0].startOffset),s=lt(r[r.length-1].t,r[r.length-1].endOffset),l=o[o.length-1].left,c=o[o.length-1].bottom,h=e=>{e.stopPropagation(),n&&n.removeEventListener("click",h),this.openSelectionMenu(l,c,a,s,t)};n&&(n.style.top=`${c}px`,n.style.left=`${l}px`,n.addEventListener("click",h));const D=this.startButtonOpened.subscribe((t=>{if(t){const t=document.querySelector("[data-vivliostyle-outer-zoom-box]");if(n&&t){const e=n.getBoundingClientRect(),i=t.getBoundingClientRect();let u=l-e.width;u+e.width>i.right&&(u=i.right-e.width-10),u<i.left&&(u=i.left),n.style.left=`${u}px`,e.bottom>i.bottom&&(n.style.top=i.bottom-e.height-10+"px")}}else n.removeEventListener("click",h),D.dispose()}));this.startButtonOpened(!0)}},this.menuOpened=r.observable(!1),this.startButtonOpened=r.observable(!1),this.currentEditingColor=r.observable(""),this.currentEditingMemo=r.observable(""),this.currentEditingColor.subscribe(this.editingColorChanged),this.editAction=new Et,this.newMarkAction=new gt,this.emptyAction=new pt,this.markAction=r.observable(this.emptyAction),this.deletable=r.pureComputed((()=>this.markAction().deletable())).extend({notify:"always"}),this.cancellable=r.pureComputed((()=>this.markAction().cancellable())).extend({notify:"always"})}init(){const t=document.getElementById("vivliostyle-text-selection-edit-menu");let e=0,n=0;const i=i=>{const u=i.clientX-e,r=i.clientY-n;e=i.clientX,n=i.clientY,t.style.top=`${t.offsetTop+r}px`,t.style.left=`${t.offsetLeft+u}px`};t.addEventListener("mousedown",(t=>{"vivliostyle-memo-edit-area"!==t.target.id&&(e=t.clientX,n=t.clientY,document.addEventListener("mousemove",i),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",i)})))}))}}let vt=0;class Ft{constructor(){this.markArray=[],this.documentId="",this.markKeyToArrayIndex=new Map}async init(t){k.getParameter("mark").forEach((t=>{const e=this.urlStringToMark(t);this.pushMarkInternal(e,"doNotAddToUrl","persist")})),this.documentId=t}async persistMark(t){return this.pushMarkInternal(t,"addToUrl","persist")}async updateMark(t){await this.removeMark(t),this.pushMarkInternal(t,"addToUrl","doNotPersist")}async getMark(t){const e=this.markKeyToArrayIndex.get(t);return this.markArray[e]}async removeMark(t){const e=this.markKeyToArrayIndex.get(t.id);this.markArray.splice(e,1),this.markRemoved()}async allMarks(){return this.markArray}async allMarksIterator(){const t=this.markArray;return async function*(){let e=0;for(;e<t.length;){const n=t[e++];yield n}}()}markToURLString(t){const e=t.memo?encodeURIComponent(t.memo):"",n=t.markedText?encodeURIComponent(t.markedText):"";return`${t.mark}%1F${e}%1F${n}`}urlStringToMark(t){const[e,n,i]=t.split("%1F",3);return{mark:e,id:"",memo:n?decodeURIComponent(n):"",markedText:i?decodeURIComponent(i):""}}pushMarkInternal(t,e,n){if("persist"==n&&(t.id=""+vt++),this.markArray.push(t),this.markKeyToArrayIndex.set(t.id,this.markArray.length-1),"addToUrl"==e){const e=k.getParameter("mark").length;k.setParameter("mark",this.markToURLString(t),e)}return t.id}async markRemoved(){this.markKeyToArrayIndex.clear(),k.removeParameter("mark"),this.markArray.forEach(((t,e)=>{k.setParameter("mark",this.markToURLString(t),e),this.markKeyToArrayIndex.set(t.id,e)}))}}class mt{constructor(t){this.parent=t,this.removeAllMarks=async()=>{if(confirm(Q("CONFIRM_REMOVE_ALL"))){const t=this.list.removeAll();for(const e of t)await this.parent.removeMark(e)}},this.removeOneMark=async t=>{confirm(Q("CONFIRM_REMOVE"))&&await this.parent.removeMark(t)},this.updateActualMark=async t=>{this.parent.actualStore.updateMark(t.toMarkJson())},this.navigateToMark=t=>{const{spineIndex:e,offsetInItem:n}=t.start;window.history.pushState(null,null),this.parent.viewer.navigateToPosition({spineIndex:e,offsetInItem:n}),this.pinned()||(this.detailsElement.open=!1)},this.hasMarks=()=>this.list().length>0&&this.parent.enabled(),this.pinned=r.observable(!1),this.list=r.observableArray()}init(){this.detailsElement=document.getElementById("vivliostyle-marks-box")}addMarkToList(t){let e=-1;const n=this.list();for(let i=0;i<n.length;i++){const u=n[i];if(u.uniqueIdentifier===t.uniqueIdentifier)return void this.list.replace(u,t);if(u.start.spineIndex===t.start.spineIndex){if(u.start.offsetInItem>t.start.offsetInItem){e=i;break}}else if(u.start.spineIndex>t.start.spineIndex){e=i;break}}-1===e&&(e=n.length),this.list.splice(e,0,t)}removeMarkFromList(t){this.list.remove((e=>e.uniqueIdentifier===t.uniqueIdentifier))}}const At=new class{constructor(){this.menuStatus=new Ct(this),this.marksBox=new mt(this),this.initialized=!1,this.justClicked=!1}enabled(){return this.initialized&&this.viewerOptions.enableMarker()}async init(t,e){if(t&&(this.viewerOptions=t),e&&(this.viewer=e),!this.viewerOptions||!this.viewerOptions.enableMarker())return;this.menuStatus.init(),this.marksBox.init(),window.marksStorePlugin?this.actualStore=window.marksStorePlugin:this.actualStore=new Ft;const n=k.getParameter("src").join();await this.actualStore.init(n),this.initialized=!0}async toggleEnableMarker(){this.enabled()?this.justClicked?(this.justClicked=!1,this.marksBox.pinned(!0),this.marksBox.detailsElement.open=!0):(document.querySelectorAll(`[${dt.idAttr}]`).forEach((t=>{t.remove()})),this.menuStatus.startButtonOpened()&&this.menuStatus.closeStartButton(),this.menuStatus.menuOpened()&&this.menuStatus.closeMenu(),this.viewerOptions.enableMarker(!1),this.justClicked=!0,window.setTimeout((()=>{this.justClicked=!1}),300)):(this.viewerOptions.enableMarker(!0),this.justClicked?(this.justClicked=!1,this.marksBox.pinned(!0),this.marksBox.detailsElement.open=!0):(this.marksBox.pinned(!1),this.justClicked=!0,window.setTimeout((()=>{this.marksBox.detailsElement.firstElementChild.focus(),this.justClicked=!1}),300)),this.initialized||await this.init(),await this.retryHighlightMarks())}async persistMark(t){if(!this.initialized)return;const e=await this.actualStore.persistMark(t.toMarkJson());t.uniqueIdentifier=e,this.highlightMark(t)}async updateMark(t){this.initialized&&(this.unhighlightMark(t),this.highlightMark(t),this.actualStore.updateMark(t.toMarkJson()))}async getMark(t){if(this.initialized)return dt.fromMarkJson(await this.actualStore.getMark(t))}async removeMark(t){this.initialized&&(this.unhighlightMark(t),await this.actualStore.removeMark(t.toMarkJson()))}async retryHighlightMarks(){if(this.enabled())if(this.actualStore.allMarksIterator){const t=await this.actualStore.allMarksIterator();for await(const e of t)e&&this.highlightMark(dt.fromMarkJson(e))}else for await(const t of await this.actualStore.allMarks())t&&this.highlightMark(dt.fromMarkJson(t))}unhighlightMark(t){document.querySelectorAll(`[${dt.idAttr}="${t.uniqueIdentifier}"]`).forEach((t=>{t.remove()})),this.marksBox.removeMarkFromList(t)}highlightMark(t,e=!1){if(!t.isPersisted&&!e)throw"mark is not persisted.";const n=ct(t.start);let i=ct(t.end);if(!n||i||this.viewerOptions.renderAllPages()||(console.log(),i=((t,e)=>{let n=t.node;for(let i=t.node;i;i=tt(i)){if(1==i.nodeType){const t=i;if(t.hasAttribute("data-vivliostyle-outer-zoom-box"))break;if(t.hasAttribute("data-vivliostyle-page-container")&&st(t)>e.spineIndex)break}3==i.nodeType&&et(i)&&(n=i)}return{node:n,offset:n.data.length}})(n,t.end)),n&&i){const e=J(t.color);ot(n,i,{background:e},t)}this.marksBox.addMarkToList(t)}},bt=At.menuStatus,{Keys:yt}=q;class Bt{constructor(t,e,n,i){this.viewerOptions=t,this.viewer=e,this.settingsPanel=n,this.navigateToPrevious=()=>!this.isNavigateToPreviousDisabled()&&(this.viewer.navigateToPrevious(),!0),this.navigateToNext=()=>!this.isNavigateToNextDisabled()&&(this.viewer.navigateToNext(),!0),this.navigateToLeft=()=>!this.isNavigateToLeftDisabled()&&(this.viewer.navigateToLeft(),!0),this.navigateToRight=()=>!this.isNavigateToRightDisabled()&&(this.viewer.navigateToRight(),!0),this.navigateToFirst=()=>!this.isNavigateToFirstDisabled()&&(window.history.pushState(null,null),this.viewer.navigateToFirst(),!0),this.navigateToLast=()=>!this.isNavigateToLastDisabled()&&(window.history.pushState(null,null),this.viewer.navigateToLast(),!0),this.zoomIn=()=>{if(this.isZoomInDisabled())return!1;{const t=this.viewerOptions.zoom();return this.viewerOptions.zoom(t.zoomIn(this.viewer)),!0}},this.zoomOut=()=>{if(this.isZoomOutDisabled())return!1;{const t=this.viewerOptions.zoom();return this.viewerOptions.zoom(t.zoomOut(this.viewer)),!0}},this.zoomToActualSize=()=>{if(this.isZoomToActualSizeDisabled())return!1;{const t=this.viewerOptions.zoom();return this.viewerOptions.zoom(t.zoomToActualSize()),!0}},this.toggleFitToScreen=()=>{if(this.isToggleFitToScreenDisabled())return!1;{const t=this.viewerOptions.zoom();return this.viewerOptions.zoom(t.toggleFitToScreen()),!0}},this.increaseFontSize=()=>{if(this.isIncreaseFontSizeDisabled())return!1;{let t=Number(this.viewerOptions.fontSize());return t=t<10?Math.floor(t)+1:t<20?2*(Math.floor(t/2)+1):t<40?4*(Math.floor(t/4)+1):t<72?8*(Math.floor(t/8)+1):72,this.viewerOptions.fontSize(t),this.updateFontSizeSettings(),!0}},this.decreaseFontSize=()=>{if(this.isDecreaseFontSizeDisabled())return!1;{let t=Number(this.viewerOptions.fontSize());return t=t>40?8*(Math.ceil(t/8)-1):t>20?4*(Math.ceil(t/4)-1):t>10?2*(Math.ceil(t/2)-1):t>5?Math.ceil(t)-1:5,this.viewerOptions.fontSize(t),this.updateFontSizeSettings(),!0}},this.defaultFontSize=()=>{if(this.isDefaultFontSizeDisabled())return!1;{const t=H.getDefaultValues().fontSize;return this.viewerOptions.fontSize(t),this.updateFontSizeSettings(),!0}},this.onfocusPageNumber=(t,e)=>{const n=e.currentTarget;return window.setTimeout((()=>{n.setSelectionRange(0,n.value.length)}),0),!0},this.onmouseupPageSlider=(t,e)=>{if(this.viewerOptions.renderAllPages())return!0;const n=document.getElementById("vivliostyle-page-number"),i=Number(n.value),u=this.viewer.epageFromPageNumber(i);return this.viewer.navigateToEPage(u),!0},this.onwheelPageSlider=(t,e)=>(e.preventDefault(),this.justPageMovedByWheel||0===e.deltaMode&&Math.abs(e.deltaX)<4&&Math.abs(e.deltaY)<4||(Math.abs(e.deltaX)>=Math.abs(e.deltaY)?e.deltaX<0?this.navigateToLeft():this.navigateToRight():e.deltaY<0?this.navigateToPrevious():this.navigateToNext(),"vivliostyle-page-slider"!==e.currentTarget.id&&(this.justPageMovedByWheel=!0,window.setTimeout((()=>{this.justPageMovedByWheel=!1}),166))),!0),this.onwheelViewport=(t,e)=>{const n=document.getElementById("vivliostyle-viewer-viewport");return!!(this.viewer.tocVisible()&&n!=document.activeElement||n.scrollWidth>n.clientWidth||n.scrollHeight>n.clientHeight)||this.onwheelPageSlider(t,e)},this.onclickViewport=(t,e)=>{if(this.pageNumber(),this.settingsPanel.justClicked)return!0;if(this.viewer.tocVisible()&&!this.viewer.tocPinned()){const t=document.querySelector("[data-vivliostyle-toc-box]");t&&!t.contains(document.activeElement)&&this.toggleTOC()}return this.settingsPanel.opened()&&!this.settingsPanel.pinned()&&this.settingsPanel.close(),At.enabled()&&At.marksBox.detailsElement.open&&!At.marksBox.pinned()&&(At.marksBox.detailsElement.open=!1),!0},this.toggleTOC=()=>{if(this.isTOCToggleDisabled())return!1;{let t=0;return this.viewer.tocVisible()?this.justClicked?(this.viewer.showTOC(!0,!1),this.justClicked=!1):(t&&(window.clearInterval(t),t=0),this.viewer.showTOC(!1),this.justClicked=!0,window.setTimeout((()=>{this.justClicked&&(document.getElementById("vivliostyle-viewer-viewport").focus(),this.justClicked=!1)}),300)):(this.justClicked?(this.viewer.showTOC(!0,!1),this.justClicked=!1):(this.viewer.showTOC(!0,!0),this.justClicked=!0),t=window.setInterval((()=>{const e=document.querySelector("[data-vivliostyle-toc-box]");e&&"visible"===e.style.visibility&&(e.tabIndex=0,e.focus(),window.clearInterval(t),t=0),this.justClicked=!1}),300)),!0}},this.navigateTOC=t=>{const e=Array.from(document.querySelectorAll("[data-vivliostyle-toc-box]>*>*>*>*>*:not([hidden]) [tabindex='0'],[data-vivliostyle-toc-box]>*>*>*>*>*:not([hidden]) a[href]:not([tabindex='-1'])"));let n=e.indexOf(document.activeElement);const i=t=>e[t]&&"button"===e[t].getAttribute("role"),u=t=>e[t]&&"true"===e[t].getAttribute("aria-expanded");switch(t){case yt.ArrowLeft:if(-1==n){n=e.length-1;break}if(!i(n)&&i(n-1)&&n--,i(n)&&u(n))e[n].click();else for(let t=n-1;t>=0;t--)if(i(t)&&e[t].parentElement.contains(e[n])){n=t;break}break;case yt.ArrowRight:if(-1==n){n=0;break}!i(n)&&i(n-1)&&n--,i(n)&&(u(n)?n+=2:e[n].click());break;case yt.ArrowDown:n++;break;case yt.ArrowUp:if(-1==n){n=e.length-1;break}n>0&&i(--n)&&n--;break;case yt.Home:n=0;break;case yt.End:n=e.length-1;break;case yt.Space:!i(n)&&i(n-1)&&n--,i(n)&&e[n].click()}return i(n)&&n++,e[n]&&e[n].focus(),!0},this.toggleMarker=()=>!this.isMarkerToggleDisabled()&&(At.toggleEnableMarker(),!0),this.handleKey=t=>{if(this.settingsPanel.opened()&&this.settingsPanel.settingsToggle.contains(document.activeElement))return!0;const e=document.getElementById("vivliostyle-page-number"),n=document.getElementById("vivliostyle-viewer-viewport"),i=n.scrollWidth>n.clientWidth,u=n.scrollHeight>n.clientHeight,r=e===document.activeElement,o=this.viewer.tocVisible()&&!r&&n!=document.activeElement;if(!o&&n!=document.activeElement&&n.contains(document.activeElement))return!0;switch(t){case"+":return r||!this.increaseFontSize();case"-":return r||!this.decreaseFontSize();case"0":return r||!this.defaultFontSize();case"1":return r||!this.zoomToActualSize();case yt.ArrowLeft:return o?!this.navigateTOC(t):r||i||!this.navigateToLeft();case yt.ArrowRight:return o?!this.navigateTOC(t):r||i||!this.navigateToRight();case yt.ArrowDown:return o?!this.navigateTOC(t):(n.focus(),u||!this.navigateToNext());case yt.ArrowUp:return o?!this.navigateTOC(t):(n.focus(),u||!this.navigateToPrevious());case yt.PageDown:return!!o||(n.focus(),!this.navigateToNext());case yt.PageUp:return!!o||(n.focus(),!this.navigateToPrevious());case yt.Home:return o?!this.navigateTOC(t):(n.focus(),!this.navigateToFirst());case yt.End:return o?!this.navigateTOC(t):(n.focus(),!this.navigateToLast());case"o":case"O":return n.focus(),!this.zoomOut();case"i":case"I":return n.focus(),!this.zoomIn();case"p":case"P":return n.focus(),!this.print();case"f":case"F":return n.focus(),!this.toggleFitToScreen();case"g":case"G":return e.focus(),!1;case"t":case"T":return n.focus(),!this.toggleTOC();case"m":case"M":return n.focus(),!this.toggleMarker();case yt.Escape:if(At.enabled()){if(At.menuStatus.startButtonOpened())return At.menuStatus.closeStartButton(),!1;if(At.menuStatus.menuOpened())return"vivliostyle-memo-edit-area"===document.activeElement.id||(At.menuStatus.closeMenu(),!1);if(At.marksBox.detailsElement.open)return At.marksBox.detailsElement.open=!1,!1}return this.viewer.tocVisible()?!this.toggleTOC():(n.focus(),!0);case yt.Space:return o?!this.navigateTOC(t):"button"!==document.activeElement.getAttribute("role")||(document.activeElement.click(),!1);default:return!0}},this.print=()=>!this.isPrintDisabled()&&(window.print(),!0),this.justClicked=!1,this.justPageMovedByWheel=!1,this.isDisabled=r.pureComputed((()=>this.settingsPanel.opened()&&!this.settingsPanel.pinned()||!this.viewer.state.navigatable()));const u=r.pureComputed((()=>i.disablePageNavigation||this.isDisabled()));u.subscribe((t=>{const e=document.getElementById("vivliostyle-page-number");e&&(e.disabled=t)})),this.isPageNumberDisabled=r.pureComputed((()=>u())),this.isPageSliderDisabled=r.pureComputed((()=>!(!i.disablePageSlider&&!u())||Number(this.totalPages())<=1)),this.isNavigateToPreviousDisabled=r.pureComputed((()=>!!u()||void 0!==this.viewer.state.status&&this.viewer.firstPage())),this.isNavigateToNextDisabled=r.pureComputed((()=>!!u()||void 0!==this.viewer.state.status&&((!this.viewerOptions.renderAllPages()||this.viewer.state.status()==c.ReadyState.COMPLETE)&&this.viewer.lastPage()))),this.isNavigateToLeftDisabled=r.pureComputed((()=>!!u()||void 0!==this.viewer.state.pageProgression&&(this.viewer.state.pageProgression()===c.PageProgression.LTR?this.isNavigateToPreviousDisabled():this.isNavigateToNextDisabled()))),this.isNavigateToRightDisabled=r.pureComputed((()=>!!u()||void 0!==this.viewer.state.pageProgression&&(this.viewer.state.pageProgression()===c.PageProgression.LTR?this.isNavigateToNextDisabled():this.isNavigateToPreviousDisabled()))),this.isNavigateToFirstDisabled=this.isNavigateToPreviousDisabled,this.isNavigateToLastDisabled=r.pureComputed((()=>!!u()||void 0!==this.viewer.state.status&&(!(!this.viewerOptions.renderAllPages()||this.viewer.state.status()==c.ReadyState.COMPLETE)||this.viewer.lastPage()))),this.hidePageNavigation=!!i.disablePageNavigation;const o=r.pureComputed((()=>i.disableZoom||this.isDisabled()));this.isZoomOutDisabled=o,this.isZoomInDisabled=o,this.isZoomToActualSizeDisabled=o,this.isToggleFitToScreenDisabled=o,this.hideZoom=!!i.disableZoom,this.fitToScreen=r.pureComputed((()=>t.zoom().fitToScreen));const a=r.pureComputed((()=>i.disableFontSizeChange||this.isDisabled()||this.viewer.state.fixedLayout()));if(this.isIncreaseFontSizeDisabled=r.pureComputed((()=>!!a()||Number(this.viewerOptions.fontSize())>=72)),this.isDecreaseFontSizeDisabled=r.pureComputed((()=>!!a()||Number(this.viewerOptions.fontSize())<=5)),this.isDefaultFontSizeDisabled=a,this.hideFontSizeChange=!!i.disableFontSizeChange,this.isTOCToggleDisabled=r.pureComputed((()=>i.disableTOCNavigation||this.isDisabled()||null==this.viewer.tocVisible())),this.hideTOCNavigation=!!i.disableTOCNavigation,this.hidePageSlider=!!i.disablePageSlider,this.isFindBoxDisabled=r.pureComputed((()=>i.disableFind||this.isDisabled()||this.viewer.state.fixedLayout())),this.hideFind=!!i.disableFind,this.isMarkerToggleDisabled=r.pureComputed((()=>i.disableMarker||this.isDisabled())),this.hideMarker=!!i.disableMarker,this.isPrintDisabled=r.pureComputed((()=>!(!i.disablePrint&&!this.isDisabled()&&this.viewer.state.status()==c.ReadyState.COMPLETE))),this.hidePrint=!!i.disablePrint,i.disablePrint){const t=document.createElement("style");t.setAttribute("media","print"),t.textContent="*{display:none}",document.head.appendChild(t)}this.pageNumber=r.pureComputed({read(){return this.viewer.epageToPageNumber(this.viewer.epage())},write(t){const e=this.viewer.epage(),n=this.viewer.epageToPageNumber(e);let i=parseFloat(t.toString().replace(/[０-９]/g,(t=>String.fromCharCode(t.charCodeAt(0)-65248))))||0;if(/^[-+]/.test(t.toString())&&(i=n+i),i<1)i=1;else{const t=this.viewer.epageCount();this.viewerOptions.renderAllPages()?i>t&&(i=t):i>t+1&&(i=t+1)}const u=this.viewer.epageFromPageNumber(i),r=document.getElementById("vivliostyle-page-number");r.value=i.toString(),window.history.pushState(null,null),this.viewer.navigateToEPage(u),window.setTimeout((()=>{this.viewer.state.status()!=c.ReadyState.LOADING&&this.viewer.epage()===e&&(r.value=n.toString()),document.getElementById("vivliostyle-viewer-viewport").focus()}),10)},owner:this}),this.totalPages=r.pureComputed((()=>{let t=this.viewer.epageCount();if(!t)return t;const e=Number(this.pageNumber());return this.viewer.lastPage()||e>t?t=e:e==t&&t++,t})),this.pageSlider=r.pureComputed({read(){const t=Number(this.pageNumber()),e=document.getElementById("vivliostyle-page-slider");return Number(e.max)<t&&(e.max=String(t)),t},write(t){if(this.viewerOptions.renderAllPages()){const e=Number(t),n=this.viewer.epageFromPageNumber(e);this.viewer.navigateToEPage(n)}else{document.getElementById("vivliostyle-page-number").value=String(t)}},owner:this}),this.pageSliderMax=this.totalPages}updateFontSizeSettings(){this.settingsPanel.state.viewerOptions.fontSize(this.viewerOptions.fontSize()),this.viewer.documentOptions.pageStyle.baseFontSizeSpecified()&&(this.viewer.documentOptions.updateCustomStyleSheetFromCSSText(),this.viewer.loadDocument(this.viewer.documentOptions,this.viewerOptions))}}const{Keys:wt}=q;class St{constructor(t,e,n,i,u){this.viewerOptions=t,this.documentOptions=e,this.viewer=n,this.close=()=>{this.opened(!1),this.pinned(!1);const t=document.getElementById("vivliostyle-viewer-viewport");t&&t.focus()},this.toggle=()=>{this.opened()?this.justClicked?(this.justClicked=!1,this.pinned(!0)):(this.close(),this.justClicked=!0,window.setTimeout((()=>{this.justClicked=!1}),300)):(this.viewer.tocPinned()||this.viewer.showTOC(!1),this.opened(!0),this.justClicked?(this.justClicked=!1,this.pinned(!0)):(this.pinned(!1),this.justClicked=!0,this.focusToFirstItem(),window.setTimeout((()=>{this.justClicked=!1}),300)))},this.apply=()=>{const t=this.documentOptions.pageStyle.customStyleAsUserStyle()!==this.state.pageStyle.customStyleAsUserStyle();this.documentOptions.pageStyle.copyFrom(this.state.pageStyle),t&&this.documentOptions.switchCustomStyleUserOrAuthorStyleSheets(),this.documentOptions.pageStyle.baseFontSizeSpecified()&&this.documentOptions.updateCustomStyleSheetFromCSSText(),this.viewer.loadDocument(this.documentOptions,this.state.viewerOptions),this.pinned()?this.focusToFirstItem():this.close()},this.cancel=()=>{this.state.viewerOptions.copyFrom(this.viewerOptions),this.state.pageStyle.copyFrom(this.documentOptions.pageStyle),this.close()},this.uiLanguage=r.pureComputed({read:()=>l.i18n.language,write:t=>{l.setLanguage(t),k.hasParameter("lng")&&k.setParameter("lng",t);try{window.localStorage.setItem("i18nextLng",t)}catch(t){}}}),this.isPageStyleChangeDisabled=!!u.disablePageStyleChange,this.isPageViewModeChangeDisabled=!!u.disablePageViewModeChange,this.isBookModeChangeDisabled=!!u.disableBookModeChange,this.isRenderAllPagesChangeDisabled=!!u.disableRenderAllPagesChange,this.isRestoreViewChangeDisabled=!!u.disableRestoreViewChange,this.isUILanguageChangeDisabled=!!u.disableUILanguageChange,this.justClicked=!1,this.settingsToggle=document.getElementById("vivliostyle-menu-item_settings-toggle"),this.opened=r.observable(!1),this.pinned=r.observable(!1),this.state={viewerOptions:new H(t),pageStyle:new T(e.pageStyle),pageViewMode:r.pureComputed({read:()=>this.state.viewerOptions.pageViewMode().toString(),write:t=>{this.state.viewerOptions.pageViewMode(L.of(t))}}),bookMode:r.observable(e.bookMode()),renderAllPages:r.pureComputed({read:()=>this.state.viewerOptions.renderAllPages(),write:t=>{this.state.viewerOptions.renderAllPages(t)}}),restoreView:r.observable(k.isEnabledRestoreView())},this.state.pageStyle.setViewerFontSizeObservable(this.state.viewerOptions.fontSize),this.defaultPageStyle=new T,this.defaultPageStyle.setViewerFontSizeObservable(r.observable(16)),i.visible.subscribe((t=>{t&&this.close()})),this.state.bookMode.subscribe((t=>{e.bookMode(t)})),this.state.renderAllPages.subscribe((e=>{t.renderAllPages(e)})),this.state.restoreView.subscribe((t=>{k.enableRestoreView(t),t?k.setParameter("restoreView","true"):k.removeParameter("restoreView")})),this.resetCustomStyle=r.pureComputed({read(){if(!this.state.pageStyle.equivalentTo(this.defaultPageStyle))return!1;return document.getElementsByName("vivliostyle-settings_reset-custom-style")[0].checked},write(t){t&&(this.state.pageStyle.copyFrom(this.defaultPageStyle),this.state.viewerOptions.fontSize(H.getDefaultValues().fontSize))},owner:this})}focusToFirstItem(t){const e=t||this.settingsToggle,n=["input","textarea","summary","select"].includes(e.localName)?e:Array.from(e.getElementsByTagName("input")).find((t=>!t.disabled&&("radio"!=t.type||t.checked)));if(n){for(let t=n.parentElement;t&&t!=this.settingsToggle;t=t.parentElement)"details"==t.localName&&(t.open=!0);n.focus()}}handleKey(t){const e=this.opened()&&this.settingsToggle.contains(document.activeElement),n=e&&("text"==document.activeElement.type||"select"==document.activeElement.localName),i=e&&"textarea"==document.activeElement.localName,u=e&&!n&&!i;switch(t){case wt.Escape:return this.opened()&&(this.cancel(),this.close()),!0;case"s":case"S":return!(!this.opened()||u||!e)||(this.toggle(),!1);case"l":case"L":return!u||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_ui-language")[0]),!1);case"p":case"P":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-view-and-rendering").firstElementChild),!1);case"v":case"V":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-view-mode")),!1);case"b":case"B":return!u||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_book-mode")[0]),!1);case"a":case"A":return!u||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_render-all-pages")[0]),!1);case"c":case"C":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_custom-style").firstElementChild),!1);case"m":case"M":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_custom-style_more").firstElementChild),!1);case"z":case"Z":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-size")),!1);case"o":case"O":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_crop-marks")),!1);case"g":case"G":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-margin")),!1);case"k":case"K":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-breaks")),!1);case"i":case"I":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_images")),!1);case"t":case"T":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_text")),!1);case"y":case"Y":return!u||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_priority")),!1);case"e":case"E":return!u||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_edit-css")[0]),!1);case"r":case"R":return!u||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_reset-custom-style")[0]),!1);case wt.Enter:return!(n||u&&"vivliostyle-menu-button_apply"!==document.activeElement.id&&"vivliostyle-menu-button_cancel"!==document.activeElement.id)||(document.getElementById("vivliostyle-menu-button_apply").focus(),!1);default:return!0}}}const{Keys:Nt}=q;var xt;!function(t){t.Default="",t.Searching="Searching",t.Found="Found",t.NotFound="Not Found"}(xt||(xt={}));class Tt{constructor(t,e){this.viewer=t,this.navigation=e,this.cancel=!1,this.intervalID=0,this.foundRange=null,this.toggle=()=>this.opened()?this.close():this.open(),this.open=()=>!this.navigation.isFindBoxDisabled()&&(this.opened(!0),window.setTimeout((()=>{document.getElementById("vivliostyle-find-box").focus()}),0),!0),this.close=()=>!this.navigation.isFindBoxDisabled()&&(this.opened(!1),this.status()===xt.Searching&&(this.cancel=!0),this.status(xt.Default),this.foundRange=null,this.fixHighlight(),!0),this.findPrevious=()=>this.findSub(!0),this.findNext=()=>this.findSub(!1),this.opened=r.observable(),this.text=r.observable(""),this.status=r.observable(xt.Default),this.text.subscribe((t=>{""!=t?k.setParameter("find",I.percentEncodeAmpersandAndUnencodedPercent(t)):k.removeParameter("find")}))}findSub(t){if(this.navigation.isFindBoxDisabled()||this.status()===xt.Searching)return!1;if(this.intervalID)return window.clearInterval(this.intervalID),this.intervalID=0,!0;const e=this.text();if(!e)return!1;const n=this.viewer.epage();let i=-1,u=!1;return this.status(xt.Searching),this.intervalID=window.setInterval((()=>{if(this.cancel)return this.cancel=!1,this.status(xt.Default),window.clearInterval(this.intervalID),void(this.intervalID=0);if(i===this.viewer.epage())return;i=this.viewer.epage(),(u||i!==n)&&window.getSelection().empty();if(this.findText(e,t))return this.status(xt.Found),window.clearInterval(this.intervalID),void(this.intervalID=0);!u&&(t?this.viewer.firstPage():this.viewer.lastPage())?(u=!0,this.viewer.firstPage()&&this.viewer.lastPage()?i=-1:t?this.viewer.navigateToLast():this.viewer.navigateToFirst()):!u||(t?i>n:i<n)?t?this.viewer.navigateToPrevious():this.viewer.navigateToNext():(this.status(xt.NotFound),window.clearInterval(this.intervalID),this.intervalID=0,i!==n&&this.viewer.navigateToEPage(n))}),4),!0}findText(t,e){var n,i;const u=window.getSelection();"Range"!==u.type&&u.empty();const r=window,o=document.getElementById("vivliostyle-menu-find-box");o.style.visibility="hidden",this.foundRange&&0===u.rangeCount&&(u.addRange(this.foundRange),this.foundRange=null,this.fixHighlight());const a=r.find(t,!1,e);return o.style.visibility="",!!a&&((null===(i=null===(n=u.anchorNode)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.closest("[data-adapt-eloff]"))?(this.foundRange=u.getRangeAt(0),this.fixHighlight(),!0):this.findText(t,e))}fixHighlight(){if(!/iPad|iPhone|iPod/.test(navigator.userAgent))return;const t=document.querySelectorAll("[data-viv-found-highlight='true']");for(const e of t)e.remove();if(!this.foundRange)return;const e=this.foundRange.startContainer.parentElement.closest("[data-vivliostyle-page-container='true']"),n=Y(e.getBoundingClientRect());for(const t of this.foundRange.getClientRects()){const i=Z(Y(t),n),u=document.createElement("div");u.setAttribute("data-viv-found-highlight","true"),u.style.position="absolute",u.style.left=`${i.left}px`,u.style.top=`${i.top}px`,u.style.width=`${i.width}px`,u.style.height=`${i.height}px`,u.style.backgroundColor="#0080ff33",e.appendChild(u)}}handleKey(t,e,n){const i=e.ctrlKey||e.metaKey;switch(t){case Nt.Escape:if(i||!this.opened())return!0;if(this.status()===xt.Searching)return this.cancel=!0,!1;if(n&&""!==this.text())return this.text(""),this.status(xt.Default),!1;if(this.close())return!1;break;case"Enter":if(i||!this.opened())return!0;if(n&&document.getElementById("vivliostyle-find-box").blur(),e.shiftKey?this.findPrevious():this.findNext())return!1;break;case"f":case"F":if(!i)return!0;if(this.open())return!1;break;default:this.status(xt.Default)}return!0}}class It{constructor(t){this.list=t,this.visible=r.pureComputed((()=>t().length>0))}getDisplayMessage(t){var e,n;return null!==(n=null===(e=t.error)||void 0===e?void 0:e.toString())&&void 0!==n?n:t.messages.join("\n")}}const{Keys:Pt}=q;class kt{constructor(){var t,e;this.t=l.t,this.i18n=l.i18n;const n=[].concat(null!==(t=document.documentElement.getAttribute("data-vivliostyle-viewer-flags"))&&void 0!==t?t:[],k.getParameter("flags")).join(),i=n.includes("S"),u={disablePageStyleChange:i||n.includes("P"),disablePageViewModeChange:i||n.includes("V"),disableBookModeChange:i||n.includes("B"),disableRenderAllPagesChange:i||n.includes("A"),disableRestoreViewChange:i||n.includes("R"),disableUILanguageChange:i||n.includes("L")},r={disableTOCNavigation:n.includes("T"),disableFind:n.includes("f"),disableMarker:n.includes("m"),disablePageNavigation:n.includes("N"),disableZoom:n.includes("Z"),disableFontSizeChange:n.includes("F"),disablePageSlider:n.includes("s"),disablePrint:n.includes("p")},o=n.includes("c"),a=!n.includes("k"),s=!n.includes("a"),c=n.includes("d");if(i){const t=document.getElementById("vivliostyle-welcome");t&&t.remove();const e=document.querySelector(".vivliostyle-menu-detail"),n=document.querySelector(".vivliostyle-menu-detail-main");e&&n&&(n.style.visibility="hidden",e.style.height="auto")}o&&(document.oncontextmenu=()=>!1),this.documentOptions=new O(a),this.viewerOptions=new H(s),c&&this.viewerOptions.allowScripts(!1),this.documentOptions.pageStyle.setViewerFontSizeObservable(this.viewerOptions.fontSize),this.viewerOptions.profile()&&S.profiler.enable(),this.isDebug="true"===k.getParameter("debug")[0],this.viewerSettings={userAgentRootURL:`${k.getBaseURL()}resources/`,viewportElement:document.getElementById("vivliostyle-viewer-viewport"),debug:this.isDebug};const h=k.getParameter("src"),D=k.getParameter("b"),d=k.getParameter("x");h.length||(D.length?(k.setParameter("src",D[0]),k.hasParameter("bookMode")||k.setParameter("bookMode","true"),k.hasParameter("renderAllPages")||k.setParameter("renderAllPages","false")):d.length&&(d.forEach(((t,e)=>{k.setParameter("src",t,e)})),k.hasParameter("bookMode")||k.setParameter("bookMode","false")));let f=k.getParameter("restoreView")[0];"false"!==f&&(k.hasParameter("f")||k.restoreViewSettings()&&(f=k.getParameter("restoreView")[0]),"true"===f&&k.enableRestoreView(!0)),k.removeParameter("b"),k.removeParameter("x"),k.removeParameter("f",!0),k.removeParameter("spread",!0),k.removeParameter("bookMode",!0),k.removeParameter("allowScripts",!0),k.removeParameter("renderAllPages",!0),k.removeParameter("fontSize",!0),k.removeParameter("zoom",!0),k.removeParameter("find",!0),k.removeParameter("profile",!0),k.removeParameter("debug",!0),k.removeParameter("pixelRatio",!0),k.removeParameter("restoreView",!0),k.removeParameter("lng",!0),this.viewer=new $(this.viewerSettings,this.viewerOptions),this.viewer.inputUrl.subscribe((t=>{""!=t?(k.hasParameter("src")||k.history.pushState&&k.history.pushState(null,""),t=t.startsWith("<")?"data:,"+I.percentEncodeForDataURI(t):I.percentEncodeAmpersandAndUnencodedPercent(t),k.setParameter("src",t),this.documentOptions.srcUrls(k.getParameter("src"))):k.removeParameter("src")})),this.messageDialog=new It(j),this.settingsPanel=new St(this.viewerOptions,this.documentOptions,this.viewer,this.messageDialog,u),this.navigation=new Bt(this.viewerOptions,this.viewer,this.settingsPanel,r),this.findBox=new Tt(this.viewer,this.navigation);const p=decodeURIComponent(null!==(e=k.getParameter("find")[0])&&void 0!==e?e:"");p&&this.findBox.text(p),this.marksStore=At,this.marksStore.init(this.viewerOptions,this.viewer),this.marksMenuStatus=At.menuStatus,this.marksBox=At.marksBox,this.viewer.rerenderTrigger.subscribe((()=>{this.marksStore.retryHighlightMarks()})),this.viewer.loadDocument(this.documentOptions),window.onhashchange=()=>{window.location.href!=k.storedUrl&&window.location.reload()}}handleKey(t,e){if(e.isComposing||e.keyCode&&("Enter"===e.key&&13!==e.keyCode&&16!==e.keyCode||"Escape"===e.key&&27!==e.keyCode))return!0;const n=q.identifyKeyFromEvent(e);if("vivliostyle-input-url"===document.activeElement.id)return"Enter"!==n||(this.viewer.loadDocument(this.documentOptions),!1);if("vivliostyle-find-box"===document.activeElement.id)return this.findBox.handleKey(n,e,!0);let i=this.findBox.handleKey(n,e,!1);return!!i&&(!(n===Pt.Escape||!document.activeElement.closest("#vivliostyle-marks-box, #vivliostyle-text-selection-start-button, #vivliostyle-text-selection-edit-menu, [data-vivliostyle-page-container]"))||(!!("Home"!==n&&"End"!==n&&"p"!==n&&"P"!==n&&(e.ctrlKey||e.metaKey)||e.altKey||e.shiftKey)||(i=this.settingsPanel.handleKey(n),i&&(i=this.navigation.handleKey(n)),i)))}}const Ot="ontouchstart"in window;r.bindingHandlers.menuButton={init(t,e){r.unwrap(e())&&(Ot?(t.addEventListener("touchstart",(()=>{r.utils.toggleDomNodeCssClass(t,"hover active",!0)})),t.addEventListener("touchend",(()=>{r.utils.toggleDomNodeCssClass(t,"hover active",!1)}))):(t.addEventListener("mouseover",(()=>{r.utils.toggleDomNodeCssClass(t,"hover",!0)})),t.addEventListener("mousedown",(()=>{r.utils.toggleDomNodeCssClass(t,"active",!0)})),t.addEventListener("mouseup",(()=>{r.utils.toggleDomNodeCssClass(t,"active",!1)})),t.addEventListener("mouseout",(()=>{r.utils.toggleDomNodeCssClass(t,"hover",!1),r.utils.toggleDomNodeCssClass(t,"active",!1)}))))}};const Rt="ontouchstart"in window;let Lt=null,_t=null,Mt=null;r.bindingHandlers.swipePages={init(t,e){Rt&&r.unwrap(e())&&(t.addEventListener("touchstart",(t=>{if(t.touches.length>1)return;if(window.visualViewport&&window.visualViewport.scale>1)return;const e=document.getElementById("vivliostyle-viewer-viewport");e&&e.scrollWidth>e.clientWidth||"Range"!==document.getSelection().type&&(Lt=t.touches[0].clientX,_t=t.touches[0].clientY)})),t.addEventListener("touchmove",(t=>{if(!(t.touches.length>1)&&"Range"!==document.getSelection().type&&null!==Lt&&null!==_t){const e=t.touches[0].clientX-Lt,n=t.touches[0].clientY-_t;Math.abs(e)>Math.abs(n)&&(Mt=e<0?document.getElementById("vivliostyle-page-navigation-right"):document.getElementById("vivliostyle-page-navigation-left")),Math.abs(e)+Math.abs(n)>=16&&(Mt&&(Mt.click(),r.utils.toggleDomNodeCssClass(Mt,"active",!0)),Lt=null,_t=null)}})),t.addEventListener("touchend",(()=>{Mt&&r.utils.toggleDomNodeCssClass(Mt,"active",!1),Mt=null,Lt=null,_t=null})))}},r.bindingHandlers.textSelection={init(t,e){const n=/iPad|iPhone|iPod/.test(navigator.userAgent);let i=!1;if(r.unwrap(e())){t.addEventListener("mousedown",(()=>{i||"Range"===document.getSelection().type||(i=!0)})),document.addEventListener("mouseup",(()=>{i&&(At.enabled()&&ft(document.getSelection()),i=!1)}));const e=document.getElementById("vivliostyle-page-navigation-left"),u=document.getElementById("vivliostyle-page-navigation-right");e&&u&&(e.onpointermove=u.onpointermove=()=>!1,e.ontouchmove=u.ontouchmove=()=>!1);let r=0;document.addEventListener("selectionchange",(()=>{const t=document.getSelection();if("Range"!==t.type)return;const o=t.getRangeAt(0);if(!o.commonAncestorContainer.parentElement.closest("[data-vivliostyle-spread-container]"))return;const a=o.commonAncestorContainer.parentElement.closest("[data-vivliostyle-page-box] > div"),s=null==a?void 0:a.style.zIndex;r||(e&&u&&(n?(e.style.display="none",u.style.display="none"):(e.style.height="min-content",u.style.height="min-content")),a&&"0"===s&&(a.style.zIndex="1"),r=window.setTimeout((()=>{e&&u&&(e.style.display="",u.style.display="",e.style.height="",u.style.height=""),a&&(a.style.zIndex=s),r=0}),1e3)),!i&&At.enabled()&&(bt.menuOpened()&&bt.applyEditing(),bt.startButtonOpened()&&bt.startButtonOpened(!1),ft(t))}))}}},r.bindingHandlers.clickOutside={init(t,e){const n=r.utils.unwrapObservable(e());document.addEventListener("mousedown",(e=>{"none"!=window.getComputedStyle(t).display&&(t.contains(e.target)||t===e.target||n())}))}};const Ut={en:{translation:{UI_LNG:"en",TIP_UI_Language:"Language of UI",CONFIRM_DELETE:"Do you really want to delete it?",CONFIRM_REMOVE:"Do you really want to remove it?",CONFIRM_REMOVE_ALL:"Do you really want to remove all?",Input_:"Input a document URL or HTML code",Book_Mode:"Book Mode",Render_All_Pages:"Render All Pages",Apply:"Apply",Supported_document_types_:"Supported document types:",HTML_documents_:"HTML documents, with CSS for paged media",Book_like_publications_:"Book-like publications, with Table of Contents",Web_publications_:"Web publications (a collection of HTML documents): specify URL of the first HTML or the manifest file.",Unzipped_EPUB_:"Unzipped EPUB: specify URL of OPF file or top directory of the unzipped EPUB files.",Notes_:"Notes:",GitHub_:"GitHub and Gist URLs can be directly specified. Vivliostyle loads raw github/gist content when such URL is specified.",WARN_Mixed_Content_:"⚠️Mixed Content (“http:” URL is specified to “https:” Vivliostyle Viewer) is usually blocked by browser.",WARN_Cross_Origin_:"⚠️Cross-Origin (request to different domain) is usually blocked by browser unless the server is configured to allow Cross-Origin Resource Sharing (CORS).",URL_parameter_options_:"URL parameter options:",document_URL:"document URL",default_:"(default)",for_Book_like_:"for Book-like publications",DESC_Book_Mode_:"When an HTML document URL is specified, a series of HTML documents linked from the publication manifest or Table of Contents (e.g., marked up with '<nav role=\"doc-toc\">') are automatically loaded.",for_single_HTML_:"for single HTML documents",for_Print_:"for Print (all pages printable, page count works as expected)",for_Read_:"for Read (quick loading with rough page count)",Page_Spread_View:"Page Spread View",Spread_view:"Spread view",Single_page_view:"Single page view",Auto_spread_view:"Auto spread view",additional_stylesheet_URL:"additional (custom) stylesheet URL",user_stylesheet_URL:"user stylesheet URL",Settings:"Settings",DESC_Options_also_1:"Options can also be set in the ",DESC_Options_also_2:" panel.",See_documentation_:"For more details, see documentation:",HREF_User_Guide:"../docs/#/user-guide",Vivliostyle_User_Guide:"Vivliostyle User Guide",HREF_Vivlistyle_Home:"https://vivliostyle.org/",navigate_to_left:"navigate to left",navigate_to_right:"navigate to right",Highlight_:"Highlight…",Marker_Yellow:"Marker: Yellow",Marker_Red:"Marker: Red",Marker_Green:"Marker: Green",OK:"OK",Cancel:"Cancel",Delete:"Delete",TIP_Settings:"Settings (S), Double click/type to pin",Page_View_Mode:"Page View Mode",Auto:"Auto",Single_page:"Single page",Spread:"Spread",TIP_Book_Mode:"On: for Book-like publications, with Table of Contents\nOff: for single HTML documents",TIP_Render_All_Pages:"On: for Print (all pages printable, page count works)\nOff: for Read (quick loading with rough page count)",Restore_View:"Restore View",TIP_Restore_View:"Restore view settings when reopening documents",Custom_Style_Settings:"Custom Style Settings",Page_Size:"Page Size",Default:"Default",DESC_page_size_default:"(=Auto unless specified elsewhere)",DESC_page_size_auto:"(use entire window area)",Preset:"Preset",Landscape:"Landscape",Custom_size:"Custom size",Width:"Width",Height:"Height",More_:"More…",Crop_Marks:"Crop Marks",Crop_marks:"Crop marks",Bleed:"Bleed",Crop_offset:"Crop offset",Page_Margins:"Page Margins",DESC_page_margin_default:"(=10% unless specified elsewhere)",Set_page_margin_to_0:"Set page margin to 0",Custom_margin:"Custom margin",Top_Right_Bottom_Left:"Top/Right/Bottom/Left",Set_first_page_margin_to_0:"Set first page margin to 0",Force_html_body_margin_to_0:"Force html/body margin to 0",Page_Breaks:"Page Breaks",Default_widows_orphans_control:"Default widows/orphans control",Allow_widows_and_orphans:"Allow widows and orphans",Avoid_page_break_inside_paragraph:"Avoid page break inside paragraph",Images:"Images",Set_image_max_size_to_fit_page:"Set image max-size to fit page",Keep_aspect_ratio:"Keep aspect ratio",Text:"Text",Font_size:"Font size",Base_font_size:"Base font-size",Base_line_height:"Base line-height",Base_font_family:"Base font-family",Custom_Style_Priority:"Custom Style Priority",Set_as_user_stylesheet:"Set as user stylesheet",DESC_user_stylesheet:"(lower priority unless !important)",Force_override_document_style:"Force override document style",important_:"(!important)",Edit_CSS:"Edit CSS",Dont_edit_:"Don't edit between /*<viewer>*/ and /*</viewer>*/.",Reset_Custom_Style:"Reset Custom Style",Reset_all_to_default:"Reset all to default",TIP_ToC:"Table of Contents (T), Double click/type to pin",TIP_Marker:"Marker (M), Double click/type to pin",Marks_and_Memos:"Marks and Memos",Remove_All:"Remove All",Remove:"Remove",Memo:"Memo",TIP_Find:"Find (Ctrl/Cmd+F)",TIP_Find_Previous:"Find Previous (Shift+Enter)",TIP_Find_Next:"Find Next (Enter)",Find:"Find",TIP_First_Page:"First Page (Home)",TIP_Previous_Page:"Previous Page (↑)",TIP_Next_Page:"Next Page (↓)",TIP_Last_Page:"Last Page (End)",TIP_Go_to_Page:"Go to Page… (G)",Total_pages:"Total pages",TIP_Text_Smaller:"Text: Smaller (-)",TIP_Text_Larger:"Text: Larger (+)",TIP_Text_Default_Size:"Text: Default Size (0)",TIP_Zoom_Out:"Zoom: Out (O)",TIP_Zoom_In:"Zoom: In (I)",TIP_Zoom_Actual_Size:"Zoom: Actual Size (1)",TIP_Zoom_Fit_to_Screen:"Zoom: Fit to Screen (F)",TIP_Print:"Print (P)"}},ja:{translation:{UI_LNG:"ja",TIP_UI_Language:"UI表示言語 (L)",CONFIRM_DELETE:"本当に削除しますか？",CONFIRM_REMOVE:"本当に削除しますか？",CONFIRM_REMOVE_ALL:"本当にすべて削除しますか？",Input_:"ドキュメントURLまたはHTMLコードを入力",Book_Mode:"Bookモード",Render_All_Pages:"全ページ組版",Apply:"適用",Supported_document_types_:"サポートされている文書の種類：",HTML_documents_:"HTML文書＋ページメディア用のCSS",Book_like_publications_:"本のような出版物（目次付き）",Web_publications_:"Web出版物（複数のHTML文書からなるコレクション）: 最初のHTMLまたはマニフェストファイルのURLを指定します。",Unzipped_EPUB_:"ZIP解凍済みのEPUB: OPFファイルのURLまたは解凍されたEPUBファイルのトップディレクトリを指定します。",Notes_:"メモ：",GitHub_:"GitHubとGistのURLを直接指定することができます。そのようなURLが指定された場合、Vivliostyle は github/gist の raw コンテンツをロードします。",WARN_Mixed_Content_:"⚠️Mixedコンテンツ（“http:” のURLが “https:” の Vivliostyle Viewer に指定された場合）は通常ブラウザによってブロックされます。",WARN_Cross_Origin_:"⚠️Cross-Origin（異なるドメインへのリクエスト）は、サーバーが Cross-Origin Resource Sharing (CORS) を許可するように設定されていない限り、通常はブラウザによってブロックされます。",URL_parameter_options_:"URLパラメータのオプション：",document_URL:"ドキュメントURL",default_:"(デフォルト)",for_Book_like_:"本のような出版物（目次付き）用",DESC_Book_Mode_:"HTML文書のURLが指定された場合、その出版物マニフェストまたは目次（'<nav role=\"doc-toc\">' などでマークアップ）からリンクされた一連のHTML文書が自動的に読み込まれます。",for_single_HTML_:"単体のHTML文書用",for_Print_:"印刷用（すべてのページが印刷可能で、ページ番号は期待されるとおりに機能します）",for_Read_:"閲覧用（おおまかなページ番号を使って、クイックロード）",Page_Spread_View:"ページ見開き表示",Spread_view:"見開き表示",Single_page_view:"単ページ表示",Auto_spread_view:"自動見開き表示",additional_stylesheet_URL:"追加（カスタム）スタイルシートURL",user_stylesheet_URL:"ユーザースタイルシートURL",Settings:"設定",DESC_Options_also_1:"オプションは設定パネル（",DESC_Options_also_2:"）でも設定できます。",See_documentation_:"詳しくは、Vivliostyleのドキュメントをご覧ください：",HREF_User_Guide:"../docs/#/ja/user-guide",Vivliostyle_User_Guide:"Vivliostyle ユーザーガイド",HREF_Vivlistyle_Home:"https://vivliostyle.org/ja/",navigate_to_left:"左にページ移動",navigate_to_right:"右にページ移動",Highlight_:"ハイライト…",Marker_Yellow:"マーカー: 黄",Marker_Red:"マーカー: 赤",Marker_Green:"マーカー: 緑",OK:"OK",Cancel:"キャンセル",Delete:"削除",TIP_Settings:"設定 (S), ダブルクリックで固定",Page_View_Mode:"ページ表示モード (P)",Auto:"自動",Single_page:"単ページ",Spread:"見開き",TIP_Book_Mode:"ON: 本のような出版物（目次付き）用\nOFF: 単体のHTML文書用",TIP_Render_All_Pages:"ON: 印刷用（すべてのページが印刷可能で、ページ番号は期待されるとおりに機能します）\nOFF: 閲覧用（おおまかなページ番号を使って、クイックロード）",Restore_View:"閲覧状態を復元",TIP_Restore_View:"文書を開き直すとき閲覧状態を復元",Custom_Style_Settings:"カスタムスタイル設定 (C)",Page_Size:"ページサイズ",Default:"デフォルト",DESC_page_size_default:"(=自動、特に指定のない限り)",DESC_page_size_auto:"(ウィンドウの全領域を使用)",Preset:"プリセット",Landscape:"ランドスケープ",Custom_size:"カスタムサイズ",Width:"幅",Height:"高さ",More_:"詳細… (M)",Crop_Marks:"トンボ設定",Crop_marks:"Crop marks",Bleed:"Bleed",Crop_offset:"Crop offset",Page_Margins:"ページマージン",DESC_page_margin_default:"(=10%、特に指定のない限り)",Set_page_margin_to_0:"ページのマージンを0にする",Custom_margin:"カスタムマージン",Top_Right_Bottom_Left:"上/右/下/左",Set_first_page_margin_to_0:"先頭ページのマージンを0にする",Force_html_body_margin_to_0:"html/bodyのマージンを強制的に0にする",Page_Breaks:"ページ分割処理",Default_widows_orphans_control:"デフォルトのwidows/orphansの制御",Allow_widows_and_orphans:"widow/orphanが生じるのを許容",Avoid_page_break_inside_paragraph:"段落内で改ページしないようにする",Images:"画像",Set_image_max_size_to_fit_page:"画像の最大サイズをページに収める",Keep_aspect_ratio:"アスペクト比を維持",Text:"テキスト",Font_size:"文字サイズ",Base_font_size:"基本の font-size",Base_line_height:"基本の line-height",Base_font_family:"基本の font-family",Custom_Style_Priority:"カスタムスタイルの優先度",Set_as_user_stylesheet:"ユーザースタイルシート扱いにする",DESC_user_stylesheet:"(!important の指定がない限り低い優先度)",Force_override_document_style:"ドキュメントのスタイルを強制的に上書き",important_:"(!important)",Edit_CSS:"CSSを編集 (E)",Dont_edit_:"/*<viewer>*/ と /*</viewer>*/ の間は編集しないこと",Reset_Custom_Style:"カスタムスタイルをリセット (R)",Reset_all_to_default:"すべてをデフォルトにリセット",TIP_ToC:"目次 (T), ダブルクリックで固定",TIP_Marker:"マーカー (M), ダブルクリックで固定",Marks_and_Memos:"マーカーとメモ",Remove_All:"すべて削除",Remove:"削除",Memo:"メモ",TIP_Find:"検索 (Ctrl/Cmd+F)",TIP_Find_Previous:"前を検索 (Shift+Enter)",TIP_Find_Next:"次を検索 (Enter)",Find:"検索",TIP_First_Page:"最初のページ (Home)",TIP_Previous_Page:"前のページ (↑)",TIP_Next_Page:"次のページ (↓)",TIP_Last_Page:"最後のページ (End)",TIP_Go_to_Page:"ページ番号… (G)",Total_pages:"総ページ数",TIP_Text_Smaller:"文字を小さく (-)",TIP_Text_Larger:"文字を大きく (+)",TIP_Text_Default_Size:"デフォルトの文字サイズ (0)",TIP_Zoom_Out:"縮小 (O)",TIP_Zoom_In:"拡大 (I)",TIP_Zoom_Actual_Size:"実際のサイズ (1)",TIP_Zoom_Fit_to_Screen:"画面に合わせる (F)",TIP_Print:"印刷 (P)"}},"zh-Hans":{translation:{UI_LNG:"zh-Hans",TIP_UI_Language:"语言",CONFIRM_DELETE:"你确定要删除它吗?",CONFIRM_REMOVE:"你确定要移除它吗?",CONFIRM_REMOVE_ALL:"你确定要全部移除吗?",Input_:"请输入文档URL或HTML代码",Book_Mode:"图书模式",Render_All_Pages:"渲染所有页面",Apply:"应用",Supported_document_types_:"支持的文档类型:",HTML_documents_:"带有分页媒体的css HTML 文档",Book_like_publications_:"类似书籍的出版物,带有目录",Web_publications_:"Web出版物(一组HTML文档集合): 指定第一个HTML或声明文件的URL。",Unzipped_EPUB_:"解压缩EPUB:指定OPF文件的URL或解压缩后EPUB文件的顶级目录。",Notes_:"注意:",GitHub_:"可以直接指定GitHub和Gist网址。当指定了此类网址时,Vivliostyle会加载原始GitHub/Gist的内容。",WARN_Mixed_Content_:"⚠️混合内容(如果“http:”的URL被指定为“https:”的Vivliostyle Viewer)通常会被浏览器屏蔽。",WARN_Cross_Origin_:"⚠️除非服务器设置为允许跨域请求(CORS)，否则对不同域的请求通常会被浏览器阻止。",URL_parameter_options_:"URL 参数选项:",document_URL:"文档 URL",default_:"(默认)",for_Book_like_:"用于类似图书出版物",DESC_Book_Mode_:"当指定一个HTML文档URL, 来自出版物清单或者目录(例如, 带有 '<nav role=\"doc-toc\">'标记)一系列的html文档链接会自动被加载。",for_single_HTML_:"用户单个 HTML 文档",for_Print_:"为了打印（所有页面均可被打印，页数计算也是正常的）",for_Read_:"为了阅读（快速加载粗略页数计算）",Page_Spread_View:"页面视图对页",Spread_view:"对页视图",Single_page_view:"单页视图",Auto_spread_view:"自动对页",additional_stylesheet_URL:"附加 (自定义) 样式表 URL",user_stylesheet_URL:"用户样式表 URL",Settings:"设置",DESC_Options_also_1:"选项也可在",DESC_Options_also_2:"面板设置。",See_documentation_:"有关更多详细信息，请参阅文档:",HREF_User_Guide:"../docs/#/user-guide",Vivliostyle_User_Guide:"Vivliostyle 用户指南",HREF_Vivlistyle_Home:"https://vivliostyle.org/",navigate_to_left:"向左导航",navigate_to_right:"向右导航",Highlight_:"高亮…",Marker_Yellow:"标记: 黄",Marker_Red:"标记: 红",Marker_Green:"标记: 绿",OK:"确认",Cancel:"取消",Delete:"删除",TIP_Settings:"设置 (S),双击/双敲击键以固定",Page_View_Mode:"界面视图模式",Auto:"自动",Single_page:"单页",Spread:"对页",TIP_Book_Mode:"On: 为了类似图书出版物带有目录\nOff: 为了单 HTML 文档",TIP_Render_All_Pages:"On: 为了打印(所有页面可打印, 页面计数正常工作)\nOff: 为了阅读 (快速加载粗略计数)",Restore_View:"恢复阅览状态",TIP_Restore_View:"重新打开文档时恢复视图设置",Custom_Style_Settings:"自定义样式设置",Page_Size:"页面大小",Default:"默认",DESC_page_size_default:"(=自动 除非另外设置)",DESC_page_size_auto:"(使用整个窗口面积)",Preset:"预设",Landscape:"横向",Custom_size:"自定义尺寸",Width:"宽度",Height:"高度",More_:"详细...",Crop_Marks:"裁剪标记",Crop_marks:"裁剪标记",Bleed:"出血",Crop_offset:"裁剪偏移",Page_Margins:"页面边距",DESC_page_margin_default:"(=10% 除非另外设置)",Set_page_margin_to_0:"设置页面边距为 0",Custom_margin:"自定义边距",Top_Right_Bottom_Left:"顶部/右侧/底部/左侧",Set_first_page_margin_to_0:"设置第一页的边距为 0",Force_html_body_margin_to_0:"强制 html/body 边距为 0",Page_Breaks:"分页",Default_widows_orphans_control:"默认 widows/orphans 控制",Allow_widows_and_orphans:"允许产生widows 和 orphans",Avoid_page_break_inside_paragraph:"避免段落内出现分页",Images:"图片",Set_image_max_size_to_fit_page:"图像最大尺寸设置为适合页面",Keep_aspect_ratio:"保持长宽比",Text:"文本",Font_size:"字体大小",Base_font_size:"基础 字号",Base_line_height:"基础 行高",Base_font_family:"基础 字体",Custom_Style_Priority:"自定义 Style 属性",Set_as_user_stylesheet:"设置为用户样式表",DESC_user_stylesheet:"(低优先级除非 !important)",Force_override_document_style:"强制覆盖document的样式",important_:"(!important)",Edit_CSS:"编辑 CSS",Dont_edit_:"不要在 /*<viewer>*/ 和 /*</viewer>*/之间进行编辑",Reset_Custom_Style:"重置自定义样式",Reset_all_to_default:"重置所有",TIP_ToC:"目录 (T), 双击/双敲击键以固定",TIP_Marker:"标记 (M), 双击/双敲击键以固定",Marks_and_Memos:"标记和备忘录",Remove_All:"移除所有",Remove:"移除",Memo:"备忘录",TIP_Find:"查找 (Ctrl/Cmd+F)",TIP_Find_Previous:"查找上一个 (Shift+Enter)",TIP_Find_Next:"查找下一个 (Enter)",Find:"查找",TIP_First_Page:"首页 (Home)",TIP_Previous_Page:"上一页 (↑)",TIP_Next_Page:"下一页 (↓)",TIP_Last_Page:"最后一页(End)",TIP_Go_to_Page:"跳转到… (G)",Total_pages:"总页数",TIP_Text_Smaller:"文本: 小 (-)",TIP_Text_Larger:"文本: 大 (+)",TIP_Text_Default_Size:"文本: 默认尺寸 (0)",TIP_Zoom_Out:"缩小 (O)",TIP_Zoom_In:"放大 (I)",TIP_Zoom_Actual_Size:"缩放: 实际大小 (1)",TIP_Zoom_Fit_to_Screen:"缩放: 适应屏幕 (F)",TIP_Print:"打印 (P)"}},"zh-Hant":{translation:{UI_LNG:"zh-Hant",TIP_UI_Language:"語言",CONFIRM_DELETE:"你確定要刪除它嗎?",CONFIRM_REMOVE:"你確定要移除它嗎?",CONFIRM_REMOVE_ALL:"你確定要全部移除嗎?",Input_:"請輸入文檔URL或HTML代碼",Book_Mode:"圖書模式",Render_All_Pages:"渲染所有頁面",Apply:"應用",Supported_document_types_:"支持的文檔類型:",HTML_documents_:"帶有分頁媒體的css HTML 文檔",Book_like_publications_:"類似書籍的出版物,帶有目錄",Web_publications_:"Web出版物(一組HTML文檔集合): 指定第一個HTML或聲明文件的URL。",Unzipped_EPUB_:"解壓縮EPUB:指定OPF文件的URL或解壓縮後EPUB文件的頂級目錄。",Notes_:"注意:",GitHub_:"可以直接指定GitHub和Gist網址。當指定了此類網址時,Vivliostyle會加載原始GitHub/Gist的內容。",WARN_Mixed_Content_:"⚠️混合內容(如果“http:”的URL被指定爲“https:”的Vivliostyle Viewer)通常會被瀏覽器屏蔽。",WARN_Cross_Origin_:"⚠️除非服務器設置爲允許跨域請求(CORS)，否則對不同域的請求通常會被瀏覽器阻止。",URL_parameter_options_:"URL 參數選項:",document_URL:"文檔 URL",default_:"(默認)",for_Book_like_:"用於類似圖書出版物",DESC_Book_Mode_:"當指定一個HTML文檔URL, 來自出版物清單或者目錄(例如, 帶有 '<nav role=\"doc-toc\">'標記)一系列的html文檔鏈接會自動被加載。",for_single_HTML_:"用戶單個 HTML 文檔",for_Print_:"爲了打印（所有頁面均可被打印，頁數計算也是正常的）",for_Read_:"爲了閱讀（快速加載粗略頁數計算）",Page_Spread_View:"頁面視圖對頁",Spread_view:"對頁視圖",Single_page_view:"單頁視圖",Auto_spread_view:"自動對頁",additional_stylesheet_URL:"附加 (自定義) 樣式表 URL",user_stylesheet_URL:"用戶樣式表 URL",Settings:"設置",DESC_Options_also_1:"選項也可在",DESC_Options_also_2:"面板設置。",See_documentation_:"有關更多詳細信息，請參閱文檔:",HREF_User_Guide:"../docs/#/user-guide",Vivliostyle_User_Guide:"Vivliostyle 用戶指南",HREF_Vivlistyle_Home:"https://vivliostyle.org/",navigate_to_left:"向左導航",navigate_to_right:"向右導航",Highlight_:"高亮…",Marker_Yellow:"標記: 黃",Marker_Red:"標記: 紅",Marker_Green:"標記: 綠",OK:"確認",Cancel:"取消",Delete:"刪除",TIP_Settings:"設置 (S),雙擊/雙敲擊鍵以固定",Page_View_Mode:"界面視圖模式",Auto:"自動",Single_page:"單頁",Spread:"對頁",TIP_Book_Mode:"On: 爲了類似圖書出版物帶有目錄\nOff: 爲了單 HTML 文檔",TIP_Render_All_Pages:"On: 爲了打印(所有頁面可打印, 頁面計數正常工作)\nOff: 爲了閱讀 (快速加載粗略計數)",Restore_View:"恢復閱覽狀態",TIP_Restore_View:"重新打開文檔時恢復視圖設置",Custom_Style_Settings:"自定義樣式設置",Page_Size:"頁面大小",Default:"默認",DESC_page_size_default:"(=自動 除非另外設置)",DESC_page_size_auto:"(使用整個窗口面積)",Preset:"預設",Landscape:"橫向",Custom_size:"自定義尺寸",Width:"寬度",Height:"高度",More_:"詳細...",Crop_Marks:"裁剪標記",Crop_marks:"裁剪標記",Bleed:"出血",Crop_offset:"裁剪偏移",Page_Margins:"頁面邊距",DESC_page_margin_default:"(=10% 除非另外設置)",Set_page_margin_to_0:"設置頁面邊距爲 0",Custom_margin:"自定義邊距",Top_Right_Bottom_Left:"頂部/右側/底部/左側",Set_first_page_margin_to_0:"設置第一頁的邊距爲 0",Force_html_body_margin_to_0:"強制 html/body 邊距爲 0",Page_Breaks:"分頁",Default_widows_orphans_control:"默認 widows/orphans 控制",Allow_widows_and_orphans:"允許產生widows 和 orphans",Avoid_page_break_inside_paragraph:"避免段落內出現分頁",Images:"圖片",Set_image_max_size_to_fit_page:"圖像最大尺寸設置爲適合頁面",Keep_aspect_ratio:"保持長寬比",Text:"文本",Font_size:"字體大小",Base_font_size:"基礎 字號",Base_line_height:"基礎 行高",Base_font_family:"基礎 字體",Custom_Style_Priority:"自定義 Style 屬性",Set_as_user_stylesheet:"設置爲用戶樣式表",DESC_user_stylesheet:"(低優先級除非 !important)",Force_override_document_style:"強制覆蓋document的樣式",important_:"(!important)",Edit_CSS:"編輯 CSS",Dont_edit_:"不要在 /*<viewer>*/ 和 /*</viewer>*/之間進行編輯",Reset_Custom_Style:"重置自定義樣式",Reset_all_to_default:"重置所有",TIP_ToC:"目錄 (T), 雙擊/雙敲擊鍵以固定",TIP_Marker:"標記 (M), 雙擊/雙敲擊鍵以固定",Marks_and_Memos:"標記和備忘錄",Remove_All:"移除所有",Remove:"移除",Memo:"備忘錄",TIP_Find:"查找 (Ctrl/Cmd+F)",TIP_Find_Previous:"查找上一個 (Shift+Enter)",TIP_Find_Next:"查找下一個 (Enter)",Find:"查找",TIP_First_Page:"首頁 (Home)",TIP_Previous_Page:"上一頁 (↑)",TIP_Next_Page:"下一頁 (↓)",TIP_Last_Page:"最後一頁(End)",TIP_Go_to_Page:"跳轉到… (G)",Total_pages:"總頁數",TIP_Text_Smaller:"文本: 小 (-)",TIP_Text_Larger:"文本: 大 (+)",TIP_Text_Default_Size:"文本: 默認尺寸 (0)",TIP_Zoom_Out:"縮小 (O)",TIP_Zoom_In:"放大 (I)",TIP_Zoom_Actual_Size:"縮放: 實際大小 (1)",TIP_Zoom_Fit_to_Screen:"縮放: 適應屏幕 (F)",TIP_Print:"打印 (P)"}}};l.init(Ut,function(){var t;try{let e=null===(t=/[?&#]lng=([^?&#]+)/.exec(window.location.href))||void 0===t?void 0:t[1];if(e||(e=window.localStorage.getItem("i18nextLng"),e||(e=navigator.language)),e&&(e=/^(zh(-cmn)?|cmn)-(TW|HK|Hant)\b/i.test(e)?"zh-Hant":/^(zh|cmn)\b/i.test(e)?"zh-Hans":e.toLowerCase().replace(/-.*/,""),e in Ut))return e}catch(t){}return"en"}(),r),{start(){function t(){r.applyBindings(new kt)}window.__loaded?t():window.onload=t}}.start()}));
//# sourceMappingURL=vivliostyle-viewer.js.map
